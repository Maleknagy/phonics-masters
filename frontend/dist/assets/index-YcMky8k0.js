function Nk(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function Gm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Mk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Jf={exports:{}},ta={},Qf={exports:{}},Ne={};var Nw;function Dk(){if(Nw)return Ne;Nw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=f&&T[f]||T["@@iterator"],typeof T=="function"?T:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function C(T,W,Z){this.props=T,this.context=W,this.refs=b,this.updater=Z||g}C.prototype.isReactComponent={},C.prototype.setState=function(T,W){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,W,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function x(){}x.prototype=C.prototype;function R(T,W,Z){this.props=T,this.context=W,this.refs=b,this.updater=Z||g}var _=R.prototype=new x;_.constructor=R,w(_,C.prototype),_.isPureReactComponent=!0;var I=Array.isArray,k=Object.prototype.hasOwnProperty,M={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function O(T,W,Z){var se,le={},ce=null,oe=null;if(W!=null)for(se in W.ref!==void 0&&(oe=W.ref),W.key!==void 0&&(ce=""+W.key),W)k.call(W,se)&&!B.hasOwnProperty(se)&&(le[se]=W[se]);var de=arguments.length-2;if(de===1)le.children=Z;else if(1<de){for(var ye=Array(de),Ie=0;Ie<de;Ie++)ye[Ie]=arguments[Ie+2];le.children=ye}if(T&&T.defaultProps)for(se in de=T.defaultProps,de)le[se]===void 0&&(le[se]=de[se]);return{$$typeof:t,type:T,key:ce,ref:oe,props:le,_owner:M.current}}function D(T,W){return{$$typeof:t,type:T.type,key:W,ref:T.ref,props:T.props,_owner:T._owner}}function U(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function L(T){var W={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(Z){return W[Z]})}var F=/\/+/g;function H(T,W){return typeof T=="object"&&T!==null&&T.key!=null?L(""+T.key):W.toString(36)}function $(T,W,Z,se,le){var ce=typeof T;(ce==="undefined"||ce==="boolean")&&(T=null);var oe=!1;if(T===null)oe=!0;else switch(ce){case"string":case"number":oe=!0;break;case"object":switch(T.$$typeof){case t:case e:oe=!0}}if(oe)return oe=T,le=le(oe),T=se===""?"."+H(oe,0):se,I(le)?(Z="",T!=null&&(Z=T.replace(F,"$&/")+"/"),$(le,W,Z,"",function(Ie){return Ie})):le!=null&&(U(le)&&(le=D(le,Z+(!le.key||oe&&oe.key===le.key?"":(""+le.key).replace(F,"$&/")+"/")+T)),W.push(le)),1;if(oe=0,se=se===""?".":se+":",I(T))for(var de=0;de<T.length;de++){ce=T[de];var ye=se+H(ce,de);oe+=$(ce,W,Z,ye,le)}else if(ye=v(T),typeof ye=="function")for(T=ye.call(T),de=0;!(ce=T.next()).done;)ce=ce.value,ye=se+H(ce,de++),oe+=$(ce,W,Z,ye,le);else if(ce==="object")throw W=String(T),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return oe}function ee(T,W,Z){if(T==null)return T;var se=[],le=0;return $(T,se,"","",function(ce){return W.call(Z,ce,le++)}),se}function X(T){if(T._status===-1){var W=T._result;W=W(),W.then(function(Z){(T._status===0||T._status===-1)&&(T._status=1,T._result=Z)},function(Z){(T._status===0||T._status===-1)&&(T._status=2,T._result=Z)}),T._status===-1&&(T._status=0,T._result=W)}if(T._status===1)return T._result.default;throw T._result}var Y={current:null},V={transition:null},J={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:V,ReactCurrentOwner:M};function j(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ee,forEach:function(T,W,Z){ee(T,function(){W.apply(this,arguments)},Z)},count:function(T){var W=0;return ee(T,function(){W++}),W},toArray:function(T){return ee(T,function(W){return W})||[]},only:function(T){if(!U(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ne.Component=C,Ne.Fragment=r,Ne.Profiler=i,Ne.PureComponent=R,Ne.StrictMode=n,Ne.Suspense=u,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Ne.act=j,Ne.cloneElement=function(T,W,Z){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var se=w({},T.props),le=T.key,ce=T.ref,oe=T._owner;if(W!=null){if(W.ref!==void 0&&(ce=W.ref,oe=M.current),W.key!==void 0&&(le=""+W.key),T.type&&T.type.defaultProps)var de=T.type.defaultProps;for(ye in W)k.call(W,ye)&&!B.hasOwnProperty(ye)&&(se[ye]=W[ye]===void 0&&de!==void 0?de[ye]:W[ye])}var ye=arguments.length-2;if(ye===1)se.children=Z;else if(1<ye){de=Array(ye);for(var Ie=0;Ie<ye;Ie++)de[Ie]=arguments[Ie+2];se.children=de}return{$$typeof:t,type:T.type,key:le,ref:ce,props:se,_owner:oe}},Ne.createContext=function(T){return T={$$typeof:a,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:o,_context:T},T.Consumer=T},Ne.createElement=O,Ne.createFactory=function(T){var W=O.bind(null,T);return W.type=T,W},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(T){return{$$typeof:c,render:T}},Ne.isValidElement=U,Ne.lazy=function(T){return{$$typeof:h,_payload:{_status:-1,_result:T},_init:X}},Ne.memo=function(T,W){return{$$typeof:d,type:T,compare:W===void 0?null:W}},Ne.startTransition=function(T){var W=V.transition;V.transition={};try{T()}finally{V.transition=W}},Ne.unstable_act=j,Ne.useCallback=function(T,W){return Y.current.useCallback(T,W)},Ne.useContext=function(T){return Y.current.useContext(T)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(T){return Y.current.useDeferredValue(T)},Ne.useEffect=function(T,W){return Y.current.useEffect(T,W)},Ne.useId=function(){return Y.current.useId()},Ne.useImperativeHandle=function(T,W,Z){return Y.current.useImperativeHandle(T,W,Z)},Ne.useInsertionEffect=function(T,W){return Y.current.useInsertionEffect(T,W)},Ne.useLayoutEffect=function(T,W){return Y.current.useLayoutEffect(T,W)},Ne.useMemo=function(T,W){return Y.current.useMemo(T,W)},Ne.useReducer=function(T,W,Z){return Y.current.useReducer(T,W,Z)},Ne.useRef=function(T){return Y.current.useRef(T)},Ne.useState=function(T){return Y.current.useState(T)},Ne.useSyncExternalStore=function(T,W,Z){return Y.current.useSyncExternalStore(T,W,Z)},Ne.useTransition=function(){return Y.current.useTransition()},Ne.version="18.3.1",Ne}var Mw;function jh(){return Mw||(Mw=1,Qf.exports=Dk()),Qf.exports}var Dw;function Lk(){if(Dw)return ta;Dw=1;var t=jh(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,d){var h,f={},v=null,g=null;d!==void 0&&(v=""+d),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(g=u.ref);for(h in u)n.call(u,h)&&!o.hasOwnProperty(h)&&(f[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)f[h]===void 0&&(f[h]=u[h]);return{$$typeof:e,type:c,key:v,ref:g,props:f,_owner:i.current}}return ta.Fragment=r,ta.jsx=a,ta.jsxs=a,ta}var Lw;function zk(){return Lw||(Lw=1,Jf.exports=Lk()),Jf.exports}var y=zk(),E=jh();const br=Gm(E),Bk=Nk({__proto__:null,default:br},[E]);var Ud={},Yf={exports:{}},$t={},Xf={exports:{}},Zf={};var zw;function Fk(){return zw||(zw=1,(function(t){function e(V,J){var j=V.length;V.push(J);e:for(;0<j;){var T=j-1>>>1,W=V[T];if(0<i(W,J))V[T]=J,V[j]=W,j=T;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var J=V[0],j=V.pop();if(j!==J){V[0]=j;e:for(var T=0,W=V.length,Z=W>>>1;T<Z;){var se=2*(T+1)-1,le=V[se],ce=se+1,oe=V[ce];if(0>i(le,j))ce<W&&0>i(oe,le)?(V[T]=oe,V[ce]=j,T=ce):(V[T]=le,V[se]=j,T=se);else if(ce<W&&0>i(oe,j))V[T]=oe,V[ce]=j,T=ce;else break e}}return J}function i(V,J){var j=V.sortIndex-J.sortIndex;return j!==0?j:V.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],h=1,f=null,v=3,g=!1,w=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var J=r(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=V)n(d),J.sortIndex=J.expirationTime,e(u,J);else break;J=r(d)}}function I(V){if(b=!1,_(V),!w)if(r(u)!==null)w=!0,X(k);else{var J=r(d);J!==null&&Y(I,J.startTime-V)}}function k(V,J){w=!1,b&&(b=!1,x(O),O=-1),g=!0;var j=v;try{for(_(J),f=r(u);f!==null&&(!(f.expirationTime>J)||V&&!L());){var T=f.callback;if(typeof T=="function"){f.callback=null,v=f.priorityLevel;var W=T(f.expirationTime<=J);J=t.unstable_now(),typeof W=="function"?f.callback=W:f===r(u)&&n(u),_(J)}else n(u);f=r(u)}if(f!==null)var Z=!0;else{var se=r(d);se!==null&&Y(I,se.startTime-J),Z=!1}return Z}finally{f=null,v=j,g=!1}}var M=!1,B=null,O=-1,D=5,U=-1;function L(){return!(t.unstable_now()-U<D)}function F(){if(B!==null){var V=t.unstable_now();U=V;var J=!0;try{J=B(!0,V)}finally{J?H():(M=!1,B=null)}}else M=!1}var H;if(typeof R=="function")H=function(){R(F)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ee=$.port2;$.port1.onmessage=F,H=function(){ee.postMessage(null)}}else H=function(){C(F,0)};function X(V){B=V,M||(M=!0,H())}function Y(V,J){O=C(function(){V(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,X(k))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(V){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var j=v;v=J;try{return V()}finally{v=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=v;v=V;try{return J()}finally{v=j}},t.unstable_scheduleCallback=function(V,J,j){var T=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?T+j:T):j=T,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=j+W,V={id:h++,callback:J,priorityLevel:V,startTime:j,expirationTime:W,sortIndex:-1},j>T?(V.sortIndex=j,e(d,V),r(u)===null&&V===r(d)&&(b?(x(O),O=-1):b=!0,Y(I,j-T))):(V.sortIndex=W,e(u,V),w||g||(w=!0,X(k))),V},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(V){var J=v;return function(){var j=v;v=J;try{return V.apply(this,arguments)}finally{v=j}}}})(Zf)),Zf}var Bw;function qk(){return Bw||(Bw=1,Xf.exports=Fk()),Xf.exports}var Fw;function Uk(){if(Fw)return $t;Fw=1;var t=jh(),e=qk();function r(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,l){a(s,l),a(s+"Capture",l)}function a(s,l){for(i[s]=l,s=0;s<l.length;s++)n.add(l[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function v(s){return u.call(f,s)?!0:u.call(h,s)?!1:d.test(s)?f[s]=!0:(h[s]=!0,!1)}function g(s,l,p,m){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:p!==null?!p.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function w(s,l,p,m){if(l===null||typeof l>"u"||g(s,l,p,m))return!0;if(m)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(s,l,p,m,S,P,A){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=S,this.mustUseProperty=p,this.propertyName=s,this.type=l,this.sanitizeURL=P,this.removeEmptyString=A}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){C[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];C[l]=new b(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){C[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){C[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){C[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){C[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){C[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){C[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){C[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function R(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(x,R);C[l]=new b(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(x,R);C[l]=new b(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(x,R);C[l]=new b(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){C[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){C[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function _(s,l,p,m){var S=C.hasOwnProperty(l)?C[l]:null;(S!==null?S.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(w(l,p,S,m)&&(p=null),m||S===null?v(l)&&(p===null?s.removeAttribute(l):s.setAttribute(l,""+p)):S.mustUseProperty?s[S.propertyName]=p===null?S.type===3?!1:"":p:(l=S.attributeName,m=S.attributeNamespace,p===null?s.removeAttribute(l):(S=S.type,p=S===3||S===4&&p===!0?"":""+p,m?s.setAttributeNS(m,l,p):s.setAttribute(l,p))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),V=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var j=Object.assign,T;function W(s){if(T===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);T=l&&l[1]||""}return`
`+T+s}var Z=!1;function se(s,l){if(!s||Z)return"";Z=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Q){var m=Q}Reflect.construct(s,[],l)}else{try{l.call()}catch(Q){m=Q}s.call(l.prototype)}else{try{throw Error()}catch(Q){m=Q}s()}}catch(Q){if(Q&&m&&typeof Q.stack=="string"){for(var S=Q.stack.split(`
`),P=m.stack.split(`
`),A=S.length-1,N=P.length-1;1<=A&&0<=N&&S[A]!==P[N];)N--;for(;1<=A&&0<=N;A--,N--)if(S[A]!==P[N]){if(A!==1||N!==1)do if(A--,N--,0>N||S[A]!==P[N]){var z=`
`+S[A].replace(" at new "," at ");return s.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",s.displayName)),z}while(1<=A&&0<=N);break}}}finally{Z=!1,Error.prepareStackTrace=p}return(s=s?s.displayName||s.name:"")?W(s):""}function le(s){switch(s.tag){case 5:return W(s.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return s=se(s.type,!1),s;case 11:return s=se(s.type.render,!1),s;case 1:return s=se(s.type,!0),s;default:return""}}function ce(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case M:return"Portal";case D:return"Profiler";case O:return"StrictMode";case H:return"Suspense";case $:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case U:return(s._context.displayName||"Context")+".Provider";case F:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ee:return l=s.displayName||null,l!==null?l:ce(s.type)||"Memo";case X:l=s._payload,s=s._init;try{return ce(s(l))}catch{}}return null}function oe(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(l);case 8:return l===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function de(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ye(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ie(s){var l=ye(s)?"checked":"value",p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,P=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return S.call(this)},set:function(A){m=""+A,P.call(this,A)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function je(s){s._valueTracker||(s._valueTracker=Ie(s))}function Ve(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var p=l.getValue(),m="";return s&&(m=ye(s)?s.checked?"true":"false":s.value),s=m,s!==p?(l.setValue(s),!0):!1}function Ye(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Oe(s,l){var p=l.checked;return j({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??s._wrapperState.initialChecked})}function gt(s,l){var p=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;p=de(l.value!=null?l.value:p),s._wrapperState={initialChecked:m,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function It(s,l){l=l.checked,l!=null&&_(s,"checked",l,!1)}function Fe(s,l){It(s,l);var p=de(l.value),m=l.type;if(p!=null)m==="number"?(p===0&&s.value===""||s.value!=p)&&(s.value=""+p):s.value!==""+p&&(s.value=""+p);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Yt(s,l.type,p):l.hasOwnProperty("defaultValue")&&Yt(s,l.type,de(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Ut(s,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,p||l===s.value||(s.value=l),s.defaultValue=l}p=s.name,p!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,p!==""&&(s.name=p)}function Yt(s,l,p){(l!=="number"||Ye(s.ownerDocument)!==s)&&(p==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+p&&(s.defaultValue=""+p))}var Ct=Array.isArray;function Fr(s,l,p,m){if(s=s.options,l){l={};for(var S=0;S<p.length;S++)l["$"+p[S]]=!0;for(p=0;p<s.length;p++)S=l.hasOwnProperty("$"+s[p].value),s[p].selected!==S&&(s[p].selected=S),S&&m&&(s[p].defaultSelected=!0)}else{for(p=""+de(p),l=null,S=0;S<s.length;S++){if(s[S].value===p){s[S].selected=!0,m&&(s[S].defaultSelected=!0);return}l!==null||s[S].disabled||(l=s[S])}l!==null&&(l.selected=!0)}}function hi(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return j({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function vs(s,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(r(92));if(Ct(p)){if(1<p.length)throw Error(r(93));p=p[0]}l=p}l==null&&(l=""),p=l}s._wrapperState={initialValue:de(p)}}function pi(s,l){var p=de(l.value),m=de(l.defaultValue);p!=null&&(p=""+p,p!==s.value&&(s.value=p),l.defaultValue==null&&s.defaultValue!==p&&(s.defaultValue=p)),m!=null&&(s.defaultValue=""+m)}function gs(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function fi(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?fi(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Pn,Qr=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,m,S){MSApp.execUnsafeLocalFunction(function(){return s(l,p,m,S)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Pn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function qr(s,l){if(l){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=l;return}}s.textContent=l}var xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},po=["Webkit","ms","Moz","O"];Object.keys(xr).forEach(function(s){po.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),xr[l]=xr[s]})});function ms(s,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||xr.hasOwnProperty(s)&&xr[s]?(""+l).trim():l+"px"}function ju(s,l){s=s.style;for(var p in l)if(l.hasOwnProperty(p)){var m=p.indexOf("--")===0,S=ms(p,l[p],m);p==="float"&&(p="cssFloat"),m?s.setProperty(p,S):s[p]=S}}var up=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(s,l){if(l){if(up[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function vo(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var go=null;function mo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yo=null,Yr=null,_n=null;function Ou(s){if(s=Fo(s)){if(typeof yo!="function")throw Error(r(280));var l=s.stateNode;l&&(l=nd(l),yo(s.stateNode,s.type,l))}}function Nu(s){Yr?_n?_n.push(s):_n=[s]:Yr=s}function Zy(){if(Yr){var s=Yr,l=_n;if(_n=Yr=null,Ou(s),l)for(s=0;s<l.length;s++)Ou(l[s])}}function e0(s,l){return s(l)}function t0(){}var dp=!1;function r0(s,l,p){if(dp)return s(l,p);dp=!0;try{return e0(s,l,p)}finally{dp=!1,(Yr!==null||_n!==null)&&(t0(),Zy())}}function So(s,l){var p=s.stateNode;if(p===null)return null;var m=nd(p);if(m===null)return null;p=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(r(231,l,typeof p));return p}var hp=!1;if(c)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){hp=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{hp=!1}function FA(s,l,p,m,S,P,A,N,z){var Q=Array.prototype.slice.call(arguments,3);try{l.apply(p,Q)}catch(re){this.onError(re)}}var Co=!1,Mu=null,Du=!1,pp=null,qA={onError:function(s){Co=!0,Mu=s}};function UA(s,l,p,m,S,P,A,N,z){Co=!1,Mu=null,FA.apply(qA,arguments)}function VA(s,l,p,m,S,P,A,N,z){if(UA.apply(this,arguments),Co){if(Co){var Q=Mu;Co=!1,Mu=null}else throw Error(r(198));Du||(Du=!0,pp=Q)}}function gi(s){var l=s,p=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(p=l.return),s=l.return;while(s)}return l.tag===3?p:null}function n0(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function i0(s){if(gi(s)!==s)throw Error(r(188))}function WA(s){var l=s.alternate;if(!l){if(l=gi(s),l===null)throw Error(r(188));return l!==s?null:s}for(var p=s,m=l;;){var S=p.return;if(S===null)break;var P=S.alternate;if(P===null){if(m=S.return,m!==null){p=m;continue}break}if(S.child===P.child){for(P=S.child;P;){if(P===p)return i0(S),s;if(P===m)return i0(S),l;P=P.sibling}throw Error(r(188))}if(p.return!==m.return)p=S,m=P;else{for(var A=!1,N=S.child;N;){if(N===p){A=!0,p=S,m=P;break}if(N===m){A=!0,m=S,p=P;break}N=N.sibling}if(!A){for(N=P.child;N;){if(N===p){A=!0,p=P,m=S;break}if(N===m){A=!0,m=P,p=S;break}N=N.sibling}if(!A)throw Error(r(189))}}if(p.alternate!==m)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?s:l}function s0(s){return s=WA(s),s!==null?o0(s):null}function o0(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=o0(s);if(l!==null)return l;s=s.sibling}return null}var a0=e.unstable_scheduleCallback,c0=e.unstable_cancelCallback,HA=e.unstable_shouldYield,KA=e.unstable_requestPaint,lt=e.unstable_now,GA=e.unstable_getCurrentPriorityLevel,fp=e.unstable_ImmediatePriority,l0=e.unstable_UserBlockingPriority,Lu=e.unstable_NormalPriority,$A=e.unstable_LowPriority,u0=e.unstable_IdlePriority,zu=null,Ur=null;function JA(s){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(zu,s,void 0,(s.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:XA,QA=Math.log,YA=Math.LN2;function XA(s){return s>>>=0,s===0?32:31-(QA(s)/YA|0)|0}var Bu=64,Fu=4194304;function bo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function qu(s,l){var p=s.pendingLanes;if(p===0)return 0;var m=0,S=s.suspendedLanes,P=s.pingedLanes,A=p&268435455;if(A!==0){var N=A&~S;N!==0?m=bo(N):(P&=A,P!==0&&(m=bo(P)))}else A=p&~S,A!==0?m=bo(A):P!==0&&(m=bo(P));if(m===0)return 0;if(l!==0&&l!==m&&(l&S)===0&&(S=m&-m,P=l&-l,S>=P||S===16&&(P&4194240)!==0))return l;if((m&4)!==0&&(m|=p&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=m;0<l;)p=31-Pr(l),S=1<<p,m|=s[p],l&=~S;return m}function ZA(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eI(s,l){for(var p=s.suspendedLanes,m=s.pingedLanes,S=s.expirationTimes,P=s.pendingLanes;0<P;){var A=31-Pr(P),N=1<<A,z=S[A];z===-1?((N&p)===0||(N&m)!==0)&&(S[A]=ZA(N,l)):z<=l&&(s.expiredLanes|=N),P&=~N}}function vp(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function d0(){var s=Bu;return Bu<<=1,(Bu&4194240)===0&&(Bu=64),s}function gp(s){for(var l=[],p=0;31>p;p++)l.push(s);return l}function xo(s,l,p){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Pr(l),s[l]=p}function tI(s,l){var p=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<p;){var S=31-Pr(p),P=1<<S;l[S]=0,m[S]=-1,s[S]=-1,p&=~P}}function mp(s,l){var p=s.entangledLanes|=l;for(s=s.entanglements;p;){var m=31-Pr(p),S=1<<m;S&l|s[m]&l&&(s[m]|=l),p&=~S}}var qe=0;function h0(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var p0,yp,f0,v0,g0,Sp=!1,Uu=[],Rn=null,En=null,Tn=null,Po=new Map,_o=new Map,An=[],rI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m0(s,l){switch(s){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":Po.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(l.pointerId)}}function Ro(s,l,p,m,S,P){return s===null||s.nativeEvent!==P?(s={blockedOn:l,domEventName:p,eventSystemFlags:m,nativeEvent:P,targetContainers:[S]},l!==null&&(l=Fo(l),l!==null&&yp(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),s)}function nI(s,l,p,m,S){switch(l){case"focusin":return Rn=Ro(Rn,s,l,p,m,S),!0;case"dragenter":return En=Ro(En,s,l,p,m,S),!0;case"mouseover":return Tn=Ro(Tn,s,l,p,m,S),!0;case"pointerover":var P=S.pointerId;return Po.set(P,Ro(Po.get(P)||null,s,l,p,m,S)),!0;case"gotpointercapture":return P=S.pointerId,_o.set(P,Ro(_o.get(P)||null,s,l,p,m,S)),!0}return!1}function y0(s){var l=mi(s.target);if(l!==null){var p=gi(l);if(p!==null){if(l=p.tag,l===13){if(l=n0(p),l!==null){s.blockedOn=l,g0(s.priority,function(){f0(p)});return}}else if(l===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Vu(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var p=Cp(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(p===null){p=s.nativeEvent;var m=new p.constructor(p.type,p);go=m,p.target.dispatchEvent(m),go=null}else return l=Fo(p),l!==null&&yp(l),s.blockedOn=p,!1;l.shift()}return!0}function S0(s,l,p){Vu(s)&&p.delete(l)}function iI(){Sp=!1,Rn!==null&&Vu(Rn)&&(Rn=null),En!==null&&Vu(En)&&(En=null),Tn!==null&&Vu(Tn)&&(Tn=null),Po.forEach(S0),_o.forEach(S0)}function Eo(s,l){s.blockedOn===l&&(s.blockedOn=null,Sp||(Sp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iI)))}function To(s){function l(S){return Eo(S,s)}if(0<Uu.length){Eo(Uu[0],s);for(var p=1;p<Uu.length;p++){var m=Uu[p];m.blockedOn===s&&(m.blockedOn=null)}}for(Rn!==null&&Eo(Rn,s),En!==null&&Eo(En,s),Tn!==null&&Eo(Tn,s),Po.forEach(l),_o.forEach(l),p=0;p<An.length;p++)m=An[p],m.blockedOn===s&&(m.blockedOn=null);for(;0<An.length&&(p=An[0],p.blockedOn===null);)y0(p),p.blockedOn===null&&An.shift()}var ys=I.ReactCurrentBatchConfig,Wu=!0;function sI(s,l,p,m){var S=qe,P=ys.transition;ys.transition=null;try{qe=1,wp(s,l,p,m)}finally{qe=S,ys.transition=P}}function oI(s,l,p,m){var S=qe,P=ys.transition;ys.transition=null;try{qe=4,wp(s,l,p,m)}finally{qe=S,ys.transition=P}}function wp(s,l,p,m){if(Wu){var S=Cp(s,l,p,m);if(S===null)zp(s,l,m,Hu,p),m0(s,m);else if(nI(S,s,l,p,m))m.stopPropagation();else if(m0(s,m),l&4&&-1<rI.indexOf(s)){for(;S!==null;){var P=Fo(S);if(P!==null&&p0(P),P=Cp(s,l,p,m),P===null&&zp(s,l,m,Hu,p),P===S)break;S=P}S!==null&&m.stopPropagation()}else zp(s,l,m,null,p)}}var Hu=null;function Cp(s,l,p,m){if(Hu=null,s=mo(m),s=mi(s),s!==null)if(l=gi(s),l===null)s=null;else if(p=l.tag,p===13){if(s=n0(l),s!==null)return s;s=null}else if(p===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Hu=s,null}function w0(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GA()){case fp:return 1;case l0:return 4;case Lu:case $A:return 16;case u0:return 536870912;default:return 16}default:return 16}}var In=null,bp=null,Ku=null;function C0(){if(Ku)return Ku;var s,l=bp,p=l.length,m,S="value"in In?In.value:In.textContent,P=S.length;for(s=0;s<p&&l[s]===S[s];s++);var A=p-s;for(m=1;m<=A&&l[p-m]===S[P-m];m++);return Ku=S.slice(s,1<m?1-m:void 0)}function Gu(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function $u(){return!0}function b0(){return!1}function Xt(s){function l(p,m,S,P,A){this._reactName=p,this._targetInst=S,this.type=m,this.nativeEvent=P,this.target=A,this.currentTarget=null;for(var N in s)s.hasOwnProperty(N)&&(p=s[N],this[N]=p?p(P):P[N]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?$u:b0,this.isPropagationStopped=b0,this}return j(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=$u)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=$u)},persist:function(){},isPersistent:$u}),l}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xp=Xt(Ss),Ao=j({},Ss,{view:0,detail:0}),aI=Xt(Ao),Pp,_p,Io,Ju=j({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ep,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Io&&(Io&&s.type==="mousemove"?(Pp=s.screenX-Io.screenX,_p=s.screenY-Io.screenY):_p=Pp=0,Io=s),Pp)},movementY:function(s){return"movementY"in s?s.movementY:_p}}),x0=Xt(Ju),cI=j({},Ju,{dataTransfer:0}),lI=Xt(cI),uI=j({},Ao,{relatedTarget:0}),Rp=Xt(uI),dI=j({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),hI=Xt(dI),pI=j({},Ss,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fI=Xt(pI),vI=j({},Ss,{data:0}),P0=Xt(vI),gI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SI(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=yI[s])?!!l[s]:!1}function Ep(){return SI}var wI=j({},Ao,{key:function(s){if(s.key){var l=gI[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Gu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mI[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ep,charCode:function(s){return s.type==="keypress"?Gu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),CI=Xt(wI),bI=j({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_0=Xt(bI),xI=j({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ep}),PI=Xt(xI),_I=j({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),RI=Xt(_I),EI=j({},Ju,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),TI=Xt(EI),AI=[9,13,27,32],Tp=c&&"CompositionEvent"in window,ko=null;c&&"documentMode"in document&&(ko=document.documentMode);var II=c&&"TextEvent"in window&&!ko,R0=c&&(!Tp||ko&&8<ko&&11>=ko),E0=" ",T0=!1;function A0(s,l){switch(s){case"keyup":return AI.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ws=!1;function kI(s,l){switch(s){case"compositionend":return I0(l);case"keypress":return l.which!==32?null:(T0=!0,E0);case"textInput":return s=l.data,s===E0&&T0?null:s;default:return null}}function jI(s,l){if(ws)return s==="compositionend"||!Tp&&A0(s,l)?(s=C0(),Ku=bp=In=null,ws=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return R0&&l.locale!=="ko"?null:l.data;default:return null}}var OI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!OI[s.type]:l==="textarea"}function j0(s,l,p,m){Nu(m),l=ed(l,"onChange"),0<l.length&&(p=new xp("onChange","change",null,p,m),s.push({event:p,listeners:l}))}var jo=null,Oo=null;function NI(s){Q0(s,0)}function Qu(s){var l=_s(s);if(Ve(l))return s}function MI(s,l){if(s==="change")return l}var O0=!1;if(c){var Ap;if(c){var Ip="oninput"in document;if(!Ip){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),Ip=typeof N0.oninput=="function"}Ap=Ip}else Ap=!1;O0=Ap&&(!document.documentMode||9<document.documentMode)}function M0(){jo&&(jo.detachEvent("onpropertychange",D0),Oo=jo=null)}function D0(s){if(s.propertyName==="value"&&Qu(Oo)){var l=[];j0(l,Oo,s,mo(s)),r0(NI,l)}}function DI(s,l,p){s==="focusin"?(M0(),jo=l,Oo=p,jo.attachEvent("onpropertychange",D0)):s==="focusout"&&M0()}function LI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qu(Oo)}function zI(s,l){if(s==="click")return Qu(l)}function BI(s,l){if(s==="input"||s==="change")return Qu(l)}function FI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var _r=typeof Object.is=="function"?Object.is:FI;function No(s,l){if(_r(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var p=Object.keys(s),m=Object.keys(l);if(p.length!==m.length)return!1;for(m=0;m<p.length;m++){var S=p[m];if(!u.call(l,S)||!_r(s[S],l[S]))return!1}return!0}function L0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function z0(s,l){var p=L0(s);s=0;for(var m;p;){if(p.nodeType===3){if(m=s+p.textContent.length,s<=l&&m>=l)return{node:p,offset:l-s};s=m}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=L0(p)}}function B0(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?B0(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function F0(){for(var s=window,l=Ye();l instanceof s.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch{p=!1}if(p)s=l.contentWindow;else break;l=Ye(s.document)}return l}function kp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function qI(s){var l=F0(),p=s.focusedElem,m=s.selectionRange;if(l!==p&&p&&p.ownerDocument&&B0(p.ownerDocument.documentElement,p)){if(m!==null&&kp(p)){if(l=m.start,s=m.end,s===void 0&&(s=l),"selectionStart"in p)p.selectionStart=l,p.selectionEnd=Math.min(s,p.value.length);else if(s=(l=p.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var S=p.textContent.length,P=Math.min(m.start,S);m=m.end===void 0?P:Math.min(m.end,S),!s.extend&&P>m&&(S=m,m=P,P=S),S=z0(p,P);var A=z0(p,m);S&&A&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==A.node||s.focusOffset!==A.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),s.removeAllRanges(),P>m?(s.addRange(l),s.extend(A.node,A.offset)):(l.setEnd(A.node,A.offset),s.addRange(l)))}}for(l=[],s=p;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<l.length;p++)s=l[p],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var UI=c&&"documentMode"in document&&11>=document.documentMode,Cs=null,jp=null,Mo=null,Op=!1;function q0(s,l,p){var m=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Op||Cs==null||Cs!==Ye(m)||(m=Cs,"selectionStart"in m&&kp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Mo&&No(Mo,m)||(Mo=m,m=ed(jp,"onSelect"),0<m.length&&(l=new xp("onSelect","select",null,l,p),s.push({event:l,listeners:m}),l.target=Cs)))}function Yu(s,l){var p={};return p[s.toLowerCase()]=l.toLowerCase(),p["Webkit"+s]="webkit"+l,p["Moz"+s]="moz"+l,p}var bs={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},Np={},U0={};c&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function Xu(s){if(Np[s])return Np[s];if(!bs[s])return s;var l=bs[s],p;for(p in l)if(l.hasOwnProperty(p)&&p in U0)return Np[s]=l[p];return s}var V0=Xu("animationend"),W0=Xu("animationiteration"),H0=Xu("animationstart"),K0=Xu("transitionend"),G0=new Map,$0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(s,l){G0.set(s,l),o(l,[s])}for(var Mp=0;Mp<$0.length;Mp++){var Dp=$0[Mp],VI=Dp.toLowerCase(),WI=Dp[0].toUpperCase()+Dp.slice(1);kn(VI,"on"+WI)}kn(V0,"onAnimationEnd"),kn(W0,"onAnimationIteration"),kn(H0,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(K0,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function J0(s,l,p){var m=s.type||"unknown-event";s.currentTarget=p,VA(m,l,void 0,s),s.currentTarget=null}function Q0(s,l){l=(l&4)!==0;for(var p=0;p<s.length;p++){var m=s[p],S=m.event;m=m.listeners;e:{var P=void 0;if(l)for(var A=m.length-1;0<=A;A--){var N=m[A],z=N.instance,Q=N.currentTarget;if(N=N.listener,z!==P&&S.isPropagationStopped())break e;J0(S,N,Q),P=z}else for(A=0;A<m.length;A++){if(N=m[A],z=N.instance,Q=N.currentTarget,N=N.listener,z!==P&&S.isPropagationStopped())break e;J0(S,N,Q),P=z}}}if(Du)throw s=pp,Du=!1,pp=null,s}function $e(s,l){var p=l[Wp];p===void 0&&(p=l[Wp]=new Set);var m=s+"__bubble";p.has(m)||(Y0(l,s,2,!1),p.add(m))}function Lp(s,l,p){var m=0;l&&(m|=4),Y0(p,s,m,l)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Lo(s){if(!s[Zu]){s[Zu]=!0,n.forEach(function(p){p!=="selectionchange"&&(HI.has(p)||Lp(p,!1,s),Lp(p,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Zu]||(l[Zu]=!0,Lp("selectionchange",!1,l))}}function Y0(s,l,p,m){switch(w0(l)){case 1:var S=sI;break;case 4:S=oI;break;default:S=wp}p=S.bind(null,l,p,s),S=void 0,!hp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),m?S!==void 0?s.addEventListener(l,p,{capture:!0,passive:S}):s.addEventListener(l,p,!0):S!==void 0?s.addEventListener(l,p,{passive:S}):s.addEventListener(l,p,!1)}function zp(s,l,p,m,S){var P=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var N=m.stateNode.containerInfo;if(N===S||N.nodeType===8&&N.parentNode===S)break;if(A===4)for(A=m.return;A!==null;){var z=A.tag;if((z===3||z===4)&&(z=A.stateNode.containerInfo,z===S||z.nodeType===8&&z.parentNode===S))return;A=A.return}for(;N!==null;){if(A=mi(N),A===null)return;if(z=A.tag,z===5||z===6){m=P=A;continue e}N=N.parentNode}}m=m.return}r0(function(){var Q=P,re=mo(p),ne=[];e:{var te=G0.get(s);if(te!==void 0){var pe=xp,ve=s;switch(s){case"keypress":if(Gu(p)===0)break e;case"keydown":case"keyup":pe=CI;break;case"focusin":ve="focus",pe=Rp;break;case"focusout":ve="blur",pe=Rp;break;case"beforeblur":case"afterblur":pe=Rp;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=x0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=lI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=PI;break;case V0:case W0:case H0:pe=hI;break;case K0:pe=RI;break;case"scroll":pe=aI;break;case"wheel":pe=TI;break;case"copy":case"cut":case"paste":pe=fI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=_0}var ge=(l&4)!==0,ut=!ge&&s==="scroll",K=ge?te!==null?te+"Capture":null:te;ge=[];for(var q=Q,G;q!==null;){G=q;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,K!==null&&(ae=So(q,K),ae!=null&&ge.push(zo(q,ae,G)))),ut)break;q=q.return}0<ge.length&&(te=new pe(te,ve,null,p,re),ne.push({event:te,listeners:ge}))}}if((l&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",te&&p!==go&&(ve=p.relatedTarget||p.fromElement)&&(mi(ve)||ve[Xr]))break e;if((pe||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,pe?(ve=p.relatedTarget||p.toElement,pe=Q,ve=ve?mi(ve):null,ve!==null&&(ut=gi(ve),ve!==ut||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(pe=null,ve=Q),pe!==ve)){if(ge=x0,ae="onMouseLeave",K="onMouseEnter",q="mouse",(s==="pointerout"||s==="pointerover")&&(ge=_0,ae="onPointerLeave",K="onPointerEnter",q="pointer"),ut=pe==null?te:_s(pe),G=ve==null?te:_s(ve),te=new ge(ae,q+"leave",pe,p,re),te.target=ut,te.relatedTarget=G,ae=null,mi(re)===Q&&(ge=new ge(K,q+"enter",ve,p,re),ge.target=G,ge.relatedTarget=ut,ae=ge),ut=ae,pe&&ve)t:{for(ge=pe,K=ve,q=0,G=ge;G;G=xs(G))q++;for(G=0,ae=K;ae;ae=xs(ae))G++;for(;0<q-G;)ge=xs(ge),q--;for(;0<G-q;)K=xs(K),G--;for(;q--;){if(ge===K||K!==null&&ge===K.alternate)break t;ge=xs(ge),K=xs(K)}ge=null}else ge=null;pe!==null&&X0(ne,te,pe,ge,!1),ve!==null&&ut!==null&&X0(ne,ut,ve,ge,!0)}}e:{if(te=Q?_s(Q):window,pe=te.nodeName&&te.nodeName.toLowerCase(),pe==="select"||pe==="input"&&te.type==="file")var me=MI;else if(k0(te))if(O0)me=BI;else{me=LI;var Ce=DI}else(pe=te.nodeName)&&pe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(me=zI);if(me&&(me=me(s,Q))){j0(ne,me,p,re);break e}Ce&&Ce(s,te,Q),s==="focusout"&&(Ce=te._wrapperState)&&Ce.controlled&&te.type==="number"&&Yt(te,"number",te.value)}switch(Ce=Q?_s(Q):window,s){case"focusin":(k0(Ce)||Ce.contentEditable==="true")&&(Cs=Ce,jp=Q,Mo=null);break;case"focusout":Mo=jp=Cs=null;break;case"mousedown":Op=!0;break;case"contextmenu":case"mouseup":case"dragend":Op=!1,q0(ne,p,re);break;case"selectionchange":if(UI)break;case"keydown":case"keyup":q0(ne,p,re)}var be;if(Tp)e:{switch(s){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ws?A0(s,p)&&(Te="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(Te="onCompositionStart");Te&&(R0&&p.locale!=="ko"&&(ws||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ws&&(be=C0()):(In=re,bp="value"in In?In.value:In.textContent,ws=!0)),Ce=ed(Q,Te),0<Ce.length&&(Te=new P0(Te,s,null,p,re),ne.push({event:Te,listeners:Ce}),be?Te.data=be:(be=I0(p),be!==null&&(Te.data=be)))),(be=II?kI(s,p):jI(s,p))&&(Q=ed(Q,"onBeforeInput"),0<Q.length&&(re=new P0("onBeforeInput","beforeinput",null,p,re),ne.push({event:re,listeners:Q}),re.data=be))}Q0(ne,l)})}function zo(s,l,p){return{instance:s,listener:l,currentTarget:p}}function ed(s,l){for(var p=l+"Capture",m=[];s!==null;){var S=s,P=S.stateNode;S.tag===5&&P!==null&&(S=P,P=So(s,p),P!=null&&m.unshift(zo(s,P,S)),P=So(s,l),P!=null&&m.push(zo(s,P,S))),s=s.return}return m}function xs(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function X0(s,l,p,m,S){for(var P=l._reactName,A=[];p!==null&&p!==m;){var N=p,z=N.alternate,Q=N.stateNode;if(z!==null&&z===m)break;N.tag===5&&Q!==null&&(N=Q,S?(z=So(p,P),z!=null&&A.unshift(zo(p,z,N))):S||(z=So(p,P),z!=null&&A.push(zo(p,z,N)))),p=p.return}A.length!==0&&s.push({event:l,listeners:A})}var KI=/\r\n?/g,GI=/\u0000|\uFFFD/g;function Z0(s){return(typeof s=="string"?s:""+s).replace(KI,`
`).replace(GI,"")}function td(s,l,p){if(l=Z0(l),Z0(s)!==l&&p)throw Error(r(425))}function rd(){}var Bp=null,Fp=null;function qp(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Up=typeof setTimeout=="function"?setTimeout:void 0,$I=typeof clearTimeout=="function"?clearTimeout:void 0,eS=typeof Promise=="function"?Promise:void 0,JI=typeof queueMicrotask=="function"?queueMicrotask:typeof eS<"u"?function(s){return eS.resolve(null).then(s).catch(QI)}:Up;function QI(s){setTimeout(function(){throw s})}function Vp(s,l){var p=l,m=0;do{var S=p.nextSibling;if(s.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(m===0){s.removeChild(S),To(l);return}m--}else p!=="$"&&p!=="$?"&&p!=="$!"||m++;p=S}while(p);To(l)}function jn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function tS(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return s;l--}else p==="/$"&&l++}s=s.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Ps,Bo="__reactProps$"+Ps,Xr="__reactContainer$"+Ps,Wp="__reactEvents$"+Ps,YI="__reactListeners$"+Ps,XI="__reactHandles$"+Ps;function mi(s){var l=s[Vr];if(l)return l;for(var p=s.parentNode;p;){if(l=p[Xr]||p[Vr]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(s=tS(s);s!==null;){if(p=s[Vr])return p;s=tS(s)}return l}s=p,p=s.parentNode}return null}function Fo(s){return s=s[Vr]||s[Xr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function _s(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(r(33))}function nd(s){return s[Bo]||null}var Hp=[],Rs=-1;function On(s){return{current:s}}function Je(s){0>Rs||(s.current=Hp[Rs],Hp[Rs]=null,Rs--)}function He(s,l){Rs++,Hp[Rs]=s.current,s.current=l}var Nn={},kt=On(Nn),Vt=On(!1),yi=Nn;function Es(s,l){var p=s.type.contextTypes;if(!p)return Nn;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var S={},P;for(P in p)S[P]=l[P];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=S),S}function Wt(s){return s=s.childContextTypes,s!=null}function id(){Je(Vt),Je(kt)}function rS(s,l,p){if(kt.current!==Nn)throw Error(r(168));He(kt,l),He(Vt,p)}function nS(s,l,p){var m=s.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return p;m=m.getChildContext();for(var S in m)if(!(S in l))throw Error(r(108,oe(s)||"Unknown",S));return j({},p,m)}function sd(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Nn,yi=kt.current,He(kt,s),He(Vt,Vt.current),!0}function iS(s,l,p){var m=s.stateNode;if(!m)throw Error(r(169));p?(s=nS(s,l,yi),m.__reactInternalMemoizedMergedChildContext=s,Je(Vt),Je(kt),He(kt,s)):Je(Vt),He(Vt,p)}var Zr=null,od=!1,Kp=!1;function sS(s){Zr===null?Zr=[s]:Zr.push(s)}function ZI(s){od=!0,sS(s)}function Mn(){if(!Kp&&Zr!==null){Kp=!0;var s=0,l=qe;try{var p=Zr;for(qe=1;s<p.length;s++){var m=p[s];do m=m(!0);while(m!==null)}Zr=null,od=!1}catch(S){throw Zr!==null&&(Zr=Zr.slice(s+1)),a0(fp,Mn),S}finally{qe=l,Kp=!1}}return null}var Ts=[],As=0,ad=null,cd=0,hr=[],pr=0,Si=null,en=1,tn="";function wi(s,l){Ts[As++]=cd,Ts[As++]=ad,ad=s,cd=l}function oS(s,l,p){hr[pr++]=en,hr[pr++]=tn,hr[pr++]=Si,Si=s;var m=en;s=tn;var S=32-Pr(m)-1;m&=~(1<<S),p+=1;var P=32-Pr(l)+S;if(30<P){var A=S-S%5;P=(m&(1<<A)-1).toString(32),m>>=A,S-=A,en=1<<32-Pr(l)+S|p<<S|m,tn=P+s}else en=1<<P|p<<S|m,tn=s}function Gp(s){s.return!==null&&(wi(s,1),oS(s,1,0))}function $p(s){for(;s===ad;)ad=Ts[--As],Ts[As]=null,cd=Ts[--As],Ts[As]=null;for(;s===Si;)Si=hr[--pr],hr[pr]=null,tn=hr[--pr],hr[pr]=null,en=hr[--pr],hr[pr]=null}var Zt=null,er=null,Xe=!1,Rr=null;function aS(s,l){var p=mr(5,null,null,0);p.elementType="DELETED",p.stateNode=l,p.return=s,l=s.deletions,l===null?(s.deletions=[p],s.flags|=16):l.push(p)}function cS(s,l){switch(s.tag){case 5:var p=s.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Zt=s,er=jn(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Zt=s,er=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(p=Si!==null?{id:en,overflow:tn}:null,s.memoizedState={dehydrated:l,treeContext:p,retryLane:1073741824},p=mr(18,null,null,0),p.stateNode=l,p.return=s,s.child=p,Zt=s,er=null,!0):!1;default:return!1}}function Jp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Qp(s){if(Xe){var l=er;if(l){var p=l;if(!cS(s,l)){if(Jp(s))throw Error(r(418));l=jn(p.nextSibling);var m=Zt;l&&cS(s,l)?aS(m,p):(s.flags=s.flags&-4097|2,Xe=!1,Zt=s)}}else{if(Jp(s))throw Error(r(418));s.flags=s.flags&-4097|2,Xe=!1,Zt=s}}}function lS(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Zt=s}function ld(s){if(s!==Zt)return!1;if(!Xe)return lS(s),Xe=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!qp(s.type,s.memoizedProps)),l&&(l=er)){if(Jp(s))throw uS(),Error(r(418));for(;l;)aS(s,l),l=jn(l.nextSibling)}if(lS(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"){if(l===0){er=jn(s.nextSibling);break e}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}s=s.nextSibling}er=null}}else er=Zt?jn(s.stateNode.nextSibling):null;return!0}function uS(){for(var s=er;s;)s=jn(s.nextSibling)}function Is(){er=Zt=null,Xe=!1}function Yp(s){Rr===null?Rr=[s]:Rr.push(s)}var ek=I.ReactCurrentBatchConfig;function qo(s,l,p){if(s=p.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(r(309));var m=p.stateNode}if(!m)throw Error(r(147,s));var S=m,P=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===P?l.ref:(l=function(A){var N=S.refs;A===null?delete N[P]:N[P]=A},l._stringRef=P,l)}if(typeof s!="string")throw Error(r(284));if(!p._owner)throw Error(r(290,s))}return s}function ud(s,l){throw s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function dS(s){var l=s._init;return l(s._payload)}function hS(s){function l(K,q){if(s){var G=K.deletions;G===null?(K.deletions=[q],K.flags|=16):G.push(q)}}function p(K,q){if(!s)return null;for(;q!==null;)l(K,q),q=q.sibling;return null}function m(K,q){for(K=new Map;q!==null;)q.key!==null?K.set(q.key,q):K.set(q.index,q),q=q.sibling;return K}function S(K,q){return K=Vn(K,q),K.index=0,K.sibling=null,K}function P(K,q,G){return K.index=G,s?(G=K.alternate,G!==null?(G=G.index,G<q?(K.flags|=2,q):G):(K.flags|=2,q)):(K.flags|=1048576,q)}function A(K){return s&&K.alternate===null&&(K.flags|=2),K}function N(K,q,G,ae){return q===null||q.tag!==6?(q=Vf(G,K.mode,ae),q.return=K,q):(q=S(q,G),q.return=K,q)}function z(K,q,G,ae){var me=G.type;return me===B?re(K,q,G.props.children,ae,G.key):q!==null&&(q.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===X&&dS(me)===q.type)?(ae=S(q,G.props),ae.ref=qo(K,q,G),ae.return=K,ae):(ae=Nd(G.type,G.key,G.props,null,K.mode,ae),ae.ref=qo(K,q,G),ae.return=K,ae)}function Q(K,q,G,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==G.containerInfo||q.stateNode.implementation!==G.implementation?(q=Wf(G,K.mode,ae),q.return=K,q):(q=S(q,G.children||[]),q.return=K,q)}function re(K,q,G,ae,me){return q===null||q.tag!==7?(q=Ti(G,K.mode,ae,me),q.return=K,q):(q=S(q,G),q.return=K,q)}function ne(K,q,G){if(typeof q=="string"&&q!==""||typeof q=="number")return q=Vf(""+q,K.mode,G),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return G=Nd(q.type,q.key,q.props,null,K.mode,G),G.ref=qo(K,null,q),G.return=K,G;case M:return q=Wf(q,K.mode,G),q.return=K,q;case X:var ae=q._init;return ne(K,ae(q._payload),G)}if(Ct(q)||J(q))return q=Ti(q,K.mode,G,null),q.return=K,q;ud(K,q)}return null}function te(K,q,G,ae){var me=q!==null?q.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return me!==null?null:N(K,q,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case k:return G.key===me?z(K,q,G,ae):null;case M:return G.key===me?Q(K,q,G,ae):null;case X:return me=G._init,te(K,q,me(G._payload),ae)}if(Ct(G)||J(G))return me!==null?null:re(K,q,G,ae,null);ud(K,G)}return null}function pe(K,q,G,ae,me){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return K=K.get(G)||null,N(q,K,""+ae,me);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case k:return K=K.get(ae.key===null?G:ae.key)||null,z(q,K,ae,me);case M:return K=K.get(ae.key===null?G:ae.key)||null,Q(q,K,ae,me);case X:var Ce=ae._init;return pe(K,q,G,Ce(ae._payload),me)}if(Ct(ae)||J(ae))return K=K.get(G)||null,re(q,K,ae,me,null);ud(q,ae)}return null}function ve(K,q,G,ae){for(var me=null,Ce=null,be=q,Te=q=0,Pt=null;be!==null&&Te<G.length;Te++){be.index>Te?(Pt=be,be=null):Pt=be.sibling;var ze=te(K,be,G[Te],ae);if(ze===null){be===null&&(be=Pt);break}s&&be&&ze.alternate===null&&l(K,be),q=P(ze,q,Te),Ce===null?me=ze:Ce.sibling=ze,Ce=ze,be=Pt}if(Te===G.length)return p(K,be),Xe&&wi(K,Te),me;if(be===null){for(;Te<G.length;Te++)be=ne(K,G[Te],ae),be!==null&&(q=P(be,q,Te),Ce===null?me=be:Ce.sibling=be,Ce=be);return Xe&&wi(K,Te),me}for(be=m(K,be);Te<G.length;Te++)Pt=pe(be,K,Te,G[Te],ae),Pt!==null&&(s&&Pt.alternate!==null&&be.delete(Pt.key===null?Te:Pt.key),q=P(Pt,q,Te),Ce===null?me=Pt:Ce.sibling=Pt,Ce=Pt);return s&&be.forEach(function(Wn){return l(K,Wn)}),Xe&&wi(K,Te),me}function ge(K,q,G,ae){var me=J(G);if(typeof me!="function")throw Error(r(150));if(G=me.call(G),G==null)throw Error(r(151));for(var Ce=me=null,be=q,Te=q=0,Pt=null,ze=G.next();be!==null&&!ze.done;Te++,ze=G.next()){be.index>Te?(Pt=be,be=null):Pt=be.sibling;var Wn=te(K,be,ze.value,ae);if(Wn===null){be===null&&(be=Pt);break}s&&be&&Wn.alternate===null&&l(K,be),q=P(Wn,q,Te),Ce===null?me=Wn:Ce.sibling=Wn,Ce=Wn,be=Pt}if(ze.done)return p(K,be),Xe&&wi(K,Te),me;if(be===null){for(;!ze.done;Te++,ze=G.next())ze=ne(K,ze.value,ae),ze!==null&&(q=P(ze,q,Te),Ce===null?me=ze:Ce.sibling=ze,Ce=ze);return Xe&&wi(K,Te),me}for(be=m(K,be);!ze.done;Te++,ze=G.next())ze=pe(be,K,Te,ze.value,ae),ze!==null&&(s&&ze.alternate!==null&&be.delete(ze.key===null?Te:ze.key),q=P(ze,q,Te),Ce===null?me=ze:Ce.sibling=ze,Ce=ze);return s&&be.forEach(function(Ok){return l(K,Ok)}),Xe&&wi(K,Te),me}function ut(K,q,G,ae){if(typeof G=="object"&&G!==null&&G.type===B&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case k:e:{for(var me=G.key,Ce=q;Ce!==null;){if(Ce.key===me){if(me=G.type,me===B){if(Ce.tag===7){p(K,Ce.sibling),q=S(Ce,G.props.children),q.return=K,K=q;break e}}else if(Ce.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===X&&dS(me)===Ce.type){p(K,Ce.sibling),q=S(Ce,G.props),q.ref=qo(K,Ce,G),q.return=K,K=q;break e}p(K,Ce);break}else l(K,Ce);Ce=Ce.sibling}G.type===B?(q=Ti(G.props.children,K.mode,ae,G.key),q.return=K,K=q):(ae=Nd(G.type,G.key,G.props,null,K.mode,ae),ae.ref=qo(K,q,G),ae.return=K,K=ae)}return A(K);case M:e:{for(Ce=G.key;q!==null;){if(q.key===Ce)if(q.tag===4&&q.stateNode.containerInfo===G.containerInfo&&q.stateNode.implementation===G.implementation){p(K,q.sibling),q=S(q,G.children||[]),q.return=K,K=q;break e}else{p(K,q);break}else l(K,q);q=q.sibling}q=Wf(G,K.mode,ae),q.return=K,K=q}return A(K);case X:return Ce=G._init,ut(K,q,Ce(G._payload),ae)}if(Ct(G))return ve(K,q,G,ae);if(J(G))return ge(K,q,G,ae);ud(K,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,q!==null&&q.tag===6?(p(K,q.sibling),q=S(q,G),q.return=K,K=q):(p(K,q),q=Vf(G,K.mode,ae),q.return=K,K=q),A(K)):p(K,q)}return ut}var ks=hS(!0),pS=hS(!1),dd=On(null),hd=null,js=null,Xp=null;function Zp(){Xp=js=hd=null}function ef(s){var l=dd.current;Je(dd),s._currentValue=l}function tf(s,l,p){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===p)break;s=s.return}}function Os(s,l){hd=s,Xp=js=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Ht=!0),s.firstContext=null)}function fr(s){var l=s._currentValue;if(Xp!==s)if(s={context:s,memoizedValue:l,next:null},js===null){if(hd===null)throw Error(r(308));js=s,hd.dependencies={lanes:0,firstContext:s}}else js=js.next=s;return l}var Ci=null;function rf(s){Ci===null?Ci=[s]:Ci.push(s)}function fS(s,l,p,m){var S=l.interleaved;return S===null?(p.next=p,rf(l)):(p.next=S.next,S.next=p),l.interleaved=p,rn(s,m)}function rn(s,l){s.lanes|=l;var p=s.alternate;for(p!==null&&(p.lanes|=l),p=s,s=s.return;s!==null;)s.childLanes|=l,p=s.alternate,p!==null&&(p.childLanes|=l),p=s,s=s.return;return p.tag===3?p.stateNode:null}var Dn=!1;function nf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vS(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function nn(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function Ln(s,l,p){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Le&2)!==0){var S=m.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),m.pending=l,rn(s,p)}return S=m.interleaved,S===null?(l.next=l,rf(m)):(l.next=S.next,S.next=l),m.interleaved=l,rn(s,p)}function pd(s,l,p){if(l=l.updateQueue,l!==null&&(l=l.shared,(p&4194240)!==0)){var m=l.lanes;m&=s.pendingLanes,p|=m,l.lanes=p,mp(s,p)}}function gS(s,l){var p=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,p===m)){var S=null,P=null;if(p=p.firstBaseUpdate,p!==null){do{var A={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};P===null?S=P=A:P=P.next=A,p=p.next}while(p!==null);P===null?S=P=l:P=P.next=l}else S=P=l;p={baseState:m.baseState,firstBaseUpdate:S,lastBaseUpdate:P,shared:m.shared,effects:m.effects},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=l}function fd(s,l,p,m){var S=s.updateQueue;Dn=!1;var P=S.firstBaseUpdate,A=S.lastBaseUpdate,N=S.shared.pending;if(N!==null){S.shared.pending=null;var z=N,Q=z.next;z.next=null,A===null?P=Q:A.next=Q,A=z;var re=s.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==A&&(N===null?re.firstBaseUpdate=Q:N.next=Q,re.lastBaseUpdate=z))}if(P!==null){var ne=S.baseState;A=0,re=Q=z=null,N=P;do{var te=N.lane,pe=N.eventTime;if((m&te)===te){re!==null&&(re=re.next={eventTime:pe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ve=s,ge=N;switch(te=l,pe=p,ge.tag){case 1:if(ve=ge.payload,typeof ve=="function"){ne=ve.call(pe,ne,te);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=ge.payload,te=typeof ve=="function"?ve.call(pe,ne,te):ve,te==null)break e;ne=j({},ne,te);break e;case 2:Dn=!0}}N.callback!==null&&N.lane!==0&&(s.flags|=64,te=S.effects,te===null?S.effects=[N]:te.push(N))}else pe={eventTime:pe,lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(Q=re=pe,z=ne):re=re.next=pe,A|=te;if(N=N.next,N===null){if(N=S.shared.pending,N===null)break;te=N,N=te.next,te.next=null,S.lastBaseUpdate=te,S.shared.pending=null}}while(!0);if(re===null&&(z=ne),S.baseState=z,S.firstBaseUpdate=Q,S.lastBaseUpdate=re,l=S.shared.interleaved,l!==null){S=l;do A|=S.lane,S=S.next;while(S!==l)}else P===null&&(S.shared.lanes=0);Pi|=A,s.lanes=A,s.memoizedState=ne}}function mS(s,l,p){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var m=s[l],S=m.callback;if(S!==null){if(m.callback=null,m=p,typeof S!="function")throw Error(r(191,S));S.call(m)}}}var Uo={},Wr=On(Uo),Vo=On(Uo),Wo=On(Uo);function bi(s){if(s===Uo)throw Error(r(174));return s}function sf(s,l){switch(He(Wo,l),He(Vo,s),He(Wr,Uo),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:vi(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=vi(l,s)}Je(Wr),He(Wr,l)}function Ns(){Je(Wr),Je(Vo),Je(Wo)}function yS(s){bi(Wo.current);var l=bi(Wr.current),p=vi(l,s.type);l!==p&&(He(Vo,s),He(Wr,p))}function of(s){Vo.current===s&&(Je(Wr),Je(Vo))}var Ze=On(0);function vd(s){for(var l=s;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var af=[];function cf(){for(var s=0;s<af.length;s++)af[s]._workInProgressVersionPrimary=null;af.length=0}var gd=I.ReactCurrentDispatcher,lf=I.ReactCurrentBatchConfig,xi=0,et=null,mt=null,bt=null,md=!1,Ho=!1,Ko=0,tk=0;function jt(){throw Error(r(321))}function uf(s,l){if(l===null)return!1;for(var p=0;p<l.length&&p<s.length;p++)if(!_r(s[p],l[p]))return!1;return!0}function df(s,l,p,m,S,P){if(xi=P,et=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,gd.current=s===null||s.memoizedState===null?sk:ok,s=p(m,S),Ho){P=0;do{if(Ho=!1,Ko=0,25<=P)throw Error(r(301));P+=1,bt=mt=null,l.updateQueue=null,gd.current=ak,s=p(m,S)}while(Ho)}if(gd.current=wd,l=mt!==null&&mt.next!==null,xi=0,bt=mt=et=null,md=!1,l)throw Error(r(300));return s}function hf(){var s=Ko!==0;return Ko=0,s}function Hr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?et.memoizedState=bt=s:bt=bt.next=s,bt}function vr(){if(mt===null){var s=et.alternate;s=s!==null?s.memoizedState:null}else s=mt.next;var l=bt===null?et.memoizedState:bt.next;if(l!==null)bt=l,mt=s;else{if(s===null)throw Error(r(310));mt=s,s={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},bt===null?et.memoizedState=bt=s:bt=bt.next=s}return bt}function Go(s,l){return typeof l=="function"?l(s):l}function pf(s){var l=vr(),p=l.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=s;var m=mt,S=m.baseQueue,P=p.pending;if(P!==null){if(S!==null){var A=S.next;S.next=P.next,P.next=A}m.baseQueue=S=P,p.pending=null}if(S!==null){P=S.next,m=m.baseState;var N=A=null,z=null,Q=P;do{var re=Q.lane;if((xi&re)===re)z!==null&&(z=z.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),m=Q.hasEagerState?Q.eagerState:s(m,Q.action);else{var ne={lane:re,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};z===null?(N=z=ne,A=m):z=z.next=ne,et.lanes|=re,Pi|=re}Q=Q.next}while(Q!==null&&Q!==P);z===null?A=m:z.next=N,_r(m,l.memoizedState)||(Ht=!0),l.memoizedState=m,l.baseState=A,l.baseQueue=z,p.lastRenderedState=m}if(s=p.interleaved,s!==null){S=s;do P=S.lane,et.lanes|=P,Pi|=P,S=S.next;while(S!==s)}else S===null&&(p.lanes=0);return[l.memoizedState,p.dispatch]}function ff(s){var l=vr(),p=l.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=s;var m=p.dispatch,S=p.pending,P=l.memoizedState;if(S!==null){p.pending=null;var A=S=S.next;do P=s(P,A.action),A=A.next;while(A!==S);_r(P,l.memoizedState)||(Ht=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),p.lastRenderedState=P}return[P,m]}function SS(){}function wS(s,l){var p=et,m=vr(),S=l(),P=!_r(m.memoizedState,S);if(P&&(m.memoizedState=S,Ht=!0),m=m.queue,vf(xS.bind(null,p,m,s),[s]),m.getSnapshot!==l||P||bt!==null&&bt.memoizedState.tag&1){if(p.flags|=2048,$o(9,bS.bind(null,p,m,S,l),void 0,null),xt===null)throw Error(r(349));(xi&30)!==0||CS(p,l,S)}return S}function CS(s,l,p){s.flags|=16384,s={getSnapshot:l,value:p},l=et.updateQueue,l===null?(l={lastEffect:null,stores:null},et.updateQueue=l,l.stores=[s]):(p=l.stores,p===null?l.stores=[s]:p.push(s))}function bS(s,l,p,m){l.value=p,l.getSnapshot=m,PS(l)&&_S(s)}function xS(s,l,p){return p(function(){PS(l)&&_S(s)})}function PS(s){var l=s.getSnapshot;s=s.value;try{var p=l();return!_r(s,p)}catch{return!0}}function _S(s){var l=rn(s,1);l!==null&&Ir(l,s,1,-1)}function RS(s){var l=Hr();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:s},l.queue=s,s=s.dispatch=ik.bind(null,et,s),[l.memoizedState,s]}function $o(s,l,p,m){return s={tag:s,create:l,destroy:p,deps:m,next:null},l=et.updateQueue,l===null?(l={lastEffect:null,stores:null},et.updateQueue=l,l.lastEffect=s.next=s):(p=l.lastEffect,p===null?l.lastEffect=s.next=s:(m=p.next,p.next=s,s.next=m,l.lastEffect=s)),s}function ES(){return vr().memoizedState}function yd(s,l,p,m){var S=Hr();et.flags|=s,S.memoizedState=$o(1|l,p,void 0,m===void 0?null:m)}function Sd(s,l,p,m){var S=vr();m=m===void 0?null:m;var P=void 0;if(mt!==null){var A=mt.memoizedState;if(P=A.destroy,m!==null&&uf(m,A.deps)){S.memoizedState=$o(l,p,P,m);return}}et.flags|=s,S.memoizedState=$o(1|l,p,P,m)}function TS(s,l){return yd(8390656,8,s,l)}function vf(s,l){return Sd(2048,8,s,l)}function AS(s,l){return Sd(4,2,s,l)}function IS(s,l){return Sd(4,4,s,l)}function kS(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function jS(s,l,p){return p=p!=null?p.concat([s]):null,Sd(4,4,kS.bind(null,l,s),p)}function gf(){}function OS(s,l){var p=vr();l=l===void 0?null:l;var m=p.memoizedState;return m!==null&&l!==null&&uf(l,m[1])?m[0]:(p.memoizedState=[s,l],s)}function NS(s,l){var p=vr();l=l===void 0?null:l;var m=p.memoizedState;return m!==null&&l!==null&&uf(l,m[1])?m[0]:(s=s(),p.memoizedState=[s,l],s)}function MS(s,l,p){return(xi&21)===0?(s.baseState&&(s.baseState=!1,Ht=!0),s.memoizedState=p):(_r(p,l)||(p=d0(),et.lanes|=p,Pi|=p,s.baseState=!0),l)}function rk(s,l){var p=qe;qe=p!==0&&4>p?p:4,s(!0);var m=lf.transition;lf.transition={};try{s(!1),l()}finally{qe=p,lf.transition=m}}function DS(){return vr().memoizedState}function nk(s,l,p){var m=qn(s);if(p={lane:m,action:p,hasEagerState:!1,eagerState:null,next:null},LS(s))zS(l,p);else if(p=fS(s,l,p,m),p!==null){var S=zt();Ir(p,s,m,S),BS(p,l,m)}}function ik(s,l,p){var m=qn(s),S={lane:m,action:p,hasEagerState:!1,eagerState:null,next:null};if(LS(s))zS(l,S);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var A=l.lastRenderedState,N=P(A,p);if(S.hasEagerState=!0,S.eagerState=N,_r(N,A)){var z=l.interleaved;z===null?(S.next=S,rf(l)):(S.next=z.next,z.next=S),l.interleaved=S;return}}catch{}p=fS(s,l,S,m),p!==null&&(S=zt(),Ir(p,s,m,S),BS(p,l,m))}}function LS(s){var l=s.alternate;return s===et||l!==null&&l===et}function zS(s,l){Ho=md=!0;var p=s.pending;p===null?l.next=l:(l.next=p.next,p.next=l),s.pending=l}function BS(s,l,p){if((p&4194240)!==0){var m=l.lanes;m&=s.pendingLanes,p|=m,l.lanes=p,mp(s,p)}}var wd={readContext:fr,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},sk={readContext:fr,useCallback:function(s,l){return Hr().memoizedState=[s,l===void 0?null:l],s},useContext:fr,useEffect:TS,useImperativeHandle:function(s,l,p){return p=p!=null?p.concat([s]):null,yd(4194308,4,kS.bind(null,l,s),p)},useLayoutEffect:function(s,l){return yd(4194308,4,s,l)},useInsertionEffect:function(s,l){return yd(4,2,s,l)},useMemo:function(s,l){var p=Hr();return l=l===void 0?null:l,s=s(),p.memoizedState=[s,l],s},useReducer:function(s,l,p){var m=Hr();return l=p!==void 0?p(l):l,m.memoizedState=m.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},m.queue=s,s=s.dispatch=nk.bind(null,et,s),[m.memoizedState,s]},useRef:function(s){var l=Hr();return s={current:s},l.memoizedState=s},useState:RS,useDebugValue:gf,useDeferredValue:function(s){return Hr().memoizedState=s},useTransition:function(){var s=RS(!1),l=s[0];return s=rk.bind(null,s[1]),Hr().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,p){var m=et,S=Hr();if(Xe){if(p===void 0)throw Error(r(407));p=p()}else{if(p=l(),xt===null)throw Error(r(349));(xi&30)!==0||CS(m,l,p)}S.memoizedState=p;var P={value:p,getSnapshot:l};return S.queue=P,TS(xS.bind(null,m,P,s),[s]),m.flags|=2048,$o(9,bS.bind(null,m,P,p,l),void 0,null),p},useId:function(){var s=Hr(),l=xt.identifierPrefix;if(Xe){var p=tn,m=en;p=(m&~(1<<32-Pr(m)-1)).toString(32)+p,l=":"+l+"R"+p,p=Ko++,0<p&&(l+="H"+p.toString(32)),l+=":"}else p=tk++,l=":"+l+"r"+p.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},ok={readContext:fr,useCallback:OS,useContext:fr,useEffect:vf,useImperativeHandle:jS,useInsertionEffect:AS,useLayoutEffect:IS,useMemo:NS,useReducer:pf,useRef:ES,useState:function(){return pf(Go)},useDebugValue:gf,useDeferredValue:function(s){var l=vr();return MS(l,mt.memoizedState,s)},useTransition:function(){var s=pf(Go)[0],l=vr().memoizedState;return[s,l]},useMutableSource:SS,useSyncExternalStore:wS,useId:DS,unstable_isNewReconciler:!1},ak={readContext:fr,useCallback:OS,useContext:fr,useEffect:vf,useImperativeHandle:jS,useInsertionEffect:AS,useLayoutEffect:IS,useMemo:NS,useReducer:ff,useRef:ES,useState:function(){return ff(Go)},useDebugValue:gf,useDeferredValue:function(s){var l=vr();return mt===null?l.memoizedState=s:MS(l,mt.memoizedState,s)},useTransition:function(){var s=ff(Go)[0],l=vr().memoizedState;return[s,l]},useMutableSource:SS,useSyncExternalStore:wS,useId:DS,unstable_isNewReconciler:!1};function Er(s,l){if(s&&s.defaultProps){l=j({},l),s=s.defaultProps;for(var p in s)l[p]===void 0&&(l[p]=s[p]);return l}return l}function mf(s,l,p,m){l=s.memoizedState,p=p(m,l),p=p==null?l:j({},l,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var Cd={isMounted:function(s){return(s=s._reactInternals)?gi(s)===s:!1},enqueueSetState:function(s,l,p){s=s._reactInternals;var m=zt(),S=qn(s),P=nn(m,S);P.payload=l,p!=null&&(P.callback=p),l=Ln(s,P,S),l!==null&&(Ir(l,s,S,m),pd(l,s,S))},enqueueReplaceState:function(s,l,p){s=s._reactInternals;var m=zt(),S=qn(s),P=nn(m,S);P.tag=1,P.payload=l,p!=null&&(P.callback=p),l=Ln(s,P,S),l!==null&&(Ir(l,s,S,m),pd(l,s,S))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var p=zt(),m=qn(s),S=nn(p,m);S.tag=2,l!=null&&(S.callback=l),l=Ln(s,S,m),l!==null&&(Ir(l,s,m,p),pd(l,s,m))}};function FS(s,l,p,m,S,P,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,P,A):l.prototype&&l.prototype.isPureReactComponent?!No(p,m)||!No(S,P):!0}function qS(s,l,p){var m=!1,S=Nn,P=l.contextType;return typeof P=="object"&&P!==null?P=fr(P):(S=Wt(l)?yi:kt.current,m=l.contextTypes,P=(m=m!=null)?Es(s,S):Nn),l=new l(p,P),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Cd,s.stateNode=l,l._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=P),l}function US(s,l,p,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,m),l.state!==s&&Cd.enqueueReplaceState(l,l.state,null)}function yf(s,l,p,m){var S=s.stateNode;S.props=p,S.state=s.memoizedState,S.refs={},nf(s);var P=l.contextType;typeof P=="object"&&P!==null?S.context=fr(P):(P=Wt(l)?yi:kt.current,S.context=Es(s,P)),S.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(mf(s,l,P,p),S.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&Cd.enqueueReplaceState(S,S.state,null),fd(s,p,S,m),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function Ms(s,l){try{var p="",m=l;do p+=le(m),m=m.return;while(m);var S=p}catch(P){S=`
Error generating stack: `+P.message+`
`+P.stack}return{value:s,source:l,stack:S,digest:null}}function Sf(s,l,p){return{value:s,source:null,stack:p??null,digest:l??null}}function wf(s,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var ck=typeof WeakMap=="function"?WeakMap:Map;function VS(s,l,p){p=nn(-1,p),p.tag=3,p.payload={element:null};var m=l.value;return p.callback=function(){Td||(Td=!0,Mf=m),wf(s,l)},p}function WS(s,l,p){p=nn(-1,p),p.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var S=l.value;p.payload=function(){return m(S)},p.callback=function(){wf(s,l)}}var P=s.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(p.callback=function(){wf(s,l),typeof m!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})}),p}function HS(s,l,p){var m=s.pingCache;if(m===null){m=s.pingCache=new ck;var S=new Set;m.set(l,S)}else S=m.get(l),S===void 0&&(S=new Set,m.set(l,S));S.has(p)||(S.add(p),s=bk.bind(null,s,l,p),l.then(s,s))}function KS(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function GS(s,l,p,m,S){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(l=nn(-1,1),l.tag=2,Ln(p,l,1))),p.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var lk=I.ReactCurrentOwner,Ht=!1;function Lt(s,l,p,m){l.child=s===null?pS(l,null,p,m):ks(l,s.child,p,m)}function $S(s,l,p,m,S){p=p.render;var P=l.ref;return Os(l,S),m=df(s,l,p,m,P,S),p=hf(),s!==null&&!Ht?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,sn(s,l,S)):(Xe&&p&&Gp(l),l.flags|=1,Lt(s,l,m,S),l.child)}function JS(s,l,p,m,S){if(s===null){var P=p.type;return typeof P=="function"&&!Uf(P)&&P.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=P,QS(s,l,P,m,S)):(s=Nd(p.type,null,m,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(P=s.child,(s.lanes&S)===0){var A=P.memoizedProps;if(p=p.compare,p=p!==null?p:No,p(A,m)&&s.ref===l.ref)return sn(s,l,S)}return l.flags|=1,s=Vn(P,m),s.ref=l.ref,s.return=l,l.child=s}function QS(s,l,p,m,S){if(s!==null){var P=s.memoizedProps;if(No(P,m)&&s.ref===l.ref)if(Ht=!1,l.pendingProps=m=P,(s.lanes&S)!==0)(s.flags&131072)!==0&&(Ht=!0);else return l.lanes=s.lanes,sn(s,l,S)}return Cf(s,l,p,m,S)}function YS(s,l,p){var m=l.pendingProps,S=m.children,P=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ls,tr),tr|=p;else{if((p&1073741824)===0)return s=P!==null?P.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,He(Ls,tr),tr|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=P!==null?P.baseLanes:p,He(Ls,tr),tr|=m}else P!==null?(m=P.baseLanes|p,l.memoizedState=null):m=p,He(Ls,tr),tr|=m;return Lt(s,l,S,p),l.child}function XS(s,l){var p=l.ref;(s===null&&p!==null||s!==null&&s.ref!==p)&&(l.flags|=512,l.flags|=2097152)}function Cf(s,l,p,m,S){var P=Wt(p)?yi:kt.current;return P=Es(l,P),Os(l,S),p=df(s,l,p,m,P,S),m=hf(),s!==null&&!Ht?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,sn(s,l,S)):(Xe&&m&&Gp(l),l.flags|=1,Lt(s,l,p,S),l.child)}function ZS(s,l,p,m,S){if(Wt(p)){var P=!0;sd(l)}else P=!1;if(Os(l,S),l.stateNode===null)xd(s,l),qS(l,p,m),yf(l,p,m,S),m=!0;else if(s===null){var A=l.stateNode,N=l.memoizedProps;A.props=N;var z=A.context,Q=p.contextType;typeof Q=="object"&&Q!==null?Q=fr(Q):(Q=Wt(p)?yi:kt.current,Q=Es(l,Q));var re=p.getDerivedStateFromProps,ne=typeof re=="function"||typeof A.getSnapshotBeforeUpdate=="function";ne||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==m||z!==Q)&&US(l,A,m,Q),Dn=!1;var te=l.memoizedState;A.state=te,fd(l,m,A,S),z=l.memoizedState,N!==m||te!==z||Vt.current||Dn?(typeof re=="function"&&(mf(l,p,re,m),z=l.memoizedState),(N=Dn||FS(l,p,N,m,te,z,Q))?(ne||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=z),A.props=m,A.state=z,A.context=Q,m=N):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{A=l.stateNode,vS(s,l),N=l.memoizedProps,Q=l.type===l.elementType?N:Er(l.type,N),A.props=Q,ne=l.pendingProps,te=A.context,z=p.contextType,typeof z=="object"&&z!==null?z=fr(z):(z=Wt(p)?yi:kt.current,z=Es(l,z));var pe=p.getDerivedStateFromProps;(re=typeof pe=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(N!==ne||te!==z)&&US(l,A,m,z),Dn=!1,te=l.memoizedState,A.state=te,fd(l,m,A,S);var ve=l.memoizedState;N!==ne||te!==ve||Vt.current||Dn?(typeof pe=="function"&&(mf(l,p,pe,m),ve=l.memoizedState),(Q=Dn||FS(l,p,Q,m,te,ve,z)||!1)?(re||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,ve,z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,ve,z)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||N===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ve),A.props=m,A.state=ve,A.context=z,m=Q):(typeof A.componentDidUpdate!="function"||N===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),m=!1)}return bf(s,l,p,m,P,S)}function bf(s,l,p,m,S,P){XS(s,l);var A=(l.flags&128)!==0;if(!m&&!A)return S&&iS(l,p,!1),sn(s,l,P);m=l.stateNode,lk.current=l;var N=A&&typeof p.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,s!==null&&A?(l.child=ks(l,s.child,null,P),l.child=ks(l,null,N,P)):Lt(s,l,N,P),l.memoizedState=m.state,S&&iS(l,p,!0),l.child}function ew(s){var l=s.stateNode;l.pendingContext?rS(s,l.pendingContext,l.pendingContext!==l.context):l.context&&rS(s,l.context,!1),sf(s,l.containerInfo)}function tw(s,l,p,m,S){return Is(),Yp(S),l.flags|=256,Lt(s,l,p,m),l.child}var xf={dehydrated:null,treeContext:null,retryLane:0};function Pf(s){return{baseLanes:s,cachePool:null,transitions:null}}function rw(s,l,p){var m=l.pendingProps,S=Ze.current,P=!1,A=(l.flags&128)!==0,N;if((N=A)||(N=s!==null&&s.memoizedState===null?!1:(S&2)!==0),N?(P=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),He(Ze,S&1),s===null)return Qp(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(A=m.children,s=m.fallback,P?(m=l.mode,P=l.child,A={mode:"hidden",children:A},(m&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=A):P=Md(A,m,0,null),s=Ti(s,m,p,null),P.return=l,s.return=l,P.sibling=s,l.child=P,l.child.memoizedState=Pf(p),l.memoizedState=xf,s):_f(l,A));if(S=s.memoizedState,S!==null&&(N=S.dehydrated,N!==null))return uk(s,l,A,m,N,S,p);if(P){P=m.fallback,A=l.mode,S=s.child,N=S.sibling;var z={mode:"hidden",children:m.children};return(A&1)===0&&l.child!==S?(m=l.child,m.childLanes=0,m.pendingProps=z,l.deletions=null):(m=Vn(S,z),m.subtreeFlags=S.subtreeFlags&14680064),N!==null?P=Vn(N,P):(P=Ti(P,A,p,null),P.flags|=2),P.return=l,m.return=l,m.sibling=P,l.child=m,m=P,P=l.child,A=s.child.memoizedState,A=A===null?Pf(p):{baseLanes:A.baseLanes|p,cachePool:null,transitions:A.transitions},P.memoizedState=A,P.childLanes=s.childLanes&~p,l.memoizedState=xf,m}return P=s.child,s=P.sibling,m=Vn(P,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=p),m.return=l,m.sibling=null,s!==null&&(p=l.deletions,p===null?(l.deletions=[s],l.flags|=16):p.push(s)),l.child=m,l.memoizedState=null,m}function _f(s,l){return l=Md({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function bd(s,l,p,m){return m!==null&&Yp(m),ks(l,s.child,null,p),s=_f(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function uk(s,l,p,m,S,P,A){if(p)return l.flags&256?(l.flags&=-257,m=Sf(Error(r(422))),bd(s,l,A,m)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(P=m.fallback,S=l.mode,m=Md({mode:"visible",children:m.children},S,0,null),P=Ti(P,S,A,null),P.flags|=2,m.return=l,P.return=l,m.sibling=P,l.child=m,(l.mode&1)!==0&&ks(l,s.child,null,A),l.child.memoizedState=Pf(A),l.memoizedState=xf,P);if((l.mode&1)===0)return bd(s,l,A,null);if(S.data==="$!"){if(m=S.nextSibling&&S.nextSibling.dataset,m)var N=m.dgst;return m=N,P=Error(r(419)),m=Sf(P,m,void 0),bd(s,l,A,m)}if(N=(A&s.childLanes)!==0,Ht||N){if(m=xt,m!==null){switch(A&-A){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(m.suspendedLanes|A))!==0?0:S,S!==0&&S!==P.retryLane&&(P.retryLane=S,rn(s,S),Ir(m,s,S,-1))}return qf(),m=Sf(Error(r(421))),bd(s,l,A,m)}return S.data==="$?"?(l.flags|=128,l.child=s.child,l=xk.bind(null,s),S._reactRetry=l,null):(s=P.treeContext,er=jn(S.nextSibling),Zt=l,Xe=!0,Rr=null,s!==null&&(hr[pr++]=en,hr[pr++]=tn,hr[pr++]=Si,en=s.id,tn=s.overflow,Si=l),l=_f(l,m.children),l.flags|=4096,l)}function nw(s,l,p){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),tf(s.return,l,p)}function Rf(s,l,p,m,S){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:S}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=m,P.tail=p,P.tailMode=S)}function iw(s,l,p){var m=l.pendingProps,S=m.revealOrder,P=m.tail;if(Lt(s,l,m.children,p),m=Ze.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&nw(s,p,l);else if(s.tag===19)nw(s,p,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(He(Ze,m),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(p=l.child,S=null;p!==null;)s=p.alternate,s!==null&&vd(s)===null&&(S=p),p=p.sibling;p=S,p===null?(S=l.child,l.child=null):(S=p.sibling,p.sibling=null),Rf(l,!1,S,p,P);break;case"backwards":for(p=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&vd(s)===null){l.child=S;break}s=S.sibling,S.sibling=p,p=S,S=s}Rf(l,!0,p,null,P);break;case"together":Rf(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function xd(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function sn(s,l,p){if(s!==null&&(l.dependencies=s.dependencies),Pi|=l.lanes,(p&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,p=Vn(s,s.pendingProps),l.child=p,p.return=l;s.sibling!==null;)s=s.sibling,p=p.sibling=Vn(s,s.pendingProps),p.return=l;p.sibling=null}return l.child}function dk(s,l,p){switch(l.tag){case 3:ew(l),Is();break;case 5:yS(l);break;case 1:Wt(l.type)&&sd(l);break;case 4:sf(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,S=l.memoizedProps.value;He(dd,m._currentValue),m._currentValue=S;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(He(Ze,Ze.current&1),l.flags|=128,null):(p&l.child.childLanes)!==0?rw(s,l,p):(He(Ze,Ze.current&1),s=sn(s,l,p),s!==null?s.sibling:null);He(Ze,Ze.current&1);break;case 19:if(m=(p&l.childLanes)!==0,(s.flags&128)!==0){if(m)return iw(s,l,p);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),He(Ze,Ze.current),m)break;return null;case 22:case 23:return l.lanes=0,YS(s,l,p)}return sn(s,l,p)}var sw,Ef,ow,aw;sw=function(s,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Ef=function(){},ow=function(s,l,p,m){var S=s.memoizedProps;if(S!==m){s=l.stateNode,bi(Wr.current);var P=null;switch(p){case"input":S=Oe(s,S),m=Oe(s,m),P=[];break;case"select":S=j({},S,{value:void 0}),m=j({},m,{value:void 0}),P=[];break;case"textarea":S=hi(s,S),m=hi(s,m),P=[];break;default:typeof S.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=rd)}fo(p,m);var A;p=null;for(Q in S)if(!m.hasOwnProperty(Q)&&S.hasOwnProperty(Q)&&S[Q]!=null)if(Q==="style"){var N=S[Q];for(A in N)N.hasOwnProperty(A)&&(p||(p={}),p[A]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?P||(P=[]):(P=P||[]).push(Q,null));for(Q in m){var z=m[Q];if(N=S?.[Q],m.hasOwnProperty(Q)&&z!==N&&(z!=null||N!=null))if(Q==="style")if(N){for(A in N)!N.hasOwnProperty(A)||z&&z.hasOwnProperty(A)||(p||(p={}),p[A]="");for(A in z)z.hasOwnProperty(A)&&N[A]!==z[A]&&(p||(p={}),p[A]=z[A])}else p||(P||(P=[]),P.push(Q,p)),p=z;else Q==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,N=N?N.__html:void 0,z!=null&&N!==z&&(P=P||[]).push(Q,z)):Q==="children"?typeof z!="string"&&typeof z!="number"||(P=P||[]).push(Q,""+z):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(z!=null&&Q==="onScroll"&&$e("scroll",s),P||N===z||(P=[])):(P=P||[]).push(Q,z))}p&&(P=P||[]).push("style",p);var Q=P;(l.updateQueue=Q)&&(l.flags|=4)}},aw=function(s,l,p,m){p!==m&&(l.flags|=4)};function Jo(s,l){if(!Xe)switch(s.tailMode){case"hidden":l=s.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Ot(s){var l=s.alternate!==null&&s.alternate.child===s.child,p=0,m=0;if(l)for(var S=s.child;S!==null;)p|=S.lanes|S.childLanes,m|=S.subtreeFlags&14680064,m|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)p|=S.lanes|S.childLanes,m|=S.subtreeFlags,m|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=m,s.childLanes=p,l}function hk(s,l,p){var m=l.pendingProps;switch($p(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(l),null;case 1:return Wt(l.type)&&id(),Ot(l),null;case 3:return m=l.stateNode,Ns(),Je(Vt),Je(kt),cf(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(ld(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Rr!==null&&(zf(Rr),Rr=null))),Ef(s,l),Ot(l),null;case 5:of(l);var S=bi(Wo.current);if(p=l.type,s!==null&&l.stateNode!=null)ow(s,l,p,m,S),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Ot(l),null}if(s=bi(Wr.current),ld(l)){m=l.stateNode,p=l.type;var P=l.memoizedProps;switch(m[Vr]=l,m[Bo]=P,s=(l.mode&1)!==0,p){case"dialog":$e("cancel",m),$e("close",m);break;case"iframe":case"object":case"embed":$e("load",m);break;case"video":case"audio":for(S=0;S<Do.length;S++)$e(Do[S],m);break;case"source":$e("error",m);break;case"img":case"image":case"link":$e("error",m),$e("load",m);break;case"details":$e("toggle",m);break;case"input":gt(m,P),$e("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!P.multiple},$e("invalid",m);break;case"textarea":vs(m,P),$e("invalid",m)}fo(p,P),S=null;for(var A in P)if(P.hasOwnProperty(A)){var N=P[A];A==="children"?typeof N=="string"?m.textContent!==N&&(P.suppressHydrationWarning!==!0&&td(m.textContent,N,s),S=["children",N]):typeof N=="number"&&m.textContent!==""+N&&(P.suppressHydrationWarning!==!0&&td(m.textContent,N,s),S=["children",""+N]):i.hasOwnProperty(A)&&N!=null&&A==="onScroll"&&$e("scroll",m)}switch(p){case"input":je(m),Ut(m,P,!0);break;case"textarea":je(m),gs(m);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(m.onclick=rd)}m=S,l.updateQueue=m,m!==null&&(l.flags|=4)}else{A=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=fi(p)),s==="http://www.w3.org/1999/xhtml"?p==="script"?(s=A.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=A.createElement(p,{is:m.is}):(s=A.createElement(p),p==="select"&&(A=s,m.multiple?A.multiple=!0:m.size&&(A.size=m.size))):s=A.createElementNS(s,p),s[Vr]=l,s[Bo]=m,sw(s,l,!1,!1),l.stateNode=s;e:{switch(A=vo(p,m),p){case"dialog":$e("cancel",s),$e("close",s),S=m;break;case"iframe":case"object":case"embed":$e("load",s),S=m;break;case"video":case"audio":for(S=0;S<Do.length;S++)$e(Do[S],s);S=m;break;case"source":$e("error",s),S=m;break;case"img":case"image":case"link":$e("error",s),$e("load",s),S=m;break;case"details":$e("toggle",s),S=m;break;case"input":gt(s,m),S=Oe(s,m),$e("invalid",s);break;case"option":S=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},S=j({},m,{value:void 0}),$e("invalid",s);break;case"textarea":vs(s,m),S=hi(s,m),$e("invalid",s);break;default:S=m}fo(p,S),N=S;for(P in N)if(N.hasOwnProperty(P)){var z=N[P];P==="style"?ju(s,z):P==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Qr(s,z)):P==="children"?typeof z=="string"?(p!=="textarea"||z!=="")&&qr(s,z):typeof z=="number"&&qr(s,""+z):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?z!=null&&P==="onScroll"&&$e("scroll",s):z!=null&&_(s,P,z,A))}switch(p){case"input":je(s),Ut(s,m,!1);break;case"textarea":je(s),gs(s);break;case"option":m.value!=null&&s.setAttribute("value",""+de(m.value));break;case"select":s.multiple=!!m.multiple,P=m.value,P!=null?Fr(s,!!m.multiple,P,!1):m.defaultValue!=null&&Fr(s,!!m.multiple,m.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=rd)}switch(p){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Ot(l),null;case 6:if(s&&l.stateNode!=null)aw(s,l,s.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(p=bi(Wo.current),bi(Wr.current),ld(l)){if(m=l.stateNode,p=l.memoizedProps,m[Vr]=l,(P=m.nodeValue!==p)&&(s=Zt,s!==null))switch(s.tag){case 3:td(m.nodeValue,p,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&td(m.nodeValue,p,(s.mode&1)!==0)}P&&(l.flags|=4)}else m=(p.nodeType===9?p:p.ownerDocument).createTextNode(m),m[Vr]=l,l.stateNode=m}return Ot(l),null;case 13:if(Je(Ze),m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Xe&&er!==null&&(l.mode&1)!==0&&(l.flags&128)===0)uS(),Is(),l.flags|=98560,P=!1;else if(P=ld(l),m!==null&&m.dehydrated!==null){if(s===null){if(!P)throw Error(r(318));if(P=l.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(r(317));P[Vr]=l}else Is(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ot(l),P=!1}else Rr!==null&&(zf(Rr),Rr=null),P=!0;if(!P)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=p,l):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(Ze.current&1)!==0?yt===0&&(yt=3):qf())),l.updateQueue!==null&&(l.flags|=4),Ot(l),null);case 4:return Ns(),Ef(s,l),s===null&&Lo(l.stateNode.containerInfo),Ot(l),null;case 10:return ef(l.type._context),Ot(l),null;case 17:return Wt(l.type)&&id(),Ot(l),null;case 19:if(Je(Ze),P=l.memoizedState,P===null)return Ot(l),null;if(m=(l.flags&128)!==0,A=P.rendering,A===null)if(m)Jo(P,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(A=vd(s),A!==null){for(l.flags|=128,Jo(P,!1),m=A.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=p,p=l.child;p!==null;)P=p,s=m,P.flags&=14680066,A=P.alternate,A===null?(P.childLanes=0,P.lanes=s,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=A.childLanes,P.lanes=A.lanes,P.child=A.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=A.memoizedProps,P.memoizedState=A.memoizedState,P.updateQueue=A.updateQueue,P.type=A.type,s=A.dependencies,P.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),p=p.sibling;return He(Ze,Ze.current&1|2),l.child}s=s.sibling}P.tail!==null&&lt()>zs&&(l.flags|=128,m=!0,Jo(P,!1),l.lanes=4194304)}else{if(!m)if(s=vd(A),s!==null){if(l.flags|=128,m=!0,p=s.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),Jo(P,!0),P.tail===null&&P.tailMode==="hidden"&&!A.alternate&&!Xe)return Ot(l),null}else 2*lt()-P.renderingStartTime>zs&&p!==1073741824&&(l.flags|=128,m=!0,Jo(P,!1),l.lanes=4194304);P.isBackwards?(A.sibling=l.child,l.child=A):(p=P.last,p!==null?p.sibling=A:l.child=A,P.last=A)}return P.tail!==null?(l=P.tail,P.rendering=l,P.tail=l.sibling,P.renderingStartTime=lt(),l.sibling=null,p=Ze.current,He(Ze,m?p&1|2:p&1),l):(Ot(l),null);case 22:case 23:return Ff(),m=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(tr&1073741824)!==0&&(Ot(l),l.subtreeFlags&6&&(l.flags|=8192)):Ot(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function pk(s,l){switch($p(l),l.tag){case 1:return Wt(l.type)&&id(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ns(),Je(Vt),Je(kt),cf(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return of(l),null;case 13:if(Je(Ze),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Is()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Je(Ze),null;case 4:return Ns(),null;case 10:return ef(l.type._context),null;case 22:case 23:return Ff(),null;case 24:return null;default:return null}}var Pd=!1,Nt=!1,fk=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Ds(s,l){var p=s.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(m){at(s,l,m)}else p.current=null}function Tf(s,l,p){try{p()}catch(m){at(s,l,m)}}var cw=!1;function vk(s,l){if(Bp=Wu,s=F0(),kp(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var m=p.getSelection&&p.getSelection();if(m&&m.rangeCount!==0){p=m.anchorNode;var S=m.anchorOffset,P=m.focusNode;m=m.focusOffset;try{p.nodeType,P.nodeType}catch{p=null;break e}var A=0,N=-1,z=-1,Q=0,re=0,ne=s,te=null;t:for(;;){for(var pe;ne!==p||S!==0&&ne.nodeType!==3||(N=A+S),ne!==P||m!==0&&ne.nodeType!==3||(z=A+m),ne.nodeType===3&&(A+=ne.nodeValue.length),(pe=ne.firstChild)!==null;)te=ne,ne=pe;for(;;){if(ne===s)break t;if(te===p&&++Q===S&&(N=A),te===P&&++re===m&&(z=A),(pe=ne.nextSibling)!==null)break;ne=te,te=ne.parentNode}ne=pe}p=N===-1||z===-1?null:{start:N,end:z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Fp={focusedElem:s,selectionRange:p},Wu=!1,fe=l;fe!==null;)if(l=fe,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,fe=s;else for(;fe!==null;){l=fe;try{var ve=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var ge=ve.memoizedProps,ut=ve.memoizedState,K=l.stateNode,q=K.getSnapshotBeforeUpdate(l.elementType===l.type?ge:Er(l.type,ge),ut);K.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var G=l.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ae){at(l,l.return,ae)}if(s=l.sibling,s!==null){s.return=l.return,fe=s;break}fe=l.return}return ve=cw,cw=!1,ve}function Qo(s,l,p){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var S=m=m.next;do{if((S.tag&s)===s){var P=S.destroy;S.destroy=void 0,P!==void 0&&Tf(l,p,P)}S=S.next}while(S!==m)}}function _d(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var p=l=l.next;do{if((p.tag&s)===s){var m=p.create;p.destroy=m()}p=p.next}while(p!==l)}}function Af(s){var l=s.ref;if(l!==null){var p=s.stateNode;s.tag,s=p,typeof l=="function"?l(s):l.current=s}}function lw(s){var l=s.alternate;l!==null&&(s.alternate=null,lw(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[Vr],delete l[Bo],delete l[Wp],delete l[YI],delete l[XI])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function uw(s){return s.tag===5||s.tag===3||s.tag===4}function dw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||uw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function If(s,l,p){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?p.nodeType===8?p.parentNode.insertBefore(s,l):p.insertBefore(s,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(s,p)):(l=p,l.appendChild(s)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=rd));else if(m!==4&&(s=s.child,s!==null))for(If(s,l,p),s=s.sibling;s!==null;)If(s,l,p),s=s.sibling}function kf(s,l,p){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?p.insertBefore(s,l):p.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(kf(s,l,p),s=s.sibling;s!==null;)kf(s,l,p),s=s.sibling}var _t=null,Tr=!1;function zn(s,l,p){for(p=p.child;p!==null;)hw(s,l,p),p=p.sibling}function hw(s,l,p){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(zu,p)}catch{}switch(p.tag){case 5:Nt||Ds(p,l);case 6:var m=_t,S=Tr;_t=null,zn(s,l,p),_t=m,Tr=S,_t!==null&&(Tr?(s=_t,p=p.stateNode,s.nodeType===8?s.parentNode.removeChild(p):s.removeChild(p)):_t.removeChild(p.stateNode));break;case 18:_t!==null&&(Tr?(s=_t,p=p.stateNode,s.nodeType===8?Vp(s.parentNode,p):s.nodeType===1&&Vp(s,p),To(s)):Vp(_t,p.stateNode));break;case 4:m=_t,S=Tr,_t=p.stateNode.containerInfo,Tr=!0,zn(s,l,p),_t=m,Tr=S;break;case 0:case 11:case 14:case 15:if(!Nt&&(m=p.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){S=m=m.next;do{var P=S,A=P.destroy;P=P.tag,A!==void 0&&((P&2)!==0||(P&4)!==0)&&Tf(p,l,A),S=S.next}while(S!==m)}zn(s,l,p);break;case 1:if(!Nt&&(Ds(p,l),m=p.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=p.memoizedProps,m.state=p.memoizedState,m.componentWillUnmount()}catch(N){at(p,l,N)}zn(s,l,p);break;case 21:zn(s,l,p);break;case 22:p.mode&1?(Nt=(m=Nt)||p.memoizedState!==null,zn(s,l,p),Nt=m):zn(s,l,p);break;default:zn(s,l,p)}}function pw(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var p=s.stateNode;p===null&&(p=s.stateNode=new fk),l.forEach(function(m){var S=Pk.bind(null,s,m);p.has(m)||(p.add(m),m.then(S,S))})}}function Ar(s,l){var p=l.deletions;if(p!==null)for(var m=0;m<p.length;m++){var S=p[m];try{var P=s,A=l,N=A;e:for(;N!==null;){switch(N.tag){case 5:_t=N.stateNode,Tr=!1;break e;case 3:_t=N.stateNode.containerInfo,Tr=!0;break e;case 4:_t=N.stateNode.containerInfo,Tr=!0;break e}N=N.return}if(_t===null)throw Error(r(160));hw(P,A,S),_t=null,Tr=!1;var z=S.alternate;z!==null&&(z.return=null),S.return=null}catch(Q){at(S,l,Q)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)fw(l,s),l=l.sibling}function fw(s,l){var p=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ar(l,s),Kr(s),m&4){try{Qo(3,s,s.return),_d(3,s)}catch(ge){at(s,s.return,ge)}try{Qo(5,s,s.return)}catch(ge){at(s,s.return,ge)}}break;case 1:Ar(l,s),Kr(s),m&512&&p!==null&&Ds(p,p.return);break;case 5:if(Ar(l,s),Kr(s),m&512&&p!==null&&Ds(p,p.return),s.flags&32){var S=s.stateNode;try{qr(S,"")}catch(ge){at(s,s.return,ge)}}if(m&4&&(S=s.stateNode,S!=null)){var P=s.memoizedProps,A=p!==null?p.memoizedProps:P,N=s.type,z=s.updateQueue;if(s.updateQueue=null,z!==null)try{N==="input"&&P.type==="radio"&&P.name!=null&&It(S,P),vo(N,A);var Q=vo(N,P);for(A=0;A<z.length;A+=2){var re=z[A],ne=z[A+1];re==="style"?ju(S,ne):re==="dangerouslySetInnerHTML"?Qr(S,ne):re==="children"?qr(S,ne):_(S,re,ne,Q)}switch(N){case"input":Fe(S,P);break;case"textarea":pi(S,P);break;case"select":var te=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!P.multiple;var pe=P.value;pe!=null?Fr(S,!!P.multiple,pe,!1):te!==!!P.multiple&&(P.defaultValue!=null?Fr(S,!!P.multiple,P.defaultValue,!0):Fr(S,!!P.multiple,P.multiple?[]:"",!1))}S[Bo]=P}catch(ge){at(s,s.return,ge)}}break;case 6:if(Ar(l,s),Kr(s),m&4){if(s.stateNode===null)throw Error(r(162));S=s.stateNode,P=s.memoizedProps;try{S.nodeValue=P}catch(ge){at(s,s.return,ge)}}break;case 3:if(Ar(l,s),Kr(s),m&4&&p!==null&&p.memoizedState.isDehydrated)try{To(l.containerInfo)}catch(ge){at(s,s.return,ge)}break;case 4:Ar(l,s),Kr(s);break;case 13:Ar(l,s),Kr(s),S=s.child,S.flags&8192&&(P=S.memoizedState!==null,S.stateNode.isHidden=P,!P||S.alternate!==null&&S.alternate.memoizedState!==null||(Nf=lt())),m&4&&pw(s);break;case 22:if(re=p!==null&&p.memoizedState!==null,s.mode&1?(Nt=(Q=Nt)||re,Ar(l,s),Nt=Q):Ar(l,s),Kr(s),m&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!re&&(s.mode&1)!==0)for(fe=s,re=s.child;re!==null;){for(ne=fe=re;fe!==null;){switch(te=fe,pe=te.child,te.tag){case 0:case 11:case 14:case 15:Qo(4,te,te.return);break;case 1:Ds(te,te.return);var ve=te.stateNode;if(typeof ve.componentWillUnmount=="function"){m=te,p=te.return;try{l=m,ve.props=l.memoizedProps,ve.state=l.memoizedState,ve.componentWillUnmount()}catch(ge){at(m,p,ge)}}break;case 5:Ds(te,te.return);break;case 22:if(te.memoizedState!==null){mw(ne);continue}}pe!==null?(pe.return=te,fe=pe):mw(ne)}re=re.sibling}e:for(re=null,ne=s;;){if(ne.tag===5){if(re===null){re=ne;try{S=ne.stateNode,Q?(P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(N=ne.stateNode,z=ne.memoizedProps.style,A=z!=null&&z.hasOwnProperty("display")?z.display:null,N.style.display=ms("display",A))}catch(ge){at(s,s.return,ge)}}}else if(ne.tag===6){if(re===null)try{ne.stateNode.nodeValue=Q?"":ne.memoizedProps}catch(ge){at(s,s.return,ge)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;re===ne&&(re=null),ne=ne.return}re===ne&&(re=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Ar(l,s),Kr(s),m&4&&pw(s);break;case 21:break;default:Ar(l,s),Kr(s)}}function Kr(s){var l=s.flags;if(l&2){try{e:{for(var p=s.return;p!==null;){if(uw(p)){var m=p;break e}p=p.return}throw Error(r(160))}switch(m.tag){case 5:var S=m.stateNode;m.flags&32&&(qr(S,""),m.flags&=-33);var P=dw(s);kf(s,P,S);break;case 3:case 4:var A=m.stateNode.containerInfo,N=dw(s);If(s,N,A);break;default:throw Error(r(161))}}catch(z){at(s,s.return,z)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function gk(s,l,p){fe=s,vw(s)}function vw(s,l,p){for(var m=(s.mode&1)!==0;fe!==null;){var S=fe,P=S.child;if(S.tag===22&&m){var A=S.memoizedState!==null||Pd;if(!A){var N=S.alternate,z=N!==null&&N.memoizedState!==null||Nt;N=Pd;var Q=Nt;if(Pd=A,(Nt=z)&&!Q)for(fe=S;fe!==null;)A=fe,z=A.child,A.tag===22&&A.memoizedState!==null?yw(S):z!==null?(z.return=A,fe=z):yw(S);for(;P!==null;)fe=P,vw(P),P=P.sibling;fe=S,Pd=N,Nt=Q}gw(s)}else(S.subtreeFlags&8772)!==0&&P!==null?(P.return=S,fe=P):gw(s)}}function gw(s){for(;fe!==null;){var l=fe;if((l.flags&8772)!==0){var p=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Nt||_d(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Nt)if(p===null)m.componentDidMount();else{var S=l.elementType===l.type?p.memoizedProps:Er(l.type,p.memoizedProps);m.componentDidUpdate(S,p.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var P=l.updateQueue;P!==null&&mS(l,P,m);break;case 3:var A=l.updateQueue;if(A!==null){if(p=null,l.child!==null)switch(l.child.tag){case 5:p=l.child.stateNode;break;case 1:p=l.child.stateNode}mS(l,A,p)}break;case 5:var N=l.stateNode;if(p===null&&l.flags&4){p=N;var z=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&p.focus();break;case"img":z.src&&(p.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Q=l.alternate;if(Q!==null){var re=Q.memoizedState;if(re!==null){var ne=re.dehydrated;ne!==null&&To(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Nt||l.flags&512&&Af(l)}catch(te){at(l,l.return,te)}}if(l===s){fe=null;break}if(p=l.sibling,p!==null){p.return=l.return,fe=p;break}fe=l.return}}function mw(s){for(;fe!==null;){var l=fe;if(l===s){fe=null;break}var p=l.sibling;if(p!==null){p.return=l.return,fe=p;break}fe=l.return}}function yw(s){for(;fe!==null;){var l=fe;try{switch(l.tag){case 0:case 11:case 15:var p=l.return;try{_d(4,l)}catch(z){at(l,p,z)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var S=l.return;try{m.componentDidMount()}catch(z){at(l,S,z)}}var P=l.return;try{Af(l)}catch(z){at(l,P,z)}break;case 5:var A=l.return;try{Af(l)}catch(z){at(l,A,z)}}}catch(z){at(l,l.return,z)}if(l===s){fe=null;break}var N=l.sibling;if(N!==null){N.return=l.return,fe=N;break}fe=l.return}}var mk=Math.ceil,Rd=I.ReactCurrentDispatcher,jf=I.ReactCurrentOwner,gr=I.ReactCurrentBatchConfig,Le=0,xt=null,pt=null,Rt=0,tr=0,Ls=On(0),yt=0,Yo=null,Pi=0,Ed=0,Of=0,Xo=null,Kt=null,Nf=0,zs=1/0,on=null,Td=!1,Mf=null,Bn=null,Ad=!1,Fn=null,Id=0,Zo=0,Df=null,kd=-1,jd=0;function zt(){return(Le&6)!==0?lt():kd!==-1?kd:kd=lt()}function qn(s){return(s.mode&1)===0?1:(Le&2)!==0&&Rt!==0?Rt&-Rt:ek.transition!==null?(jd===0&&(jd=d0()),jd):(s=qe,s!==0||(s=window.event,s=s===void 0?16:w0(s.type)),s)}function Ir(s,l,p,m){if(50<Zo)throw Zo=0,Df=null,Error(r(185));xo(s,p,m),((Le&2)===0||s!==xt)&&(s===xt&&((Le&2)===0&&(Ed|=p),yt===4&&Un(s,Rt)),Gt(s,m),p===1&&Le===0&&(l.mode&1)===0&&(zs=lt()+500,od&&Mn()))}function Gt(s,l){var p=s.callbackNode;eI(s,l);var m=qu(s,s===xt?Rt:0);if(m===0)p!==null&&c0(p),s.callbackNode=null,s.callbackPriority=0;else if(l=m&-m,s.callbackPriority!==l){if(p!=null&&c0(p),l===1)s.tag===0?ZI(ww.bind(null,s)):sS(ww.bind(null,s)),JI(function(){(Le&6)===0&&Mn()}),p=null;else{switch(h0(m)){case 1:p=fp;break;case 4:p=l0;break;case 16:p=Lu;break;case 536870912:p=u0;break;default:p=Lu}p=Tw(p,Sw.bind(null,s))}s.callbackPriority=l,s.callbackNode=p}}function Sw(s,l){if(kd=-1,jd=0,(Le&6)!==0)throw Error(r(327));var p=s.callbackNode;if(Bs()&&s.callbackNode!==p)return null;var m=qu(s,s===xt?Rt:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||l)l=Od(s,m);else{l=m;var S=Le;Le|=2;var P=bw();(xt!==s||Rt!==l)&&(on=null,zs=lt()+500,Ri(s,l));do try{wk();break}catch(N){Cw(s,N)}while(!0);Zp(),Rd.current=P,Le=S,pt!==null?l=0:(xt=null,Rt=0,l=yt)}if(l!==0){if(l===2&&(S=vp(s),S!==0&&(m=S,l=Lf(s,S))),l===1)throw p=Yo,Ri(s,0),Un(s,m),Gt(s,lt()),p;if(l===6)Un(s,m);else{if(S=s.current.alternate,(m&30)===0&&!yk(S)&&(l=Od(s,m),l===2&&(P=vp(s),P!==0&&(m=P,l=Lf(s,P))),l===1))throw p=Yo,Ri(s,0),Un(s,m),Gt(s,lt()),p;switch(s.finishedWork=S,s.finishedLanes=m,l){case 0:case 1:throw Error(r(345));case 2:Ei(s,Kt,on);break;case 3:if(Un(s,m),(m&130023424)===m&&(l=Nf+500-lt(),10<l)){if(qu(s,0)!==0)break;if(S=s.suspendedLanes,(S&m)!==m){zt(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Up(Ei.bind(null,s,Kt,on),l);break}Ei(s,Kt,on);break;case 4:if(Un(s,m),(m&4194240)===m)break;for(l=s.eventTimes,S=-1;0<m;){var A=31-Pr(m);P=1<<A,A=l[A],A>S&&(S=A),m&=~P}if(m=S,m=lt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*mk(m/1960))-m,10<m){s.timeoutHandle=Up(Ei.bind(null,s,Kt,on),m);break}Ei(s,Kt,on);break;case 5:Ei(s,Kt,on);break;default:throw Error(r(329))}}}return Gt(s,lt()),s.callbackNode===p?Sw.bind(null,s):null}function Lf(s,l){var p=Xo;return s.current.memoizedState.isDehydrated&&(Ri(s,l).flags|=256),s=Od(s,l),s!==2&&(l=Kt,Kt=p,l!==null&&zf(l)),s}function zf(s){Kt===null?Kt=s:Kt.push.apply(Kt,s)}function yk(s){for(var l=s;;){if(l.flags&16384){var p=l.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var m=0;m<p.length;m++){var S=p[m],P=S.getSnapshot;S=S.value;try{if(!_r(P(),S))return!1}catch{return!1}}}if(p=l.child,l.subtreeFlags&16384&&p!==null)p.return=l,l=p;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Un(s,l){for(l&=~Of,l&=~Ed,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var p=31-Pr(l),m=1<<p;s[p]=-1,l&=~m}}function ww(s){if((Le&6)!==0)throw Error(r(327));Bs();var l=qu(s,0);if((l&1)===0)return Gt(s,lt()),null;var p=Od(s,l);if(s.tag!==0&&p===2){var m=vp(s);m!==0&&(l=m,p=Lf(s,m))}if(p===1)throw p=Yo,Ri(s,0),Un(s,l),Gt(s,lt()),p;if(p===6)throw Error(r(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Ei(s,Kt,on),Gt(s,lt()),null}function Bf(s,l){var p=Le;Le|=1;try{return s(l)}finally{Le=p,Le===0&&(zs=lt()+500,od&&Mn())}}function _i(s){Fn!==null&&Fn.tag===0&&(Le&6)===0&&Bs();var l=Le;Le|=1;var p=gr.transition,m=qe;try{if(gr.transition=null,qe=1,s)return s()}finally{qe=m,gr.transition=p,Le=l,(Le&6)===0&&Mn()}}function Ff(){tr=Ls.current,Je(Ls)}function Ri(s,l){s.finishedWork=null,s.finishedLanes=0;var p=s.timeoutHandle;if(p!==-1&&(s.timeoutHandle=-1,$I(p)),pt!==null)for(p=pt.return;p!==null;){var m=p;switch($p(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&id();break;case 3:Ns(),Je(Vt),Je(kt),cf();break;case 5:of(m);break;case 4:Ns();break;case 13:Je(Ze);break;case 19:Je(Ze);break;case 10:ef(m.type._context);break;case 22:case 23:Ff()}p=p.return}if(xt=s,pt=s=Vn(s.current,null),Rt=tr=l,yt=0,Yo=null,Of=Ed=Pi=0,Kt=Xo=null,Ci!==null){for(l=0;l<Ci.length;l++)if(p=Ci[l],m=p.interleaved,m!==null){p.interleaved=null;var S=m.next,P=p.pending;if(P!==null){var A=P.next;P.next=S,m.next=A}p.pending=m}Ci=null}return s}function Cw(s,l){do{var p=pt;try{if(Zp(),gd.current=wd,md){for(var m=et.memoizedState;m!==null;){var S=m.queue;S!==null&&(S.pending=null),m=m.next}md=!1}if(xi=0,bt=mt=et=null,Ho=!1,Ko=0,jf.current=null,p===null||p.return===null){yt=1,Yo=l,pt=null;break}e:{var P=s,A=p.return,N=p,z=l;if(l=Rt,N.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=z,re=N,ne=re.tag;if((re.mode&1)===0&&(ne===0||ne===11||ne===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var pe=KS(A);if(pe!==null){pe.flags&=-257,GS(pe,A,N,P,l),pe.mode&1&&HS(P,Q,l),l=pe,z=Q;var ve=l.updateQueue;if(ve===null){var ge=new Set;ge.add(z),l.updateQueue=ge}else ve.add(z);break e}else{if((l&1)===0){HS(P,Q,l),qf();break e}z=Error(r(426))}}else if(Xe&&N.mode&1){var ut=KS(A);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),GS(ut,A,N,P,l),Yp(Ms(z,N));break e}}P=z=Ms(z,N),yt!==4&&(yt=2),Xo===null?Xo=[P]:Xo.push(P),P=A;do{switch(P.tag){case 3:P.flags|=65536,l&=-l,P.lanes|=l;var K=VS(P,z,l);gS(P,K);break e;case 1:N=z;var q=P.type,G=P.stateNode;if((P.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Bn===null||!Bn.has(G)))){P.flags|=65536,l&=-l,P.lanes|=l;var ae=WS(P,N,l);gS(P,ae);break e}}P=P.return}while(P!==null)}Pw(p)}catch(me){l=me,pt===p&&p!==null&&(pt=p=p.return);continue}break}while(!0)}function bw(){var s=Rd.current;return Rd.current=wd,s===null?wd:s}function qf(){(yt===0||yt===3||yt===2)&&(yt=4),xt===null||(Pi&268435455)===0&&(Ed&268435455)===0||Un(xt,Rt)}function Od(s,l){var p=Le;Le|=2;var m=bw();(xt!==s||Rt!==l)&&(on=null,Ri(s,l));do try{Sk();break}catch(S){Cw(s,S)}while(!0);if(Zp(),Le=p,Rd.current=m,pt!==null)throw Error(r(261));return xt=null,Rt=0,yt}function Sk(){for(;pt!==null;)xw(pt)}function wk(){for(;pt!==null&&!HA();)xw(pt)}function xw(s){var l=Ew(s.alternate,s,tr);s.memoizedProps=s.pendingProps,l===null?Pw(s):pt=l,jf.current=null}function Pw(s){var l=s;do{var p=l.alternate;if(s=l.return,(l.flags&32768)===0){if(p=hk(p,l,tr),p!==null){pt=p;return}}else{if(p=pk(p,l),p!==null){p.flags&=32767,pt=p;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{yt=6,pt=null;return}}if(l=l.sibling,l!==null){pt=l;return}pt=l=s}while(l!==null);yt===0&&(yt=5)}function Ei(s,l,p){var m=qe,S=gr.transition;try{gr.transition=null,qe=1,Ck(s,l,p,m)}finally{gr.transition=S,qe=m}return null}function Ck(s,l,p,m){do Bs();while(Fn!==null);if((Le&6)!==0)throw Error(r(327));p=s.finishedWork;var S=s.finishedLanes;if(p===null)return null;if(s.finishedWork=null,s.finishedLanes=0,p===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0;var P=p.lanes|p.childLanes;if(tI(s,P),s===xt&&(pt=xt=null,Rt=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Ad||(Ad=!0,Tw(Lu,function(){return Bs(),null})),P=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||P){P=gr.transition,gr.transition=null;var A=qe;qe=1;var N=Le;Le|=4,jf.current=null,vk(s,p),fw(p,s),qI(Fp),Wu=!!Bp,Fp=Bp=null,s.current=p,gk(p),KA(),Le=N,qe=A,gr.transition=P}else s.current=p;if(Ad&&(Ad=!1,Fn=s,Id=S),P=s.pendingLanes,P===0&&(Bn=null),JA(p.stateNode),Gt(s,lt()),l!==null)for(m=s.onRecoverableError,p=0;p<l.length;p++)S=l[p],m(S.value,{componentStack:S.stack,digest:S.digest});if(Td)throw Td=!1,s=Mf,Mf=null,s;return(Id&1)!==0&&s.tag!==0&&Bs(),P=s.pendingLanes,(P&1)!==0?s===Df?Zo++:(Zo=0,Df=s):Zo=0,Mn(),null}function Bs(){if(Fn!==null){var s=h0(Id),l=gr.transition,p=qe;try{if(gr.transition=null,qe=16>s?16:s,Fn===null)var m=!1;else{if(s=Fn,Fn=null,Id=0,(Le&6)!==0)throw Error(r(331));var S=Le;for(Le|=4,fe=s.current;fe!==null;){var P=fe,A=P.child;if((fe.flags&16)!==0){var N=P.deletions;if(N!==null){for(var z=0;z<N.length;z++){var Q=N[z];for(fe=Q;fe!==null;){var re=fe;switch(re.tag){case 0:case 11:case 15:Qo(8,re,P)}var ne=re.child;if(ne!==null)ne.return=re,fe=ne;else for(;fe!==null;){re=fe;var te=re.sibling,pe=re.return;if(lw(re),re===Q){fe=null;break}if(te!==null){te.return=pe,fe=te;break}fe=pe}}}var ve=P.alternate;if(ve!==null){var ge=ve.child;if(ge!==null){ve.child=null;do{var ut=ge.sibling;ge.sibling=null,ge=ut}while(ge!==null)}}fe=P}}if((P.subtreeFlags&2064)!==0&&A!==null)A.return=P,fe=A;else e:for(;fe!==null;){if(P=fe,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Qo(9,P,P.return)}var K=P.sibling;if(K!==null){K.return=P.return,fe=K;break e}fe=P.return}}var q=s.current;for(fe=q;fe!==null;){A=fe;var G=A.child;if((A.subtreeFlags&2064)!==0&&G!==null)G.return=A,fe=G;else e:for(A=q;fe!==null;){if(N=fe,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:_d(9,N)}}catch(me){at(N,N.return,me)}if(N===A){fe=null;break e}var ae=N.sibling;if(ae!==null){ae.return=N.return,fe=ae;break e}fe=N.return}}if(Le=S,Mn(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(zu,s)}catch{}m=!0}return m}finally{qe=p,gr.transition=l}}return!1}function _w(s,l,p){l=Ms(p,l),l=VS(s,l,1),s=Ln(s,l,1),l=zt(),s!==null&&(xo(s,1,l),Gt(s,l))}function at(s,l,p){if(s.tag===3)_w(s,s,p);else for(;l!==null;){if(l.tag===3){_w(l,s,p);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Bn===null||!Bn.has(m))){s=Ms(p,s),s=WS(l,s,1),l=Ln(l,s,1),s=zt(),l!==null&&(xo(l,1,s),Gt(l,s));break}}l=l.return}}function bk(s,l,p){var m=s.pingCache;m!==null&&m.delete(l),l=zt(),s.pingedLanes|=s.suspendedLanes&p,xt===s&&(Rt&p)===p&&(yt===4||yt===3&&(Rt&130023424)===Rt&&500>lt()-Nf?Ri(s,0):Of|=p),Gt(s,l)}function Rw(s,l){l===0&&((s.mode&1)===0?l=1:(l=Fu,Fu<<=1,(Fu&130023424)===0&&(Fu=4194304)));var p=zt();s=rn(s,l),s!==null&&(xo(s,l,p),Gt(s,p))}function xk(s){var l=s.memoizedState,p=0;l!==null&&(p=l.retryLane),Rw(s,p)}function Pk(s,l){var p=0;switch(s.tag){case 13:var m=s.stateNode,S=s.memoizedState;S!==null&&(p=S.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(r(314))}m!==null&&m.delete(l),Rw(s,p)}var Ew;Ew=function(s,l,p){if(s!==null)if(s.memoizedProps!==l.pendingProps||Vt.current)Ht=!0;else{if((s.lanes&p)===0&&(l.flags&128)===0)return Ht=!1,dk(s,l,p);Ht=(s.flags&131072)!==0}else Ht=!1,Xe&&(l.flags&1048576)!==0&&oS(l,cd,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;xd(s,l),s=l.pendingProps;var S=Es(l,kt.current);Os(l,p),S=df(null,l,m,s,S,p);var P=hf();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Wt(m)?(P=!0,sd(l)):P=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,nf(l),S.updater=Cd,l.stateNode=S,S._reactInternals=l,yf(l,m,s,p),l=bf(null,l,m,!0,P,p)):(l.tag=0,Xe&&P&&Gp(l),Lt(null,l,S,p),l=l.child),l;case 16:m=l.elementType;e:{switch(xd(s,l),s=l.pendingProps,S=m._init,m=S(m._payload),l.type=m,S=l.tag=Rk(m),s=Er(m,s),S){case 0:l=Cf(null,l,m,s,p);break e;case 1:l=ZS(null,l,m,s,p);break e;case 11:l=$S(null,l,m,s,p);break e;case 14:l=JS(null,l,m,Er(m.type,s),p);break e}throw Error(r(306,m,""))}return l;case 0:return m=l.type,S=l.pendingProps,S=l.elementType===m?S:Er(m,S),Cf(s,l,m,S,p);case 1:return m=l.type,S=l.pendingProps,S=l.elementType===m?S:Er(m,S),ZS(s,l,m,S,p);case 3:e:{if(ew(l),s===null)throw Error(r(387));m=l.pendingProps,P=l.memoizedState,S=P.element,vS(s,l),fd(l,m,null,p);var A=l.memoizedState;if(m=A.element,P.isDehydrated)if(P={element:m,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){S=Ms(Error(r(423)),l),l=tw(s,l,m,p,S);break e}else if(m!==S){S=Ms(Error(r(424)),l),l=tw(s,l,m,p,S);break e}else for(er=jn(l.stateNode.containerInfo.firstChild),Zt=l,Xe=!0,Rr=null,p=pS(l,null,m,p),l.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Is(),m===S){l=sn(s,l,p);break e}Lt(s,l,m,p)}l=l.child}return l;case 5:return yS(l),s===null&&Qp(l),m=l.type,S=l.pendingProps,P=s!==null?s.memoizedProps:null,A=S.children,qp(m,S)?A=null:P!==null&&qp(m,P)&&(l.flags|=32),XS(s,l),Lt(s,l,A,p),l.child;case 6:return s===null&&Qp(l),null;case 13:return rw(s,l,p);case 4:return sf(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=ks(l,null,m,p):Lt(s,l,m,p),l.child;case 11:return m=l.type,S=l.pendingProps,S=l.elementType===m?S:Er(m,S),$S(s,l,m,S,p);case 7:return Lt(s,l,l.pendingProps,p),l.child;case 8:return Lt(s,l,l.pendingProps.children,p),l.child;case 12:return Lt(s,l,l.pendingProps.children,p),l.child;case 10:e:{if(m=l.type._context,S=l.pendingProps,P=l.memoizedProps,A=S.value,He(dd,m._currentValue),m._currentValue=A,P!==null)if(_r(P.value,A)){if(P.children===S.children&&!Vt.current){l=sn(s,l,p);break e}}else for(P=l.child,P!==null&&(P.return=l);P!==null;){var N=P.dependencies;if(N!==null){A=P.child;for(var z=N.firstContext;z!==null;){if(z.context===m){if(P.tag===1){z=nn(-1,p&-p),z.tag=2;var Q=P.updateQueue;if(Q!==null){Q=Q.shared;var re=Q.pending;re===null?z.next=z:(z.next=re.next,re.next=z),Q.pending=z}}P.lanes|=p,z=P.alternate,z!==null&&(z.lanes|=p),tf(P.return,p,l),N.lanes|=p;break}z=z.next}}else if(P.tag===10)A=P.type===l.type?null:P.child;else if(P.tag===18){if(A=P.return,A===null)throw Error(r(341));A.lanes|=p,N=A.alternate,N!==null&&(N.lanes|=p),tf(A,p,l),A=P.sibling}else A=P.child;if(A!==null)A.return=P;else for(A=P;A!==null;){if(A===l){A=null;break}if(P=A.sibling,P!==null){P.return=A.return,A=P;break}A=A.return}P=A}Lt(s,l,S.children,p),l=l.child}return l;case 9:return S=l.type,m=l.pendingProps.children,Os(l,p),S=fr(S),m=m(S),l.flags|=1,Lt(s,l,m,p),l.child;case 14:return m=l.type,S=Er(m,l.pendingProps),S=Er(m.type,S),JS(s,l,m,S,p);case 15:return QS(s,l,l.type,l.pendingProps,p);case 17:return m=l.type,S=l.pendingProps,S=l.elementType===m?S:Er(m,S),xd(s,l),l.tag=1,Wt(m)?(s=!0,sd(l)):s=!1,Os(l,p),qS(l,m,S),yf(l,m,S,p),bf(null,l,m,!0,s,p);case 19:return iw(s,l,p);case 22:return YS(s,l,p)}throw Error(r(156,l.tag))};function Tw(s,l){return a0(s,l)}function _k(s,l,p,m){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(s,l,p,m){return new _k(s,l,p,m)}function Uf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Rk(s){if(typeof s=="function")return Uf(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===ee)return 14}return 2}function Vn(s,l){var p=s.alternate;return p===null?(p=mr(s.tag,l,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=l,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&14680064,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,l=s.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p}function Nd(s,l,p,m,S,P){var A=2;if(m=s,typeof s=="function")Uf(s)&&(A=1);else if(typeof s=="string")A=5;else e:switch(s){case B:return Ti(p.children,S,P,l);case O:A=8,S|=8;break;case D:return s=mr(12,p,l,S|2),s.elementType=D,s.lanes=P,s;case H:return s=mr(13,p,l,S),s.elementType=H,s.lanes=P,s;case $:return s=mr(19,p,l,S),s.elementType=$,s.lanes=P,s;case Y:return Md(p,S,P,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:A=10;break e;case L:A=9;break e;case F:A=11;break e;case ee:A=14;break e;case X:A=16,m=null;break e}throw Error(r(130,s==null?s:typeof s,""))}return l=mr(A,p,l,S),l.elementType=s,l.type=m,l.lanes=P,l}function Ti(s,l,p,m){return s=mr(7,s,m,l),s.lanes=p,s}function Md(s,l,p,m){return s=mr(22,s,m,l),s.elementType=Y,s.lanes=p,s.stateNode={isHidden:!1},s}function Vf(s,l,p){return s=mr(6,s,null,l),s.lanes=p,s}function Wf(s,l,p){return l=mr(4,s.children!==null?s.children:[],s.key,l),l.lanes=p,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Ek(s,l,p,m,S){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gp(0),this.expirationTimes=gp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gp(0),this.identifierPrefix=m,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Hf(s,l,p,m,S,P,A,N,z){return s=new Ek(s,l,p,N,z),l===1?(l=1,P===!0&&(l|=8)):l=0,P=mr(3,null,null,l),s.current=P,P.stateNode=s,P.memoizedState={element:m,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},nf(P),s}function Tk(s,l,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:m==null?null:""+m,children:s,containerInfo:l,implementation:p}}function Aw(s){if(!s)return Nn;s=s._reactInternals;e:{if(gi(s)!==s||s.tag!==1)throw Error(r(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Wt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(s.tag===1){var p=s.type;if(Wt(p))return nS(s,p,l)}return l}function Iw(s,l,p,m,S,P,A,N,z){return s=Hf(p,m,!0,s,S,P,A,N,z),s.context=Aw(null),p=s.current,m=zt(),S=qn(p),P=nn(m,S),P.callback=l??null,Ln(p,P,S),s.current.lanes=S,xo(s,S,m),Gt(s,m),s}function Dd(s,l,p,m){var S=l.current,P=zt(),A=qn(S);return p=Aw(p),l.context===null?l.context=p:l.pendingContext=p,l=nn(P,A),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=Ln(S,l,A),s!==null&&(Ir(s,S,A,P),pd(s,S,A)),A}function Ld(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function kw(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<l?p:l}}function Kf(s,l){kw(s,l),(s=s.alternate)&&kw(s,l)}function Ak(){return null}var jw=typeof reportError=="function"?reportError:function(s){console.error(s)};function Gf(s){this._internalRoot=s}zd.prototype.render=Gf.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));Dd(s,l,null,null)},zd.prototype.unmount=Gf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;_i(function(){Dd(null,s,null,null)}),l[Xr]=null}};function zd(s){this._internalRoot=s}zd.prototype.unstable_scheduleHydration=function(s){if(s){var l=v0();s={blockedOn:null,target:s,priority:l};for(var p=0;p<An.length&&l!==0&&l<An[p].priority;p++);An.splice(p,0,s),p===0&&y0(s)}};function $f(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Bd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ow(){}function Ik(s,l,p,m,S){if(S){if(typeof m=="function"){var P=m;m=function(){var Q=Ld(A);P.call(Q)}}var A=Iw(l,m,s,0,null,!1,!1,"",Ow);return s._reactRootContainer=A,s[Xr]=A.current,Lo(s.nodeType===8?s.parentNode:s),_i(),A}for(;S=s.lastChild;)s.removeChild(S);if(typeof m=="function"){var N=m;m=function(){var Q=Ld(z);N.call(Q)}}var z=Hf(s,0,!1,null,null,!1,!1,"",Ow);return s._reactRootContainer=z,s[Xr]=z.current,Lo(s.nodeType===8?s.parentNode:s),_i(function(){Dd(l,z,p,m)}),z}function Fd(s,l,p,m,S){var P=p._reactRootContainer;if(P){var A=P;if(typeof S=="function"){var N=S;S=function(){var z=Ld(A);N.call(z)}}Dd(l,A,s,S)}else A=Ik(p,l,s,S,m);return Ld(A)}p0=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var p=bo(l.pendingLanes);p!==0&&(mp(l,p|1),Gt(l,lt()),(Le&6)===0&&(zs=lt()+500,Mn()))}break;case 13:_i(function(){var m=rn(s,1);if(m!==null){var S=zt();Ir(m,s,1,S)}}),Kf(s,1)}},yp=function(s){if(s.tag===13){var l=rn(s,134217728);if(l!==null){var p=zt();Ir(l,s,134217728,p)}Kf(s,134217728)}},f0=function(s){if(s.tag===13){var l=qn(s),p=rn(s,l);if(p!==null){var m=zt();Ir(p,s,l,m)}Kf(s,l)}},v0=function(){return qe},g0=function(s,l){var p=qe;try{return qe=s,l()}finally{qe=p}},yo=function(s,l,p){switch(l){case"input":if(Fe(s,p),l=p.name,p.type==="radio"&&l!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var m=p[l];if(m!==s&&m.form===s.form){var S=nd(m);if(!S)throw Error(r(90));Ve(m),Fe(m,S)}}}break;case"textarea":pi(s,p);break;case"select":l=p.value,l!=null&&Fr(s,!!p.multiple,l,!1)}},e0=Bf,t0=_i;var kk={usingClientEntryPoint:!1,Events:[Fo,_s,nd,Nu,Zy,Bf]},ea={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jk={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=s0(s),s===null?null:s.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||Ak,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{zu=qd.inject(jk),Ur=qd}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kk,$t.createPortal=function(s,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(l))throw Error(r(200));return Tk(s,l,null,p)},$t.createRoot=function(s,l){if(!$f(s))throw Error(r(299));var p=!1,m="",S=jw;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Hf(s,1,!1,null,null,p,!1,m,S),s[Xr]=l.current,Lo(s.nodeType===8?s.parentNode:s),new Gf(l)},$t.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=s0(l),s=s===null?null:s.stateNode,s},$t.flushSync=function(s){return _i(s)},$t.hydrate=function(s,l,p){if(!Bd(l))throw Error(r(200));return Fd(null,s,l,!0,p)},$t.hydrateRoot=function(s,l,p){if(!$f(s))throw Error(r(405));var m=p!=null&&p.hydratedSources||null,S=!1,P="",A=jw;if(p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(P=p.identifierPrefix),p.onRecoverableError!==void 0&&(A=p.onRecoverableError)),l=Iw(l,null,s,1,p??null,S,!1,P,A),s[Xr]=l.current,Lo(s),m)for(s=0;s<m.length;s++)p=m[s],S=p._getVersion,S=S(p._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[p,S]:l.mutableSourceEagerHydrationData.push(p,S);return new zd(l)},$t.render=function(s,l,p){if(!Bd(l))throw Error(r(200));return Fd(null,s,l,!1,p)},$t.unmountComponentAtNode=function(s){if(!Bd(s))throw Error(r(40));return s._reactRootContainer?(_i(function(){Fd(null,null,s,!1,function(){s._reactRootContainer=null,s[Xr]=null})}),!0):!1},$t.unstable_batchedUpdates=Bf,$t.unstable_renderSubtreeIntoContainer=function(s,l,p,m){if(!Bd(p))throw Error(r(200));if(s==null||s._reactInternals===void 0)throw Error(r(38));return Fd(s,l,p,!1,m)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var qw;function JR(){if(qw)return Yf.exports;qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yf.exports=Uk(),Yf.exports}var Uw;function Vk(){if(Uw)return Ud;Uw=1;var t=JR();return Ud.createRoot=t.createRoot,Ud.hydrateRoot=t.hydrateRoot,Ud}var Wk=Vk();const Hk=Gm(Wk);JR();function au(){return au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},au.apply(this,arguments)}var Zn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zn||(Zn={}));const Vw="popstate";function Kk(t){t===void 0&&(t={});function e(n,i){let{pathname:o,search:a,hash:c}=n.location;return Qg("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:dh(i)}return $k(e,r,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $m(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gk(){return Math.random().toString(36).substr(2,8)}function Ww(t,e){return{usr:t.state,key:t.key,idx:e}}function Qg(t,e,r,n){return r===void 0&&(r=null),au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:r,key:e&&e.key||n||Gk()})}function dh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function co(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function $k(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,c=Zn.Pop,u=null,d=h();d==null&&(d=0,a.replaceState(au({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){c=Zn.Pop;let C=h(),x=C==null?null:C-d;d=C,u&&u({action:c,location:b.location,delta:x})}function v(C,x){c=Zn.Push;let R=Qg(b.location,C,x);d=h()+1;let _=Ww(R,d),I=b.createHref(R);try{a.pushState(_,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(I)}o&&u&&u({action:c,location:b.location,delta:1})}function g(C,x){c=Zn.Replace;let R=Qg(b.location,C,x);d=h();let _=Ww(R,d),I=b.createHref(R);a.replaceState(_,"",I),o&&u&&u({action:c,location:b.location,delta:0})}function w(C){let x=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof C=="string"?C:dh(C);return R=R.replace(/ $/,"%20"),ht(x,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,x)}let b={get action(){return c},get location(){return t(i,a)},listen(C){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Vw,f),u=C,()=>{i.removeEventListener(Vw,f),u=null}},createHref(C){return e(i,C)},createURL:w,encodeLocation(C){let x=w(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:g,go(C){return a.go(C)}};return b}var Hw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hw||(Hw={}));function Jk(t,e,r){return r===void 0&&(r="/"),Qk(t,e,r)}function Qk(t,e,r,n){let i=typeof e=="string"?co(e):e,o=Jm(i.pathname||"/",r);if(o==null)return null;let a=QR(t);Yk(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=l4(o);c=o4(a[u],d)}return c}function QR(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(ht(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=ei([n,u.relativePath]),h=r.concat(u);o.children&&o.children.length>0&&(ht(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),QR(o.children,e,h,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:i4(d,o.index),routesMeta:h})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let u of YR(o.path))i(o,a,u)}),e}function YR(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=YR(n.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function Yk(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:s4(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Xk=/^:[\w-]+$/,Zk=3,e4=2,t4=1,r4=10,n4=-2,Kw=t=>t==="*";function i4(t,e){let r=t.split("/"),n=r.length;return r.some(Kw)&&(n+=n4),e&&(n+=e4),r.filter(i=>!Kw(i)).reduce((i,o)=>i+(Xk.test(o)?Zk:o===""?t4:r4),n)}function s4(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function o4(t,e,r){let{routesMeta:n}=t,i={},o="/",a=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,h=o==="/"?e:e.slice(o.length)||"/",f=a4({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),v=u.route;if(!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:ei([o,f.pathname]),pathnameBase:f4(ei([o,f.pathnameBase])),route:v}),f.pathnameBase!=="/"&&(o=ei([o,f.pathnameBase]))}return a}function a4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=c4(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:v,isOptional:g}=h;if(v==="*"){let b=c[f]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const w=c[f];return g&&!w?d[v]=void 0:d[v]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function c4(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),$m(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function l4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $m(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Jm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const u4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d4=t=>u4.test(t);function h4(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?co(t):t,o;if(r)if(d4(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),$m(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Gw(r.substring(1),"/"):o=Gw(r,e)}else o=e;return{pathname:o,search:v4(n),hash:g4(i)}}function Gw(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ev(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function p4(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Qm(t,e){let r=p4(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Ym(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=co(t):(i=au({},t),ht(!i.pathname||!i.pathname.includes("?"),ev("?","pathname","search",i)),ht(!i.pathname||!i.pathname.includes("#"),ev("#","pathname","hash",i)),ht(!i.search||!i.search.includes("#"),ev("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),f-=1;i.pathname=v.join("/")}c=f>=0?e[f]:"/"}let u=h4(i,c),d=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const ei=t=>t.join("/").replace(/\/\/+/g,"/"),f4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),v4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,g4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XR=["post","put","patch","delete"];new Set(XR);const y4=["get",...XR];new Set(y4);function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cu.apply(this,arguments)}const Xm=E.createContext(null),S4=E.createContext(null),ai=E.createContext(null),Oh=E.createContext(null),Cn=E.createContext({outlet:null,matches:[],isDataRoute:!1}),ZR=E.createContext(null);function w4(t,e){let{relative:r}=e===void 0?{}:e;lo()||ht(!1);let{basename:n,navigator:i}=E.useContext(ai),{hash:o,pathname:a,search:c}=tE(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:ei([n,a])),i.createHref({pathname:u,search:c,hash:o})}function lo(){return E.useContext(Oh)!=null}function bu(){return lo()||ht(!1),E.useContext(Oh).location}function eE(t){E.useContext(ai).static||E.useLayoutEffect(t)}function We(){let{isDataRoute:t}=E.useContext(Cn);return t?O4():C4()}function C4(){lo()||ht(!1);let t=E.useContext(Xm),{basename:e,future:r,navigator:n}=E.useContext(ai),{matches:i}=E.useContext(Cn),{pathname:o}=bu(),a=JSON.stringify(Qm(i,r.v7_relativeSplatPath)),c=E.useRef(!1);return eE(()=>{c.current=!0}),E.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let f=Ym(d,JSON.parse(a),o,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ei([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,a,o,t])}function wt(){let{matches:t}=E.useContext(Cn),e=t[t.length-1];return e?e.params:{}}function tE(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=E.useContext(ai),{matches:i}=E.useContext(Cn),{pathname:o}=bu(),a=JSON.stringify(Qm(i,n.v7_relativeSplatPath));return E.useMemo(()=>Ym(t,JSON.parse(a),o,r==="path"),[t,a,o,r])}function b4(t,e){return x4(t,e)}function x4(t,e,r,n){lo()||ht(!1);let{navigator:i}=E.useContext(ai),{matches:o}=E.useContext(Cn),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=bu(),h;if(e){var f;let C=typeof e=="string"?co(e):e;u==="/"||(f=C.pathname)!=null&&f.startsWith(u)||ht(!1),h=C}else h=d;let v=h.pathname||"/",g=v;if(u!=="/"){let C=u.replace(/^\//,"").split("/");g="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=Jk(t,{pathname:g}),b=T4(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:ei([u,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:ei([u,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,r,n);return e&&b?E.createElement(Oh.Provider,{value:{location:cu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Zn.Pop}},b):b}function P4(){let t=j4(),e=m4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:i},r):null,null)}const _4=E.createElement(P4,null);class R4 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?E.createElement(Cn.Provider,{value:this.props.routeContext},E.createElement(ZR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E4(t){let{routeContext:e,match:r,children:n}=t,i=E.useContext(Xm);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),E.createElement(Cn.Provider,{value:e},n)}function T4(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,c=(i=r)==null?void 0:i.errors;if(c!=null){let h=a.findIndex(f=>f.route.id&&c?.[f.route.id]!==void 0);h>=0||ht(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:v,errors:g}=r,w=f.route.loader&&v[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,v)=>{let g,w=!1,b=null,C=null;r&&(g=c&&f.route.id?c[f.route.id]:void 0,b=f.route.errorElement||_4,u&&(d<0&&v===0?(N4("route-fallback"),w=!0,C=null):d===v&&(w=!0,C=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,v+1)),R=()=>{let _;return g?_=b:w?_=C:f.route.Component?_=E.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,E.createElement(E4,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:_})};return r&&(f.route.ErrorBoundary||f.route.errorElement||v===0)?E.createElement(R4,{location:r.location,revalidation:r.revalidation,component:b,error:g,children:R(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):R()},null)}var rE=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(rE||{}),nE=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(nE||{});function A4(t){let e=E.useContext(Xm);return e||ht(!1),e}function I4(t){let e=E.useContext(S4);return e||ht(!1),e}function k4(t){let e=E.useContext(Cn);return e||ht(!1),e}function iE(t){let e=k4(),r=e.matches[e.matches.length-1];return r.route.id||ht(!1),r.route.id}function j4(){var t;let e=E.useContext(ZR),r=I4(),n=iE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function O4(){let{router:t}=A4(rE.UseNavigateStable),e=iE(nE.UseNavigateStable),r=E.useRef(!1);return eE(()=>{r.current=!0}),E.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cu({fromRouteId:e},o)))},[t,e])}const $w={};function N4(t,e,r){$w[t]||($w[t]=!0)}function M4(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Gl(t){let{to:e,replace:r,state:n,relative:i}=t;lo()||ht(!1);let{future:o,static:a}=E.useContext(ai),{matches:c}=E.useContext(Cn),{pathname:u}=bu(),d=We(),h=Ym(e,Qm(c,o.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(h);return E.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:i}),[d,f,i,r,n]),null}function Ue(t){ht(!1)}function D4(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Zn.Pop,navigator:o,static:a=!1,future:c}=t;lo()&&ht(!1);let u=e.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:u,navigator:o,static:a,future:cu({v7_relativeSplatPath:!1},c)}),[u,c,o,a]);typeof n=="string"&&(n=co(n));let{pathname:h="/",search:f="",hash:v="",state:g=null,key:w="default"}=n,b=E.useMemo(()=>{let C=Jm(h,u);return C==null?null:{location:{pathname:C,search:f,hash:v,state:g,key:w},navigationType:i}},[u,h,f,v,g,w,i]);return b==null?null:E.createElement(ai.Provider,{value:d},E.createElement(Oh.Provider,{children:r,value:b}))}function L4(t){let{children:e,location:r}=t;return b4(Yg(e),r)}new Promise(()=>{});function Yg(t,e){e===void 0&&(e=[]);let r=[];return E.Children.forEach(t,(n,i)=>{if(!E.isValidElement(n))return;let o=[...e,i];if(n.type===E.Fragment){r.push.apply(r,Yg(n.props.children,o));return}n.type!==Ue&&ht(!1),!n.props.index||!n.props.children||ht(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Yg(n.props.children,o)),r.push(a)}),r}function Xg(){return Xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xg.apply(this,arguments)}function z4(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function B4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function F4(t,e){return t.button===0&&(!e||e==="_self")&&!B4(t)}const q4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],U4="6";try{window.__reactRouterVersion=U4}catch{}const V4="startTransition",Jw=Bk[V4];function W4(t){let{basename:e,children:r,future:n,window:i}=t,o=E.useRef();o.current==null&&(o.current=Kk({window:i,v5Compat:!0}));let a=o.current,[c,u]=E.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},h=E.useCallback(f=>{d&&Jw?Jw(()=>u(f)):u(f)},[u,d]);return E.useLayoutEffect(()=>a.listen(h),[a,h]),E.useEffect(()=>M4(n),[n]),E.createElement(D4,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:a,future:n})}const H4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sE=E.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,v=z4(e,q4),{basename:g}=E.useContext(ai),w,b=!1;if(typeof d=="string"&&K4.test(d)&&(w=d,H4))try{let _=new URL(window.location.href),I=d.startsWith("//")?new URL(_.protocol+d):new URL(d),k=Jm(I.pathname,g);I.origin===_.origin&&k!=null?d=k+I.search+I.hash:b=!0}catch{}let C=w4(d,{relative:i}),x=G4(d,{replace:a,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:f});function R(_){n&&n(_),_.defaultPrevented||x(_)}return E.createElement("a",Xg({},v,{href:w||C,onClick:b||o?n:R,ref:r,target:u}))});var Qw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qw||(Qw={}));var Yw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yw||(Yw={}));function G4(t,e){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,u=We(),d=bu(),h=tE(t,{relative:a});return E.useCallback(f=>{if(F4(f,r)){f.preventDefault();let v=n!==void 0?n:dh(d)===dh(h);u(t,{replace:v,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[d,u,h,n,i,r,t,o,a,c])}var tv={exports:{}},rv={};var Xw;function $4(){if(Xw)return rv;Xw=1;var t=jh();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return rv.useSyncExternalStoreWithSelector=function(u,d,h,f,v){var g=i(null);if(g.current===null){var w={hasValue:!1,value:null};g.current=w}else w=g.current;g=a(function(){function C(k){if(!x){if(x=!0,R=k,k=f(k),v!==void 0&&w.hasValue){var M=w.value;if(v(M,k))return _=M}return _=k}if(M=_,r(R,k))return M;var B=f(k);return v!==void 0&&v(M,B)?(R=k,M):(R=k,_=B)}var x=!1,R,_,I=h===void 0?null:h;return[function(){return C(d())},I===null?void 0:function(){return C(I())}]},[d,h,f,v]);var b=n(u,g[0],g[1]);return o(function(){w.hasValue=!0,w.value=b},[b]),c(b),b},rv}var Zw;function J4(){return Zw||(Zw=1,tv.exports=$4()),tv.exports}var Q4=J4();function Y4(t){t()}function X4(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Y4(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var eC={notify(){},get:()=>[]};function Z4(t,e){let r,n=eC,i=0,o=!1;function a(b){h();const C=n.subscribe(b);let x=!1;return()=>{x||(x=!0,C(),f())}}function c(){n.notify()}function u(){w.onStateChange&&w.onStateChange()}function d(){return o}function h(){i++,r||(r=t.subscribe(u),n=X4())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=eC)}function v(){o||(o=!0,h())}function g(){o&&(o=!1,f())}const w={addNestedSub:a,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:d,trySubscribe:v,tryUnsubscribe:g,getListeners:()=>n};return w}var ej=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tj=ej(),rj=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nj=rj(),ij=()=>tj||nj?E.useLayoutEffect:E.useEffect,sj=ij(),oj=Symbol.for("react-redux-context"),aj=typeof globalThis<"u"?globalThis:{};function cj(){if(!E.createContext)return{};const t=aj[oj]??=new Map;let e=t.get(E.createContext);return e||(e=E.createContext(null),t.set(E.createContext,e)),e}var ni=cj();function lj(t){const{children:e,context:r,serverState:n,store:i}=t,o=E.useMemo(()=>{const u=Z4(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),a=E.useMemo(()=>i.getState(),[i]);sj(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const c=r||ni;return E.createElement(c.Provider,{value:o},e)}var uj=lj;function Zm(t=ni){return function(){return E.useContext(t)}}var oE=Zm();function aE(t=ni){const e=t===ni?oE:Zm(t),r=()=>{const{store:n}=e();return n};return Object.assign(r,{withTypes:()=>r}),r}var dj=aE();function hj(t=ni){const e=t===ni?dj:aE(t),r=()=>e().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var Nh=hj(),pj=(t,e)=>t===e;function fj(t=ni){const e=t===ni?oE:Zm(t),r=(n,i={})=>{const{equalityFn:o=pj}=typeof i=="function"?{equalityFn:i}:i,a=e(),{store:c,subscription:u,getServerState:d}=a;E.useRef(!0);const h=E.useCallback({[n.name](v){return n(v)}}[n.name],[n]),f=Q4.useSyncExternalStoreWithSelector(u.addNestedSub,c.getState,d||c.getState,h,o);return E.useDebugValue(f),f};return Object.assign(r,{withTypes:()=>r}),r}var io=fj();function At(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var vj=typeof Symbol=="function"&&Symbol.observable||"@@observable",tC=vj,nv=()=>Math.random().toString(36).substring(7).split("").join("."),gj={INIT:`@@redux/INIT${nv()}`,REPLACE:`@@redux/REPLACE${nv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nv()}`},hh=gj;function ey(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function cE(t,e,r){if(typeof t!="function")throw new Error(At(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(At(1));return r(cE)(t,e)}let n=t,i=e,o=new Map,a=o,c=0,u=!1;function d(){a===o&&(a=new Map,o.forEach((C,x)=>{a.set(x,C)}))}function h(){if(u)throw new Error(At(3));return i}function f(C){if(typeof C!="function")throw new Error(At(4));if(u)throw new Error(At(5));let x=!0;d();const R=c++;return a.set(R,C),function(){if(x){if(u)throw new Error(At(6));x=!1,d(),a.delete(R),o=null}}}function v(C){if(!ey(C))throw new Error(At(7));if(typeof C.type>"u")throw new Error(At(8));if(typeof C.type!="string")throw new Error(At(17));if(u)throw new Error(At(9));try{u=!0,i=n(i,C)}finally{u=!1}return(o=a).forEach(R=>{R()}),C}function g(C){if(typeof C!="function")throw new Error(At(10));n=C,v({type:hh.REPLACE})}function w(){const C=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(At(11));function R(){const I=x;I.next&&I.next(h())}return R(),{unsubscribe:C(R)}},[tC](){return this}}}return v({type:hh.INIT}),{dispatch:v,subscribe:f,getState:h,replaceReducer:g,[tC]:w}}function mj(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:hh.INIT})>"u")throw new Error(At(12));if(typeof r(void 0,{type:hh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function yj(t){const e=Object.keys(t),r={};for(let o=0;o<e.length;o++){const a=e[o];typeof t[a]=="function"&&(r[a]=t[a])}const n=Object.keys(r);let i;try{mj(r)}catch(o){i=o}return function(a={},c){if(i)throw i;let u=!1;const d={};for(let h=0;h<n.length;h++){const f=n[h],v=r[f],g=a[f],w=v(g,c);if(typeof w>"u")throw c&&c.type,new Error(At(14));d[f]=w,u=u||w!==g}return u=u||n.length!==Object.keys(a).length,u?d:a}}function ph(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Sj(...t){return e=>(r,n)=>{const i=e(r,n);let o=()=>{throw new Error(At(15))};const a={getState:i.getState,dispatch:(u,...d)=>o(u,...d)},c=t.map(u=>u(a));return o=ph(...c)(i.dispatch),{...i,dispatch:o}}}function wj(t){return ey(t)&&"type"in t&&typeof t.type=="string"}var lE=Symbol.for("immer-nothing"),rC=Symbol.for("immer-draftable"),qt=Symbol.for("immer-state");function Lr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var cr=Object,so=cr.getPrototypeOf,fh="constructor",Mh="prototype",Zg="configurable",vh="enumerable",ih="writable",lu="value",yn=t=>!!t&&!!t[qt];function zr(t){return t?uE(t)||Lh(t)||!!t[rC]||!!t[fh]?.[rC]||zh(t)||Bh(t):!1}var Cj=cr[Mh][fh].toString(),nC=new WeakMap;function uE(t){if(!t||!ty(t))return!1;const e=so(t);if(e===null||e===cr[Mh])return!0;const r=cr.hasOwnProperty.call(e,fh)&&e[fh];if(r===Object)return!0;if(!$s(r))return!1;let n=nC.get(r);return n===void 0&&(n=Function.toString.call(r),nC.set(r,n)),n===Cj}function Dh(t,e,r=!0){xu(t)===0?(r?Reflect.ownKeys(t):cr.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((n,i)=>e(i,n,t))}function xu(t){const e=t[qt];return e?e.type_:Lh(t)?1:zh(t)?2:Bh(t)?3:0}var iC=(t,e,r=xu(t))=>r===2?t.has(e):cr[Mh].hasOwnProperty.call(t,e),em=(t,e,r=xu(t))=>r===2?t.get(e):t[e],gh=(t,e,r,n=xu(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function bj(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Lh=Array.isArray,zh=t=>t instanceof Map,Bh=t=>t instanceof Set,ty=t=>typeof t=="object",$s=t=>typeof t=="function",iv=t=>typeof t=="boolean";function xj(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var pn=t=>t.copy_||t.base_,ry=t=>t.modified_?t.copy_:t.base_;function tm(t,e){if(zh(t))return new Map(t);if(Bh(t))return new Set(t);if(Lh(t))return Array[Mh].slice.call(t);const r=uE(t);if(e===!0||e==="class_only"&&!r){const n=cr.getOwnPropertyDescriptors(t);delete n[qt];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const a=i[o],c=n[a];c[ih]===!1&&(c[ih]=!0,c[Zg]=!0),(c.get||c.set)&&(n[a]={[Zg]:!0,[ih]:!0,[vh]:c[vh],[lu]:t[a]})}return cr.create(so(t),n)}else{const n=so(t);if(n!==null&&r)return{...t};const i=cr.create(n);return cr.assign(i,t)}}function ny(t,e=!1){return Fh(t)||yn(t)||!zr(t)||(xu(t)>1&&cr.defineProperties(t,{set:Vd,add:Vd,clear:Vd,delete:Vd}),cr.freeze(t),e&&Dh(t,(r,n)=>{ny(n,!0)},!1)),t}function Pj(){Lr(2)}var Vd={[lu]:Pj};function Fh(t){return t===null||!ty(t)?!0:cr.isFrozen(t)}var mh="MapSet",rm="Patches",sC="ArrayMethods",dE={};function cs(t){const e=dE[t];return e||Lr(0,t),e}var oC=t=>!!dE[t],uu,hE=()=>uu,_j=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:oC(mh)?cs(mh):void 0,arrayMethodsPlugin_:oC(sC)?cs(sC):void 0});function aC(t,e){e&&(t.patchPlugin_=cs(rm),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function nm(t){im(t),t.drafts_.forEach(Rj),t.drafts_=null}function im(t){t===uu&&(uu=t.parent_)}var cC=t=>uu=_j(uu,t);function Rj(t){const e=t[qt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function lC(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[qt].modified_&&(nm(e),Lr(4)),zr(t)&&(t=uC(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(r[qt].base_,t,e)}else t=uC(e,r);return Ej(e,t,!0),nm(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==lE?t:void 0}function uC(t,e){if(Fh(e))return e;const r=e[qt];if(!r)return yh(e,t.handledSet_,t);if(!qh(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);vE(r,t)}return r.copy_}function Ej(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ny(e,r)}function pE(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var qh=(t,e)=>t.scope_===e,Tj=[];function fE(t,e,r,n){const i=pn(t),o=t.type_;if(n!==void 0&&em(i,n,o)===e){gh(i,n,r,o);return}if(!t.draftLocations_){const c=t.draftLocations_=new Map;Dh(i,(u,d)=>{if(yn(d)){const h=c.get(d)||[];h.push(u),c.set(d,h)}})}const a=t.draftLocations_.get(e)??Tj;for(const c of a)gh(i,c,r,o)}function Aj(t,e,r){t.callbacks_.push(function(i){const o=e;if(!o||!qh(o,i))return;i.mapSetPlugin_?.fixSetContents(o);const a=ry(o);fE(t,o.draft_??o,a,r),vE(o,i)})}function vE(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:n}=e;if(n){const i=n.getPath(t);i&&n.generatePatches_(t,i,e)}pE(t)}}function Ij(t,e,r){const{scope_:n}=t;if(yn(r)){const i=r[qt];qh(i,n)&&i.callbacks_.push(function(){sh(t);const a=ry(i);fE(t,r,a,e)})}else zr(r)&&t.callbacks_.push(function(){const o=pn(t);t.type_===3?o.has(r)&&yh(r,n.handledSet_,n):em(o,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&yh(em(t.copy_,e,t.type_),n.handledSet_,n)})}function yh(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||yn(t)||e.has(t)||!zr(t)||Fh(t)||(e.add(t),Dh(t,(n,i)=>{if(yn(i)){const o=i[qt];if(qh(o,r)){const a=ry(o);gh(t,n,a,t.type_),pE(o)}}else zr(i)&&yh(i,e,r)})),t}function kj(t,e){const r=Lh(t),n={type_:r?1:0,scope_:e?e.scope_:hE(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,o=Sh;r&&(i=[n],o=du);const{revoke:a,proxy:c}=Proxy.revocable(i,o);return n.draft_=c,n.revoke_=a,[c,n]}var Sh={get(t,e){if(e===qt)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r?.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const i=pn(t);if(!iC(i,e,t.type_))return jj(t,i,e);const o=i[e];if(t.finalized_||!zr(o)||n&&t.operationMethod&&r?.isMutatingArrayMethod(t.operationMethod)&&xj(e))return o;if(o===sv(t.base_,e)){sh(t);const a=t.type_===1?+e:e,c=om(t.scope_,o,t,a);return t.copy_[a]=c}return o},has(t,e){return e in pn(t)},ownKeys(t){return Reflect.ownKeys(pn(t))},set(t,e,r){const n=gE(pn(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=sv(pn(t),e),o=i?.[qt];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(bj(r,i)&&(r!==void 0||iC(t.base_,e,t.type_)))return!0;sh(t),sm(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),Ij(t,e,r)),!0},deleteProperty(t,e){return sh(t),sv(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),sm(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=pn(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[ih]:!0,[Zg]:t.type_!==1||e!=="length",[vh]:n[vh],[lu]:r[e]}},defineProperty(){Lr(11)},getPrototypeOf(t){return so(t.base_)},setPrototypeOf(){Lr(12)}},du={};for(let t in Sh){let e=Sh[t];du[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}du.deleteProperty=function(t,e){return du.set.call(this,t,e,void 0)};du.set=function(t,e,r){return Sh.set.call(this,t[0],e,r,t[0])};function sv(t,e){const r=t[qt];return(r?pn(r):t)[e]}function jj(t,e,r){const n=gE(e,r);return n?lu in n?n[lu]:n.get?.call(t.draft_):void 0}function gE(t,e){if(!(e in t))return;let r=so(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=so(r)}}function sm(t){t.modified_||(t.modified_=!0,t.parent_&&sm(t.parent_))}function sh(t){t.copy_||(t.assigned_=new Map,t.copy_=tm(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Oj=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,r,n)=>{if($s(e)&&!$s(r)){const o=r;r=e;const a=this;return function(u=o,...d){return a.produce(u,h=>r.call(this,h,...d))}}$s(r)||Lr(6),n!==void 0&&!$s(n)&&Lr(7);let i;if(zr(e)){const o=cC(this),a=om(o,e,void 0);let c=!0;try{i=r(a),c=!1}finally{c?nm(o):im(o)}return aC(o,n),lC(i,o)}else if(!e||!ty(e)){if(i=r(e),i===void 0&&(i=e),i===lE&&(i=void 0),this.autoFreeze_&&ny(i,!0),n){const o=[],a=[];cs(rm).generateReplacementPatches_(e,i,{patches_:o,inversePatches_:a}),n(o,a)}return i}else Lr(1,e)},this.produceWithPatches=(e,r)=>{if($s(e))return(a,...c)=>this.produceWithPatches(a,u=>e(u,...c));let n,i;return[this.produce(e,r,(a,c)=>{n=a,i=c}),n,i]},iv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),iv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),iv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){zr(t)||Lr(8),yn(t)&&(t=Nj(t));const e=cC(this),r=om(e,t,void 0);return r[qt].isManual_=!0,im(e),r}finishDraft(t,e){const r=t&&t[qt];(!r||!r.isManual_)&&Lr(9);const{scope_:n}=r;return aC(n,e),lC(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=cs(rm).applyPatches_;return yn(t)?n(t,e):this.produce(t,i=>n(i,e))}};function om(t,e,r,n){const[i,o]=zh(e)?cs(mh).proxyMap_(e,r):Bh(e)?cs(mh).proxySet_(e,r):kj(e,r);return(r?.scope_??hE()).drafts_.push(i),o.callbacks_=r?.callbacks_??[],o.key_=n,r&&n!==void 0?Aj(r,o,n):o.callbacks_.push(function(u){u.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:d}=u;o.modified_&&d&&d.generatePatches_(o,[],u)}),i}function Nj(t){return yn(t)||Lr(10,t),mE(t)}function mE(t){if(!zr(t)||Fh(t))return t;const e=t[qt];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=tm(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=tm(t,!0);return Dh(r,(i,o)=>{gh(r,i,mE(o))},n),e&&(e.finalized_=!1),r}var Mj=new Oj,yE=Mj.produce;function SE(t){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,t):i(o)}var Dj=SE(),Lj=SE,zj=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ph:ph.apply(null,arguments)},Bj=t=>t&&typeof t.match=="function";function Xl(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(vn(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>wj(n)&&n.type===t,r}var wE=class $l extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$l.prototype)}static get[Symbol.species](){return $l}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $l(...e[0].concat(this)):new $l(...e.concat(this))}};function dC(t){return zr(t)?yE(t,()=>{}):t}function Wd(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Fj(t){return typeof t=="boolean"}var qj=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let a=new wE;return r&&(Fj(r)?a.push(Dj):a.push(Lj(r.extraArgument))),a},Uj="RTK_autoBatch",hC=t=>e=>{setTimeout(e,t)},Vj=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,o=!1,a=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hC(10):t.type==="callback"?t.queueNotification:hC(t.timeout),d=()=>{a=!1,o&&(o=!1,c.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const f=()=>i&&h(),v=n.subscribe(f);return c.add(h),()=>{v(),c.delete(h)}},dispatch(h){try{return i=!h?.meta?.[Uj],o=!i,o&&(a||(a=!0,u(d))),n.dispatch(h)}finally{i=!0}}})},Wj=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new wE(t);return n&&i.push(Vj(typeof n=="object"?n:void 0)),i};function Hj(t){const e=qj(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=t||{};let c;if(typeof r=="function")c=r;else if(ey(r))c=yj(r);else throw new Error(vn(1));let u;typeof n=="function"?u=n(e):u=e();let d=ph;i&&(d=zj({trace:!1,...typeof i=="object"&&i}));const h=Sj(...u),f=Wj(h);let v=typeof a=="function"?a(f):f();const g=d(...v);return cE(c,o,g)}function CE(t){const e={},r=[];let n;const i={addCase(o,a){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(vn(28));if(c in e)throw new Error(vn(29));return e[c]=a,i},addAsyncThunk(o,a){return a.pending&&(e[o.pending.type]=a.pending),a.rejected&&(e[o.rejected.type]=a.rejected),a.fulfilled&&(e[o.fulfilled.type]=a.fulfilled),a.settled&&r.push({matcher:o.settled,reducer:a.settled}),i},addMatcher(o,a){return r.push({matcher:o,reducer:a}),i},addDefaultCase(o){return n=o,i}};return t(i),[e,r,n]}function Kj(t){return typeof t=="function"}function Gj(t,e){let[r,n,i]=CE(e),o;if(Kj(t))o=()=>dC(t());else{const c=dC(t);o=()=>c}function a(c=o(),u){let d=[r[u.type],...n.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,f)=>{if(f)if(yn(h)){const g=f(h,u);return g===void 0?h:g}else{if(zr(h))return yE(h,v=>f(v,u));{const v=f(h,u);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},c)}return a.getInitialState=o,a}var $j=(t,e)=>Bj(t)?t.match(e):t(e);function Jj(...t){return e=>t.some(r=>$j(r,e))}var Qj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Yj=(t=21)=>{let e="",r=t;for(;r--;)e+=Qj[Math.random()*64|0];return e},Xj=["name","message","stack","code"],ov=class{constructor(t,e){this.payload=t,this.meta=e}_type},pC=class{constructor(t,e){this.payload=t,this.meta=e}_type},Zj=t=>{if(typeof t=="object"&&t!==null){const e={};for(const r of Xj)typeof t[r]=="string"&&(e[r]=t[r]);return e}return{message:String(t)}},fC="External signal was aborted",bE=(()=>{function t(e,r,n){const i=Xl(e+"/fulfilled",(u,d,h,f)=>({payload:u,meta:{...f||{},arg:h,requestId:d,requestStatus:"fulfilled"}})),o=Xl(e+"/pending",(u,d,h)=>({payload:void 0,meta:{...h||{},arg:d,requestId:u,requestStatus:"pending"}})),a=Xl(e+"/rejected",(u,d,h,f,v)=>({payload:f,error:(n&&n.serializeError||Zj)(u||"Rejected"),meta:{...v||{},arg:h,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"}}));function c(u,{signal:d}={}){return(h,f,v)=>{const g=n?.idGenerator?n.idGenerator(u):Yj(),w=new AbortController;let b,C;function x(_){C=_,w.abort()}d&&(d.aborted?x(fC):d.addEventListener("abort",()=>x(fC),{once:!0}));const R=(async function(){let _;try{let k=n?.condition?.(u,{getState:f,extra:v});if(tO(k)&&(k=await k),k===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const M=new Promise((B,O)=>{b=()=>{O({name:"AbortError",message:C||"Aborted"})},w.signal.addEventListener("abort",b,{once:!0})});h(o(g,u,n?.getPendingMeta?.({requestId:g,arg:u},{getState:f,extra:v}))),_=await Promise.race([M,Promise.resolve(r(u,{dispatch:h,getState:f,extra:v,requestId:g,signal:w.signal,abort:x,rejectWithValue:(B,O)=>new ov(B,O),fulfillWithValue:(B,O)=>new pC(B,O)})).then(B=>{if(B instanceof ov)throw B;return B instanceof pC?i(B.payload,g,u,B.meta):i(B,g,u)})])}catch(k){_=k instanceof ov?a(null,g,u,k.payload,k.meta):a(k,g,u)}finally{b&&w.signal.removeEventListener("abort",b)}return n&&!n.dispatchConditionRejection&&a.match(_)&&_.meta.condition||h(_),_})();return Object.assign(R,{abort:x,requestId:g,arg:u,unwrap(){return R.then(eO)}})}}return Object.assign(c,{pending:o,rejected:a,fulfilled:i,settled:Jj(a,i),typePrefix:e})}return t.withTypes=()=>t,t})();function eO(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function tO(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var rO=Symbol.for("rtk-slice-createasyncthunk");function nO(t,e){return`${t}/${e}`}function iO({creators:t}={}){const e=t?.asyncThunk?.[rO];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(vn(11));const a=(typeof n.reducers=="function"?n.reducers(aO()):n.reducers)||{},c=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,I){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(vn(12));if(k in u.sliceCaseReducersByType)throw new Error(vn(13));return u.sliceCaseReducersByType[k]=I,d},addMatcher(_,I){return u.sliceMatchers.push({matcher:_,reducer:I}),d},exposeAction(_,I){return u.actionCreators[_]=I,d},exposeCaseReducer(_,I){return u.sliceCaseReducersByName[_]=I,d}};c.forEach(_=>{const I=a[_],k={reducerName:_,type:nO(i,_),createNotation:typeof n.reducers=="function"};lO(I)?dO(k,I,d,e):cO(k,I,d)});function h(){const[_={},I=[],k=void 0]=typeof n.extraReducers=="function"?CE(n.extraReducers):[n.extraReducers],M={..._,...u.sliceCaseReducersByType};return Gj(n.initialState,B=>{for(let O in M)B.addCase(O,M[O]);for(let O of u.sliceMatchers)B.addMatcher(O.matcher,O.reducer);for(let O of I)B.addMatcher(O.matcher,O.reducer);k&&B.addDefaultCase(k)})}const f=_=>_,v=new Map,g=new WeakMap;let w;function b(_,I){return w||(w=h()),w(_,I)}function C(){return w||(w=h()),w.getInitialState()}function x(_,I=!1){function k(B){let O=B[_];return typeof O>"u"&&I&&(O=Wd(g,k,C)),O}function M(B=f){const O=Wd(v,I,()=>new WeakMap);return Wd(O,B,()=>{const D={};for(const[U,L]of Object.entries(n.selectors??{}))D[U]=sO(L,B,()=>Wd(g,B,C),I);return D})}return{reducerPath:_,getSelectors:M,get selectors(){return M(k)},selectSlice:k}}const R={name:i,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:C,...x(o),injectInto(_,{reducerPath:I,...k}={}){const M=I??o;return _.inject({reducerPath:M,reducer:b},k),{...R,...x(M,!0)}}};return R}}function sO(t,e,r,n){function i(o,...a){let c=e(o);return typeof c>"u"&&n&&(c=r()),t(c,...a)}return i.unwrapped=t,i}var oO=iO();function aO(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function cO({type:t,reducerName:e,createNotation:r},n,i){let o,a;if("reducer"in n){if(r&&!uO(n))throw new Error(vn(17));o=n.reducer,a=n.prepare}else o=n;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,a?Xl(t,a):Xl(t))}function lO(t){return t._reducerDefinitionType==="asyncThunk"}function uO(t){return t._reducerDefinitionType==="reducerWithPrepare"}function dO({type:t,reducerName:e},r,n,i){if(!i)throw new Error(vn(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:u,settled:d,options:h}=r,f=i(t,o,h);n.exposeAction(e,f),a&&n.addCase(f.fulfilled,a),c&&n.addCase(f.pending,c),u&&n.addCase(f.rejected,u),d&&n.addMatcher(f.settled,d),n.exposeCaseReducer(e,{fulfilled:a||Hd,pending:c||Hd,rejected:u||Hd,settled:d||Hd})}function Hd(){}function vn(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function Uh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function hO(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(h){try{d(n.next(h))}catch(f){a(f)}}function u(h){try{d(n.throw(h))}catch(f){a(f)}}function d(h){h.done?o(h.value):i(h.value).then(c,u)}d((n=n.apply(t,e||[])).next())})}const pO=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class iy extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class fO extends iy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vC extends iy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gC extends iy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var am;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(am||(am={}));class vO{constructor(e,{headers:r={},customFetch:n,region:i=am.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=pO(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return hO(this,arguments,void 0,function*(r,n={}){var i;let o,a;try{const{headers:c,method:u,body:d,signal:h,timeout:f}=n;let v={},{region:g}=n;g||(g=this.region);const w=new URL(`${this.url}/${r}`);g&&g!=="any"&&(v["x-region"]=g,w.searchParams.set("forceFunctionRegion",g));let b;d&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",b=d):typeof d=="string"?(v["Content-Type"]="text/plain",b=d):typeof FormData<"u"&&d instanceof FormData?b=d:(v["Content-Type"]="application/json",b=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?b=JSON.stringify(d):b=d;let C=h;f&&(a=new AbortController,o=setTimeout(()=>a.abort(),f),h?(C=a.signal,h.addEventListener("abort",()=>a.abort())):C=a.signal);const x=yield this.fetch(w.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),c),body:b,signal:C}).catch(k=>{throw new fO(k)}),R=x.headers.get("x-relay-error");if(R&&R==="true")throw new vC(x);if(!x.ok)throw new gC(x);let _=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),I;return _==="application/json"?I=yield x.json():_==="application/octet-stream"||_==="application/pdf"?I=yield x.blob():_==="text/event-stream"?I=x:_==="multipart/form-data"?I=yield x.formData():I=yield x.text(),{data:I,error:null,response:x}}catch(c){return{data:null,error:c,response:c instanceof gC||c instanceof vC?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var gO=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},mO=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,c=null,u=null,d=o.status,h=o.statusText;if(o.ok){var f,v;if(r.method!=="HEAD"){var g;const x=await o.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?c=x:c=JSON.parse(x))}const b=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),C=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");b&&C&&C.length>1&&(u=parseInt(C[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(a={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,u=null,d=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var w;const b=await o.text();try{a=JSON.parse(b),Array.isArray(a)&&o.status===404&&(c=[],a=null,d=200,h="OK")}catch{o.status===404&&b===""?(d=204,h="No Content"):a={message:b}}if(a&&r.isMaybeSingle&&(!(a==null||(w=a.details)===null||w===void 0)&&w.includes("0 rows"))&&(a=null,d=200,h="OK"),a&&r.shouldThrowOnError)throw new gO(a)}return{error:a,data:c,count:u,status:d,statusText:h}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let c="";const u=o?.cause;if(u){var d,h,f,v;const w=(d=u?.message)!==null&&d!==void 0?d:"",b=(h=u?.code)!==null&&h!==void 0?h:"";c=`${(f=o?.name)!==null&&f!==void 0?f:"FetchError"}: ${o?.message}`,c+=`

Caused by: ${(v=u?.name)!==null&&v!==void 0?v:"Error"}: ${w}`,b&&(c+=` (${b})`),u?.stack&&(c+=`
${u.stack}`)}else{var g;c=(g=o?.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(a=o?.name)!==null&&a!==void 0?a:"FetchError"}: ${o?.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},yO=class extends mO{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const c=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const mC=new RegExp("[,()]");var Js=class extends yO{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&mC.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&mC.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},SO=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join(""),{url:c,headers:u}=this.cloneRequestState();return c.searchParams.set("select",a),n&&u.append("Prefer",`count=${n}`),new Js({method:i,url:c,headers:u,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST",{url:o,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),r||a.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);o.searchParams.set("columns",u.join(","))}}return new Js({method:i,url:o,headers:a,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var o;const a="POST",{url:c,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),n&&u.append("Prefer",`count=${n}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);c.searchParams.set("columns",h.join(","))}}return new Js({method:a,url:c,headers:u,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Js({method:n,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Js({method:r,url:n,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},wO=class xE{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new SO(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new xE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:o}={}){var a;let c;const u=new URL(`${this.url}/rpc/${e}`);let d;const h=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(h)),f=n&&Object.values(r).some(h);f?(c="POST",d=r):n||i?(c=n?"HEAD":"GET",Object.entries(r).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{u.searchParams.append(g,w)})):(c="POST",d=r);const v=new Headers(this.headers);return f?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new Js({method:c,url:u,headers:v,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class CO{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bO="2.90.1",xO=`realtime-js/${bO}`,PE="1.0.0",PO="2.0.0",yC=PE,cm=1e4,_O=1e3,RO=100;var Qn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Qn||(Qn={}));var St;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(St||(St={}));var Dr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dr||(Dr={}));var lm;(function(t){t.websocket="websocket"})(lm||(lm={}));var ts;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ts||(ts={}));class EO{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var i,o;const a=e.topic,c=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",d=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+c.length+a.length+d.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+v);let w=new DataView(g),b=0;w.setUint8(b++,this.KINDS.userBroadcastPush),w.setUint8(b++,u.length),w.setUint8(b++,c.length),w.setUint8(b++,a.length),w.setUint8(b++,d.length),w.setUint8(b++,f.length),w.setUint8(b++,r),Array.from(u,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(c,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(a,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(d,x=>w.setUint8(b++,x.charCodeAt(0))),Array.from(f,x=>w.setUint8(b++,x.charCodeAt(0)));var C=new Uint8Array(g.byteLength+n.byteLength);return C.set(new Uint8Array(g),0),C.set(new Uint8Array(n),g.byteLength),C.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,o,a,c,u]=n;return r({join_ref:i,ref:o,topic:a,event:c,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,r,i)}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),c=r.getUint8(4);let u=this.HEADER_LENGTH+4;const d=n.decode(e.slice(u,u+i));u=u+i;const h=n.decode(e.slice(u,u+o));u=u+o;const f=n.decode(e.slice(u,u+a));u=u+a;const v=e.slice(u,e.byteLength),g=c===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,w={type:this.BROADCAST_EVENT,event:h,payload:g};return a>0&&(w.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class _E{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ke||(Ke={}));const SC=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=TO(a,t,e,i),o),{}):{}},TO=(t,e,r,n)=>{const i=e.find(c=>c.name===t),o=i?.type,a=r[t];return o&&!n.includes(o)?RE(o,a):um(a)},RE=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return jO(e,r)}switch(t){case Ke.bool:return AO(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return IO(e);case Ke.json:case Ke.jsonb:return kO(e);case Ke.timestamp:return OO(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return um(e);default:return um(e)}},um=t=>t,AO=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},IO=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kO=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},jO=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(c=>RE(e,c))}return t},OO=t=>typeof t=="string"?t.replace(" ","T"):t,EE=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class av{constructor(e,r,n={},i=cm){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wC;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wC||(wC={}));class Zl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zl.syncState(this.state,i,o,a),this.pendingDiffs.forEach(u=>{this.state=Zl.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Zl.syncDiff(this.state,i,o,a),c())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const o=this.cloneDeep(e),a=this.transformState(r),c={},u={};return this.map(o,(d,h)=>{a[d]||(u[d]=h)}),this.map(a,(d,h)=>{const f=o[d];if(f){const v=h.map(C=>C.presence_ref),g=f.map(C=>C.presence_ref),w=h.filter(C=>g.indexOf(C.presence_ref)<0),b=f.filter(C=>v.indexOf(C.presence_ref)<0);w.length>0&&(c[d]=w),b.length>0&&(u[d]=b)}else c[d]=h}),this.syncDiff(o,{joins:c,leaves:u},n,i)}static syncDiff(e,r,n,i){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(c,u)=>{var d;const h=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(u),h.length>0){const f=e[c].map(g=>g.presence_ref),v=h.filter(g=>f.indexOf(g.presence_ref)<0);e[c].unshift(...v)}n(c,h,u)}),this.map(a,(c,u)=>{let d=e[c];if(!d)return;const h=u.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),e[c]=d,i(c,d,u),d.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var CC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(CC||(CC={}));var eu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(eu||(eu={}));var hn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hn||(hn={}));class Xs{constructor(e,r={config:{}},n){var i,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new av(this,Dr.join,this.params,this.timeout),this.rejoinTimer=new _E(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dr.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new Zl(this),this.broadcastEndpointURL=EE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==St.closed){const{config:{broadcast:a,presence:c,private:u}}=this.params,d=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[eu.PRESENCE]&&this.bindings[eu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},v={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e?.(hn.CHANNEL_ERROR,g)),this._onClose(()=>e?.(hn.CLOSED)),this.updateJoinPayload(Object.assign({config:v},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e?.(hn.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,C=(w=b?.length)!==null&&w!==void 0?w:0,x=[];for(let R=0;R<C;R++){const _=b[R],{filter:{event:I,schema:k,table:M,filter:B}}=_,O=g&&g[R];if(O&&O.event===I&&Xs.isFilterValueEqual(O.schema,k)&&Xs.isFilterValueEqual(O.table,M)&&Xs.isFilterValueEqual(O.filter,B))x.push(Object.assign(Object.assign({},_),{id:O.id}));else{this.unsubscribe(),this.state=St.errored,e?.(hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(hn.SUBSCRIBED);return}}).receive("error",g=>{this.state=St.errored,e?.(hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===St.joined&&e===eu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(c.status===202)return{success:!0};let u=c.statusText;try{const d=await c.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,u;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new av(this,Dr.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=St.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(o),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new av(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>RO){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,o;const a=e.toLocaleLowerCase(),{close:c,error:u,leave:d,join:h}=Dr;if(n&&[c,u,d,h].indexOf(a)>=0&&n!==this._joinRef())return;let v=this._onMessage(a,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var w,b,C;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((C=(b=g.filter)===null||b===void 0?void 0:b.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(g=>g.callback(v,n)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var w,b,C,x,R,_,I,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const M=g.id,B=(w=g.filter)===null||w===void 0?void 0:w.event;return M&&((b=r.ids)===null||b===void 0?void 0:b.includes(M))&&(B==="*"||B?.toLocaleLowerCase()===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))&&(!(!((x=g.filter)===null||x===void 0)&&x.table)||g.filter.table===((R=r.data)===null||R===void 0?void 0:R.table))}else{const M=(I=(_=g?.filter)===null||_===void 0?void 0:_.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return M==="*"||M===((k=r?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:b,table:C,commit_timestamp:x,type:R,errors:_}=w;v=Object.assign(Object.assign({},{schema:b,table:C,commit_timestamp:x,eventType:R,new:{},old:{},errors:_}),this._getPayloadRecords(w))}g.callback(v,n)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),o={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Xs.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dr.close,{},e)}_onError(e){this._on(Dr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=SC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=SC(e.columns,e.old_record)),r}}const cv=()=>{},Kd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NO=[1e3,2e3,5e3,1e4],MO=1e4,DO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LO{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cm,this.transport=null,this.heartbeatIntervalMs=Kd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cv,this.ref=0,this.reconnectTimer=null,this.vsn=yC,this.logger=cv,this.conn=null,this.sendBuffer=[],this.serializer=new EO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${lm.websocket}`,this.httpEndpoint=EE(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CO.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qn.connecting:return ts.Connecting;case Qn.open:return ts.Open;case Qn.closing:return ts.Closing;default:return ts.Closed}}isConnected(){return this.connectionState()===ts.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Xs(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${r} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_O,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Kd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:o,ref:a}=r,c=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${n} ${i} ${c}`.trim(),o),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(i,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Qn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qn.open||this.conn.readyState===Qn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([DO],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:xO};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Dr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _E(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,o,a,c,u,d,h,f,v,g;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:cm,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Kd.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:cv,this.vsn=(u=e?.vsn)!==null&&u!==void 0?u:yC,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(w=>NO[w-1]||MO),this.vsn){case PE:this.encode=(h=e?.encode)!==null&&h!==void 0?h:((w,b)=>b(JSON.stringify(w))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:((w,b)=>b(JSON.parse(w)));break;case PO:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var hu=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zO(t,e,r){const n=new URL(e,t);if(r)for(const[i,o]of Object.entries(r))o!==void 0&&n.searchParams.set(i,o);return n.toString()}async function BO(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function FO(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:o,headers:a}){const c=zO(t.baseUrl,n,i),u=await BO(t.auth),d=await e(c,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),h=await d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),v=f&&h?JSON.parse(h):h;if(!d.ok){const g=f?v:void 0,w=g?.error;throw new hu(w?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:w?.type,icebergCode:w?.code,details:g})}return{status:d.status,headers:d.headers,data:v}}}}function Gd(t){return t.join("")}var qO=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Gd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gd(t.namespace)}`}),!0}catch(e){if(e instanceof hu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof hu&&r.status===409)return;throw r}}};function Fs(t){return t.join("")}var UO=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fs(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fs(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof hu&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof hu&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},VO=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=FO({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new qO(this.client,e),this.tableOps=new UO(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Vh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function it(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var WO=class extends Vh{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dm=class extends Vh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const sy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HO=()=>Response,hm=t=>{if(Array.isArray(t))return t.map(r=>hm(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=hm(n)}),e},KO=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},GO=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function $O(t,e){if(pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JO(t){var e=$O(t,"string");return pu(e)=="symbol"?e:e+""}function QO(t,e,r){return(e=JO(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bC(Object(r),!0).forEach(function(n){QO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const lv=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},YO=async(t,e,r)=>{t instanceof await HO()&&!r?.noResolveJson?t.json().then(n=>{const i=t.status||500,o=n?.statusCode||i+"";e(new WO(lv(n),i,o))}).catch(n=>{e(new dm(lv(n),n))}):e(new dm(lv(t),t))},XO=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!n?i:(KO(n)?(i.headers=_e({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,e?.duplex&&(i.duplex=e.duplex),_e(_e({},i),r))};async function Pu(t,e,r,n,i,o){return new Promise((a,c)=>{t(r,XO(e,n,i,o)).then(u=>{if(!u.ok)throw u;return n?.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>YO(u,c,n))})}async function fu(t,e,r,n){return Pu(t,"GET",e,r,n)}async function Mr(t,e,r,n,i){return Pu(t,"POST",e,n,i,r)}async function pm(t,e,r,n,i){return Pu(t,"PUT",e,n,i,r)}async function ZO(t,e,r,n){return Pu(t,"HEAD",e,_e(_e({},r),{},{noResolveJson:!0}),n)}async function oy(t,e,r,n,i){return Pu(t,"DELETE",e,n,i,r)}var eN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}}};let TE;TE=Symbol.toStringTag;var tN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[TE]="BlobDownloadBuilder",this.promise=null}asStream(){return new eN(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(it(e))return{data:null,error:e};throw e}}};const rN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nN=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=sy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var i=this;try{let o;const a=_e(_e({},xC),n);let c=_e(_e({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,u&&(c["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),n?.headers&&(c=_e(_e({},c),n.headers));const d=i._removeEmptyFolders(e),h=i._getFinalPath(d),f=await(t=="PUT"?pm:Mr)(i.fetch,`${i.url}/object/${h}`,o,_e({headers:c},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(it(o))return{data:null,error:o};throw o}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),c=new URL(i.url+`/object/upload/sign/${a}`);c.searchParams.set("token",e);try{let u;const d=_e({upsert:xC.upsert},n),h=_e(_e({},i.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType),{data:{path:o,fullPath:(await pm(i.fetch,c.toString(),u,{headers:h})).Key},error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(it(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const i=_e({},r.headers);e?.upsert&&(i["x-upsert"]="true");const o=await Mr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(r.url+o.url),c=a.searchParams.get("token");if(!c)throw new Vh("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:c},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Mr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}}async copy(t,e,r){var n=this;try{return{data:{path:(await Mr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,r){var n=this;try{let i=n._getFinalPath(t),o=await Mr(n.fetch,`${n.url}/object/sign/${i}`,_e({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${n.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,r){var n=this;try{const i=await Mr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>_e(_e({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}}download(t,e){const r=typeof e?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(e?.transform||{}),i=n?`?${n}`:"",o=this._getFinalPath(t),a=()=>fu(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new tN(a,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:hm(await fu(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await ZO(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(it(n)&&n instanceof dm){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const o=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&n.push(a);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}async remove(t){var e=this;try{return{data:await oy(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const i=_e(_e(_e({},rN),e),{},{prefix:t||""});return{data:await Mr(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(it(i))return{data:null,error:i};throw i}}async listV2(t,e){var r=this;try{const n=_e({},t);return{data:await Mr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const AE="2.90.1",IE={"X-Client-Info":`storage-js/${AE}`};var iN=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=_e(_e({},IE),e),this.fetch=sy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await fu(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await fu(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Mr(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await pm(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(it(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Mr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await oy(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},sN=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_e(_e({},IE),e),this.fetch=sy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Mr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await fu(e.fetch,i,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await oy(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(it(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!GO(t))throw new Vh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new VO({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...c)=>{try{return{data:await a.apply(i,c),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}};const ay={"X-Client-Info":`storage-js/${AE}`,"Content-Type":"application/json"};var kE=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function or(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var uv=class extends kE{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},oN=class extends kE{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const cy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},PC=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cN=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||n+"";e(new uv(PC(o),n,a))}).catch(()=>{const o=n+"";e(new uv(i.statusText||`HTTP ${n} error`,n,o))});else{const o=n+"";e(new uv(i.statusText||`HTTP ${n} error`,n,o))}}else e(new oN(PC(t),t))},lN=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return n?(aN(n)?(i.headers=_e({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(n)):i.body=n,_e(_e({},i),r)):i};async function uN(t,e,r,n,i,o){return new Promise((a,c)=>{t(r,lN(e,n,i,o)).then(u=>{if(!u.ok)throw u;if(n?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>cN(u,c,n))})}async function ar(t,e,r,n,i){return uN(t,"POST",e,n,i,r)}var dN=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_e(_e({},ay),e),this.fetch=cy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await ar(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await ar(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}}},hN=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_e(_e({},ay),e),this.fetch=cy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ar(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ar(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ar(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}},pN=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=_e(_e({},ay),e),this.fetch=cy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await ar(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await ar(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}},fN=class extends pN{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new vN(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},vN=class extends dN{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new gN(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},gN=class extends hN{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,_e(_e({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},mN=class extends iN{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new nN(this.url,this.headers,t,this.fetch)}get vectors(){return new fN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sN(this.url+"/iceberg",this.headers,this.fetch)}};const jE="2.90.1",Qs=30*1e3,fm=3,dv=fm*Qs,yN="http://localhost:9999",SN="supabase.auth.token",wN={"X-Client-Info":`gotrue-js/${jE}`},vm="X-Supabase-Api-Version",OE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bN=600*1e3;class vu extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class xN extends vu{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function PN(t){return Se(t)&&t.name==="AuthApiError"}class rs extends vu{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class bn extends vu{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class sr extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _N(t){return Se(t)&&t.name==="AuthSessionMissingError"}class qs extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $d extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jd extends bn{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function RN(t){return Se(t)&&t.name==="AuthImplicitGrantRedirectError"}class _C extends bn{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class EN extends bn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class gm extends bn{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function hv(t){return Se(t)&&t.name==="AuthRetryableFetchError"}class RC extends bn{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class mm extends bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),EC=` 	
\r=`.split(""),TN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<EC.length;e+=1)t[EC[e].charCodeAt(0)]=-2;for(let e=0;e<wh.length;e+=1)t[wh[e].charCodeAt(0)]=e;return t})();function TC(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(wh[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(wh[n]),e.queuedBits-=6}}function NE(t,e,r){const n=TN[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function AC(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{kN(a,n,r)};for(let a=0;a<t.length;a+=1)NE(t.charCodeAt(a),i,o);return e.join("")}function AN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function IN(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}AN(n,e)}}function kN(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function no(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)NE(t.charCodeAt(i),r,n);return new Uint8Array(e)}function jN(t){const e=[];return IN(t,r=>e.push(r)),new Uint8Array(e)}function is(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>TC(i,r,n)),TC(null,r,n),e.join("")}function ON(t){return Math.round(Date.now()/1e3)+t}function NN(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",Ai={tested:!1,writable:!1},ME=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ai.tested)return Ai.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ai.tested=!0,Ai.writable=!0}catch{Ai.tested=!0,Ai.writable=!1}return Ai.writable};function MN(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const DE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),DN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ys=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ii=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Et=async(t,e)=>{await t.removeItem(e)};class Wh{constructor(){this.promise=new Wh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Wh.promiseConstructor=Promise;function pv(t){const e=t.split(".");if(e.length!==3)throw new mm("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!CN.test(e[n]))throw new mm("JWT not in base64url format");return{header:JSON.parse(AC(e[0])),payload:JSON.parse(AC(e[1])),signature:no(e[2]),raw:{header:e[0],payload:e[1]}}}async function LN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zN(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function BN(t){return("0"+t.toString(16)).substr(-2)}function FN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let o=0;o<56;o++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,BN).join("")}async function qN(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function UN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await qN(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Us(t,e,r=!1){const n=FN();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ys(t,`${e}-code-verifier`,i);const o=await UN(n);return[o,n===o?"plain":"s256"]}const VN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function WN(t){const e=t.headers.get(vm);if(!e||!e.match(VN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function HN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function KN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const GN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vs(t){if(!GN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fv(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $N(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function IC(t){return JSON.parse(JSON.stringify(t))}const Qi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),JN=[502,503,504];async function kC(t){var e;if(!DN(t))throw new gm(Qi(t),0);if(JN.includes(t.status))throw new gm(Qi(t),t.status);let r;try{r=await t.json()}catch(o){throw new rs(Qi(o),o)}let n;const i=WN(t);if(i&&i.getTime()>=OE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new RC(Qi(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new sr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new RC(Qi(r),t.status,r.weak_password.reasons);throw new xN(Qi(r),t.status||500,n)}const QN=(t,e,r,n)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Pe(t,e,r,n){var i;const o=Object.assign({},n?.headers);o[vm]||(o[vm]=OE["2024-01-01"].name),n?.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(a.redirect_to=n.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await YN(t,e,r+c,{headers:o,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function YN(t,e,r,n,i,o){const a=QN(e,n,i,o);let c;try{c=await t(r,Object.assign({},a))}catch(u){throw console.error(u),new gm(Qi(u),0)}if(c.ok||await kC(c),n?.noResolveJson)return c;try{return await c.json()}catch(u){await kC(u)}}function Nr(t){var e;let r=null;e6(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ON(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function jC(t){const e=Nr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function XN(t){return{data:t,error:null}}function ZN(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t,a=Uh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},u=Object.assign({},a);return{data:{properties:c,user:u},error:null}}function OC(t){return t}function e6(t){return t.access_token&&t.refresh_token&&t.expires_in}const vv=["global","local","others"];class t6{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=DE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=vv[0]){if(vv.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vv.join(", ")}`);try{return await Pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xn})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Uh(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await Pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ZN,redirectTo:r?.redirectTo})}catch(r){if(Se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xn})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,o,a,c,u;try{const d={nextPage:null,lastPage:0,total:0},h=await Pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:OC});if(h.error)throw h.error;const f=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(w.split(";")[1].split("=")[1]);d[`${C}Page`]=b}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Se(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Vs(e);try{return await Pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xn})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Vs(e);try{return await Pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Xn})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Vs(e);try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xn})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Vs(e.userId);try{const{data:r,error:n}=await Pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Vs(e.userId),Vs(e.id);try{return{data:await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,o,a,c,u;try{const d={nextPage:null,lastPage:0,total:0},h=await Pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:OC});if(h.error)throw h.error;const f=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(w.split(";")[1].split("=")[1]);d[`${C}Page`]=b}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Se(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await Pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Se(r))return{data:null,error:r};throw r}}}function NC(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ws={debug:!!(globalThis&&ME()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class r6 extends LE{}async function n6(t,e,r){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new r6(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ws.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function i6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function s6(t){return parseInt(t,16)}function o6(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function a6(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:c,requestId:u,resources:d,scheme:h,uri:f,version:v}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=zE(t.address),w=h?`${h}://${n}`:n,b=t.statement?`${t.statement}
`:"",C=`${w} wants you to sign in with your Ethereum account:
${g}

${b}`;let x=`URI: ${f}
Version: ${v}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),c&&(x+=`
Not Before: ${c.toISOString()}`),u&&(x+=`
Request ID: ${u}`),d){let R=`
Resources:`;for(const _ of d){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);R+=`
- ${_}`}x+=R}return`${C}
${x}`}class vt extends Error{constructor({message:e,code:r,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Ch extends vt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function c6({error:t,options:e}){var r,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(BE(a)){if(o.rp.id!==a)return new vt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function l6({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(BE(n)){if(r.rpId!==n)return new vt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class u6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const d6=new u6;function h6(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Uh(t,["challenge","user","excludeCredentials"]),o=no(e).buffer,a=Object.assign(Object.assign({},r),{id:no(r.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];c.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:no(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function p6(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Uh(t,["challenge","allowCredentials"]),i=no(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const c=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},c),{id:no(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function f6(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:is(new Uint8Array(t.response.attestationObject)),clientDataJSON:is(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function v6(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:is(new Uint8Array(i.authenticatorData)),clientDataJSON:is(new Uint8Array(i.clientDataJSON)),signature:is(new Uint8Array(i.signature)),userHandle:i.userHandle?is(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function MC(){var t,e;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function g6(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ch("Browser returned unexpected credential type",e)}:{data:null,error:new Ch("Empty credential response",e)}}catch(e){return{data:null,error:c6({error:e,options:t})}}}async function m6(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ch("Browser returned unexpected credential type",e)}:{data:null,error:new Ch("Empty credential response",e)}}catch(e){return{data:null,error:l6({error:e,options:t})}}}const y6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},S6={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bh(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(e(a)){const c=n[o];e(c)?n[o]=bh(c,a):n[o]=bh(a)}else n[o]=a}return n}function w6(t,e){return bh(y6,t,e||{})}function C6(t,e){return bh(S6,t,e||{})}class b6{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},o){try{const{data:a,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:c};const u=i??d6.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=w6(a.webauthn.credential_options.publicKey,o?.create),{data:h,error:f}=await g6({publicKey:d,signal:u});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=C6(a.webauthn.credential_options.publicKey,o?.request),{data:h,error:f}=await m6(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(a){return Se(a)?{data:null,error:a}:{data:null,error:new rs("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new vu("rpId is required for WebAuthn authentication")};try{if(!MC())return{data:null,error:new rs("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:c};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return Se(a)?{data:null,error:a}:{data:null,error:new rs("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new vu("rpId is required for WebAuthn registration")};try{if(!MC())return{data:null,error:new rs("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:c};const{data:u,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(a){return Se(a)?{data:null,error:a}:{data:null,error:new rs("Unexpected error in register",a)}}}}i6();const x6={url:yN,storageKey:SN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function DC(t,e,r){return await r()}const Hs={};class gu{get jwks(){var e,r;return(r=(e=Hs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Hs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},x6),e);if(this.storageKey=o.storageKey,this.instanceID=(r=gu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,gu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new t6({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=DE(o.fetch),this.lock=o.lock||DC,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Tt()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=n6:this.lock=DC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new b6(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:ME()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NC(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=NC(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Tt()&&(r=MN(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Tt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),RN(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Se(r)?this._returnResult({error:r}):this._returnResult({error:new rs("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Nr}),{data:a,error:c}=o;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(o){if(Se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,i;try{let o;if("email"in e){const{email:h,password:f,options:v}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await Us(this.storage,this.storageKey)),o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:h,password:f,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:g,code_challenge_method:w},xform:Nr})}else if("phone"in e){const{phone:h,password:f,options:v}=e;o=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=v?.data)!==null&&n!==void 0?n:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Nr})}else throw new $d("You must provide either an email or phone number and a password");const{data:a,error:c}=o;if(c||!a)return await Et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(o){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:c}=e;r=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jC})}else if("phone"in e){const{phone:o,password:a,options:c}=e;r=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jC})}else throw new $d("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new qs;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,o,a,c,u,d,h,f,v;let g,w;if("message"in e)g=e.message,w=e.signature;else{const{chain:b,wallet:C,statement:x,options:R}=e;let _;if(Tt())if(typeof C=="object")_=C;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")_=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=C}const I=new URL((r=R?.url)!==null&&r!==void 0?r:window.location.href),k=await _.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=zE(k[0]);let B=(n=R?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!B){const D=await _.request({method:"eth_chainId"});B=s6(D)}const O={domain:I.host,address:M,statement:x,uri:I.href,version:"1",chainId:B,nonce:(i=R?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=R?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=R?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=R?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=R?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=R?.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=a6(O),w=await _.request({method:"personal_sign",params:[o6(g),M]})}try{const{data:b,error:C}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:w},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Nr});if(C)throw C;if(!b||!b.session||!b.user){const x=new qs;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:C})}catch(b){if(Se(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var r,n,i,o,a,c,u,d,h,f,v,g;let w,b;if("message"in e)w=e.message,b=e.signature;else{const{chain:C,wallet:x,statement:R,options:_}=e;let I;if(Tt())if(typeof x=="object")I=x;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))I=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=x}const k=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in I&&I.signIn){const M=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),R?{statement:R}:null));let B;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")B=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)B=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)w=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),b=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${k.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=_?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=_?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((c=_?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((d=_?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(h=_?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const M=await I.signMessage(new TextEncoder().encode(w),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=M}}try{const{data:C,error:x}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:is(b)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Nr});if(x)throw x;if(!C||!C.session||!C.user){const R=new qs;return this._returnResult({data:{user:null,session:null},error:R})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:x})}catch(C){if(Se(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const r=await Ii(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new EN;const{data:o,error:a}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Nr});if(await Et(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const c=new qs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:o,nonce:a}=e,c=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Nr}),{data:u,error:d}=c;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new qs;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,o,a;try{if("email"in e){const{email:c,options:u}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Us(this.storage,this.storageKey));const{error:f}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:c,options:u}=e,{data:d,error:h}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new $d("You must provide either an email or phone number.")}catch(c){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,n;try{let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:c}=await Pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Nr});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,d=a.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(Se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,o,a;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Us(this.storage,this.storageKey));const d=await Pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:XN});return!((o=d.data)===null||o===void 0)&&o.url&&Tt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(c){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new sr;const{error:i}=await Pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await Pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:c}=await Pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new $d("You must provide either an email or phone number and a type")}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ii(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<dv:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Ii(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=fv()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=$N(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xn}):await this._useSession(async r=>{var n,i,o;const{data:a,error:c}=r;if(c)throw c;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sr}:await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Xn})})}catch(r){if(Se(r))return _N(r)&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new sr;const a=i.session;let c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=await Us(this.storage,this.storageKey));const{data:d,error:h}=await Pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:a.access_token,xform:Xn});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sr;const r=Date.now()/1e3;let n=r,i=!0,o=null;const{payload:a}=pv(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:c,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:u}=await this._getUser(e.access_token);if(u)throw u;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(Se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:c}=r;if(c)throw c;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new sr;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Se(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Tt())throw new Jd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _C("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _C("No code detected.");const{data:R,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:u,token_type:d}=e;if(!o||!c||!a||!d)throw new Jd("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(c);let v=h+f;u&&(v=parseInt(u));const g=v-h;g*1e3<=Qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const w=v-f;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,h);const{data:b,error:C}=await this._getUser(o);if(C)throw C;const x={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:v,refresh_token:a,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(n){if(Se(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ii(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(PN(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=NN(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Us(this.storage,this.storageKey,!0));try{return await Pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async o=>{var a,c,u,d,h;const{data:f,error:v}=o;if(v)throw v;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Pe(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Tt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Se(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:o}}=r;if(i)throw i;const{options:a,provider:c,token:u,access_token:d,nonce:h}=e,f=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Nr}),{data:v,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new qs}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:g}))}catch(i){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)throw a;return await Pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await zN(async i=>(i>0&&await LN(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Nr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&hv(o)&&Date.now()+a-n<Qs})}catch(n){if(this._debug(r,"error",n),Se(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Ii(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Ii(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Ys(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:fv()}else if(i&&!i.user&&!i.user){const a=await Ii(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await Et(this.storage,this.storageKey+"-user"),await Ys(this.storage,this.storageKey,i)):i.user=fv()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<dv;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${dv}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),hv(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Wh;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new sr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),Se(o)){const a={data:null,error:o};return hv(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Et(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ys(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const o=IC(i);await Ys(this.storage,this.storageKey,o)}else{const i=IC(r);await Ys(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Et(this.storage,this.storageKey),await Et(this.storage,this.storageKey+"-code-verifier"),await Et(this.storage,this.storageKey+"-user"),this.userStorage&&await Et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Qs}ms, refresh threshold is ${fm} ticks`),i<=fm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await Us(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(n?.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;return o?this._returnResult({data:null,error:o}):await Pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:d}=await Pe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=o?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?f6(e.webauthn.credential_response):v6(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:u}=await Pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await Pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:h6(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p6(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pv(n.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new sr})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new sr});const a=await Pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Se(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new sr});const a=await Pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Tt()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Se(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new sr})})}catch(e){if(Se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new sr})})}catch(r){if(Se(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(c=>c.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+bN>i)return n;const{data:o,error:a}=await Pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:g,error:w}=await this.getSession();if(w||!g.session)return this._returnResult({data:null,error:w});n=g.session.access_token}const{header:i,payload:o,signature:a,raw:{header:c,payload:u}}=pv(n);r?.allowExpired||HN(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:o,header:i,signature:a},error:null}}const h=KN(i.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,a,jN(`${c}.${u}`)))throw new mm("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(Se(n))return this._returnResult({data:null,error:n});throw n}}}gu.nextInstanceID={};const P6=gu,_6="2.90.1";let Jl="";typeof Deno<"u"?Jl="deno":typeof document<"u"?Jl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jl="react-native":Jl="node";const R6={"X-Client-Info":`supabase-js-${Jl}/${_6}`},E6={headers:R6},T6={schema:"public"},A6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I6={};function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(t)}function k6(t,e){if(mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j6(t){var e=k6(t,"string");return mu(e)=="symbol"?e:e+""}function O6(t,e,r){return(e=j6(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ct(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LC(Object(r),!0).forEach(function(n){O6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const N6=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),M6=()=>Headers,D6=(t,e,r)=>{const n=N6(r),i=M6();return async(o,a)=>{var c;const u=(c=await e())!==null&&c!==void 0?c:t;let d=new i(a?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),n(o,ct(ct({},a),{},{headers:d}))}};function L6(t){return t.endsWith("/")?t:t+"/"}function z6(t,e){var r,n;const{db:i,auth:o,realtime:a,global:c}=t,{db:u,auth:d,realtime:h,global:f}=e,v={db:ct(ct({},u),i),auth:ct(ct({},d),o),realtime:ct(ct({},h),a),storage:{},global:ct(ct(ct({},f),c),{},{headers:ct(ct({},(r=f?.headers)!==null&&r!==void 0?r:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function B6(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(L6(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var F6=class extends P6{constructor(t){super(t)}},q6=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const o=B6(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:T6,realtime:I6,auth:ct(ct({},A6),{},{storageKey:a}),global:E6},u=z6(r??{},c);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=u.auth)!==null&&d!==void 0?d:{},this.headers,u.global.fetch)}this.fetch=D6(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(ct({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new wO(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new mN(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new vO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:a,lock:c,debug:u,throwOnError:d},h,f){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new F6({url:this.authUrl.href,headers:ct(ct({},v),h),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:c,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new LO(this.realtimeUrl.href,ct(ct({},t),{},{params:ct(ct({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const U6=(t,e,r)=>new q6(t,e,r);function V6(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}V6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const W6="https://mbmswkltiqepwcynwgfr.supabase.co",H6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ibXN3a2x0aXFlcHdjeW53Z2ZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MzAzNzgsImV4cCI6MjA4MzMwNjM3OH0.fVB4f7KIoDdznFgnQ9ZDjr7W4fxk2dJpmu_fStPZ6_s",he=U6(W6,H6),tu=bE("auth/loginUser",async({email:t,password:e},{rejectWithValue:r})=>{try{const{data:n,error:i}=await he.auth.signInWithPassword({email:t,password:e});if(i)throw i;return localStorage.setItem("user",JSON.stringify(n.user)),n.user}catch(n){return r(n.message)}}),gv=bE("auth/registerUser",async({email:t,password:e,childName:r},{rejectWithValue:n})=>{try{const{data:i,error:o}=await he.auth.signUp({email:t,password:e,options:{data:{childName:r,role:"student"}}});if(o)throw o;return i.user}catch(i){return n(i.message)}}),K6={user:JSON.parse(localStorage.getItem("user"))||null,isAuthenticated:!!localStorage.getItem("user"),isLoading:!1,error:null},FE=oO({name:"auth",initialState:K6,reducers:{logout:t=>{t.user=null,t.isAuthenticated=!1,localStorage.removeItem("user"),he.auth.signOut()},loadUserFromStorage:t=>{const e=localStorage.getItem("user");e&&(t.user=JSON.parse(e),t.isAuthenticated=!0)}},extraReducers:t=>{t.addCase(tu.pending,e=>{e.isLoading=!0,e.error=null}).addCase(tu.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload,e.isAuthenticated=!0}).addCase(tu.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(gv.pending,e=>{e.isLoading=!0,e.error=null}).addCase(gv.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload}).addCase(gv.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),{logout:G6,loadUserFromStorage:$6}=FE.actions,J6=FE.reducer;var ly={};(function t(e,r,n,i){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=(function(){if(!e.OffscreenCanvas)return!1;try{var j=new OffscreenCanvas(1,1),T=j.getContext("2d");T.fillRect(0,0,1,1);var W=j.transferToImageBitmap();T.createPattern(W,"no-repeat")}catch{return!1}return!0})();function u(){}function d(j){var T=r.exports.Promise,W=T!==void 0?T:e.Promise;return typeof W=="function"?new W(j):(j(u,u),null)}var h=(function(j,T){return{transform:function(W){if(j)return W;if(T.has(W))return T.get(W);var Z=new OffscreenCanvas(W.width,W.height),se=Z.getContext("2d");return se.drawImage(W,0,0),T.set(W,Z),Z},clear:function(){T.clear()}}})(c,new Map),f=(function(){var j=Math.floor(16.666666666666668),T,W,Z={},se=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(T=function(le){var ce=Math.random();return Z[ce]=requestAnimationFrame(function oe(de){se===de||se+j-1<de?(se=de,delete Z[ce],le()):Z[ce]=requestAnimationFrame(oe)}),ce},W=function(le){Z[le]&&cancelAnimationFrame(Z[le])}):(T=function(le){return setTimeout(le,j)},W=function(le){return clearTimeout(le)}),{frame:T,cancel:W}})(),v=(function(){var j,T,W={};function Z(se){function le(ce,oe){se.postMessage({options:ce||{},callback:oe})}se.init=function(oe){var de=oe.transferControlToOffscreen();se.postMessage({canvas:de},[de])},se.fire=function(oe,de,ye){if(T)return le(oe,null),T;var Ie=Math.random().toString(36).slice(2);return T=d(function(je){function Ve(Ye){Ye.data.callback===Ie&&(delete W[Ie],se.removeEventListener("message",Ve),T=null,h.clear(),ye(),je())}se.addEventListener("message",Ve),le(oe,Ie),W[Ie]=Ve.bind(null,{data:{callback:Ie}})}),T},se.reset=function(){se.postMessage({reset:!0});for(var oe in W)W[oe](),delete W[oe]}}return function(){if(j)return j;if(!n&&o){var se=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{j=new Worker(URL.createObjectURL(new Blob([se])))}catch(le){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",le),null}Z(j)}return j}})(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function w(j,T){return T?T(j):j}function b(j){return j!=null}function C(j,T,W){return w(j&&b(j[T])?j[T]:g[T],W)}function x(j){return j<0?0:Math.floor(j)}function R(j,T){return Math.floor(Math.random()*(T-j))+j}function _(j){return parseInt(j,16)}function I(j){return j.map(k)}function k(j){var T=String(j).replace(/[^0-9a-f]/gi,"");return T.length<6&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]),{r:_(T.substring(0,2)),g:_(T.substring(2,4)),b:_(T.substring(4,6))}}function M(j){var T=C(j,"origin",Object);return T.x=C(T,"x",Number),T.y=C(T,"y",Number),T}function B(j){j.width=document.documentElement.clientWidth,j.height=document.documentElement.clientHeight}function O(j){var T=j.getBoundingClientRect();j.width=T.width,j.height=T.height}function D(j){var T=document.createElement("canvas");return T.style.position="fixed",T.style.top="0px",T.style.left="0px",T.style.pointerEvents="none",T.style.zIndex=j,T}function U(j,T,W,Z,se,le,ce,oe,de){j.save(),j.translate(T,W),j.rotate(le),j.scale(Z,se),j.arc(0,0,1,ce,oe,de),j.restore()}function L(j){var T=j.angle*(Math.PI/180),W=j.spread*(Math.PI/180);return{x:j.x,y:j.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:j.startVelocity*.5+Math.random()*j.startVelocity,angle2D:-T+(.5*W-Math.random()*W),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:j.color,shape:j.shape,tick:0,totalTicks:j.ticks,decay:j.decay,drift:j.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:j.gravity*3,ovalScalar:.6,scalar:j.scalar,flat:j.flat}}function F(j,T){T.x+=Math.cos(T.angle2D)*T.velocity+T.drift,T.y+=Math.sin(T.angle2D)*T.velocity+T.gravity,T.velocity*=T.decay,T.flat?(T.wobble=0,T.wobbleX=T.x+10*T.scalar,T.wobbleY=T.y+10*T.scalar,T.tiltSin=0,T.tiltCos=0,T.random=1):(T.wobble+=T.wobbleSpeed,T.wobbleX=T.x+10*T.scalar*Math.cos(T.wobble),T.wobbleY=T.y+10*T.scalar*Math.sin(T.wobble),T.tiltAngle+=.1,T.tiltSin=Math.sin(T.tiltAngle),T.tiltCos=Math.cos(T.tiltAngle),T.random=Math.random()+2);var W=T.tick++/T.totalTicks,Z=T.x+T.random*T.tiltCos,se=T.y+T.random*T.tiltSin,le=T.wobbleX+T.random*T.tiltCos,ce=T.wobbleY+T.random*T.tiltSin;if(j.fillStyle="rgba("+T.color.r+", "+T.color.g+", "+T.color.b+", "+(1-W)+")",j.beginPath(),a&&T.shape.type==="path"&&typeof T.shape.path=="string"&&Array.isArray(T.shape.matrix))j.fill(Y(T.shape.path,T.shape.matrix,T.x,T.y,Math.abs(le-Z)*.1,Math.abs(ce-se)*.1,Math.PI/10*T.wobble));else if(T.shape.type==="bitmap"){var oe=Math.PI/10*T.wobble,de=Math.abs(le-Z)*.1,ye=Math.abs(ce-se)*.1,Ie=T.shape.bitmap.width*T.scalar,je=T.shape.bitmap.height*T.scalar,Ve=new DOMMatrix([Math.cos(oe)*de,Math.sin(oe)*de,-Math.sin(oe)*ye,Math.cos(oe)*ye,T.x,T.y]);Ve.multiplySelf(new DOMMatrix(T.shape.matrix));var Ye=j.createPattern(h.transform(T.shape.bitmap),"no-repeat");Ye.setTransform(Ve),j.globalAlpha=1-W,j.fillStyle=Ye,j.fillRect(T.x-Ie/2,T.y-je/2,Ie,je),j.globalAlpha=1}else if(T.shape==="circle")j.ellipse?j.ellipse(T.x,T.y,Math.abs(le-Z)*T.ovalScalar,Math.abs(ce-se)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI):U(j,T.x,T.y,Math.abs(le-Z)*T.ovalScalar,Math.abs(ce-se)*T.ovalScalar,Math.PI/10*T.wobble,0,2*Math.PI);else if(T.shape==="star")for(var Oe=Math.PI/2*3,gt=4*T.scalar,It=8*T.scalar,Fe=T.x,Ut=T.y,Yt=5,Ct=Math.PI/Yt;Yt--;)Fe=T.x+Math.cos(Oe)*It,Ut=T.y+Math.sin(Oe)*It,j.lineTo(Fe,Ut),Oe+=Ct,Fe=T.x+Math.cos(Oe)*gt,Ut=T.y+Math.sin(Oe)*gt,j.lineTo(Fe,Ut),Oe+=Ct;else j.moveTo(Math.floor(T.x),Math.floor(T.y)),j.lineTo(Math.floor(T.wobbleX),Math.floor(se)),j.lineTo(Math.floor(le),Math.floor(ce)),j.lineTo(Math.floor(Z),Math.floor(T.wobbleY));return j.closePath(),j.fill(),T.tick<T.totalTicks}function H(j,T,W,Z,se){var le=T.slice(),ce=j.getContext("2d"),oe,de,ye=d(function(Ie){function je(){oe=de=null,ce.clearRect(0,0,Z.width,Z.height),h.clear(),se(),Ie()}function Ve(){n&&!(Z.width===i.width&&Z.height===i.height)&&(Z.width=j.width=i.width,Z.height=j.height=i.height),!Z.width&&!Z.height&&(W(j),Z.width=j.width,Z.height=j.height),ce.clearRect(0,0,Z.width,Z.height),le=le.filter(function(Ye){return F(ce,Ye)}),le.length?oe=f.frame(Ve):je()}oe=f.frame(Ve),de=je});return{addFettis:function(Ie){return le=le.concat(Ie),ye},canvas:j,promise:ye,reset:function(){oe&&f.cancel(oe),de&&de()}}}function $(j,T){var W=!j,Z=!!C(T||{},"resize"),se=!1,le=C(T,"disableForReducedMotion",Boolean),ce=o&&!!C(T||{},"useWorker"),oe=ce?v():null,de=W?B:O,ye=j&&oe?!!j.__confetti_initialized:!1,Ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,je;function Ve(Oe,gt,It){for(var Fe=C(Oe,"particleCount",x),Ut=C(Oe,"angle",Number),Yt=C(Oe,"spread",Number),Ct=C(Oe,"startVelocity",Number),Fr=C(Oe,"decay",Number),hi=C(Oe,"gravity",Number),vs=C(Oe,"drift",Number),pi=C(Oe,"colors",I),gs=C(Oe,"ticks",Number),fi=C(Oe,"shapes"),vi=C(Oe,"scalar"),Pn=!!C(Oe,"flat"),Qr=M(Oe),qr=Fe,xr=[],po=j.width*Qr.x,ms=j.height*Qr.y;qr--;)xr.push(L({x:po,y:ms,angle:Ut,spread:Yt,startVelocity:Ct,color:pi[qr%pi.length],shape:fi[R(0,fi.length)],ticks:gs,decay:Fr,gravity:hi,drift:vs,scalar:vi,flat:Pn}));return je?je.addFettis(xr):(je=H(j,xr,de,gt,It),je.promise)}function Ye(Oe){var gt=le||C(Oe,"disableForReducedMotion",Boolean),It=C(Oe,"zIndex",Number);if(gt&&Ie)return d(function(Ct){Ct()});W&&je?j=je.canvas:W&&!j&&(j=D(It),document.body.appendChild(j)),Z&&!ye&&de(j);var Fe={width:j.width,height:j.height};oe&&!ye&&oe.init(j),ye=!0,oe&&(j.__confetti_initialized=!0);function Ut(){if(oe){var Ct={getBoundingClientRect:function(){if(!W)return j.getBoundingClientRect()}};de(Ct),oe.postMessage({resize:{width:Ct.width,height:Ct.height}});return}Fe.width=Fe.height=null}function Yt(){je=null,Z&&(se=!1,e.removeEventListener("resize",Ut)),W&&j&&(document.body.contains(j)&&document.body.removeChild(j),j=null,ye=!1)}return Z&&!se&&(se=!0,e.addEventListener("resize",Ut,!1)),oe?oe.fire(Oe,Fe,Yt):Ve(Oe,Fe,Yt)}return Ye.reset=function(){oe&&oe.reset(),je&&je.reset()},Ye}var ee;function X(){return ee||(ee=$(null,{useWorker:!0,resize:!0})),ee}function Y(j,T,W,Z,se,le,ce){var oe=new Path2D(j),de=new Path2D;de.addPath(oe,new DOMMatrix(T));var ye=new Path2D;return ye.addPath(de,new DOMMatrix([Math.cos(ce)*se,Math.sin(ce)*se,-Math.sin(ce)*le,Math.cos(ce)*le,W,Z])),ye}function V(j){if(!a)throw new Error("path confetti are not supported in this browser");var T,W;typeof j=="string"?T=j:(T=j.path,W=j.matrix);var Z=new Path2D(T),se=document.createElement("canvas"),le=se.getContext("2d");if(!W){for(var ce=1e3,oe=ce,de=ce,ye=0,Ie=0,je,Ve,Ye=0;Ye<ce;Ye+=2)for(var Oe=0;Oe<ce;Oe+=2)le.isPointInPath(Z,Ye,Oe,"nonzero")&&(oe=Math.min(oe,Ye),de=Math.min(de,Oe),ye=Math.max(ye,Ye),Ie=Math.max(Ie,Oe));je=ye-oe,Ve=Ie-de;var gt=10,It=Math.min(gt/je,gt/Ve);W=[It,0,0,It,-Math.round(je/2+oe)*It,-Math.round(Ve/2+de)*It]}return{type:"path",path:T,matrix:W}}function J(j){var T,W=1,Z="#000000",se='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof j=="string"?T=j:(T=j.text,W="scalar"in j?j.scalar:W,se="fontFamily"in j?j.fontFamily:se,Z="color"in j?j.color:Z);var le=10*W,ce=""+le+"px "+se,oe=new OffscreenCanvas(le,le),de=oe.getContext("2d");de.font=ce;var ye=de.measureText(T),Ie=Math.ceil(ye.actualBoundingBoxRight+ye.actualBoundingBoxLeft),je=Math.ceil(ye.actualBoundingBoxAscent+ye.actualBoundingBoxDescent),Ve=2,Ye=ye.actualBoundingBoxLeft+Ve,Oe=ye.actualBoundingBoxAscent+Ve;Ie+=Ve+Ve,je+=Ve+Ve,oe=new OffscreenCanvas(Ie,je),de=oe.getContext("2d"),de.font=ce,de.fillStyle=Z,de.fillText(T,Ye,Oe);var gt=1/W;return{type:"bitmap",bitmap:oe.transferToImageBitmap(),matrix:[gt,0,0,gt,-Ie*gt/2,-je*gt/2]}}r.exports=function(){return X().apply(this,arguments)},r.exports.reset=function(){X().reset()},r.exports.create=$,r.exports.shapeFromPath=V,r.exports.shapeFromText=J})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),ly,!1);const Dt=ly.exports;ly.exports.create;const ii=9999,Q6=()=>{Dt({particleCount:50,spread:360,ticks:50,gravity:0,decay:.94,startVelocity:30,shapes:["star"],colors:["FFE400","FFBD00","E89400"],zIndex:ii})},Y6=()=>{Dt({particleCount:40,angle:90,spread:80,origin:{y:1.2},colors:["#6366f1","#f59e0b","#10b981","#ef4444","#ec4899"],gravity:-.1,scalar:3,shapes:["circle"],zIndex:ii})},X6=()=>{Dt({particleCount:60,angle:60,spread:55,origin:{x:0,y:.8},zIndex:ii}),Dt({particleCount:60,angle:120,spread:55,origin:{x:1,y:.8},zIndex:ii})},Z6=()=>{const e=Date.now()+3e3,r=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff"];(function n(){e-Date.now()<=0||(Dt({particleCount:1,startVelocity:0,ticks:100,origin:{x:Math.random(),y:Math.random()-.2},colors:[r[Math.floor(Math.random()*r.length)]],shapes:["circle"],gravity:.5,scalar:2,zIndex:ii}),requestAnimationFrame(n))})()},eM=()=>{const e=Date.now()+3e3;(function r(){e-Date.now()<=0||(Dt({particleCount:1,startVelocity:0,ticks:200,origin:{x:Math.random(),y:-.2},gravity:.3,colors:["#ffffff"],shapes:["circle"],scalar:.7,zIndex:ii}),requestAnimationFrame(r))})()},tM=()=>{const e=[Dt.shapeFromText({text:"",scalar:2.5}),Dt.shapeFromText({text:"",scalar:2.5}),Dt.shapeFromText({text:"",scalar:2.5}),Dt.shapeFromText({text:"",scalar:2.5})];Dt({shapes:e,particleCount:20,scalar:2.5,zIndex:ii,origin:{y:.7}})},rM=()=>{const e=[Dt.shapeFromText({text:"",scalar:2.5}),Dt.shapeFromText({text:"",scalar:2.5}),Dt.shapeFromText({text:"",scalar:2.5}),Dt.shapeFromText({text:"",scalar:2.5})];Dt({shapes:e,particleCount:20,scalar:2.5,zIndex:ii,origin:{y:.7}})};let Qd=[];const nM=[Q6,Y6,X6,Z6,eM,tM,rM],uy=()=>{const t=nM.filter(r=>!Qd.includes(r.name)),e=t[Math.floor(Math.random()*t.length)];e(),Qd.push(e.name),Qd.length>3&&Qd.shift()},dy=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Hh=E.createContext({}),Kh=E.createContext(null),Gh=typeof document<"u",$h=Gh?E.useLayoutEffect:E.useEffect,qE=E.createContext({strict:!1}),hy=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),iM="framerAppearId",UE="data-"+hy(iM);function sM(t,e,r,n){const{visualElement:i}=E.useContext(Hh),o=E.useContext(qE),a=E.useContext(Kh),c=E.useContext(dy).reducedMotion,u=E.useRef();n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:i,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const d=u.current;E.useInsertionEffect(()=>{d&&d.update(r,a)});const h=E.useRef(!!(r[UE]&&!window.HandoffComplete));return $h(()=>{d&&(d.render(),h.current&&d.animationState&&d.animationState.animateChanges())}),E.useEffect(()=>{d&&(d.updateFeatures(),!h.current&&d.animationState&&d.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),d}function Zs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oM(t,e,r){return E.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Zs(r)&&(r.current=n))},[e])}function yu(t){return typeof t=="string"||Array.isArray(t)}function Jh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const py=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fy=["initial",...py];function Qh(t){return Jh(t.animate)||fy.some(e=>yu(t[e]))}function VE(t){return!!(Qh(t)||t.variants)}function aM(t,e){if(Qh(t)){const{initial:r,animate:n}=t;return{initial:r===!1||yu(r)?r:void 0,animate:yu(n)?n:void 0}}return t.inherit!==!1?e:{}}function cM(t){const{initial:e,animate:r}=aM(t,E.useContext(Hh));return E.useMemo(()=>({initial:e,animate:r}),[zC(e),zC(r)])}function zC(t){return Array.isArray(t)?t.join(" "):t}const BC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Su={};for(const t in BC)Su[t]={isEnabled:e=>BC[t].some(r=>!!e[r])};function lM(t){for(const e in t)Su[e]={...Su[e],...t[e]}}const vy=E.createContext({}),WE=E.createContext({}),uM=Symbol.for("motionComponentSymbol");function dM({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){t&&lM(t);function o(c,u){let d;const h={...E.useContext(dy),...c,layoutId:hM(c)},{isStatic:f}=h,v=cM(c),g=n(c,f);if(!f&&Gh){v.visualElement=sM(i,g,h,e);const w=E.useContext(WE),b=E.useContext(qE).strict;v.visualElement&&(d=v.visualElement.loadFeatures(h,b,t,w))}return E.createElement(Hh.Provider,{value:v},d&&v.visualElement?E.createElement(d,{visualElement:v.visualElement,...h}):null,r(i,c,oM(g,v.visualElement,u),g,f,v.visualElement))}const a=E.forwardRef(o);return a[uM]=i,a}function hM({layoutId:t}){const e=E.useContext(vy).id;return e&&t!==void 0?e+"-"+t:t}function pM(t){function e(n,i={}){return dM(t(n,i))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,i)=>(r.has(i)||r.set(i,e(i)),r.get(i))})}const fM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gy(t){return typeof t!="string"||t.includes("-")?!1:!!(fM.indexOf(t)>-1||/[A-Z]/.test(t))}const xh={};function vM(t){Object.assign(xh,t)}const _u=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ds=new Set(_u);function HE(t,{layout:e,layoutId:r}){return ds.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!xh[t]||t==="opacity")}const Jt=t=>!!(t&&t.getVelocity),gM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mM=_u.length;function yM(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,i){let o="";for(let a=0;a<mM;a++){const c=_u[a];if(t[c]!==void 0){const u=gM[c]||c;o+=`${u}(${t[c]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,n?"":o):r&&n&&(o="none"),o}const KE=t=>e=>typeof e=="string"&&e.startsWith(t),GE=KE("--"),ym=KE("var(--"),SM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,wM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,si=(t,e,r)=>Math.min(Math.max(r,t),e),hs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ru={...hs,transform:t=>si(0,1,t)},Yd={...hs,default:1},nu=t=>Math.round(t*1e5)/1e5,Yh=/(-)?([\d]*\.?[\d])+/g,$E=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,CM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ru(t){return typeof t=="string"}const Eu=t=>({test:e=>Ru(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Kn=Eu("deg"),Gr=Eu("%"),Re=Eu("px"),bM=Eu("vh"),xM=Eu("vw"),FC={...Gr,parse:t=>Gr.parse(t)/100,transform:t=>Gr.transform(t*100)},qC={...hs,transform:Math.round},JE={borderWidth:Re,borderTopWidth:Re,borderRightWidth:Re,borderBottomWidth:Re,borderLeftWidth:Re,borderRadius:Re,radius:Re,borderTopLeftRadius:Re,borderTopRightRadius:Re,borderBottomRightRadius:Re,borderBottomLeftRadius:Re,width:Re,maxWidth:Re,height:Re,maxHeight:Re,size:Re,top:Re,right:Re,bottom:Re,left:Re,padding:Re,paddingTop:Re,paddingRight:Re,paddingBottom:Re,paddingLeft:Re,margin:Re,marginTop:Re,marginRight:Re,marginBottom:Re,marginLeft:Re,rotate:Kn,rotateX:Kn,rotateY:Kn,rotateZ:Kn,scale:Yd,scaleX:Yd,scaleY:Yd,scaleZ:Yd,skew:Kn,skewX:Kn,skewY:Kn,distance:Re,translateX:Re,translateY:Re,translateZ:Re,x:Re,y:Re,z:Re,perspective:Re,transformPerspective:Re,opacity:ru,originX:FC,originY:FC,originZ:Re,zIndex:qC,fillOpacity:ru,strokeOpacity:ru,numOctaves:qC};function my(t,e,r,n){const{style:i,vars:o,transform:a,transformOrigin:c}=t;let u=!1,d=!1,h=!0;for(const f in e){const v=e[f];if(GE(f)){o[f]=v;continue}const g=JE[f],w=wM(v,g);if(ds.has(f)){if(u=!0,a[f]=w,!h)continue;v!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(d=!0,c[f]=w):i[f]=w}if(e.transform||(u||n?i.transform=yM(t.transform,r,h,n):i.transform&&(i.transform="none")),d){const{originX:f="50%",originY:v="50%",originZ:g=0}=c;i.transformOrigin=`${f} ${v} ${g}`}}const yy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function QE(t,e,r){for(const n in e)!Jt(e[n])&&!HE(n,r)&&(t[n]=e[n])}function PM({transformTemplate:t},e,r){return E.useMemo(()=>{const n=yy();return my(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function _M(t,e,r){const n=t.style||{},i={};return QE(i,n,t),Object.assign(i,PM(t,e,r)),t.transformValues?t.transformValues(i):i}function RM(t,e,r){const n={},i=_M(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const EM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ph(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||EM.has(t)}let YE=t=>!Ph(t);function TM(t){t&&(YE=e=>e.startsWith("on")?!Ph(e):t(e))}try{TM(require("@emotion/is-prop-valid").default)}catch{}function AM(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(YE(i)||r===!0&&Ph(i)||!e&&!Ph(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function UC(t,e,r){return typeof t=="string"?t:Re.transform(e+r*t)}function IM(t,e,r){const n=UC(e,t.x,t.width),i=UC(r,t.y,t.height);return`${n} ${i}`}const kM={offset:"stroke-dashoffset",array:"stroke-dasharray"},jM={offset:"strokeDashoffset",array:"strokeDasharray"};function OM(t,e,r=1,n=0,i=!0){t.pathLength=1;const o=i?kM:jM;t[o.offset]=Re.transform(-n);const a=Re.transform(e),c=Re.transform(r);t[o.array]=`${a} ${c}`}function Sy(t,{attrX:e,attrY:r,attrScale:n,originX:i,originY:o,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...d},h,f,v){if(my(t,d,h,v),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:w,dimensions:b}=t;g.transform&&(b&&(w.transform=g.transform),delete g.transform),b&&(i!==void 0||o!==void 0||w.transform)&&(w.transformOrigin=IM(b,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(g.x=e),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),a!==void 0&&OM(g,a,c,u,!1)}const XE=()=>({...yy(),attrs:{}}),wy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function NM(t,e,r,n){const i=E.useMemo(()=>{const o=XE();return Sy(o,e,{enableHardwareAcceleration:!1},wy(n),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};QE(o,t.style,t),i.style={...o,...i.style}}return i}function MM(t=!1){return(r,n,i,{latestValues:o},a)=>{const u=(gy(r)?NM:RM)(n,o,a,r),h={...AM(n,typeof r=="string",t),...u,ref:i},{children:f}=n,v=E.useMemo(()=>Jt(f)?f.get():f,[f]);return E.createElement(r,{...h,children:v})}}function ZE(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const o in r)t.style.setProperty(o,r[o])}const e2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function t2(t,e,r,n){ZE(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(e2.has(i)?i:hy(i),e.attrs[i])}function Cy(t,e){const{style:r}=t,n={};for(const i in r)(Jt(r[i])||e.style&&Jt(e.style[i])||HE(i,t))&&(n[i]=r[i]);return n}function r2(t,e){const r=Cy(t,e);for(const n in t)if(Jt(t[n])||Jt(e[n])){const i=_u.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=t[n]}return r}function by(t,e,r,n={},i={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,i)),e}function Xh(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const _h=t=>Array.isArray(t),DM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),LM=t=>_h(t)?t[t.length-1]||0:t;function oh(t){const e=Jt(t)?t.get():t;return DM(e)?e.toValue():e}function zM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,i,o){const a={latestValues:BM(n,i,o,t),renderState:e()};return r&&(a.mount=c=>r(n,c,a)),a}const n2=t=>(e,r)=>{const n=E.useContext(Hh),i=E.useContext(Kh),o=()=>zM(t,e,n,i);return r?o():Xh(o)};function BM(t,e,r,n){const i={},o=n(t,{});for(const v in o)i[v]=oh(o[v]);let{initial:a,animate:c}=t;const u=Qh(t),d=VE(t);e&&d&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let h=r?r.initial===!1:!1;h=h||a===!1;const f=h?c:a;return f&&typeof f!="boolean"&&!Jh(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const w=by(t,g);if(!w)return;const{transitionEnd:b,transition:C,...x}=w;for(const R in x){let _=x[R];if(Array.isArray(_)){const I=h?_.length-1:0;_=_[I]}_!==null&&(i[R]=_)}for(const R in b)i[R]=b[R]}),i}const dt=t=>t;let VC=class{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}};function FM(t){let e=new VC,r=new VC,n=0,i=!1,o=!1;const a=new WeakSet,c={schedule:(u,d=!1,h=!1)=>{const f=h&&i,v=f?e:r;return d&&a.add(u),v.add(u)&&f&&i&&(n=e.order.length),u},cancel:u=>{r.remove(u),a.delete(u)},process:u=>{if(i){o=!0;return}if(i=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let d=0;d<n;d++){const h=e.order[d];h(u),a.has(h)&&(c.schedule(h),t())}i=!1,o&&(o=!1,c.process(u))}};return c}const Xd=["prepare","read","update","preRender","render","postRender"],qM=40;function UM(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Xd.reduce((f,v)=>(f[v]=FM(()=>r=!0),f),{}),a=f=>o[f].process(i),c=()=>{const f=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(f-i.timestamp,qM),1),i.timestamp=f,i.isProcessing=!0,Xd.forEach(a),i.isProcessing=!1,r&&e&&(n=!1,t(c))},u=()=>{r=!0,n=!0,i.isProcessing||t(c)};return{schedule:Xd.reduce((f,v)=>{const g=o[v];return f[v]=(w,b=!1,C=!1)=>(r||u(),g.schedule(w,b,C)),f},{}),cancel:f=>Xd.forEach(v=>o[v].cancel(f)),state:i,steps:o}}const{schedule:Ge,cancel:Sn,state:Mt,steps:mv}=UM(typeof requestAnimationFrame<"u"?requestAnimationFrame:dt,!0),VM={useVisualState:n2({scrapeMotionValuesFromProps:r2,createRenderState:XE,onMount:(t,e,{renderState:r,latestValues:n})=>{Ge.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ge.render(()=>{Sy(r,n,{enableHardwareAcceleration:!1},wy(e.tagName),t.transformTemplate),t2(e,r)})}})},WM={useVisualState:n2({scrapeMotionValuesFromProps:Cy,createRenderState:yy})};function HM(t,{forwardMotionProps:e=!1},r,n){return{...gy(t)?VM:WM,preloadedFeatures:r,useRender:MM(e),createVisualElement:n,Component:t}}function fn(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const i2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Zh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const KM=t=>e=>i2(e)&&t(e,Zh(e));function gn(t,e,r,n){return fn(t,e,KM(r),n)}const GM=(t,e)=>r=>e(t(r)),ti=(...t)=>t.reduce(GM);function s2(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const WC=s2("dragHorizontal"),HC=s2("dragVertical");function o2(t){let e=!1;if(t==="y")e=HC();else if(t==="x")e=WC();else{const r=WC(),n=HC();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function a2(){const t=o2(!0);return t?(t(),!1):!0}class ci{constructor(e){this.isMounted=!1,this.node=e}update(){}}function KC(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),i=(o,a)=>{if(o.pointerType==="touch"||a2())return;const c=t.getProps();t.animationState&&c.whileHover&&t.animationState.setActive("whileHover",e),c[n]&&Ge.update(()=>c[n](o,a))};return gn(t.current,r,i,{passive:!t.getProps()[n]})}class $M extends ci{mount(){this.unmount=ti(KC(this.node,!0),KC(this.node,!1))}unmount(){}}class JM extends ci{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ti(fn(this.node.current,"focus",()=>this.onFocus()),fn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const c2=(t,e)=>e?t===e?!0:c2(t,e.parentElement):!1;function yv(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,Zh(r))}class QM extends ci{constructor(){super(...arguments),this.removeStartListeners=dt,this.removeEndListeners=dt,this.removeAccessibleListeners=dt,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=gn(window,"pointerup",(c,u)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Ge.update(()=>{!f&&!c2(this.node.current,c.target)?h&&h(c,u):d&&d(c,u)})},{passive:!(n.onTap||n.onPointerUp)}),a=gn(window,"pointercancel",(c,u)=>this.cancelPress(c,u),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=ti(o,a),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=c=>{c.key!=="Enter"||!this.checkPressEnd()||yv("up",(u,d)=>{const{onTap:h}=this.node.getProps();h&&Ge.update(()=>h(u,d))})};this.removeEndListeners(),this.removeEndListeners=fn(this.node.current,"keyup",a),yv("down",(c,u)=>{this.startPress(c,u)})},r=fn(this.node.current,"keydown",e),n=()=>{this.isPressing&&yv("cancel",(o,a)=>this.cancelPress(o,a))},i=fn(this.node.current,"blur",n);this.removeAccessibleListeners=ti(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ge.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!a2()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ge.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=gn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=fn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ti(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Sm=new WeakMap,Sv=new WeakMap,YM=t=>{const e=Sm.get(t.target);e&&e(t)},XM=t=>{t.forEach(YM)};function ZM({root:t,...e}){const r=t||document;Sv.has(r)||Sv.set(r,{});const n=Sv.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(XM,{root:t,...e})),n[i]}function eD(t,e,r){const n=ZM(e);return Sm.set(t,r),n.observe(t),()=>{Sm.delete(t),n.unobserve(t)}}const tD={some:0,all:1};class rD extends ci{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:o}=e,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:tD[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),v=d?h:f;v&&v(u)};return eD(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(nD(e,r))&&this.startObserver()}unmount(){}}function nD({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const iD={inView:{Feature:rD},tap:{Feature:QM},focus:{Feature:JM},hover:{Feature:$M}};function l2(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function sD(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function oD(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function ep(t,e,r){const n=t.getProps();return by(n,e,r!==void 0?r:n.custom,sD(t),oD(t))}let xy=dt;const os=t=>t*1e3,mn=t=>t/1e3,aD={current:!1},u2=t=>Array.isArray(t)&&typeof t[0]=="number";function d2(t){return!!(!t||typeof t=="string"&&h2[t]||u2(t)||Array.isArray(t)&&t.every(d2))}const Ql=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,h2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ql([0,.65,.55,1]),circOut:Ql([.55,0,1,.45]),backIn:Ql([.31,.01,.66,-.59]),backOut:Ql([.33,1.53,.69,.99])};function p2(t){if(t)return u2(t)?Ql(t):Array.isArray(t)?t.map(p2):h2[t]}function cD(t,e,r,{delay:n=0,duration:i,repeat:o=0,repeatType:a="loop",ease:c,times:u}={}){const d={[e]:r};u&&(d.offset=u);const h=p2(c);return Array.isArray(h)&&(d.easing=h),t.animate(d,{delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function lD(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const f2=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,uD=1e-7,dD=12;function hD(t,e,r,n,i){let o,a,c=0;do a=e+(r-e)/2,o=f2(a,n,i)-t,o>0?r=a:e=a;while(Math.abs(o)>uD&&++c<dD);return a}function Tu(t,e,r,n){if(t===e&&r===n)return dt;const i=o=>hD(o,0,1,t,r);return o=>o===0||o===1?o:f2(i(o),e,n)}const pD=Tu(.42,0,1,1),fD=Tu(0,0,.58,1),v2=Tu(.42,0,.58,1),vD=t=>Array.isArray(t)&&typeof t[0]!="number",g2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,m2=t=>e=>1-t(1-e),Py=t=>1-Math.sin(Math.acos(t)),y2=m2(Py),gD=g2(Py),S2=Tu(.33,1.53,.69,.99),_y=m2(S2),mD=g2(_y),yD=t=>(t*=2)<1?.5*_y(t):.5*(2-Math.pow(2,-10*(t-1))),SD={linear:dt,easeIn:pD,easeInOut:v2,easeOut:fD,circIn:Py,circInOut:gD,circOut:y2,backIn:_y,backInOut:mD,backOut:S2,anticipate:yD},GC=t=>{if(Array.isArray(t)){xy(t.length===4);const[e,r,n,i]=t;return Tu(e,r,n,i)}else if(typeof t=="string")return SD[t];return t},Ry=(t,e)=>r=>!!(Ru(r)&&CM.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),w2=(t,e,r)=>n=>{if(!Ru(n))return n;const[i,o,a,c]=n.match(Yh);return{[t]:parseFloat(i),[e]:parseFloat(o),[r]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},wD=t=>si(0,255,t),wv={...hs,transform:t=>Math.round(wD(t))},ss={test:Ry("rgb","red"),parse:w2("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+wv.transform(t)+", "+wv.transform(e)+", "+wv.transform(r)+", "+nu(ru.transform(n))+")"};function CD(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const wm={test:Ry("#"),parse:CD,transform:ss.transform},eo={test:Ry("hsl","hue"),parse:w2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Gr.transform(nu(e))+", "+Gr.transform(nu(r))+", "+nu(ru.transform(n))+")"},Ft={test:t=>ss.test(t)||wm.test(t)||eo.test(t),parse:t=>ss.test(t)?ss.parse(t):eo.test(t)?eo.parse(t):wm.parse(t),transform:t=>Ru(t)?t:t.hasOwnProperty("red")?ss.transform(t):eo.transform(t)},st=(t,e,r)=>-r*t+r*e+t;function Cv(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function bD({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,o=0,a=0;if(!e)i=o=a=r;else{const c=r<.5?r*(1+e):r+e-r*e,u=2*r-c;i=Cv(u,c,t+1/3),o=Cv(u,c,t),a=Cv(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const bv=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},xD=[wm,ss,eo],PD=t=>xD.find(e=>e.test(t));function $C(t){const e=PD(t);let r=e.parse(t);return e===eo&&(r=bD(r)),r}const C2=(t,e)=>{const r=$C(t),n=$C(e),i={...r};return o=>(i.red=bv(r.red,n.red,o),i.green=bv(r.green,n.green,o),i.blue=bv(r.blue,n.blue,o),i.alpha=st(r.alpha,n.alpha,o),ss.transform(i))};function _D(t){var e,r;return isNaN(t)&&Ru(t)&&(((e=t.match(Yh))===null||e===void 0?void 0:e.length)||0)+(((r=t.match($E))===null||r===void 0?void 0:r.length)||0)>0}const b2={regex:SM,countKey:"Vars",token:"${v}",parse:dt},x2={regex:$E,countKey:"Colors",token:"${c}",parse:Ft.parse},P2={regex:Yh,countKey:"Numbers",token:"${n}",parse:hs.parse};function xv(t,{regex:e,countKey:r,token:n,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+r]=o.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...o.map(i)))}function Rh(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&xv(r,b2),xv(r,x2),xv(r,P2),r}function _2(t){return Rh(t).values}function R2(t){const{values:e,numColors:r,numVars:n,tokenised:i}=Rh(t),o=e.length;return a=>{let c=i;for(let u=0;u<o;u++)u<n?c=c.replace(b2.token,a[u]):u<n+r?c=c.replace(x2.token,Ft.transform(a[u])):c=c.replace(P2.token,nu(a[u]));return c}}const RD=t=>typeof t=="number"?0:t;function ED(t){const e=_2(t);return R2(t)(e.map(RD))}const oi={test:_D,parse:_2,createTransformer:R2,getAnimatableNone:ED},E2=(t,e)=>r=>`${r>0?e:t}`;function T2(t,e){return typeof t=="number"?r=>st(t,e,r):Ft.test(t)?C2(t,e):t.startsWith("var(")?E2(t,e):I2(t,e)}const A2=(t,e)=>{const r=[...t],n=r.length,i=t.map((o,a)=>T2(o,e[a]));return o=>{for(let a=0;a<n;a++)r[a]=i[a](o);return r}},TD=(t,e)=>{const r={...t,...e},n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=T2(t[i],e[i]));return i=>{for(const o in n)r[o]=n[o](i);return r}},I2=(t,e)=>{const r=oi.createTransformer(e),n=Rh(t),i=Rh(e);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?ti(A2(n.values,i.values),r):E2(t,e)},wu=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},JC=(t,e)=>r=>st(t,e,r);function AD(t){return typeof t=="number"?JC:typeof t=="string"?Ft.test(t)?C2:I2:Array.isArray(t)?A2:typeof t=="object"?TD:JC}function ID(t,e,r){const n=[],i=r||AD(t[0]),o=t.length-1;for(let a=0;a<o;a++){let c=i(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||dt:e;c=ti(u,c)}n.push(c)}return n}function k2(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const o=t.length;if(xy(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ID(e,n,i),c=a.length,u=d=>{let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=wu(t[h],t[h+1],d);return a[h](f)};return r?d=>u(si(t[0],t[o-1],d)):u}function kD(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=wu(0,e,n);t.push(st(r,1,i))}}function jD(t){const e=[0];return kD(e,t.length-1),e}function OD(t,e){return t.map(r=>r*e)}function ND(t,e){return t.map(()=>e||v2).splice(0,t.length-1)}function Eh({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=vD(n)?n.map(GC):GC(n),o={done:!1,value:e[0]},a=OD(r&&r.length===e.length?r:jD(e),t),c=k2(a,e,{ease:Array.isArray(i)?i:ND(e,i)});return{calculatedDuration:t,next:u=>(o.value=c(u),o.done=u>=t,o)}}function j2(t,e){return e?t*(1e3/e):0}const MD=5;function O2(t,e,r){const n=Math.max(e-MD,0);return j2(r-t(n),e-n)}const Pv=.001,DD=.01,LD=10,zD=.05,BD=1;function FD({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,o,a=1-e;a=si(zD,BD,a),t=si(DD,LD,mn(t)),a<1?(i=d=>{const h=d*a,f=h*t,v=h-r,g=Cm(d,a),w=Math.exp(-f);return Pv-v/g*w},o=d=>{const f=d*a*t,v=f*r+r,g=Math.pow(a,2)*Math.pow(d,2)*t,w=Math.exp(-f),b=Cm(Math.pow(d,2),a);return(-i(d)+Pv>0?-1:1)*((v-g)*w)/b}):(i=d=>{const h=Math.exp(-d*t),f=(d-r)*t+1;return-Pv+h*f},o=d=>{const h=Math.exp(-d*t),f=(r-d)*(t*t);return h*f});const c=5/t,u=UD(i,o,c);if(t=os(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const d=Math.pow(u,2)*n;return{stiffness:d,damping:a*2*Math.sqrt(n*d),duration:t}}}const qD=12;function UD(t,e,r){let n=r;for(let i=1;i<qD;i++)n=n-t(n)/e(n);return n}function Cm(t,e){return t*Math.sqrt(1-e*e)}const VD=["duration","bounce"],WD=["stiffness","damping","mass"];function QC(t,e){return e.some(r=>t[r]!==void 0)}function HD(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!QC(t,WD)&&QC(t,VD)){const r=FD(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function N2({keyframes:t,restDelta:e,restSpeed:r,...n}){const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:v}=HD({...n,velocity:-mn(n.velocity||0)}),g=f||0,w=u/(2*Math.sqrt(c*d)),b=o-i,C=mn(Math.sqrt(c/d)),x=Math.abs(b)<5;r||(r=x?.01:2),e||(e=x?.005:.5);let R;if(w<1){const _=Cm(C,w);R=I=>{const k=Math.exp(-w*C*I);return o-k*((g+w*C*b)/_*Math.sin(_*I)+b*Math.cos(_*I))}}else if(w===1)R=_=>o-Math.exp(-C*_)*(b+(g+C*b)*_);else{const _=C*Math.sqrt(w*w-1);R=I=>{const k=Math.exp(-w*C*I),M=Math.min(_*I,300);return o-k*((g+w*C*b)*Math.sinh(M)+_*b*Math.cosh(M))/_}}return{calculatedDuration:v&&h||null,next:_=>{const I=R(_);if(v)a.done=_>=h;else{let k=g;_!==0&&(w<1?k=O2(R,_,I):k=0);const M=Math.abs(k)<=r,B=Math.abs(o-I)<=e;a.done=M&&B}return a.value=a.done?o:I,a}}}function YC({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:c,max:u,restDelta:d=.5,restSpeed:h}){const f=t[0],v={done:!1,value:f},g=O=>c!==void 0&&O<c||u!==void 0&&O>u,w=O=>c===void 0?u:u===void 0||Math.abs(c-O)<Math.abs(u-O)?c:u;let b=r*e;const C=f+b,x=a===void 0?C:a(C);x!==C&&(b=x-f);const R=O=>-b*Math.exp(-O/n),_=O=>x+R(O),I=O=>{const D=R(O),U=_(O);v.done=Math.abs(D)<=d,v.value=v.done?x:U};let k,M;const B=O=>{g(v.value)&&(k=O,M=N2({keyframes:[v.value,w(v.value)],velocity:O2(_,O,v.value),damping:i,stiffness:o,restDelta:d,restSpeed:h}))};return B(0),{calculatedDuration:null,next:O=>{let D=!1;return!M&&k===void 0&&(D=!0,I(O),B(O)),k!==void 0&&O>k?M.next(O-k):(!D&&I(O),v)}}}const KD=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Ge.update(e,!0),stop:()=>Sn(e),now:()=>Mt.isProcessing?Mt.timestamp:performance.now()}},XC=2e4;function ZC(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<XC;)e+=r,n=t.next(e);return e>=XC?1/0:e}const GD={decay:YC,inertia:YC,tween:Eh,keyframes:Eh,spring:N2};function Th({autoplay:t=!0,delay:e=0,driver:r=KD,keyframes:n,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:c="loop",onPlay:u,onStop:d,onComplete:h,onUpdate:f,...v}){let g=1,w=!1,b,C;const x=()=>{C=new Promise(T=>{b=T})};x();let R;const _=GD[i]||Eh;let I;_!==Eh&&typeof n[0]!="number"&&(I=k2([0,100],n,{clamp:!1}),n=[0,100]);const k=_({...v,keyframes:n});let M;c==="mirror"&&(M=_({...v,keyframes:[...n].reverse(),velocity:-(v.velocity||0)}));let B="idle",O=null,D=null,U=null;k.calculatedDuration===null&&o&&(k.calculatedDuration=ZC(k));const{calculatedDuration:L}=k;let F=1/0,H=1/0;L!==null&&(F=L+a,H=F*(o+1)-a);let $=0;const ee=T=>{if(D===null)return;g>0&&(D=Math.min(D,T)),g<0&&(D=Math.min(T-H/g,D)),O!==null?$=O:$=Math.round(T-D)*g;const W=$-e*(g>=0?1:-1),Z=g>=0?W<0:W>H;$=Math.max(W,0),B==="finished"&&O===null&&($=H);let se=$,le=k;if(o){const ye=Math.min($,H)/F;let Ie=Math.floor(ye),je=ye%1;!je&&ye>=1&&(je=1),je===1&&Ie--,Ie=Math.min(Ie,o+1),Ie%2&&(c==="reverse"?(je=1-je,a&&(je-=a/F)):c==="mirror"&&(le=M)),se=si(0,1,je)*F}const ce=Z?{done:!1,value:n[0]}:le.next(se);I&&(ce.value=I(ce.value));let{done:oe}=ce;!Z&&L!==null&&(oe=g>=0?$>=H:$<=0);const de=O===null&&(B==="finished"||B==="running"&&oe);return f&&f(ce.value),de&&V(),ce},X=()=>{R&&R.stop(),R=void 0},Y=()=>{B="idle",X(),b(),x(),D=U=null},V=()=>{B="finished",h&&h(),X(),b()},J=()=>{if(w)return;R||(R=r(ee));const T=R.now();u&&u(),O!==null?D=T-O:(!D||B==="finished")&&(D=T),B==="finished"&&x(),U=D,O=null,B="running",R.start()};t&&J();const j={then(T,W){return C.then(T,W)},get time(){return mn($)},set time(T){T=os(T),$=T,O!==null||!R||g===0?O=T:D=R.now()-T/g},get duration(){const T=k.calculatedDuration===null?ZC(k):k.calculatedDuration;return mn(T)},get speed(){return g},set speed(T){T===g||!R||(g=T,j.time=mn($))},get state(){return B},play:J,pause:()=>{B="paused",O=$},stop:()=>{w=!0,B!=="idle"&&(B="idle",d&&d(),Y())},cancel:()=>{U!==null&&ee(U),Y()},complete:()=>{B="finished"},sample:T=>(D=0,ee(T))};return j}function $D(t){let e;return()=>(e===void 0&&(e=t()),e)}const JD=$D(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),QD=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Zd=10,YD=2e4,XD=(t,e)=>e.type==="spring"||t==="backgroundColor"||!d2(e.ease);function ZD(t,e,{onUpdate:r,onComplete:n,...i}){if(!(JD()&&QD.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,c,u,d=!1;const h=()=>{u=new Promise(_=>{c=_})};h();let{keyframes:f,duration:v=300,ease:g,times:w}=i;if(XD(e,i)){const _=Th({...i,repeat:0,delay:0});let I={done:!1,value:f[0]};const k=[];let M=0;for(;!I.done&&M<YD;)I=_.sample(M),k.push(I.value),M+=Zd;w=void 0,f=k,v=M-Zd,g="linear"}const b=cD(t.owner.current,e,f,{...i,duration:v,ease:g,times:w}),C=()=>{d=!1,b.cancel()},x=()=>{d=!0,Ge.update(C),c(),h()};return b.onfinish=()=>{d||(t.set(lD(f,i)),n&&n(),x())},{then(_,I){return u.then(_,I)},attachTimeline(_){return b.timeline=_,b.onfinish=null,dt},get time(){return mn(b.currentTime||0)},set time(_){b.currentTime=os(_)},get speed(){return b.playbackRate},set speed(_){b.playbackRate=_},get duration(){return mn(v)},play:()=>{a||(b.play(),Sn(C))},pause:()=>b.pause(),stop:()=>{if(a=!0,b.playState==="idle")return;const{currentTime:_}=b;if(_){const I=Th({...i,autoplay:!1});t.setWithVelocity(I.sample(_-Zd).value,I.sample(_).value,Zd)}x()},complete:()=>{d||b.finish()},cancel:x}}function e3({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const i=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:dt,pause:dt,stop:dt,then:o=>(o(),Promise.resolve()),cancel:dt,complete:dt});return e?Th({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const t3={type:"spring",stiffness:500,damping:25,restSpeed:10},r3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),n3={type:"keyframes",duration:.8},i3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},s3=(t,{keyframes:e})=>e.length>2?n3:ds.has(t)?t.startsWith("scale")?r3(e[1]):t3:i3,bm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(oi.test(e)||e==="0")&&!e.startsWith("url(")),o3=new Set(["brightness","contrast","saturate","opacity"]);function a3(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Yh)||[];if(!n)return t;const i=r.replace(n,"");let o=o3.has(e)?1:0;return n!==r&&(o*=100),e+"("+o+i+")"}const c3=/([a-z-]*)\(.*?\)/g,xm={...oi,getAnimatableNone:t=>{const e=t.match(c3);return e?e.map(a3).join(" "):t}},l3={...JE,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:xm,WebkitFilter:xm},Ey=t=>l3[t];function M2(t,e){let r=Ey(t);return r!==xm&&(r=oi),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const D2=t=>/^0[^.\s]+$/.test(t);function u3(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||D2(t)}function d3(t,e,r,n){const i=bm(e,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const a=n.from!==void 0?n.from:t.get();let c;const u=[];for(let d=0;d<o.length;d++)o[d]===null&&(o[d]=d===0?a:o[d-1]),u3(o[d])&&u.push(d),typeof o[d]=="string"&&o[d]!=="none"&&o[d]!=="0"&&(c=o[d]);if(i&&u.length&&c)for(let d=0;d<u.length;d++){const h=u[d];o[h]=M2(e,c)}return o}function h3({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}function Ty(t,e){return t[e]||t.default||t}const p3={skipAnimations:!1},Ay=(t,e,r,n={})=>i=>{const o=Ty(n,t)||{},a=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-os(a);const u=d3(e,t,r,o),d=u[0],h=u[u.length-1],f=bm(t,d),v=bm(t,h);let g={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-c,onUpdate:w=>{e.set(w),o.onUpdate&&o.onUpdate(w)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(h3(o)||(g={...g,...s3(t,g)}),g.duration&&(g.duration=os(g.duration)),g.repeatDelay&&(g.repeatDelay=os(g.repeatDelay)),!f||!v||aD.current||o.type===!1||p3.skipAnimations)return e3(g);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const w=ZD(e,t,g);if(w)return w}return Th(g)};function Ah(t){return!!(Jt(t)&&t.add)}const L2=t=>/^\-?\d*\.?\d+$/.test(t);function Iy(t,e){t.indexOf(e)===-1&&t.push(e)}function ky(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class jy{constructor(){this.subscriptions=[]}add(e){return Iy(this.subscriptions,e),()=>ky(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const f3=t=>!isNaN(parseFloat(t));class v3{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=Mt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Ge.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ge.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=f3(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new jy);const n=this.events[e].add(r);return e==="change"?()=>{n(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?j2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ls(t,e){return new v3(t,e)}const z2=t=>e=>e.test(t),g3={test:t=>t==="auto",parse:t=>t},B2=[hs,Re,Gr,Kn,xM,bM,g3],ra=t=>B2.find(z2(t)),m3=[...B2,Ft,oi],y3=t=>m3.find(z2(t));function S3(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,ls(r))}function Oy(t,e){const r=ep(t,e);let{transitionEnd:n={},transition:i={},...o}=r?t.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const a in o){const c=LM(o[a]);S3(t,a,c)}}function Pm(t,e){[...e].reverse().forEach(n=>{const i=t.getVariant(n);i&&Oy(t,i),t.variantChildren&&t.variantChildren.forEach(o=>{Pm(o,e)})})}function w3(t,e){if(Array.isArray(e))return Pm(t,e);if(typeof e=="string")return Pm(t,[e]);Oy(t,e)}function C3(t,e,r){var n,i;const o=Object.keys(e).filter(c=>!t.hasValue(c)),a=o.length;if(a)for(let c=0;c<a;c++){const u=o[c],d=e[u];let h=null;Array.isArray(d)&&(h=d[0]),h===null&&(h=(i=(n=r[u])!==null&&n!==void 0?n:t.readValue(u))!==null&&i!==void 0?i:e[u]),h!=null&&(typeof h=="string"&&(L2(h)||D2(h))?h=parseFloat(h):!y3(h)&&oi.test(d)&&(h=M2(u,d)),t.addValue(u,ls(h,{owner:t})),r[u]===void 0&&(r[u]=h),h!==null&&t.setBaseTarget(u,h))}}function b3(t,e){return e?(e[t]||e.default||e).from:void 0}function x3(t,e,r){const n={};for(const i in t){const o=b3(i,e);if(o!==void 0)n[i]=o;else{const a=r.getValue(i);a&&(n[i]=a.get())}}return n}function P3({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function _3(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function F2(t,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...c}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");n&&(o=n);const d=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const v=t.getValue(f),g=c[f];if(!v||g===void 0||h&&P3(h,f))continue;const w={delay:r,elapsed:0,...Ty(o||{},f)};if(window.HandoffAppearAnimations){const x=t.getProps()[UE];if(x){const R=window.HandoffAppearAnimations(x,f,v,Ge);R!==null&&(w.elapsed=R,w.isHandoff=!0)}}let b=!w.isHandoff&&!_3(v,g);if(w.type==="spring"&&(v.getVelocity()||w.velocity)&&(b=!1),v.animation&&(b=!1),b)continue;v.start(Ay(f,v,g,t.shouldReduceMotion&&ds.has(f)?{type:!1}:w));const C=v.animation;Ah(u)&&(u.add(f),C.then(()=>u.remove(f))),d.push(C)}return a&&Promise.all(d).then(()=>{a&&Oy(t,a)}),d}function _m(t,e,r={}){const n=ep(t,e,r.custom);let{transition:i=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const o=n?()=>Promise.all(F2(t,n,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return R3(t,e,d+u,h,f,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[o,a]:[a,o];return u().then(()=>d())}else return Promise.all([o(),a(r.delay)])}function R3(t,e,r=0,n=0,i=1,o){const a=[],c=(t.variantChildren.size-1)*n,u=i===1?(d=0)=>d*n:(d=0)=>c-d*n;return Array.from(t.variantChildren).sort(E3).forEach((d,h)=>{d.notify("AnimationStart",e),a.push(_m(d,e,{...o,delay:r+u(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(a)}function E3(t,e){return t.sortNodePosition(e)}function q2(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(o=>_m(t,o,r));n=Promise.all(i)}else if(typeof e=="string")n=_m(t,e,r);else{const i=typeof e=="function"?ep(t,e,r.custom):e;n=Promise.all(F2(t,i,r))}return n.then(()=>t.notify("AnimationComplete",e))}const T3=[...py].reverse(),A3=py.length;function I3(t){return e=>Promise.all(e.map(({animation:r,options:n})=>q2(t,r,n)))}function k3(t){let e=I3(t);const r=O3();let n=!0;const i=(u,d)=>{const h=ep(t,d);if(h){const{transition:f,transitionEnd:v,...g}=h;u={...u,...g,...v}}return u};function o(u){e=u(t)}function a(u,d){const h=t.getProps(),f=t.getVariantContext(!0)||{},v=[],g=new Set;let w={},b=1/0;for(let x=0;x<A3;x++){const R=T3[x],_=r[R],I=h[R]!==void 0?h[R]:f[R],k=yu(I),M=R===d?_.isActive:null;M===!1&&(b=x);let B=I===f[R]&&I!==h[R]&&k;if(B&&n&&t.manuallyAnimateOnMount&&(B=!1),_.protectedKeys={...w},!_.isActive&&M===null||!I&&!_.prevProp||Jh(I)||typeof I=="boolean")continue;let D=j3(_.prevProp,I)||R===d&&_.isActive&&!B&&k||x>b&&k,U=!1;const L=Array.isArray(I)?I:[I];let F=L.reduce(i,{});M===!1&&(F={});const{prevResolvedValues:H={}}=_,$={...H,...F},ee=X=>{D=!0,g.has(X)&&(U=!0,g.delete(X)),_.needsAnimating[X]=!0};for(const X in $){const Y=F[X],V=H[X];if(w.hasOwnProperty(X))continue;let J=!1;_h(Y)&&_h(V)?J=!l2(Y,V):J=Y!==V,J?Y!==void 0?ee(X):g.add(X):Y!==void 0&&g.has(X)?ee(X):_.protectedKeys[X]=!0}_.prevProp=I,_.prevResolvedValues=F,_.isActive&&(w={...w,...F}),n&&t.blockInitialAnimation&&(D=!1),D&&(!B||U)&&v.push(...L.map(X=>({animation:X,options:{type:R,...u}})))}if(g.size){const x={};g.forEach(R=>{const _=t.getBaseTarget(R);_!==void 0&&(x[R]=_)}),v.push({animation:x})}let C=!!v.length;return n&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(C=!1),n=!1,C?e(v):Promise.resolve()}function c(u,d,h){var f;if(r[u].isActive===d)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var w;return(w=g.animationState)===null||w===void 0?void 0:w.setActive(u,d)}),r[u].isActive=d;const v=a(h,u);for(const g in r)r[g].protectedKeys={};return v}return{animateChanges:a,setActive:c,setAnimateFunction:o,getState:()=>r}}function j3(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!l2(e,t):!1}function ki(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O3(){return{animate:ki(!0),whileInView:ki(),whileHover:ki(),whileTap:ki(),whileDrag:ki(),whileFocus:ki(),exit:ki()}}class N3 extends ci{constructor(e){super(e),e.animationState||(e.animationState=k3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Jh(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let M3=0;class D3 extends ci{constructor(){super(...arguments),this.id=M3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&o.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const L3={animation:{Feature:N3},exit:{Feature:D3}},e1=(t,e)=>Math.abs(t-e);function z3(t,e){const r=e1(t.x,e.x),n=e1(t.y,e.y);return Math.sqrt(r**2+n**2)}class U2{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Rv(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,g=z3(f.offset,{x:0,y:0})>=3;if(!v&&!g)return;const{point:w}=f,{timestamp:b}=Mt;this.history.push({...w,timestamp:b});const{onStart:C,onMove:x}=this.handlers;v||(C&&C(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,v)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=_v(v,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(f,v)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Rv(f.type==="pointercancel"?this.lastMoveEventInfo:_v(v,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,C),w&&w(f,C)},!i2(e))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const a=Zh(e),c=_v(a,this.transformPagePoint),{point:u}=c,{timestamp:d}=Mt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(e,Rv(c,this.history)),this.removeListeners=ti(gn(this.contextWindow,"pointermove",this.handlePointerMove),gn(this.contextWindow,"pointerup",this.handlePointerUp),gn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Sn(this.updatePoint)}}function _v(t,e){return e?{point:e(t.point)}:t}function t1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rv({point:t},e){return{point:t,delta:t1(t,V2(e)),offset:t1(t,B3(e)),velocity:F3(e,.1)}}function B3(t){return t[0]}function V2(t){return t[t.length-1]}function F3(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=V2(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>os(e)));)r--;if(!n)return{x:0,y:0};const o=mn(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function lr(t){return t.max-t.min}function Rm(t,e=0,r=.01){return Math.abs(t-e)<=r}function r1(t,e,r,n=.5){t.origin=n,t.originPoint=st(e.min,e.max,t.origin),t.scale=lr(r)/lr(e),(Rm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=st(r.min,r.max,t.origin)-t.originPoint,(Rm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function iu(t,e,r,n){r1(t.x,e.x,r.x,n?n.originX:void 0),r1(t.y,e.y,r.y,n?n.originY:void 0)}function n1(t,e,r){t.min=r.min+e.min,t.max=t.min+lr(e)}function q3(t,e,r){n1(t.x,e.x,r.x),n1(t.y,e.y,r.y)}function i1(t,e,r){t.min=e.min-r.min,t.max=t.min+lr(e)}function su(t,e,r){i1(t.x,e.x,r.x),i1(t.y,e.y,r.y)}function U3(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?st(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?st(r,t,n.max):Math.min(t,r)),t}function s1(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function V3(t,{top:e,left:r,bottom:n,right:i}){return{x:s1(t.x,r,i),y:s1(t.y,e,n)}}function o1(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function W3(t,e){return{x:o1(t.x,e.x),y:o1(t.y,e.y)}}function H3(t,e){let r=.5;const n=lr(t),i=lr(e);return i>n?r=wu(e.min,e.max-n,t.min):n>i&&(r=wu(t.min,t.max-i,e.min)),si(0,1,r)}function K3(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Em=.35;function G3(t=Em){return t===!1?t=0:t===!0&&(t=Em),{x:a1(t,"left","right"),y:a1(t,"top","bottom")}}function a1(t,e,r){return{min:c1(t,e),max:c1(t,r)}}function c1(t,e){return typeof t=="number"?t:t[e]||0}const l1=()=>({translate:0,scale:1,origin:0,originPoint:0}),to=()=>({x:l1(),y:l1()}),u1=()=>({min:0,max:0}),ft=()=>({x:u1(),y:u1()});function wr(t){return[t("x"),t("y")]}function W2({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function $3({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function J3(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Ev(t){return t===void 0||t===1}function Tm({scale:t,scaleX:e,scaleY:r}){return!Ev(t)||!Ev(e)||!Ev(r)}function Yi(t){return Tm(t)||H2(t)||t.z||t.rotate||t.rotateX||t.rotateY}function H2(t){return d1(t.x)||d1(t.y)}function d1(t){return t&&t!=="0%"}function Ih(t,e,r){const n=t-r,i=e*n;return r+i}function h1(t,e,r,n,i){return i!==void 0&&(t=Ih(t,i,n)),Ih(t,r,n)+e}function Am(t,e=0,r=1,n,i){t.min=h1(t.min,e,r,n,i),t.max=h1(t.max,e,r,n,i)}function K2(t,{x:e,y:r}){Am(t.x,e.translate,e.scale,e.originPoint),Am(t.y,r.translate,r.scale,r.originPoint)}function Q3(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let o,a;for(let c=0;c<i;c++){o=r[c],a=o.projectionDelta;const u=o.instance;u&&u.style&&u.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ro(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,K2(t,a)),n&&Yi(o.latestValues)&&ro(t,o.latestValues))}e.x=p1(e.x),e.y=p1(e.y)}function p1(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Yn(t,e){t.min=t.min+e,t.max=t.max+e}function f1(t,e,[r,n,i]){const o=e[i]!==void 0?e[i]:.5,a=st(t.min,t.max,o);Am(t,e[r],e[n],a,e.scale)}const Y3=["x","scaleX","originX"],X3=["y","scaleY","originY"];function ro(t,e){f1(t.x,e,Y3),f1(t.y,e,X3)}function G2(t,e){return W2(J3(t.getBoundingClientRect(),e))}function Z3(t,e,r){const n=G2(t,r),{scroll:i}=e;return i&&(Yn(n.x,i.offset.x),Yn(n.y,i.offset.y)),n}const $2=({current:t})=>t?t.ownerDocument.defaultView:null,e5=new WeakMap;class t5{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ft(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Zh(h,"page").point)},o=(h,f)=>{const{drag:v,dragPropagation:g,onDragStart:w}=this.getProps();if(v&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=o2(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(C=>{let x=this.getAxisMotionValue(C).get()||0;if(Gr.test(x)){const{projection:R}=this.visualElement;if(R&&R.layout){const _=R.layout.layoutBox[C];_&&(x=lr(_)*(parseFloat(x)/100))}}this.originPoint[C]=x}),w&&Ge.update(()=>w(h,f),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:v,dragDirectionLock:g,onDirectionLock:w,onDrag:b}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:C}=f;if(g&&this.currentDirection===null){this.currentDirection=r5(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",f.point,C),this.updateAxis("y",f.point,C),this.visualElement.render(),b&&b(h,f)},c=(h,f)=>this.stop(h,f),u=()=>wr(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new U2(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:$2(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ge.update(()=>o(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!eh(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=U3(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;r&&Zs(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=V3(i.layoutBox,r):this.constraints=!1,this.elastic=G3(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&wr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=K3(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Zs(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Z3(n,i.root,this.visualElement.getTransformPagePoint());let a=W3(i.layout.layoutBox,o);if(r){const c=r($3(a));this.hasMutatedConstraints=!!c,c&&(a=W2(c))}return a}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=wr(h=>{if(!eh(h,r,this.currentDirection))return;let f=u&&u[h]||{};a&&(f={min:0,max:0});const v=i?200:1e6,g=i?40:1e7,w={type:"inertia",velocity:n?e[h]:0,bounceStiffness:v,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(c)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(Ay(e,n,0,r))}stopAnimation(){wr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wr(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){wr(r=>{const{drag:n}=this.getProps();if(!eh(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(r);if(i&&i.layout){const{min:a,max:c}=i.layout.layoutBox[r];o.set(e[r]-st(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Zs(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wr(a=>{const c=this.getAxisMotionValue(a);if(c){const u=c.get();i[a]=H3({min:u,max:u},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),wr(a=>{if(!eh(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:d}=this.constraints[a];c.set(st(u,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;e5.set(this.visualElement,this);const e=this.visualElement.current,r=gn(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Zs(u)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const a=fn(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(wr(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())}));return()=>{a(),r(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=Em,dragMomentum:c=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:c}}}function eh(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function r5(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class n5 extends ci{constructor(e){super(e),this.removeGroupControls=dt,this.removeListeners=dt,this.controls=new t5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const v1=t=>(e,r)=>{t&&Ge.update(()=>t(e,r))};class i5 extends ci{constructor(){super(...arguments),this.removePointerDownListener=dt}onPointerDown(e){this.session=new U2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:v1(e),onStart:v1(r),onMove:n,onEnd:(o,a)=>{delete this.session,i&&Ge.update(()=>i(o,a))}}}mount(){this.removePointerDownListener=gn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function s5(){const t=E.useContext(Kh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,i=E.useId();return E.useEffect(()=>n(i),[]),!e&&r?[!1,()=>r&&r(i)]:[!0]}const ah={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const na={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Re.test(t))t=parseFloat(t);else return t;const r=g1(t,e.target.x),n=g1(t,e.target.y);return`${r}% ${n}%`}},o5={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=oi.parse(t);if(i.length>5)return n;const o=oi.createTransformer(t),a=typeof i[0]!="number"?1:0,c=r.x.scale*e.x,u=r.y.scale*e.y;i[0+a]/=c,i[1+a]/=u;const d=st(c,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),o(i)}};class a5 extends br.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=e;vM(c5),o&&(r.group&&r.group.add(o),n&&n.register&&i&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ah.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Ge.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function J2(t){const[e,r]=s5(),n=E.useContext(vy);return br.createElement(a5,{...t,layoutGroup:n,switchLayoutGroup:E.useContext(WE),isPresent:e,safeToRemove:r})}const c5={borderRadius:{...na,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:na,borderTopRightRadius:na,borderBottomLeftRadius:na,borderBottomRightRadius:na,boxShadow:o5},Q2=["TopLeft","TopRight","BottomLeft","BottomRight"],l5=Q2.length,m1=t=>typeof t=="string"?parseFloat(t):t,y1=t=>typeof t=="number"||Re.test(t);function u5(t,e,r,n,i,o){i?(t.opacity=st(0,r.opacity!==void 0?r.opacity:1,d5(n)),t.opacityExit=st(e.opacity!==void 0?e.opacity:1,0,h5(n))):o&&(t.opacity=st(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<l5;a++){const c=`border${Q2[a]}Radius`;let u=S1(e,c),d=S1(r,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||y1(u)===y1(d)?(t[c]=Math.max(st(m1(u),m1(d),n),0),(Gr.test(d)||Gr.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||r.rotate)&&(t.rotate=st(e.rotate||0,r.rotate||0,n))}function S1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const d5=Y2(0,.5,y2),h5=Y2(.5,.95,dt);function Y2(t,e,r){return n=>n<t?0:n>e?1:r(wu(t,e,n))}function w1(t,e){t.min=e.min,t.max=e.max}function yr(t,e){w1(t.x,e.x),w1(t.y,e.y)}function C1(t,e,r,n,i){return t-=e,t=Ih(t,1/r,n),i!==void 0&&(t=Ih(t,1/i,n)),t}function p5(t,e=0,r=1,n=.5,i,o=t,a=t){if(Gr.test(e)&&(e=parseFloat(e),e=st(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=st(o.min,o.max,n);t===o&&(c-=e),t.min=C1(t.min,e,r,c,i),t.max=C1(t.max,e,r,c,i)}function b1(t,e,[r,n,i],o,a){p5(t,e[r],e[n],e[i],e.scale,o,a)}const f5=["x","scaleX","originX"],v5=["y","scaleY","originY"];function x1(t,e,r,n){b1(t.x,e,f5,r?r.x:void 0,n?n.x:void 0),b1(t.y,e,v5,r?r.y:void 0,n?n.y:void 0)}function P1(t){return t.translate===0&&t.scale===1}function X2(t){return P1(t.x)&&P1(t.y)}function g5(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Z2(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function _1(t){return lr(t.x)/lr(t.y)}class m5{constructor(){this.members=[]}add(e){Iy(this.members,e),e.scheduleRender()}remove(e){if(ky(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function R1(t,e,r){let n="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(n=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:u,rotateX:d,rotateY:h}=r;u&&(n+=`rotate(${u}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(n+=`scale(${a}, ${c})`),n||"none"}const y5=(t,e)=>t.depth-e.depth;class S5{constructor(){this.children=[],this.isDirty=!1}add(e){Iy(this.children,e),this.isDirty=!0}remove(e){ky(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(y5),this.isDirty=!1,this.children.forEach(e)}}function w5(t,e){const r=performance.now(),n=({timestamp:i})=>{const o=i-r;o>=e&&(Sn(n),t(o-e))};return Ge.read(n,!0),()=>Sn(n)}function C5(t){window.MotionDebug&&window.MotionDebug.record(t)}function b5(t){return t instanceof SVGElement&&t.tagName!=="svg"}function x5(t,e,r){const n=Jt(t)?t:ls(t);return n.start(Ay("",n,e,r)),n.animation}const E1=["","X","Y","Z"],P5={visibility:"hidden"},T1=1e3;let _5=0;const Xi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function eT({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},c=e?.()){this.id=_5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Xi.totalNodes=Xi.resolvedTargetDeltas=Xi.recalculatedProjection=0,this.nodes.forEach(T5),this.nodes.forEach(O5),this.nodes.forEach(N5),this.nodes.forEach(A5),C5(Xi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new S5)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new jy),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=b5(a),this.instance=a;const{layoutId:u,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||u)&&(this.isLayoutDirty=!0),t){let f;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=w5(v,250),ah.hasAnimatedSinceResize&&(ah.hasAnimatedSinceResize=!1,this.nodes.forEach(I1))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:v,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||B5,{onLayoutAnimationStart:C,onLayoutAnimationComplete:x}=h.getProps(),R=!this.targetLayout||!Z2(this.targetLayout,w)||g,_=!v&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||v&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const I={...Ty(b,"layout"),onPlay:C,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else v||I1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Sn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(M5),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A1);return}this.isUpdating||this.nodes.forEach(k5),this.isUpdating=!1,this.nodes.forEach(j5),this.nodes.forEach(R5),this.nodes.forEach(E5),this.clearAllSnapshots();const c=performance.now();Mt.delta=si(0,1e3/60,c-Mt.timestamp),Mt.timestamp=c,Mt.isProcessing=!0,mv.update.process(Mt),mv.preRender.process(Mt),mv.render.process(Mt),Mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(I5),this.sharedNodes.forEach(D5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,c=this.projectionDelta&&!X2(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&(c||Yi(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),F5(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ft();const c=a.measureViewportBox(),{scroll:u}=this.root;return u&&(Yn(c.x,u.offset.x),Yn(c.y,u.offset.y)),c}removeElementScroll(a){const c=ft();yr(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;if(d!==this.root&&h&&f.layoutScroll){if(h.isRoot){yr(c,a);const{scroll:v}=this.root;v&&(Yn(c.x,-v.offset.x),Yn(c.y,-v.offset.y))}Yn(c.x,h.offset.x),Yn(c.y,h.offset.y)}}return c}applyTransform(a,c=!1){const u=ft();yr(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ro(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Yi(h.latestValues)&&ro(u,h.latestValues)}return Yi(this.latestValues)&&ro(u,this.latestValues),u}removeTransform(a){const c=ft();yr(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Yi(d.latestValues))continue;Tm(d.latestValues)&&d.updateSnapshot();const h=ft(),f=d.measurePageBox();yr(h,f),x1(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Yi(this.latestValues)&&x1(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var c;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:v}=this.options;if(!(!this.layout||!(f||v))){if(this.resolvedRelativeTargetAt=Mt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),su(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ft(),this.targetWithTransforms=ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),K2(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),su(this.relativeTargetOrigin,this.target,g.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Xi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Tm(this.parent.latestValues)||H2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Mt.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;yr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,g=this.treeScale.y;Q3(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox);const{target:w}=c;if(!w){this.projectionTransform&&(this.projectionDelta=to(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=to(),this.projectionDeltaWithTransform=to());const b=this.projectionTransform;iu(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=R1(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==v||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Xi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},f=to();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=ft(),g=u?u.source:void 0,w=this.layout?this.layout.source:void 0,b=g!==w,C=this.getStack(),x=!C||C.members.length<=1,R=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(z5));this.animationProgress=0;let _;this.mixTargetDelta=I=>{const k=I/1e3;k1(f.x,a.x,k),k1(f.y,a.y,k),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(su(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),L5(this.relativeTarget,this.relativeTargetOrigin,v,k),_&&g5(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ft()),yr(_,this.relativeTarget)),b&&(this.animationValues=h,u5(h,d,this.latestValues,k,R,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Sn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{ah.hasAnimatedSinceResize=!0,this.currentAnimation=x5(0,T1,{...a,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=a;if(!(!c||!u||!d)){if(this!==a&&this.layout&&d&&tT(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ft();const f=lr(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+f;const v=lr(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+v}yr(c,u),ro(c,h),iu(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new m5),this.sharedNodes.get(a).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:c}=this.options;return c?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:c}=this.options;return c?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(c=!0),!c)return;const d={};for(let h=0;h<E1.length;h++){const f="rotate"+E1[h];u[f]&&(d[f]=u[f],a.setStaticValue(f,0))}a.render();for(const h in d)a.setStaticValue(h,d[h]);a.scheduleRender()}getProjectionStyles(a){var c,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return P5;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=oh(a?.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=oh(a?.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const v=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=R1(this.projectionDeltaWithTransform,this.treeScale,v),h&&(d.transform=h(v,d.transform));const{x:g,y:w}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,f.animationValues?d.opacity=f===this?(u=(c=v.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:d.opacity=f===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in xh){if(v[b]===void 0)continue;const{correct:C,applyTo:x}=xh[b],R=d.transform==="none"?v[b]:C(v[b],f);if(x){const _=x.length;for(let I=0;I<_;I++)d[x[I]]=R}else d[b]=R}return this.options.layoutId&&(d.pointerEvents=f===this?oh(a?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(A1),this.root.sharedNodes.clear()}}}function R5(t){t.updateLayout()}function E5(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:o}=t.options,a=r.source!==t.layout.source;o==="size"?wr(f=>{const v=a?r.measuredBox[f]:r.layoutBox[f],g=lr(v);v.min=n[f].min,v.max=v.min+g}):tT(o,r.layoutBox,n)&&wr(f=>{const v=a?r.measuredBox[f]:r.layoutBox[f],g=lr(n[f]);v.max=v.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const c=to();iu(c,n,r.layoutBox);const u=to();a?iu(u,t.applyTransform(i,!0),r.measuredBox):iu(u,n,r.layoutBox);const d=!X2(c);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:v,layout:g}=f;if(v&&g){const w=ft();su(w,r.layoutBox,v.layoutBox);const b=ft();su(b,n,g.layoutBox),Z2(w,b)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=w,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:u,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function T5(t){Xi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function A5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function I5(t){t.clearSnapshot()}function A1(t){t.clearMeasurements()}function k5(t){t.isLayoutDirty=!1}function j5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function I1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function O5(t){t.resolveTargetDelta()}function N5(t){t.calcProjection()}function M5(t){t.resetRotation()}function D5(t){t.removeLeadSnapshot()}function k1(t,e,r){t.translate=st(e.translate,0,r),t.scale=st(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function j1(t,e,r,n){t.min=st(e.min,r.min,n),t.max=st(e.max,r.max,n)}function L5(t,e,r,n){j1(t.x,e.x,r.x,n),j1(t.y,e.y,r.y,n)}function z5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B5={duration:.45,ease:[.4,0,.1,1]},O1=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),N1=O1("applewebkit/")&&!O1("chrome/")?Math.round:dt;function M1(t){t.min=N1(t.min),t.max=N1(t.max)}function F5(t){M1(t.x),M1(t.y)}function tT(t,e,r){return t==="position"||t==="preserve-aspect"&&!Rm(_1(e),_1(r),.2)}const q5=eT({attachResizeListener:(t,e)=>fn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tv={current:void 0},rT=eT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tv.current){const t=new q5({});t.mount(window),t.setOptions({layoutScroll:!0}),Tv.current=t}return Tv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),U5={pan:{Feature:i5},drag:{Feature:n5,ProjectionNode:rT,MeasureLayout:J2}},V5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function W5(t){const e=V5.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}function Im(t,e,r=1){const[n,i]=W5(t);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const a=o.trim();return L2(a)?parseFloat(a):a}else return ym(i)?Im(i,e,r+1):i}function H5(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(i=>{const o=i.get();if(!ym(o))return;const a=Im(o,n);a&&i.set(a)});for(const i in e){const o=e[i];if(!ym(o))continue;const a=Im(o,n);a&&(e[i]=a,r||(r={}),r[i]===void 0&&(r[i]=o))}return{target:e,transitionEnd:r}}const K5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),nT=t=>K5.has(t),G5=t=>Object.keys(t).some(nT),D1=t=>t===hs||t===Re,L1=(t,e)=>parseFloat(t.split(", ")[e]),z1=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return L1(i[1],e);{const o=n.match(/^matrix\((.+)\)$/);return o?L1(o[1],t):0}},$5=new Set(["x","y","z"]),J5=_u.filter(t=>!$5.has(t));function Q5(t){const e=[];return J5.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const oo={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:z1(4,13),y:z1(5,14)};oo.translateX=oo.x;oo.translateY=oo.y;const Y5=(t,e,r)=>{const n=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:a}=o,c={};a==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(d=>{c[d]=oo[d](n,o)}),e.render();const u=e.measureViewportBox();return r.forEach(d=>{const h=e.getValue(d);h&&h.jump(c[d]),t[d]=oo[d](u,o)}),t},X5=(t,e,r={},n={})=>{e={...e},n={...n};const i=Object.keys(e).filter(nT);let o=[],a=!1;const c=[];if(i.forEach(u=>{const d=t.getValue(u);if(!t.hasValue(u))return;let h=r[u],f=ra(h);const v=e[u];let g;if(_h(v)){const w=v.length,b=v[0]===null?1:0;h=v[b],f=ra(h);for(let C=b;C<w&&v[C]!==null;C++)g?xy(ra(v[C])===g):g=ra(v[C])}else g=ra(v);if(f!==g)if(D1(f)&&D1(g)){const w=d.get();typeof w=="string"&&d.set(parseFloat(w)),typeof v=="string"?e[u]=parseFloat(v):Array.isArray(v)&&g===Re&&(e[u]=v.map(parseFloat))}else f?.transform&&g?.transform&&(h===0||v===0)?h===0?d.set(g.transform(h)):e[u]=f.transform(v):(a||(o=Q5(t),a=!0),c.push(u),n[u]=n[u]!==void 0?n[u]:e[u],d.jump(v))}),c.length){const u=c.indexOf("height")>=0?window.pageYOffset:null,d=Y5(e,t,c);return o.length&&o.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),Gh&&u!==null&&window.scrollTo({top:u}),{target:d,transitionEnd:n}}else return{target:e,transitionEnd:n}};function Z5(t,e,r,n){return G5(e)?X5(t,e,r,n):{target:e,transitionEnd:n}}const e8=(t,e,r,n)=>{const i=H5(t,e,n);return e=i.target,n=i.transitionEnd,Z5(t,e,r,n)},km={current:null},iT={current:!1};function t8(){if(iT.current=!0,!!Gh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>km.current=t.matches;t.addListener(e),e()}else km.current=!1}function r8(t,e,r){const{willChange:n}=e;for(const i in e){const o=e[i],a=r[i];if(Jt(o))t.addValue(i,o),Ah(n)&&n.add(i);else if(Jt(a))t.addValue(i,ls(o,{owner:t})),Ah(n)&&n.remove(i);else if(a!==o)if(t.hasValue(i)){const c=t.getValue(i);!c.hasAnimated&&c.set(o)}else{const c=t.getStaticValue(i);t.addValue(i,ls(c!==void 0?c:o,{owner:t}))}}for(const i in r)e[i]===void 0&&t.removeValue(i);return e}const B1=new WeakMap,sT=Object.keys(Su),n8=sT.length,F1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],i8=fy.length;class s8{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ge.render(this.render,!1,!0);const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=Qh(r),this.isVariantNode=VE(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{});for(const f in h){const v=h[f];c[f]!==void 0&&Jt(v)&&(v.set(c[f],!1),Ah(d)&&d.add(f))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,B1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),iT.current||t8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:km.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){B1.delete(this.current),this.projection&&this.projection.unmount(),Sn(this.notifyUpdate),Sn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=ds.has(e),i=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ge.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,i,o){let a,c;for(let u=0;u<n8;u++){const d=sT[u],{isEnabled:h,Feature:f,ProjectionNode:v,MeasureLayout:g}=Su[d];v&&(a=v),h(r)&&(!this.features[d]&&f&&(this.features[d]=new f(this)),g&&(c=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:d,drag:h,dragConstraints:f,layoutScroll:v,layoutRoot:g}=r;this.projection.setOptions({layoutId:u,layout:d,alwaysMeasureLayout:!!h||f&&Zs(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:g})}return c}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<F1.length;n++){const i=F1[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=r8(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<i8;n++){const i=fy[n],o=this.props[i];(yu(o)||o===!1)&&(r[i]=o)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=ls(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(r=by(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Jt(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new jy),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class oT extends s8{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:i},o){let a=x3(n,e||{},this);if(i&&(r&&(r=i(r)),n&&(n=i(n)),a&&(a=i(a))),o){C3(this,n,a);const c=e8(this,n,a,r);r=c.transitionEnd,n=c.target}return{transition:e,transitionEnd:r,...n}}}function o8(t){return window.getComputedStyle(t)}class a8 extends oT{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(ds.has(r)){const n=Ey(r);return n&&n.default||0}else{const n=o8(e),i=(GE(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return G2(e,r)}build(e,r,n,i){my(e,r,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,r){return Cy(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,i){ZE(e,r,n,i)}}class c8 extends oT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(ds.has(r)){const n=Ey(r);return n&&n.default||0}return r=e2.has(r)?r:hy(r),e.getAttribute(r)}measureInstanceViewportBox(){return ft()}scrapeMotionValuesFromProps(e,r){return r2(e,r)}build(e,r,n,i){Sy(e,r,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,n,i){t2(e,r,n,i)}mount(e){this.isSVGTag=wy(e.tagName),super.mount(e)}}const l8=(t,e)=>gy(t)?new c8(e,{enableHardwareAcceleration:!1}):new a8(e,{enableHardwareAcceleration:!0}),u8={layout:{ProjectionNode:rT,MeasureLayout:J2}},d8={...L3,...iD,...U5,...u8},ie=pM((t,e)=>HM(t,e,d8,l8));function aT(){const t=E.useRef(!1);return $h(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function h8(){const t=aT(),[e,r]=E.useState(0),n=E.useCallback(()=>{t.current&&r(e+1)},[e]);return[E.useCallback(()=>Ge.postRender(n),[n]),e]}class p8 extends E.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function f8({children:t,isPresent:e}){const r=E.useId(),n=E.useRef(null),i=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:o,height:a,top:c,left:u}=i.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),E.createElement(p8,{isPresent:e,childRef:n,sizeRef:i},E.cloneElement(t,{ref:n}))}const Av=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:a})=>{const c=Xh(v8),u=E.useId(),d=E.useMemo(()=>({id:u,initial:e,isPresent:r,custom:i,onExitComplete:h=>{c.set(h,!0);for(const f of c.values())if(!f)return;n&&n()},register:h=>(c.set(h,!1),()=>c.delete(h))}),o?void 0:[r]);return E.useMemo(()=>{c.forEach((h,f)=>c.set(f,!1))},[r]),E.useEffect(()=>{!r&&!c.size&&n&&n()},[r]),a==="popLayout"&&(t=E.createElement(f8,{isPresent:r},t)),E.createElement(Kh.Provider,{value:d},t)};function v8(){return new Map}function g8(t){return E.useEffect(()=>()=>t(),[])}const Zi=t=>t.key||"";function m8(t,e){t.forEach(r=>{const n=Zi(r);e.set(n,r)})}function y8(t){const e=[];return E.Children.forEach(t,r=>{E.isValidElement(r)&&e.push(r)}),e}const ur=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const c=E.useContext(vy).forceRender||h8()[0],u=aT(),d=y8(t);let h=d;const f=E.useRef(new Map).current,v=E.useRef(h),g=E.useRef(new Map).current,w=E.useRef(!0);if($h(()=>{w.current=!1,m8(d,g),v.current=h}),g8(()=>{w.current=!0,g.clear(),f.clear()}),w.current)return E.createElement(E.Fragment,null,h.map(R=>E.createElement(Av,{key:Zi(R),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:a},R)));h=[...h];const b=v.current.map(Zi),C=d.map(Zi),x=b.length;for(let R=0;R<x;R++){const _=b[R];C.indexOf(_)===-1&&!f.has(_)&&f.set(_,void 0)}return a==="wait"&&f.size&&(h=[]),f.forEach((R,_)=>{if(C.indexOf(_)!==-1)return;const I=g.get(_);if(!I)return;const k=b.indexOf(_);let M=R;if(!M){const B=()=>{f.delete(_);const O=Array.from(g.keys()).filter(D=>!C.includes(D));if(O.forEach(D=>g.delete(D)),v.current=d.filter(D=>{const U=Zi(D);return U===_||O.includes(U)}),!f.size){if(u.current===!1)return;c(),n&&n()}};M=E.createElement(Av,{key:Zi(I),isPresent:!1,onExitComplete:B,custom:e,presenceAffectsLayout:o,mode:a},I),f.set(_,M)}h.splice(k,0,M)}),h=h.map(R=>{const _=R.key;return f.has(_)?R:E.createElement(Av,{key:Zi(R),isPresent:!0,presenceAffectsLayout:o,mode:a},R)}),E.createElement(E.Fragment,null,f.size?h:h.map(R=>E.cloneElement(R)))};function S8(t){const e=Xh(()=>ls(t)),{isStatic:r}=E.useContext(dy);if(r){const[,n]=E.useState(t);E.useEffect(()=>e.on("change",n),[])}return e}function w8(t){t.values.forEach(e=>e.stop())}function C8(){const t=new Set,e={subscribe(r){return t.add(r),()=>{t.delete(r)}},start(r,n){const i=[];return t.forEach(o=>{i.push(q2(o,r,{transitionOverride:n}))}),Promise.all(i)},set(r){return t.forEach(n=>{w3(n,r)})},stop(){t.forEach(r=>{w8(r)})},mount(){return()=>{e.stop()}}};return e}function b8(){const t=Xh(C8);return $h(t.mount,[]),t}const x8=b8;var cT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q1=br.createContext&&br.createContext(cT),ri=function(){return ri=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ri.apply(this,arguments)},P8=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function lT(t){return t&&t.map(function(e,r){return br.createElement(e.tag,ri({key:r},e.attr),lT(e.child))})}function xe(t){return function(e){return br.createElement(_8,ri({attr:ri({},t.attr)},e),lT(t.child))}}function _8(t){var e=function(r){var n=t.attr,i=t.size,o=t.title,a=P8(t,["attr","size","title"]),c=i||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),br.createElement("svg",ri({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:u,style:ri(ri({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&br.createElement("title",null,o),t.children)};return q1!==void 0?br.createElement(q1.Consumer,null,function(r){return e(r)}):e(cT)}function ot(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(t)}function R8(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(t)}function E8(t){return xe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"}}]})(t)}function T8(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"}}]})(t)}function A8(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"}}]})(t)}function uT(t){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"}}]})(t)}function Ny(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(t)}function wn(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(t)}function tp(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(t)}function dT(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function hT(t){return xe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(t)}function I8(t){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4z"}}]})(t)}function pT(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M278.06 256L444.48 89.57c4.69-4.69 4.69-12.29 0-16.97-32.8-32.8-85.99-32.8-118.79 0L210.18 188.12l-24.86-24.86c4.31-10.92 6.68-22.81 6.68-35.26 0-53.02-42.98-96-96-96S0 74.98 0 128s42.98 96 96 96c4.54 0 8.99-.32 13.36-.93L142.29 256l-32.93 32.93c-4.37-.61-8.83-.93-13.36-.93-53.02 0-96 42.98-96 96s42.98 96 96 96 96-42.98 96-96c0-12.45-2.37-24.34-6.68-35.26l24.86-24.86L325.69 439.4c32.8 32.8 85.99 32.8 118.79 0 4.69-4.68 4.69-12.28 0-16.97L278.06 256zM96 160c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32zm0 256c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"}}]})(t)}function k8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(t)}function j8(t){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(t)}function O8(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(t)}function My(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.12 245.96c-13.25 0-24 10.74-24 24 1.14 72.25-8.14 141.9-27.7 211.55-2.73 9.72 2.15 30.49 23.12 30.49 10.48 0 20.11-6.92 23.09-17.52 13.53-47.91 31.04-125.41 29.48-224.52.01-13.25-10.73-24-23.99-24zm-.86-81.73C194 164.16 151.25 211.3 152.1 265.32c.75 47.94-3.75 95.91-13.37 142.55-2.69 12.98 5.67 25.69 18.64 28.36 13.05 2.67 25.67-5.66 28.36-18.64 10.34-50.09 15.17-101.58 14.37-153.02-.41-25.95 19.92-52.49 54.45-52.34 31.31.47 57.15 25.34 57.62 55.47.77 48.05-2.81 96.33-10.61 143.55-2.17 13.06 6.69 25.42 19.76 27.58 19.97 3.33 26.81-15.1 27.58-19.77 8.28-50.03 12.06-101.21 11.27-152.11-.88-55.8-47.94-101.88-104.91-102.72zm-110.69-19.78c-10.3-8.34-25.37-6.8-33.76 3.48-25.62 31.5-39.39 71.28-38.75 112 .59 37.58-2.47 75.27-9.11 112.05-2.34 13.05 6.31 25.53 19.36 27.89 20.11 3.5 27.07-14.81 27.89-19.36 7.19-39.84 10.5-80.66 9.86-121.33-.47-29.88 9.2-57.88 28-80.97 8.35-10.28 6.79-25.39-3.49-33.76zm109.47-62.33c-15.41-.41-30.87 1.44-45.78 4.97-12.89 3.06-20.87 15.98-17.83 28.89 3.06 12.89 16 20.83 28.89 17.83 11.05-2.61 22.47-3.77 34-3.69 75.43 1.13 137.73 61.5 138.88 134.58.59 37.88-1.28 76.11-5.58 113.63-1.5 13.17 7.95 25.08 21.11 26.58 16.72 1.95 25.51-11.88 26.58-21.11a929.06 929.06 0 0 0 5.89-119.85c-1.56-98.75-85.07-180.33-186.16-181.83zm252.07 121.45c-2.86-12.92-15.51-21.2-28.61-18.27-12.94 2.86-21.12 15.66-18.26 28.61 4.71 21.41 4.91 37.41 4.7 61.6-.11 13.27 10.55 24.09 23.8 24.2h.2c13.17 0 23.89-10.61 24-23.8.18-22.18.4-44.11-5.83-72.34zm-40.12-90.72C417.29 43.46 337.6 1.29 252.81.02 183.02-.82 118.47 24.91 70.46 72.94 24.09 119.37-.9 181.04.14 246.65l-.12 21.47c-.39 13.25 10.03 24.31 23.28 24.69.23.02.48.02.72.02 12.92 0 23.59-10.3 23.97-23.3l.16-23.64c-.83-52.5 19.16-101.86 56.28-139 38.76-38.8 91.34-59.67 147.68-58.86 69.45 1.03 134.73 35.56 174.62 92.39 7.61 10.86 22.56 13.45 33.42 5.86 10.84-7.62 13.46-22.59 5.84-33.43z"}}]})(t)}function N8(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"}}]})(t)}function Cu(t){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"}}]})(t)}function fT(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"}}]})(t)}function vT(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(t)}function M8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"}}]})(t)}function gT(t){return xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"}}]})(t)}function as(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(t)}function mT(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"}}]})(t)}function Dy(t){return xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M336 192h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16zM176 352c53.02 0 96-42.98 96-96h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96z"}}]})(t)}function $r(t){return xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}}]})(t)}function D8(t){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"}}]})(t)}function L8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(t)}function z8(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(t)}function B8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(t)}function F8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"}}]})(t)}function yT(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"}}]})(t)}function q8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.12019,19.09375c-1.18945-5.53125-6.65819-11-12.207-12.1875C460.716,0,435.507,0,410.40747,0,307.17523,0,245.26909,55.20312,199.05238,128H94.83772c-16.34763.01562-35.55658,11.875-42.88664,26.48438L2.51562,253.29688A28.4,28.4,0,0,0,0,264a24.00867,24.00867,0,0,0,24.00582,24H127.81618l-22.47457,22.46875c-11.36521,11.36133-12.99607,32.25781,0,45.25L156.24582,406.625c11.15623,11.1875,32.15619,13.15625,45.27726,0l22.47457-22.46875V488a24.00867,24.00867,0,0,0,24.00581,24,28.55934,28.55934,0,0,0,10.707-2.51562l98.72834-49.39063c14.62888-7.29687,26.50776-26.5,26.50776-42.85937V312.79688c72.59753-46.3125,128.03493-108.40626,128.03493-211.09376C512.07526,76.5,512.07526,51.29688,505.12019,19.09375ZM384.04033,168A40,40,0,1,1,424.05,128,40.02322,40.02322,0,0,1,384.04033,168Z"}}]})(t)}function U8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(t)}function ao(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function Ly(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M128,256A128,128,0,1,0,256,384,128,128,0,0,0,128,256Zm379-54.86L400.07,18.29a37.26,37.26,0,0,0-64.14,0L229,201.14C214.76,225.52,232.58,256,261.09,256H474.91C503.42,256,521.24,225.52,507,201.14ZM480,288H320a32,32,0,0,0-32,32V480a32,32,0,0,0,32,32H480a32,32,0,0,0,32-32V320A32,32,0,0,0,480,288Z"}}]})(t)}function ST(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function wT(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z"}}]})(t)}function li(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(t)}function Be(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(t)}function CT(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}}]})(t)}function zy(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M16 128h416c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H16C7.16 32 0 39.16 0 48v64c0 8.84 7.16 16 16 16zm480 80H80c-8.84 0-16 7.16-16 16v64c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-64c0-8.84-7.16-16-16-16zm-64 176H16c-8.84 0-16 7.16-16 16v64c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-64c0-8.84-7.16-16-16-16z"}}]})(t)}function jm(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}}]})(t)}function bT(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"}}]})(t)}function V8(t){return xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(t)}function W8(t){return xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function H8(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"}}]})(t)}function K8(t){return xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}function Om(t){return xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}function ui(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(t)}function U1(t){return xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M562.1 383.9c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144C540.6 93.4 520 85.4 504.2 73 490.1 61.9 470 61.7 456 73c-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3z"}}]})(t)}const V1=()=>{const t=We(),e=Nh(),[r,n]=E.useState("student"),[i,o]=E.useState(""),[a,c]=E.useState(""),{isLoading:u,error:d}=io(v=>v.auth||{}),h=async v=>{v.preventDefault(),(await e(tu({email:i,password:a}))).meta.requestStatus==="fulfilled"&&t("/dashboard")},f=[{title:"Speech Analysis",desc:"Story Recorder lab uses AI to detect phonemes in real-time for perfect pronunciation.",icon:y.jsx(Dy,{}),color:"bg-sky-500"},{title:"Visual Anchoring",desc:"Snapshot Stars builds permanent visual pathways for decoding through timing-based capture.",icon:y.jsx(A8,{}),color:"bg-yellow-500"},{title:"Phonemic Segmentation",desc:"Teaches children to break words apart into distinct sounds, a critical precursor to spelling.",icon:y.jsx(M8,{}),color:"bg-rose-500"},{title:"Visual Scavenging",desc:"Word Hunter and Word Spy train eyes to scan and identify complex phonetic patterns.",icon:y.jsx(ao,{}),color:"bg-emerald-500"},{title:"Syntactic Architecture",desc:"The Sentence Stream module builds grammar awareness by organizing word logic.",icon:y.jsx(zy,{}),color:"bg-indigo-500"},{title:"Morphology Lab",desc:"Word Grids and Phonics Builders allow kids to physically construct words from scratch.",icon:y.jsx(Ly,{}),color:"bg-violet-500"},{title:"Contextual Fluency",desc:"Story Reader bridges the gap between decoding sounds and understanding narratives.",icon:y.jsx(F8,{}),color:"bg-orange-500"},{title:"Automaticity Training",desc:"High-speed interaction in Sight Word Glow creates instant recognition of high-frequency words.",icon:y.jsx(E8,{}),color:"bg-cyan-500"},{title:"Analytics Engine",desc:"Real-time Mastery Tracking provides parents with granular data on every learning milestone.",icon:y.jsx(Ny,{}),color:"bg-slate-700"}];return y.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-slate-50 font-sans overflow-x-hidden",children:[y.jsxs("div",{className:"w-full md:w-3/5 bg-white md:h-screen md:overflow-y-auto relative border-r-4 border-slate-100",children:[y.jsx("section",{className:"bg-[#1e1b4b] p-8 md:p-20 text-white relative overflow-hidden",children:y.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[y.jsxs("div",{className:"flex flex-col mb-12",children:[y.jsx("div",{className:"w-16 h-16 bg-[#4f46e5] rounded-2xl flex items-center justify-center text-white shadow-[0_0_20px_rgba(79,70,229,0.8)] mb-4",children:y.jsx(Cu,{size:32})}),y.jsxs("div",{className:"uppercase tracking-tighter",children:[y.jsx("h1",{className:"text-4xl font-black leading-none",children:"PHONICS"}),y.jsx("h1",{className:"text-4xl font-black leading-none",children:"MASTERS"}),y.jsx("p",{className:"text-[#4f46e5] font-bold tracking-[0.3em] text-[10px] mt-1",children:"THE GAME LAB"})]})]}),y.jsxs("h2",{className:"text-[5.5rem] font-black italic tracking-tighter leading-[0.8] mb-8 uppercase",children:["WHERE ",y.jsx("span",{className:"text-[#93c5fd]",children:"PLAY"}),y.jsx("br",{}),"BECOMES ",y.jsx("span",{className:"text-[#facc15]",children:"FLUENCY"})]}),y.jsx("p",{className:"text-slate-300 text-lg font-medium max-w-xl leading-relaxed",children:"Step inside the Phonics Masters Game Lab. We've combined cognitive science with high-energy gameplay to create an engine that masters every sound, blend, and story."})]})}),y.jsxs("section",{className:"p-8 md:p-12",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-10",children:[y.jsx(Cu,{className:"text-indigo-600 text-2xl"}),y.jsx("h3",{className:"text-2xl font-black uppercase italic tracking-tighter text-slate-800",children:"The Phonics Game Lab"})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map((v,g)=>y.jsxs(ie.div,{whileHover:{y:-5},className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-200 transition-all hover:shadow-xl group",children:[y.jsx("div",{className:`w-12 h-12 ${v.color} rounded-2xl flex items-center justify-center text-white mb-4 shadow-lg group-hover:scale-110 transition-transform`,children:v.icon}),y.jsx("h5",{className:"font-black uppercase italic tracking-tighter text-lg text-slate-800",children:v.title}),y.jsx("p",{className:"text-slate-500 text-xs mt-2 leading-relaxed font-bold uppercase tracking-tight opacity-70",children:v.desc})]},g))})]}),y.jsxs("section",{className:"bg-indigo-950 p-12 text-white flex flex-wrap justify-between gap-8 items-center",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-5xl font-black italic tracking-tighter text-indigo-400",children:"100%"}),y.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:"Curriculum Mastery"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-5xl font-black italic tracking-tighter text-yellow-400",children:"24/7"}),y.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:"AI Lab Access"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-5xl font-black italic tracking-tighter text-emerald-400",children:"15+"}),y.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest opacity-60",children:"Game Modules"})]})]})]}),y.jsx("div",{className:"w-full md:w-2/5 flex items-center justify-center p-6 md:p-12 bg-slate-50 relative md:sticky md:top-0 md:h-screen",children:y.jsx(ie.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"w-full max-w-sm",children:y.jsxs("div",{className:"bg-white p-8 md:p-10 rounded-[3.5rem] shadow-2xl border-b-[12px] border-slate-200 relative",children:[y.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl mb-8",children:[y.jsxs("button",{onClick:()=>n("student"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${r==="student"?"bg-white text-indigo-600 shadow-sm":"text-slate-400"}`,children:[y.jsx(Om,{size:12})," Student"]}),y.jsxs("button",{onClick:()=>n("teacher"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${r==="teacher"?"bg-white text-indigo-600 shadow-sm":"text-slate-400"}`,children:[y.jsx(uT,{size:12})," Teacher"]})]}),y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h3",{className:"text-3xl font-black text-slate-800 uppercase italic tracking-tighter leading-none",children:r==="student"?"Master Login":"Teacher Hub"}),y.jsx("p",{className:"text-slate-400 font-bold uppercase text-[9px] tracking-widest mt-2",children:r==="student"?"Ready to explore?":"Restricted Access"})]}),y.jsxs("form",{onSubmit:h,className:"space-y-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx(Om,{className:`absolute left-5 top-1/2 -translate-y-1/2 transition-colors ${r==="teacher"?"text-violet-400":"text-slate-300"}`}),y.jsx("input",{type:"email",placeholder:"Email Address",className:"w-full pl-14 pr-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:border-indigo-500 focus:outline-none transition-all font-bold text-slate-700",value:i,onChange:v=>o(v.target.value),required:!0})]}),y.jsxs("div",{className:"relative",children:[y.jsx(as,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300"}),y.jsx("input",{type:"password",placeholder:"Password",className:"w-full pl-14 pr-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:border-indigo-500 focus:outline-none transition-all font-bold text-slate-700",value:a,onChange:v=>c(v.target.value),required:!0})]}),r==="student"&&y.jsx("div",{className:"flex justify-end px-2",children:y.jsxs(sE,{to:"/reset-password",size:10,className:"text-[10px] font-black uppercase text-slate-400 hover:text-indigo-600 transition-colors flex items-center gap-1",children:[y.jsx(B8,{})," Forgot Password?"]})}),y.jsx("button",{type:"submit",disabled:u,className:`w-full text-white py-5 rounded-2xl font-black text-lg transition-all transform active:translate-y-1 active:shadow-none uppercase tracking-widest flex items-center justify-center gap-2 shadow-lg ${r==="teacher"?"bg-violet-600 shadow-[0_6px_0_#4c1d95] mt-6":"bg-indigo-600 shadow-[0_6px_0_#3730a3]"}`,children:u?"Checking...":r==="student"?"Jump In!":"Enter Hub"})]}),r==="student"&&y.jsxs("div",{className:"mt-8 pt-8 border-t-2 border-slate-50 text-center space-y-4",children:[y.jsx("p",{className:"text-slate-400 font-bold text-[9px] uppercase tracking-widest",children:"New to Phonics Masters?"}),y.jsxs("button",{onClick:()=>t("/register"),className:"w-full py-4 border-2 border-indigo-100 text-indigo-600 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-50 transition-all flex items-center justify-center gap-2",children:[y.jsx(K8,{})," Create Explorer Account"]})]})]})})})]})},G8=()=>{const[t,e]=E.useState(!1),[r,n]=E.useState({email:"",password:"",childName:"",phone:""}),[i,o]=E.useState(""),[a,c]=E.useState(""),[u,d]=E.useState(!1),h=Nh(),f=We(),v=w=>{const b=w.target.value.replace(/[^0-9+]/g,"");n({...r,phone:b})},g=async w=>{w.preventDefault(),d(!0),o("");try{const{data:b,error:C}=await he.auth.signUp({email:r.email.toLowerCase().trim(),password:r.password,options:{data:{childName:r.childName,phone:r.phone,role:"student",level:1},emailRedirectTo:`${window.location.origin}/login`}});if(C)throw C;b.user&&b.session===null?c("Check your email!  We sent a magic link to activate your account."):b.user&&b.session&&(await h(tu({email:r.email,password:r.password})),f("/dashboard"))}catch(b){o(b.message)}finally{d(!1)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-indigo-800 to-violet-900 px-4 font-sans py-12",children:y.jsxs(ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-[3.5rem] shadow-2xl w-full max-w-md border-b-[12px] border-indigo-200/50 p-10 md:p-12",children:[y.jsxs("button",{onClick:()=>f("/"),className:"mb-8 flex items-center gap-2 text-slate-400 hover:text-indigo-600 font-black text-[10px] uppercase tracking-widest transition-colors",children:[y.jsx(ot,{})," Back to Home"]}),y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white mx-auto shadow-lg rotate-6 mb-4",children:y.jsx(q8,{size:28})}),y.jsx("h1",{className:"text-3xl font-black text-slate-800 uppercase italic tracking-tighter leading-none",children:"New Master"}),y.jsx("p",{className:"text-slate-400 font-bold text-[9px] uppercase tracking-widest mt-2",children:"Start your reading journey"})]}),y.jsxs(ur,{mode:"wait",children:[i&&y.jsxs(ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"bg-red-50 text-red-600 p-4 rounded-2xl mb-6 text-[10px] font-black uppercase text-center border border-red-100",children:[" ",i]}),a&&y.jsxs(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-emerald-50 text-emerald-700 p-8 rounded-[2.5rem] mb-6 text-sm font-bold text-center border-2 border-emerald-100",children:[y.jsx("div",{className:"text-4xl mb-4",children:""}),a,y.jsx("button",{onClick:()=>f("/"),className:"mt-6 text-indigo-600 block w-full font-black uppercase text-xs tracking-widest",children:"Done"})]})]}),!a&&y.jsxs("form",{onSubmit:g,className:"space-y-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx(Om,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-indigo-500 transition-colors"}),y.jsx("input",{type:"text",className:"w-full p-4 pl-14 rounded-2xl bg-slate-50 border-2 border-slate-100 focus:border-indigo-400 outline-none font-bold text-slate-700 transition-all",placeholder:"Student Name",value:r.childName,onChange:w=>n({...r,childName:w.target.value}),required:!0})]}),y.jsxs("div",{className:"relative group",children:[y.jsx(k8,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-indigo-500 transition-colors"}),y.jsx("input",{type:"email",className:"w-full p-4 pl-14 rounded-2xl bg-slate-50 border-2 border-slate-100 focus:border-indigo-400 outline-none font-bold text-slate-700 lowercase transition-all",placeholder:"Parent Email",value:r.email,onChange:w=>n({...r,email:w.target.value}),required:!0})]}),y.jsxs("div",{className:"relative group",children:[y.jsx(L8,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-indigo-500 transition-colors"}),y.jsx("input",{type:"text",className:"w-full p-4 pl-14 rounded-2xl bg-slate-50 border-2 border-slate-100 focus:border-indigo-400 outline-none font-bold text-slate-700 transition-all",placeholder:"Phone Number (+)",value:r.phone,onChange:v,required:!0})]}),y.jsxs("div",{className:"relative group",children:[y.jsx(as,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-indigo-500 transition-colors"}),y.jsx("input",{type:t?"text":"password",className:"w-full p-4 pl-14 pr-12 rounded-2xl bg-slate-50 border-2 border-slate-100 focus:border-indigo-400 outline-none font-bold text-slate-700 transition-all",placeholder:"Create Password",value:r.password,onChange:w=>n({...r,password:w.target.value}),required:!0}),y.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-5 top-1/2 -translate-y-1/2 text-slate-300 hover:text-indigo-500 transition-colors",children:t?y.jsx(j8,{}):y.jsx(O8,{})})]}),y.jsx("button",{type:"submit",disabled:u,className:"w-full bg-indigo-600 text-white font-black py-5 rounded-3xl shadow-[0_6px_0_#3730a3] transition-all transform active:translate-y-1 active:shadow-none text-lg uppercase tracking-widest mt-4",children:u?"Creating...":"Join Adventure!"})]}),y.jsxs("p",{className:"text-center mt-8 text-slate-400 font-bold text-[10px] uppercase tracking-widest",children:["Already a Master? ",y.jsx(sE,{to:"/",className:"text-indigo-600 hover:underline",children:"Log In"})]})]})})},$8=()=>y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-500 to-purple-600",children:y.jsxs("div",{className:"text-center",children:[y.jsx(ie.div,{className:"w-20 h-20 border-8 border-white border-t-transparent rounded-full mx-auto",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),y.jsx(ie.p,{className:"mt-6 text-white text-2xl font-bold kid-font",animate:{opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0},children:"Loading..."})]})}),J8=({frequency:t=.3})=>(E.useEffect(()=>{if(Math.random()<t){const r=setTimeout(()=>{uy()},1e3);return()=>clearTimeout(r)}},[t]),null),Q8=16,W1={1:{title:"Short Vowel Sounds",emoji:"Dolly ",char:"",icon:y.jsx(U1,{}),color:"from-cyan-400 to-blue-600 shadow-blue-200"},2:{title:"Long Vowel Sounds",emoji:"Leo ",char:"",icon:y.jsx(D8,{}),color:"from-sky-400 to-indigo-600 shadow-indigo-200"},3:{title:"Beginning Blends",emoji:"Dippy ",char:"",icon:y.jsx(U1,{}),color:"from-amber-400 to-orange-500 shadow-amber-200"},4:{title:"Ending Blends",emoji:"Pip ",char:"",icon:y.jsx(I8,{}),color:"from-purple-400 to-pink-500 shadow-pink-200"}},Y8=()=>{const t=We(),e=Nh(),{user:r}=io(g=>g.auth||{}),[n,i]=E.useState([]),[o,a]=E.useState(!0),[c,u]=E.useState("student"),[d,h]=E.useState(0);E.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const{data:{user:g}}=await he.auth.getUser();if(g){const w=g.user_metadata?.role||"student";u(w);const b=g.id,[C,x,R]=await Promise.all([he.from("levels").select("*").order("id"),he.from("units").select("id, level_id"),he.from("user_progress").select("*").eq("user_id",b)]);if(C.data&&x.data){const _=C.data.map((I,k)=>{const M=x.data.filter(O=>O.level_id===I.id);let B=0;return w==="student"&&M.forEach(O=>{const U=(R.data?.filter(L=>L.unit_id===O.id)||[]).reduce((L,F)=>L+(F.progress_percent||0),0);B+=U/Q8}),{...I,level_number:k+1,completionPercentage:w==="teacher"?0:Math.round(B/(M.length||1))}});i(_),h(R.data?.reduce((I,k)=>I+(k.progress_percent||0),0)||0)}}}catch(g){console.error(g)}finally{a(!1)}},v=()=>{e(G6()),t("/")};return o?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-indigo-50 font-black text-indigo-500 animate-pulse uppercase tracking-widest text-xs italic",children:"Loading Safari World..."}):y.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans pb-40 overflow-x-hidden",children:[y.jsx(J8,{frequency:.1}),y.jsx("header",{className:"bg-white/95 backdrop-blur-md sticky top-0 z-50 p-4 border-b-4 border-slate-100 shadow-sm",children:y.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-14 h-14 bg-[#4f46e5] rounded-2xl flex items-center justify-center text-white shadow-[0_0_15px_rgba(79,70,229,0.4)] rotate-2",children:y.jsx(Cu,{size:28})}),y.jsxs("div",{className:"flex flex-col",children:[y.jsx("h1",{className:"text-2xl font-black text-slate-900 leading-none tracking-tighter uppercase italic",children:"Phonics Masters"}),y.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-[0.2em] mt-1 italic",children:c==="teacher"?"Teacher Hub":r?.user_metadata?.childName||"Young Master"})]})]}),y.jsxs("div",{className:"bg-gradient-to-b from-yellow-300 to-yellow-500 px-5 py-2 rounded-2xl flex items-center gap-2 text-yellow-950 border-b-4 border-yellow-700 shadow-lg",children:[y.jsx(Be,{className:"text-white drop-shadow-md animate-pulse"}),y.jsxs("div",{className:"flex flex-col leading-none",children:[y.jsx("span",{className:"text-xl font-black tabular-nums",children:d}),y.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter opacity-80",children:"Mastery Points"})]})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>t(c==="teacher"?"/teacher-dashboard":"/progress"),className:"bg-indigo-50 text-indigo-600 px-4 py-2 rounded-xl font-black text-[10px] uppercase tracking-wider border border-indigo-100 shadow-sm hover:bg-white transition-all",children:c==="teacher"?"Admin":"Stats"}),y.jsx("button",{onClick:v,className:"p-3 text-slate-300 hover:text-red-500 transition-all",children:y.jsx(ST,{size:20})})]})]})}),y.jsxs("div",{className:"max-w-md mx-auto px-6 py-24 relative",children:[y.jsxs("div",{className:"absolute left-1/2 top-0 bottom-0 w-2 -translate-x-1/2 flex flex-col items-center pointer-events-none",children:[y.jsx("div",{className:"h-full w-full border-l-4 border-dashed border-indigo-200 opacity-60"}),y.jsx("div",{className:"absolute -bottom-10 text-indigo-200",children:y.jsx(Be,{size:24})})]}),y.jsx("div",{className:"space-y-32 relative",children:n.map((g,w)=>{const b=W1[g.level_number]||W1[1];return y.jsx(ie.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:`flex flex-col ${w%2===0?"items-start":"items-end"}`,children:y.jsxs("div",{className:"relative group",children:[y.jsx(ie.button,{animate:{y:[0,-10,0]},transition:{repeat:1/0,duration:4,delay:w*.5,ease:"easeInOut"},onClick:()=>t(`/level/${g.id}`),className:"relative w-56 h-56 transition-all duration-300 active:scale-95",children:y.jsxs("div",{className:`w-full h-full rounded-full bg-gradient-to-br ${b.color} border-b-[12px] border-black/20 flex flex-col items-center justify-center text-white p-6 relative shadow-2xl overflow-visible`,children:[y.jsx("div",{className:"absolute -bottom-4 -right-4 text-white/10 text-8xl rotate-12 pointer-events-none",children:b.icon}),y.jsx(ie.span,{animate:{y:[0,-15,0],rotate:[0,5,-5,0]},transition:{repeat:1/0,duration:3.5,ease:"easeInOut",delay:w*.2},whileHover:{scale:1.4,y:-45,rotate:[0,10,-10,360],transition:{type:"spring",stiffness:300,damping:12}},className:"text-8xl absolute -top-14 drop-shadow-[0_25px_25px_rgba(0,0,0,0.4)] pointer-events-none z-20",children:b.char}),y.jsxs("div",{className:"mt-10 flex flex-col items-center",children:[y.jsxs("span",{className:"text-[9px] font-black uppercase opacity-60 tracking-widest mb-1",children:["Level ",g.level_number]}),y.jsx("h2",{className:"text-2xl font-black uppercase italic tracking-tighter text-center leading-none mb-4 px-4 drop-shadow-md",children:b.title}),y.jsxs("div",{className:"flex flex-col items-center w-full px-4",children:[y.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full overflow-hidden mb-1",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${g.completionPercentage}%`},className:"h-full bg-[#facc15]"})}),y.jsxs("span",{className:"text-[9px] font-black uppercase italic tracking-tighter drop-shadow-sm",children:[g.completionPercentage,"% Mastery"]})]})]})]})}),y.jsxs(ie.div,{animate:{y:[0,-5,0]},transition:{repeat:1/0,duration:3},className:`absolute -top-16 ${w%2===0?"-right-14":"-left-14"} bg-white text-indigo-600 px-5 py-2.5 rounded-2xl shadow-xl font-black flex items-center gap-2 border-2 border-slate-50 text-[11px] uppercase italic z-30 pointer-events-none group-hover:bg-indigo-600 group-hover:text-white transition-colors opacity-100 scale-100`,children:[y.jsx(z8,{size:8})," Jump In!"]})]})},g.id)})})]})]})},X8={1:"Short Vowel Sounds",2:"Long Vowel Sounds (Magic e)",3:"Beginning Consonant Blends",4:"Ending Consonant Blends"},Z8={1:["Short /a/ Sound","Short /e/ Sound","Short /i/ Sound","Short /o/ Sound","Short /u/ Sound"],2:["Long /a/ Sound (Magic e)","Long /i/ Sound (Magic e)","Long /o/ Sound (Magic e)","Long /u/ Sound (Magic e)","Long /u/ Sound (Magic e)"],3:['"L" Blends: bl, cl, fl, gl, pl, sl','"R" Blends: br, cr, fr, gr, pr, tr, dr','"S" Blends: sm, sn, sp, st, sk, sc, sw',"Digraphs: sh, ch, th, wh, ph","Other Blends: spl, spr, str, scr, squ, shr, thr"],4:["Ending Blends: -nt, -nd, -nk, -ng, -ld, -nt","Ending Blends: -lp, -lf, -lk, -ft, -ct, -mp","Ending Blends: -st, -sp, -sk, -sh, -nch","Ending Blends: -k, -ck, -ch, -tch","Ending Blends: -ble, -ple, -cle, -kle, -gle, -dle"]},H1=()=>{const{levelId:t}=wt(),e=We(),[r,n]=E.useState({units:[],progress:{}}),[i,o]=E.useState(null),[a,c]=E.useState(!0),u=[{name:"Sight Glow",icon:y.jsx(mT,{}),color:"bg-indigo-500",path:"sight-word-glow"},{name:"Snapshot",icon:y.jsx(jm,{}),color:"bg-blue-600",path:"snapshot-stars"},{name:"Word Pop",icon:y.jsx(Cu,{}),color:"bg-purple-500",path:"sight-word-pop"},{name:"Fusion",icon:y.jsx(Ly,{}),color:"bg-indigo-400",path:"fusion"},{name:"Ninja",icon:y.jsx(pT,{}),color:"bg-orange-500",path:"segmentation"},{name:"Slider",icon:y.jsx(wT,{}),color:"bg-teal-600",path:"word-slider"},{name:"Hunter",icon:y.jsx(ao,{}),color:"bg-amber-500",path:"word-hunter"},{name:"Word Spy",icon:y.jsx(ao,{}),color:"bg-violet-600",path:"word-spy"},{name:"Builder",icon:y.jsx(fT,{}),color:"bg-pink-500",path:"phonics-builder"},{name:"Grid",icon:y.jsx(bT,{}),color:"bg-rose-500",path:"grid"},{name:"Sentence Stream",icon:y.jsx(zy,{}),color:"bg-emerald-500",path:"sentence-stream"},{name:"Mic Check",icon:y.jsx($r,{}),color:"bg-cyan-500",path:"word-by-word"},{name:"Sentence Reader",icon:y.jsx(Dy,{}),color:"bg-blue-500",path:"sentence-reader"},{name:"Sentence Builder",icon:y.jsx(yT,{}),color:"bg-sky-500",path:"sentence-builder"},{name:"Story Time",icon:y.jsx(T8,{}),color:"bg-yellow-500",path:"story"},{name:"Story Star",icon:y.jsx($r,{}),color:"bg-indigo-600",path:"story-recorder"}];return E.useEffect(()=>{async function d(){try{const{data:{user:h}}=await he.auth.getUser(),[f,v]=await Promise.all([he.from("units").select("*").eq("level_id",t).order("unit_number"),he.from("user_progress").select("*").eq("user_id",h.id)]),g={};v.data?.forEach(w=>{g[w.unit_id]||(g[w.unit_id]={});const b=w.game_type.toLowerCase().trim().replace(/_/g,"-");g[w.unit_id][b]=w.progress_percent}),n({units:f.data||[],progress:g}),f.data?.length>0&&o(f.data[0].id)}catch(h){console.error(h)}c(!1)}d()},[t]),a?y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50",children:[y.jsx(ie.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"text-5xl text-blue-500 mb-4",children:y.jsx(jm,{})}),y.jsx("p",{className:"font-black text-slate-400 uppercase tracking-tighter italic",children:"Mapping Adventure..."})]}):y.jsxs("div",{className:"min-h-screen bg-slate-100 font-sans pb-20",children:[y.jsxs("div",{className:"bg-white p-6 sticky top-0 z-50 border-b-4 border-slate-200 shadow-sm flex items-center justify-between",children:[y.jsx("button",{onClick:()=>e("/dashboard"),className:"p-4 bg-slate-100 rounded-2xl text-slate-600 active:scale-90 transition-all",children:y.jsx(ot,{})}),y.jsx("div",{className:"text-center px-4",children:y.jsx("h1",{className:"text-xl md:text-2xl font-black text-slate-800 uppercase italic leading-none tracking-tighter",children:X8[t]||`Level ${t}`})}),y.jsx("div",{className:"w-12 h-12 bg-yellow-400 rounded-2xl flex items-center justify-center shadow-lg text-yellow-900",children:y.jsx(Be,{size:24})})]}),y.jsxs("div",{className:"max-w-2xl mx-auto p-6 relative",children:[y.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-4 bg-slate-200 -translate-x-1/2 rounded-full hidden md:block"}),y.jsx("div",{className:"space-y-12 relative",children:r.units.map((d,h)=>{const f=r.progress[d.id]||{},v=Object.values(f).reduce((C,x)=>C+x,0),g=Math.min(Math.round(v/16),100),w=i===d.id,b=Z8[t]?.[h]||d.title;return y.jsx(ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:`flex flex-col ${h%2===0?"md:items-start":"md:items-end"} transition-all`,children:y.jsxs("div",{className:`w-full md:w-[95%] bg-white rounded-[3rem] shadow-xl overflow-hidden border-b-[12px] ${w?"border-indigo-700":"border-slate-200"}`,children:[y.jsxs("button",{onClick:()=>o(w?null:d.id),className:`w-full p-8 flex items-center justify-between transition-colors ${w?"bg-indigo-600 text-white":"text-slate-800 hover:bg-slate-50"}`,children:[y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsx("div",{className:`w-14 h-14 md:w-16 md:h-16 rounded-3xl flex-shrink-0 flex items-center justify-center text-xl md:text-2xl font-black shadow-inner ${w?"bg-indigo-800":"bg-slate-100 text-slate-400"}`,children:d.unit_number}),y.jsxs("div",{className:"text-left",children:[y.jsx("h3",{className:"text-lg md:text-xl font-black uppercase italic tracking-tighter leading-tight",children:b}),y.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.jsx("div",{className:"w-20 md:w-24 h-2 bg-black/10 rounded-full overflow-hidden",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${g}%`},className:"h-full bg-yellow-400"})}),y.jsxs("span",{className:`text-[10px] font-black ${w?"text-white/60":"text-slate-400"}`,children:[g,"%"]})]})]})]}),y.jsx(dT,{className:`transition-transform duration-500 ${w?"rotate-180":"opacity-20"}`})]}),y.jsx(ur,{children:w&&y.jsx(ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-slate-50 p-6 grid grid-cols-2 sm:grid-cols-4 gap-4",children:u.map(C=>{const x=r.progress[d.id]?.[C.path]||0;return y.jsxs("button",{onClick:()=>e(`/unit/${d.id}/game/${C.path}`),className:"bg-white p-4 rounded-[2rem] shadow-sm border-b-4 border-slate-200 flex flex-col items-center gap-2 active:scale-90 transition-all hover:border-indigo-400 group",children:[y.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-white text-xl shadow-lg transition-transform group-hover:rotate-12 ${C.color}`,children:C.icon}),y.jsx("span",{className:"text-[9px] font-black uppercase text-slate-500 text-center leading-tight tracking-tight",children:C.name}),y.jsx("div",{className:"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden mt-1",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${x}%`},className:"h-full bg-green-500"})})]},C.path)})})})]})},d.id)})})]})]})},eL=()=>{const{unitId:t}=wt(),e=We(),[r,n]=E.useState(null),[i,o]=E.useState(!0),[a,c]=E.useState({});E.useEffect(()=>{t&&(async()=>{o(!0);try{const{data:{user:h}}=await he.auth.getUser(),{data:f}=await he.from("units").select("title").eq("id",t).single();if(f&&n(f),h){const{data:v}=await he.from("user_progress").select("game_type, progress_percent").eq("user_id",h.id).eq("unit_id",t);if(v){const g=v.reduce((w,b)=>(w[b.game_type]=b.progress_percent,w),{});c(g)}}}catch(h){console.error(h)}finally{o(!1)}})()},[t]);const u=[{id:"1",name:"Sight Word Glow",icon:y.jsx(mT,{}),color:"bg-indigo-600",path:"sight-word-glow",type:"sight-word-glow",tag:"1. LEARN"},{id:"2",name:"Snapshot Stars",icon:y.jsx(jm,{}),color:"bg-blue-600",path:"snapshot-stars",type:"snapshot-stars",tag:"2. SNAPSHOT"},{id:"3",name:"Sight Word Pop",icon:y.jsx(Cu,{}),color:"bg-purple-500",path:"sight-word-pop",type:"sight-word-pop",tag:"3. PLAY"},{id:"4",name:"Phonics Fusion",icon:y.jsx(Ly,{}),color:"bg-indigo-400",path:"fusion",type:"fusion"},{id:"5",name:"Word Ninja",icon:y.jsx(N8,{}),color:"bg-orange-500",path:"segmentation",type:"segmentation"},{id:"6",name:"Word Slider",icon:y.jsx(wT,{}),color:"bg-teal-600",path:"word-slider",type:"word-slider"},{id:"7",name:"Word Hunter",icon:y.jsx(ao,{}),color:"bg-amber-500",path:"word-hunter",type:"word-hunter"},{id:"8",name:"Word Spy",icon:y.jsx(ao,{}),color:"bg-violet-600",path:"word-spy",type:"word-spy"},{id:"9",name:"Phonics Builder",icon:y.jsx(fT,{}),color:"bg-pink-500",path:"phonics-builder",type:"phonics-builder"},{id:"10",name:"Word Grid",icon:y.jsx(bT,{}),color:"bg-rose-500",path:"grid",type:"word-grid"},{id:"11",name:"Sentence Stream",icon:y.jsx(zy,{}),color:"bg-emerald-500",path:"sentence-stream",type:"sentence-stream"},{id:"12",name:"Word by Word",icon:y.jsx($r,{}),color:"bg-cyan-500",path:"word-by-word",type:"word-by-word"},{id:"13",name:"Sentence Reader",icon:y.jsx(Dy,{}),color:"bg-blue-500",path:"sentence-reader",type:"sentence-reader"},{id:"14",name:"Sentence Builder",icon:y.jsx(yT,{}),color:"bg-sky-500",path:"sentence-builder",type:"sentence-builder"}];return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center font-black text-blue-500 animate-pulse text-2xl uppercase italic",children:"Opening Unit..."}):y.jsxs("div",{className:"min-h-screen bg-slate-100 pb-12 font-sans",children:[y.jsxs("div",{className:"bg-white p-6 shadow-md flex items-center gap-4 sticky top-0 z-20 border-b-4 border-slate-200",children:[y.jsx("button",{onClick:()=>e(-1),className:"bg-slate-100 p-4 rounded-2xl text-slate-600 shadow-sm active:translate-y-1",children:y.jsx(ot,{})}),y.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase italic tracking-tighter",children:r?.title||`Unit ${t}`})]}),y.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:u.map(d=>{const h=a[d.type]||0;return y.jsxs(ie.button,{whileTap:{scale:.97},onClick:()=>e(`/unit/${t}/game/${d.path}`),className:`${d.color} text-white p-8 rounded-[2.5rem] shadow-xl flex items-center justify-between group border-b-[8px] border-black/20 active:border-b-0 active:translate-y-1 transition-all relative overflow-hidden`,children:[y.jsx("div",{className:"absolute bottom-0 left-0 h-2 bg-black/20 w-full",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${h}%`},className:"h-full bg-white/40"})}),y.jsxs("div",{className:"flex flex-col items-start text-left",children:[d.tag&&y.jsx("span",{className:"absolute -top-3 left-6 bg-yellow-400 text-yellow-900 text-[10px] font-black px-3 py-1 rounded-full border-2 border-white",children:d.tag}),y.jsx("div",{className:"text-4xl mb-2 group-hover:rotate-12 transition-transform",children:d.icon}),y.jsx("span",{className:"text-2xl font-black uppercase italic tracking-tighter",children:d.name}),h>0&&y.jsxs("span",{className:"text-[10px] font-black opacity-60 uppercase",children:[Math.round(h),"% Mastery"]})]}),y.jsx(ot,{className:"rotate-180 opacity-30 group-hover:translate-x-2 transition-transform",size:24})]},d.id)})})]})},tL=()=>{const t=We(),{user:e}=io(n=>n.auth),{stats:r}=io(n=>n.progress);return y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-500 via-purple-500 to-pink-500 p-6",children:[y.jsx(ie.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},className:"mb-8",children:y.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center space-x-2 text-white text-xl kid-font font-bold hover:scale-110 transition-transform",children:[y.jsx(ot,{})," ",y.jsx("span",{children:"Back to Dashboard"})]})}),y.jsx("div",{className:"max-w-4xl mx-auto",children:y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white rounded-3xl shadow-2xl p-10",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx(ie.div,{whileHover:{rotate:360},transition:{duration:.5},className:"w-32 h-32 bg-gradient-to-br from-sunshineYellow to-coral rounded-full flex items-center justify-center text-6xl mx-auto mb-4 shadow-xl",children:e?.childName?.charAt(0).toUpperCase()||""}),y.jsx("h1",{className:"text-4xl font-black kid-font text-gray-800 mb-2",children:e?.childName}),y.jsxs("p",{className:"text-gray-600 text-lg",children:["Age: ",e?.age," years old"]})]}),y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[y.jsxs("div",{className:"bg-gradient-to-br from-sunshineYellow to-yellow-400 rounded-xl p-4 text-center",children:[y.jsx(Be,{className:"text-3xl text-white mx-auto mb-2"}),y.jsx("p",{className:"text-2xl font-bold text-white kid-font",children:e?.totalStars||0}),y.jsx("p",{className:"text-white text-sm",children:"Stars"})]}),y.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-blue-600 rounded-xl p-4 text-center",children:[y.jsx(H8,{className:"text-3xl text-white mx-auto mb-2"}),y.jsx("p",{className:"text-2xl font-bold text-white kid-font",children:e?.totalPoints||0}),y.jsx("p",{className:"text-white text-sm",children:"Points"})]}),y.jsxs("div",{className:"bg-gradient-to-br from-softGreen to-green-500 rounded-xl p-4 text-center",children:[y.jsx("div",{className:"text-3xl mx-auto mb-2",children:""}),y.jsx("p",{className:"text-2xl font-bold text-white kid-font",children:r?.totalUnitsCompleted||0}),y.jsx("p",{className:"text-white text-sm",children:"Completed"})]}),y.jsxs("div",{className:"bg-gradient-to-br from-coral to-red-400 rounded-xl p-4 text-center",children:[y.jsx("div",{className:"text-3xl mx-auto mb-2",children:""}),y.jsx("p",{className:"text-2xl font-bold text-white kid-font",children:e?.currentLevel||1}),y.jsx("p",{className:"text-white text-sm",children:"Level"})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4",children:[y.jsx("label",{className:"text-gray-600 text-sm",children:"Username"}),y.jsx("p",{className:"text-xl font-bold kid-font text-gray-800",children:e?.username})]}),y.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4",children:[y.jsx("label",{className:"text-gray-600 text-sm",children:"Email"}),y.jsx("p",{className:"text-xl font-bold kid-font text-gray-800",children:e?.email})]}),y.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4",children:[y.jsx("label",{className:"text-gray-600 text-sm",children:"Subscription Status"}),y.jsxs("p",{className:"text-xl font-bold kid-font text-gray-800 capitalize",children:[e?.subscriptionStatus||"Free",e?.isPremium&&" "]})]})]})]})})]})},K1={1:{primary:"from-blue-600 to-indigo-600",accent:"bg-blue-50",text:"text-blue-700",border:"border-blue-100"},2:{primary:"from-purple-600 to-fuchsia-600",accent:"bg-purple-50",text:"text-purple-700",border:"border-purple-100"},3:{primary:"from-emerald-600 to-teal-600",accent:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-100"},4:{primary:"from-orange-500 to-rose-500",accent:"bg-orange-50",text:"text-orange-700",border:"border-orange-100"}},rL={1:["Short /a/ Sound","Short /e/ Sound","Short /i/ Sound","Short /o/ Sound","Short /u/ Sound"],2:["Long /a/ Sound (Magic e)","Long /i/ Sound (Magic e)","Long /o/ Sound (Magic e)","Long /u/ Sound (Magic e)","Long /u/ Sound (Magic e)"],3:["'L' Blends: bl, cl, fl, gl, pl, sl","'R' Blends: br, cr, fr, gr, pr, tr, dr","'S' Blends: sm, sn, sp, st, sk, sc, sw","Digraphs: sh, ch, th, wh, ph","Other Blends: spl, spr, str, scr, squ, shr, thr"],4:["Ending Blends: -nt, -nd, -nk, -ng, -ld, -nt","Ending Blends: -lp, -lf, -lk, -ft, -ct, -mp","Ending Blends: -st, -sp, -sk, -sh, -nch","Ending Blends: -k, -ck, -ch, -tch","Ending Blends: -ble, -ple, -cle, -kle, -gle, -dle"]},nL=()=>{const t=We(),{studentId:e}=wt(),[r,n]=E.useState(1),[i,o]=E.useState(null),[a,c]=E.useState([]),[u,d]=E.useState([]),[h,f]=E.useState(!0),v=K1[r]||K1[1],g=[{name:"Sight Word Glow",slug:"sight-word-glow"},{name:"Snapshot Stars",slug:"snapshot-stars"},{name:"Sight Word Pop",slug:"sight-word-pop"},{name:"Phonics Fusion",slug:"fusion"},{name:"Word Ninja",slug:"segmentation"},{name:"Word Slider",slug:"word-slider"},{name:"Word Hunter",slug:"word-hunter"},{name:"Word Spy",slug:"word-spy"},{name:"Phonics Builder",slug:"phonics-builder"},{name:"Word Grid",slug:"grid"},{name:"Word Matter",slug:"word-matter"},{name:"Word by Word",slug:"word-by-word"},{name:"Sentence Reader",slug:"sentence-reader"},{name:"Sentence Builder",slug:"sentence-builder"},{name:"Story Time",slug:"story"},{name:"Story Star",slug:"story-recorder"}];E.useEffect(()=>{w()},[e]);const w=async()=>{try{f(!0);let C=e;if(!C){const{data:{user:_}}=await he.auth.getUser();C=_?.id}if(!C)return;const[x,R]=await Promise.all([he.from("units").select("*").order("unit_number"),he.from("user_progress").select("*").eq("user_id",C)]);d(x.data||[]),c(R.data||[])}catch(C){console.error(C)}finally{f(!1)}},b=()=>u.filter(C=>Number(C.level_id)===r).map((C,x)=>{const R=a.filter(k=>k.unit_id===C.id),_=R.reduce((k,M)=>k+(M.progress_percent||0),0),I=Math.min(Math.round(_/16),100);return{...C,progress:I,games:R,tagline:rL[r]?.[x]||C.title}});return h?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white font-black text-indigo-500 italic text-xs",children:"SYNCING..."}):y.jsx("div",{className:`min-h-screen ${v.accent} p-4 md:p-6 font-sans select-none pb-10 transition-colors duration-500`,children:y.jsxs("div",{className:"max-w-[1400px] mx-auto",children:[e&&y.jsxs("div",{className:"mb-6 bg-white p-3 rounded-2xl flex items-center justify-between shadow-sm border border-orange-200",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center text-white shadow-md",children:y.jsx(uT,{size:18})}),y.jsxs("div",{children:[y.jsx("span",{className:"font-black uppercase text-[8px] tracking-widest text-orange-600 block leading-none",children:"Spectator Mode"}),y.jsx("span",{className:"text-slate-500 font-bold text-[10px] italic",children:"Viewing Student Progress Report"})]})]}),y.jsx("button",{onClick:()=>t("/teacher-dashboard"),className:"bg-orange-50 text-orange-600 px-4 py-1.5 rounded-lg font-black text-[9px] uppercase border border-orange-100",children:"Exit View"})]}),y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-1 text-slate-400 font-bold text-[8px] tracking-widest uppercase hover:text-indigo-600 transition-all",children:[y.jsx(ot,{})," BACK"]}),y.jsxs("div",{className:`bg-white shadow-sm border ${v.border} px-4 py-1.5 rounded-full font-black text-[9px] uppercase tracking-widest flex items-center gap-2 ${v.text}`,children:[y.jsx(Ny,{})," SUMMARY"]})]}),y.jsx("div",{className:"bg-white/50 backdrop-blur-md p-1.5 rounded-2xl flex gap-1.5 mb-8 border border-slate-200 max-w-sm mx-auto shadow-sm",children:[1,2,3,4].map(C=>y.jsxs("button",{onClick:()=>{n(C),o(null)},className:`flex-1 py-2 rounded-xl font-black text-[9px] transition-all ${r===C?`bg-gradient-to-br ${v.primary} text-white shadow-md`:"text-slate-400 hover:text-slate-600"}`,children:["LVL ",C]},C))}),y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("h1",{className:`text-4xl md:text-5xl font-black tracking-tight uppercase italic leading-none mb-2 bg-gradient-to-br ${v.primary} bg-clip-text text-transparent`,children:r===1?"Short Vowel Sounds":r===2?"Long Vowel Sounds (Magic e)":r===3?"Beginning Blends":"Ending Blends"}),y.jsx("p",{className:`text-[7px] font-black uppercase tracking-[0.4em] ${v.text} opacity-60`,children:"Adventure Progress Tracker"})]}),y.jsx("div",{className:"space-y-3 max-w-5xl mx-auto",children:b().map(C=>{const x=i===C.id,R=C.progress===100;return y.jsxs("div",{className:`rounded-[2rem] border transition-all duration-300 ${x?"bg-white border-transparent shadow-xl scale-[1.01]":"bg-white/70 border-white shadow-sm"}`,children:[y.jsxs("button",{onClick:()=>o(x?null:C.id),className:"w-full p-4 flex flex-col gap-3",children:[y.jsxs("div",{className:"w-full flex justify-between items-center text-left",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("span",{className:`px-2 py-0.5 rounded-md font-black text-[7px] uppercase tracking-tighter ${x?`bg-gradient-to-br ${v.primary} text-white`:"bg-slate-100 text-slate-500"}`,children:["U",C.unit_number]}),y.jsx("h3",{className:`text-[13px] font-black uppercase italic leading-none tracking-tight ${x?"text-slate-900":"text-slate-600"}`,children:C.tagline}),R&&y.jsx(wn,{className:"text-emerald-500",size:14})]}),y.jsx(dT,{className:`transition-transform duration-500 ${x?"rotate-180 text-indigo-500":"text-slate-300"}`,size:10})]}),y.jsxs("div",{className:"flex items-center gap-3 w-full pr-1",children:[y.jsx("div",{className:"flex-1 h-2 bg-indigo-950/10 rounded-full border border-slate-100 p-[1px] overflow-hidden shadow-inner",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${C.progress}%`},className:`h-full rounded-full ${R?"bg-emerald-500":`bg-gradient-to-r ${v.primary}`}`})}),y.jsxs("span",{className:`text-[9px] font-black italic min-w-[25px] ${R?"text-emerald-600":"text-slate-600"}`,children:[C.progress,"%"]})]})]}),y.jsx(ur,{children:x&&y.jsx(ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-5",children:y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2.5 pt-2",children:g.map((_,I)=>{const M=C.games.find(O=>O.game_type.toLowerCase().trim().replace(/_/g,"-")===_.slug)?.progress_percent||0,B=M===100;return y.jsxs("div",{className:`p-3 rounded-xl border transition-all flex flex-col justify-center min-h-[60px] ${B?"bg-emerald-50/30 border-emerald-100":"bg-white border-slate-50 shadow-sm"}`,children:[y.jsx("h4",{className:`font-bold text-[11px] mb-2 leading-tight tracking-tight ${B?"text-emerald-700":"text-slate-800"}`,children:_.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex-1 h-1 bg-slate-50 rounded-full border border-slate-100 overflow-hidden",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${M}%`},className:`h-full ${B?"bg-emerald-400":`bg-gradient-to-r ${v.primary} opacity-60`}`})}),y.jsxs("span",{className:`text-[8px] font-black italic ${B?"text-emerald-600":"text-slate-600"}`,children:[M,"%"]})]})]},I)})})})})]},C.id)})})]})})},iL=()=>{const[t,e]=E.useState([]),[r,n]=E.useState(""),[i,o]=E.useState(!0),a=We();E.useEffect(()=>{c()},[]);const c=async()=>{o(!0);const{data:h,error:f}=await he.from("profiles").select("*").eq("role","student").order("full_name");f||e(h),o(!1)},u=t.filter(h=>h.full_name?.toLowerCase().includes(r.toLowerCase())||h.email?.toLowerCase().includes(r.toLowerCase())),d=async()=>{try{const{error:h}=await he.auth.signOut();if(h)throw h;a("/login")}catch(h){console.error("Error signing out:",h.message),a("/login")}};return y.jsxs("div",{className:"min-h-screen bg-orange-50 font-sans text-slate-800 pb-20",children:[y.jsxs("div",{className:"bg-white p-4 shadow-sm flex items-center justify-between sticky top-0 z-50 border-b-2 border-orange-100",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>a("/dashboard"),className:"p-2 rounded-lg bg-slate-50 text-slate-400 hover:bg-indigo-600 hover:text-white transition-all shadow-sm",children:y.jsx(ot,{size:16})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-black uppercase italic tracking-tighter leading-none",children:"Classroom"}),y.jsx("p",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:"Management"})]})]}),y.jsx("button",{onClick:d,className:"p-2 text-slate-300 hover:text-red-500 transition-colors",title:"Logout",children:y.jsx(ST,{size:18})})]}),y.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:[y.jsxs("div",{className:"relative mb-6",children:[y.jsx(ao,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300",size:14}),y.jsx("input",{type:"text",placeholder:"Search explorers...",value:r,onChange:h=>n(h.target.value),className:"w-full p-3 pl-12 rounded-xl border-2 border-white shadow-md outline-none focus:border-orange-300 transition-all font-bold text-sm"})]}),i?y.jsx("div",{className:"text-center py-20 font-black text-orange-200 uppercase italic",children:"Loading..."}):y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-3",children:u.map(h=>y.jsxs(ie.button,{whileHover:{y:-2,shadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.97},onClick:()=>a(`/progress/${h.id}`),className:"bg-white p-3 rounded-2xl shadow-sm border border-slate-100 text-left flex items-center gap-3 hover:border-orange-300 transition-all group",children:[y.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-xl flex items-center justify-center text-orange-400 group-hover:bg-orange-500 group-hover:text-white transition-colors shrink-0",children:y.jsx(Ny,{size:18})}),y.jsxs("div",{className:"overflow-hidden",children:[y.jsx("h3",{className:"font-black text-xs uppercase tracking-tight leading-none text-slate-700 truncate",children:h.full_name||"Explorer"}),y.jsx("p",{className:"text-[9px] text-slate-400 font-bold truncate mt-1",children:h.email})]})]},h.id))})]})]})},sL=()=>{const[t,e]=E.useState(""),[r,n]=E.useState(""),[i,o]=E.useState(!1),[a,c]=E.useState({type:"",text:""}),u=We(),d=async h=>{if(h.preventDefault(),t!==r){c({type:"error",text:"Passwords do not match!"});return}o(!0);const{error:f}=await he.auth.updateUser({password:t});f?c({type:"error",text:f.message}):(c({type:"success",text:"Password updated! Redirecting to login..."}),setTimeout(()=>u("/login"),3e3)),o(!1)};return y.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-6",children:y.jsxs(ie.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"bg-white w-full max-w-md rounded-[3rem] shadow-2xl p-10 border-b-[12px] border-slate-200",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"w-20 h-20 bg-indigo-100 text-indigo-600 rounded-3xl flex items-center justify-center mx-auto mb-4",children:y.jsx(as,{size:32})}),y.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter text-slate-800",children:"Reset Password"}),y.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase mt-2 tracking-widest",children:"Enter your new secure password"})]}),a.text&&y.jsxs("div",{className:`p-4 rounded-2xl mb-6 text-xs font-bold text-center flex items-center justify-center gap-2 ${a.type==="success"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:[a.type==="success"&&y.jsx(wn,{})," ",a.text]}),y.jsxs("form",{onSubmit:d,className:"space-y-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx(as,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300"}),y.jsx("input",{type:"password",required:!0,value:t,onChange:h=>e(h.target.value),className:"w-full bg-slate-50 border-4 border-slate-100 p-5 pl-14 rounded-2xl focus:border-indigo-500 outline-none transition-all font-bold",placeholder:"NEW PASSWORD"})]}),y.jsxs("div",{className:"relative",children:[y.jsx(as,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-300"}),y.jsx("input",{type:"password",required:!0,value:r,onChange:h=>n(h.target.value),className:"w-full bg-slate-50 border-4 border-slate-100 p-5 pl-14 rounded-2xl focus:border-indigo-500 outline-none transition-all font-bold",placeholder:"CONFIRM PASSWORD"})]}),y.jsxs("button",{type:"submit",disabled:i,className:"w-full py-6 bg-indigo-600 border-b-8 border-indigo-800 rounded-3xl text-white font-black text-xl uppercase tracking-widest shadow-xl flex items-center justify-center gap-3 active:translate-y-1 active:border-b-0 transition-all disabled:opacity-50",children:[i?"Updating...":"Update Password"," ",y.jsx(R8,{})]})]})]})})};var ji={},Oi={},ia={},Ni={},tt={},Iv={},Mi={},kv={},sa={},th={},G1;function xT(){if(G1)return th;G1=1,Object.defineProperty(th,"__esModule",{value:!0}),th.default=r;let t;const e=new Uint8Array(16);function r(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return th}var Ks={},oa={},aa={},$1;function oL(){if($1)return aa;$1=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return aa.default=t,aa}var J1;function rp(){if(J1)return oa;J1=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.default=void 0;var t=e(oL());function e(i){return i&&i.__esModule?i:{default:i}}function r(i){return typeof i=="string"&&t.default.test(i)}var n=r;return oa.default=n,oa}var Q1;function np(){if(Q1)return Ks;Q1=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.default=void 0,Ks.unsafeStringify=n;var t=e(rp());function e(a){return a&&a.__esModule?a:{default:a}}const r=[];for(let a=0;a<256;++a)r.push((a+256).toString(16).slice(1));function n(a,c=0){return r[a[c+0]]+r[a[c+1]]+r[a[c+2]]+r[a[c+3]]+"-"+r[a[c+4]]+r[a[c+5]]+"-"+r[a[c+6]]+r[a[c+7]]+"-"+r[a[c+8]]+r[a[c+9]]+"-"+r[a[c+10]]+r[a[c+11]]+r[a[c+12]]+r[a[c+13]]+r[a[c+14]]+r[a[c+15]]}function i(a,c=0){const u=n(a,c);if(!(0,t.default)(u))throw TypeError("Stringified UUID is invalid");return u}var o=i;return Ks.default=o,Ks}var Y1;function aL(){if(Y1)return sa;Y1=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.default=void 0;var t=r(xT()),e=np();function r(d){return d&&d.__esModule?d:{default:d}}let n,i,o=0,a=0;function c(d,h,f){let v=h&&f||0;const g=h||new Array(16);d=d||{};let w=d.node||n,b=d.clockseq!==void 0?d.clockseq:i;if(w==null||b==null){const k=d.random||(d.rng||t.default)();w==null&&(w=n=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]),b==null&&(b=i=(k[6]<<8|k[7])&16383)}let C=d.msecs!==void 0?d.msecs:Date.now(),x=d.nsecs!==void 0?d.nsecs:a+1;const R=C-o+(x-a)/1e4;if(R<0&&d.clockseq===void 0&&(b=b+1&16383),(R<0||C>o)&&d.nsecs===void 0&&(x=0),x>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=C,a=x,i=b,C+=122192928e5;const _=((C&268435455)*1e4+x)%4294967296;g[v++]=_>>>24&255,g[v++]=_>>>16&255,g[v++]=_>>>8&255,g[v++]=_&255;const I=C/4294967296*1e4&268435455;g[v++]=I>>>8&255,g[v++]=I&255,g[v++]=I>>>24&15|16,g[v++]=I>>>16&255,g[v++]=b>>>8|128,g[v++]=b&255;for(let k=0;k<6;++k)g[v+k]=w[k];return h||(0,e.unsafeStringify)(g)}var u=c;return sa.default=u,sa}var ca={},Hn={},la={},X1;function PT(){if(X1)return la;X1=1,Object.defineProperty(la,"__esModule",{value:!0}),la.default=void 0;var t=e(rp());function e(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,t.default)(i))throw TypeError("Invalid UUID");let o;const a=new Uint8Array(16);return a[0]=(o=parseInt(i.slice(0,8),16))>>>24,a[1]=o>>>16&255,a[2]=o>>>8&255,a[3]=o&255,a[4]=(o=parseInt(i.slice(9,13),16))>>>8,a[5]=o&255,a[6]=(o=parseInt(i.slice(14,18),16))>>>8,a[7]=o&255,a[8]=(o=parseInt(i.slice(19,23),16))>>>8,a[9]=o&255,a[10]=(o=parseInt(i.slice(24,36),16))/1099511627776&255,a[11]=o/4294967296&255,a[12]=o>>>24&255,a[13]=o>>>16&255,a[14]=o>>>8&255,a[15]=o&255,a}var n=r;return la.default=n,la}var Z1;function _T(){if(Z1)return Hn;Z1=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.URL=Hn.DNS=void 0,Hn.default=a;var t=np(),e=r(PT());function r(c){return c&&c.__esModule?c:{default:c}}function n(c){c=unescape(encodeURIComponent(c));const u=[];for(let d=0;d<c.length;++d)u.push(c.charCodeAt(d));return u}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Hn.DNS=i;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Hn.URL=o;function a(c,u,d){function h(f,v,g,w){var b;if(typeof f=="string"&&(f=n(f)),typeof v=="string"&&(v=(0,e.default)(v)),((b=v)===null||b===void 0?void 0:b.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let C=new Uint8Array(16+f.length);if(C.set(v),C.set(f,v.length),C=d(C),C[6]=C[6]&15|u,C[8]=C[8]&63|128,g){w=w||0;for(let x=0;x<16;++x)g[w+x]=C[x];return g}return(0,t.unsafeStringify)(C)}try{h.name=c}catch{}return h.DNS=i,h.URL=o,h}return Hn}var ua={},eb;function cL(){if(eb)return ua;eb=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.default=void 0;function t(g){if(typeof g=="string"){const w=unescape(encodeURIComponent(g));g=new Uint8Array(w.length);for(let b=0;b<w.length;++b)g[b]=w.charCodeAt(b)}return e(n(i(g),g.length*8))}function e(g){const w=[],b=g.length*32,C="0123456789abcdef";for(let x=0;x<b;x+=8){const R=g[x>>5]>>>x%32&255,_=parseInt(C.charAt(R>>>4&15)+C.charAt(R&15),16);w.push(_)}return w}function r(g){return(g+64>>>9<<4)+14+1}function n(g,w){g[w>>5]|=128<<w%32,g[r(w)-1]=w;let b=1732584193,C=-271733879,x=-1732584194,R=271733878;for(let _=0;_<g.length;_+=16){const I=b,k=C,M=x,B=R;b=u(b,C,x,R,g[_],7,-680876936),R=u(R,b,C,x,g[_+1],12,-389564586),x=u(x,R,b,C,g[_+2],17,606105819),C=u(C,x,R,b,g[_+3],22,-1044525330),b=u(b,C,x,R,g[_+4],7,-176418897),R=u(R,b,C,x,g[_+5],12,1200080426),x=u(x,R,b,C,g[_+6],17,-1473231341),C=u(C,x,R,b,g[_+7],22,-45705983),b=u(b,C,x,R,g[_+8],7,1770035416),R=u(R,b,C,x,g[_+9],12,-1958414417),x=u(x,R,b,C,g[_+10],17,-42063),C=u(C,x,R,b,g[_+11],22,-1990404162),b=u(b,C,x,R,g[_+12],7,1804603682),R=u(R,b,C,x,g[_+13],12,-40341101),x=u(x,R,b,C,g[_+14],17,-1502002290),C=u(C,x,R,b,g[_+15],22,1236535329),b=d(b,C,x,R,g[_+1],5,-165796510),R=d(R,b,C,x,g[_+6],9,-1069501632),x=d(x,R,b,C,g[_+11],14,643717713),C=d(C,x,R,b,g[_],20,-373897302),b=d(b,C,x,R,g[_+5],5,-701558691),R=d(R,b,C,x,g[_+10],9,38016083),x=d(x,R,b,C,g[_+15],14,-660478335),C=d(C,x,R,b,g[_+4],20,-405537848),b=d(b,C,x,R,g[_+9],5,568446438),R=d(R,b,C,x,g[_+14],9,-1019803690),x=d(x,R,b,C,g[_+3],14,-187363961),C=d(C,x,R,b,g[_+8],20,1163531501),b=d(b,C,x,R,g[_+13],5,-1444681467),R=d(R,b,C,x,g[_+2],9,-51403784),x=d(x,R,b,C,g[_+7],14,1735328473),C=d(C,x,R,b,g[_+12],20,-1926607734),b=h(b,C,x,R,g[_+5],4,-378558),R=h(R,b,C,x,g[_+8],11,-2022574463),x=h(x,R,b,C,g[_+11],16,1839030562),C=h(C,x,R,b,g[_+14],23,-35309556),b=h(b,C,x,R,g[_+1],4,-1530992060),R=h(R,b,C,x,g[_+4],11,1272893353),x=h(x,R,b,C,g[_+7],16,-155497632),C=h(C,x,R,b,g[_+10],23,-1094730640),b=h(b,C,x,R,g[_+13],4,681279174),R=h(R,b,C,x,g[_],11,-358537222),x=h(x,R,b,C,g[_+3],16,-722521979),C=h(C,x,R,b,g[_+6],23,76029189),b=h(b,C,x,R,g[_+9],4,-640364487),R=h(R,b,C,x,g[_+12],11,-421815835),x=h(x,R,b,C,g[_+15],16,530742520),C=h(C,x,R,b,g[_+2],23,-995338651),b=f(b,C,x,R,g[_],6,-198630844),R=f(R,b,C,x,g[_+7],10,1126891415),x=f(x,R,b,C,g[_+14],15,-1416354905),C=f(C,x,R,b,g[_+5],21,-57434055),b=f(b,C,x,R,g[_+12],6,1700485571),R=f(R,b,C,x,g[_+3],10,-1894986606),x=f(x,R,b,C,g[_+10],15,-1051523),C=f(C,x,R,b,g[_+1],21,-2054922799),b=f(b,C,x,R,g[_+8],6,1873313359),R=f(R,b,C,x,g[_+15],10,-30611744),x=f(x,R,b,C,g[_+6],15,-1560198380),C=f(C,x,R,b,g[_+13],21,1309151649),b=f(b,C,x,R,g[_+4],6,-145523070),R=f(R,b,C,x,g[_+11],10,-1120210379),x=f(x,R,b,C,g[_+2],15,718787259),C=f(C,x,R,b,g[_+9],21,-343485551),b=o(b,I),C=o(C,k),x=o(x,M),R=o(R,B)}return[b,C,x,R]}function i(g){if(g.length===0)return[];const w=g.length*8,b=new Uint32Array(r(w));for(let C=0;C<w;C+=8)b[C>>5]|=(g[C/8]&255)<<C%32;return b}function o(g,w){const b=(g&65535)+(w&65535);return(g>>16)+(w>>16)+(b>>16)<<16|b&65535}function a(g,w){return g<<w|g>>>32-w}function c(g,w,b,C,x,R){return o(a(o(o(w,g),o(C,R)),x),b)}function u(g,w,b,C,x,R,_){return c(w&b|~w&C,g,w,x,R,_)}function d(g,w,b,C,x,R,_){return c(w&C|b&~C,g,w,x,R,_)}function h(g,w,b,C,x,R,_){return c(w^b^C,g,w,x,R,_)}function f(g,w,b,C,x,R,_){return c(b^(w|~C),g,w,x,R,_)}var v=t;return ua.default=v,ua}var tb;function lL(){if(tb)return ca;tb=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.default=void 0;var t=r(_T()),e=r(cL());function r(o){return o&&o.__esModule?o:{default:o}}var i=(0,t.default)("v3",48,e.default);return ca.default=i,ca}var da={},ha={},rb;function uL(){if(rb)return ha;rb=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return ha.default=e,ha}var nb;function dL(){if(nb)return da;nb=1,Object.defineProperty(da,"__esModule",{value:!0}),da.default=void 0;var t=n(uL()),e=n(xT()),r=np();function n(a){return a&&a.__esModule?a:{default:a}}function i(a,c,u){if(t.default.randomUUID&&!c&&!a)return t.default.randomUUID();a=a||{};const d=a.random||(a.rng||e.default)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,c){u=u||0;for(let h=0;h<16;++h)c[u+h]=d[h];return c}return(0,r.unsafeStringify)(d)}var o=i;return da.default=o,da}var pa={},fa={},ib;function hL(){if(ib)return fa;ib=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.default=void 0;function t(i,o,a,c){switch(i){case 0:return o&a^~o&c;case 1:return o^a^c;case 2:return o&a^o&c^a&c;case 3:return o^a^c}}function e(i,o){return i<<o|i>>>32-o}function r(i){const o=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const h=unescape(encodeURIComponent(i));i=[];for(let f=0;f<h.length;++f)i.push(h.charCodeAt(f))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const c=i.length/4+2,u=Math.ceil(c/16),d=new Array(u);for(let h=0;h<u;++h){const f=new Uint32Array(16);for(let v=0;v<16;++v)f[v]=i[h*64+v*4]<<24|i[h*64+v*4+1]<<16|i[h*64+v*4+2]<<8|i[h*64+v*4+3];d[h]=f}d[u-1][14]=(i.length-1)*8/Math.pow(2,32),d[u-1][14]=Math.floor(d[u-1][14]),d[u-1][15]=(i.length-1)*8&4294967295;for(let h=0;h<u;++h){const f=new Uint32Array(80);for(let x=0;x<16;++x)f[x]=d[h][x];for(let x=16;x<80;++x)f[x]=e(f[x-3]^f[x-8]^f[x-14]^f[x-16],1);let v=a[0],g=a[1],w=a[2],b=a[3],C=a[4];for(let x=0;x<80;++x){const R=Math.floor(x/20),_=e(v,5)+t(R,g,w,b)+C+o[R]+f[x]>>>0;C=b,b=w,w=e(g,30)>>>0,g=v,v=_}a[0]=a[0]+v>>>0,a[1]=a[1]+g>>>0,a[2]=a[2]+w>>>0,a[3]=a[3]+b>>>0,a[4]=a[4]+C>>>0}return[a[0]>>24&255,a[0]>>16&255,a[0]>>8&255,a[0]&255,a[1]>>24&255,a[1]>>16&255,a[1]>>8&255,a[1]&255,a[2]>>24&255,a[2]>>16&255,a[2]>>8&255,a[2]&255,a[3]>>24&255,a[3]>>16&255,a[3]>>8&255,a[3]&255,a[4]>>24&255,a[4]>>16&255,a[4]>>8&255,a[4]&255]}var n=r;return fa.default=n,fa}var sb;function pL(){if(sb)return pa;sb=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.default=void 0;var t=r(_T()),e=r(hL());function r(o){return o&&o.__esModule?o:{default:o}}var i=(0,t.default)("v5",80,e.default);return pa.default=i,pa}var va={},ob;function fL(){if(ob)return va;ob=1,Object.defineProperty(va,"__esModule",{value:!0}),va.default=void 0;var t="00000000-0000-0000-0000-000000000000";return va.default=t,va}var ga={},ab;function vL(){if(ab)return ga;ab=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=void 0;var t=e(rp());function e(i){return i&&i.__esModule?i:{default:i}}function r(i){if(!(0,t.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var n=r;return ga.default=n,ga}var cb;function gL(){return cb||(cb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=h(aL()),r=h(lL()),n=h(dL()),i=h(pL()),o=h(fL()),a=h(vL()),c=h(rp()),u=h(np()),d=h(PT());function h(f){return f&&f.__esModule?f:{default:f}}})(kv)),kv}var lb;function ps(){if(lb)return Mi;lb=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.createNoDashGuid=Mi.createGuid=void 0;const t=gL(),e=()=>(0,t.v4)();Mi.createGuid=e;const r=()=>e().replace(new RegExp("-","g"),"").toUpperCase();return Mi.createNoDashGuid=r,Mi}var ub;function Au(){return ub||(ub=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=ps();(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(t.EventType||(t.EventType={}));class r{constructor(i,o){this.privName=i,this.privEventId=(0,e.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=o,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=r})(Iv)),Iv}var db;function mL(){if(db)return tt;db=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.AudioStreamNodeErrorEvent=tt.AudioStreamNodeDetachedEvent=tt.AudioStreamNodeAttachedEvent=tt.AudioStreamNodeAttachingEvent=tt.AudioStreamNodeEvent=tt.AudioSourceErrorEvent=tt.AudioSourceOffEvent=tt.AudioSourceReadyEvent=tt.AudioSourceInitializingEvent=tt.AudioSourceEvent=void 0;const t=Au();class e extends t.PlatformEvent{constructor(v,g,w=t.EventType.Info){super(v,w),this.privAudioSourceId=g}get audioSourceId(){return this.privAudioSourceId}}tt.AudioSourceEvent=e;class r extends e{constructor(v){super("AudioSourceInitializingEvent",v)}}tt.AudioSourceInitializingEvent=r;class n extends e{constructor(v){super("AudioSourceReadyEvent",v)}}tt.AudioSourceReadyEvent=n;class i extends e{constructor(v){super("AudioSourceOffEvent",v)}}tt.AudioSourceOffEvent=i;class o extends e{constructor(v,g){super("AudioSourceErrorEvent",v,t.EventType.Error),this.privError=g}get error(){return this.privError}}tt.AudioSourceErrorEvent=o;class a extends e{constructor(v,g,w){super(v,g),this.privAudioNodeId=w}get audioNodeId(){return this.privAudioNodeId}}tt.AudioStreamNodeEvent=a;class c extends a{constructor(v,g){super("AudioStreamNodeAttachingEvent",v,g)}}tt.AudioStreamNodeAttachingEvent=c;class u extends a{constructor(v,g){super("AudioStreamNodeAttachedEvent",v,g)}}tt.AudioStreamNodeAttachedEvent=u;class d extends a{constructor(v,g){super("AudioStreamNodeDetachedEvent",v,g)}}tt.AudioStreamNodeDetachedEvent=d;class h extends a{constructor(v,g,w){super("AudioStreamNodeErrorEvent",v,g),this.privError=w}get error(){return this.privError}}return tt.AudioStreamNodeErrorEvent=h,tt}var rt={},hb;function yL(){if(hb)return rt;hb=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.ConnectionRedirectEvent=rt.ConnectionMessageSentEvent=rt.ConnectionMessageReceivedEvent=rt.ConnectionEstablishErrorEvent=rt.ConnectionErrorEvent=rt.ConnectionClosedEvent=rt.ConnectionEstablishedEvent=rt.ConnectionStartEvent=rt.ConnectionEvent=rt.ServiceEvent=void 0;const t=Au();class e extends t.PlatformEvent{constructor(v,g,w=t.EventType.Info){super(v,w),this.privJsonResult=g}get jsonString(){return this.privJsonResult}}rt.ServiceEvent=e;class r extends t.PlatformEvent{constructor(v,g,w=t.EventType.Info){super(v,w),this.privConnectionId=g}get connectionId(){return this.privConnectionId}}rt.ConnectionEvent=r;class n extends r{constructor(v,g,w){super("ConnectionStartEvent",v),this.privUri=g,this.privHeaders=w}get uri(){return this.privUri}get headers(){return this.privHeaders}}rt.ConnectionStartEvent=n;class i extends r{constructor(v){super("ConnectionEstablishedEvent",v)}}rt.ConnectionEstablishedEvent=i;class o extends r{constructor(v,g,w){super("ConnectionClosedEvent",v,t.EventType.Debug),this.privReason=w,this.privStatusCode=g}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}rt.ConnectionClosedEvent=o;class a extends r{constructor(v,g,w){super("ConnectionErrorEvent",v,t.EventType.Debug),this.privMessage=g,this.privType=w}get message(){return this.privMessage}get type(){return this.privType}}rt.ConnectionErrorEvent=a;class c extends r{constructor(v,g,w){super("ConnectionEstablishErrorEvent",v,t.EventType.Error),this.privStatusCode=g,this.privReason=w}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}rt.ConnectionEstablishErrorEvent=c;class u extends r{constructor(v,g,w){super("ConnectionMessageReceivedEvent",v),this.privNetworkReceivedTime=g,this.privMessage=w}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}rt.ConnectionMessageReceivedEvent=u;class d extends r{constructor(v,g,w){super("ConnectionMessageSentEvent",v),this.privNetworkSentTime=g,this.privMessage=w}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}rt.ConnectionMessageSentEvent=d;class h extends r{constructor(v,g,w,b){super("ConnectionRedirectEvent",v,t.EventType.Info),this.privRedirectUrl=g,this.privOriginalUrl=w,this.privContext=b}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}return rt.ConnectionRedirectEvent=h,rt}var jv={},an={},pb;function Jr(){if(pb)return an;pb=1,Object.defineProperty(an,"__esModule",{value:!0}),an.ObjectDisposedError=an.InvalidOperationError=an.ArgumentNullError=void 0;class t extends Error{constructor(i){super(i),this.name="ArgumentNull",this.message=i}}an.ArgumentNullError=t;class e extends Error{constructor(i){super(i),this.name="InvalidOperation",this.message=i}}an.InvalidOperationError=e;class r extends Error{constructor(i,o){super(o),this.name=i+"ObjectDisposed",this.message=o}}return an.ObjectDisposedError=r,an}var fb;function RT(){return fb||(fb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=Jr(),r=ps();var n;(function(o){o[o.Text=0]="Text",o[o.Binary=1]="Binary"})(n=t.MessageType||(t.MessageType={}));class i{constructor(a,c,u,d){if(this.privBody=null,a===n.Text&&c&&typeof c!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===n.Binary&&c&&!(c instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=c,this.privHeaders=u||{},this.privId=d||(0,r.createNoDashGuid)(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=i})(jv)),jv}var ma={},vb;function SL(){if(vb)return ma;vb=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.ConnectionOpenResponse=void 0;let t=class{constructor(r,n){this.privStatusCode=r,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}};return ma.ConnectionOpenResponse=t,ma}var ya={},gb;function wL(){if(gb)return ya;gb=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.DeferralMap=void 0;let t=class{constructor(){this.privMap={}}add(r,n){this.privMap[r]=n}getId(r){return this.privMap[r]}complete(r,n){try{this.privMap[r].resolve(n)}catch(i){this.privMap[r].reject(i)}finally{this.privMap[r]=void 0}}};return ya.DeferralMap=t,ya}var Di={},mb;function ET(){if(mb)return Di;mb=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.SendingAgentContextMessageEvent=Di.DialogEvent=void 0;const t=Au();class e extends t.PlatformEvent{constructor(i,o=t.EventType.Info){super(i,o)}}Di.DialogEvent=e;class r extends e{constructor(i){super("SendingAgentContextMessageEvent"),this.privAgentConfig=i}get agentConfig(){return this.privAgentConfig}}return Di.SendingAgentContextMessageEvent=r,Di}var Sa={},wa={},yb;function TT(){if(yb)return wa;yb=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.EventSource=void 0;const t=Jr(),e=ps();let r=class{constructor(i){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=i}onEvent(i){if(this.isDisposed())throw new t.ObjectDisposedError("EventSource");if(this.metadata)for(const o in this.metadata)o&&i.metadata&&(i.metadata[o]||(i.metadata[o]=this.metadata[o]));for(const o in this.privEventListeners)o&&this.privEventListeners[o]&&this.privEventListeners[o](i)}attach(i){const o=(0,e.createNoDashGuid)();return this.privEventListeners[o]=i,{detach:()=>(delete this.privEventListeners[o],Promise.resolve())}}attachListener(i){return this.attach(o=>i.onEvent(o))}attachConsoleListener(i){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(o=>i.onEvent(o)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}};return wa.EventSource=r,wa}var Sb;function CL(){if(Sb)return Sa;Sb=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.Events=void 0;const t=Jr(),e=TT();let r=class Nm{static setEventSource(i){if(!i)throw new t.ArgumentNullError("eventSource");Nm.privInstance=i}static get instance(){return Nm.privInstance}};return Sa.Events=r,r.privInstance=new e.EventSource,Sa}var Ov={},wb;function bL(){return wb||(wb=1,Object.defineProperty(Ov,"__esModule",{value:!0})),Ov}var Nv={},Cb;function xL(){return Cb||(Cb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,(function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"})(t.ConnectionState||(t.ConnectionState={}))})(Nv)),Nv}var Mv={},bb;function PL(){return bb||(bb=1,Object.defineProperty(Mv,"__esModule",{value:!0})),Mv}var Dv={},xb;function _L(){return xb||(xb=1,Object.defineProperty(Dv,"__esModule",{value:!0})),Dv}var Lv={},Pb;function RL(){return Pb||(Pb=1,Object.defineProperty(Lv,"__esModule",{value:!0})),Lv}var zv={},_b;function EL(){return _b||(_b=1,Object.defineProperty(zv,"__esModule",{value:!0})),zv}var Bv={},Rb;function TL(){return Rb||(Rb=1,Object.defineProperty(Bv,"__esModule",{value:!0})),Bv}var Fv={},Eb;function AL(){return Eb||(Eb=1,Object.defineProperty(Fv,"__esModule",{value:!0})),Fv}var qv={},Tb;function IL(){return Tb||(Tb=1,Object.defineProperty(qv,"__esModule",{value:!0})),qv}var Uv={},Ab;function kL(){return Ab||(Ab=1,Object.defineProperty(Uv,"__esModule",{value:!0})),Uv}var Ca={},Ib;function AT(){if(Ib)return Ca;Ib=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.List=void 0;const t=Jr();let e=class es{constructor(n){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],n)for(const i of n)this.privList.push(i)}get(n){return this.throwIfDisposed(),this.privList[n]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(n){this.throwIfDisposed(),this.insertAt(this.privList.length,n)}insertAt(n,i){this.throwIfDisposed(),n===0?this.privList.unshift(i):n===this.privList.length?this.privList.push(i):this.privList.splice(n,0,i),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(n){return this.throwIfDisposed(),this.remove(n,1)[0]}remove(n,i){this.throwIfDisposed();const o=this.privList.splice(n,i);return this.triggerSubscriptions(this.privRemoveSubscriptions),o}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[i]=n,{detach:()=>(delete this.privAddSubscriptions[i],Promise.resolve())}}onRemoved(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[i]=n,{detach:()=>(delete this.privRemoveSubscriptions[i],Promise.resolve())}}onDisposed(n){this.throwIfDisposed();const i=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[i]=n,{detach:()=>(delete this.privDisposedSubscriptions[i],Promise.resolve())}}join(n){return this.throwIfDisposed(),this.privList.join(n)}toArray(){const n=Array();return this.privList.forEach(i=>{n.push(i)}),n}any(n){return this.throwIfDisposed(),n?this.where(n).length()>0:this.length()>0}all(n){return this.throwIfDisposed(),this.where(n).length()===this.length()}forEach(n){this.throwIfDisposed();for(let i=0;i<this.length();i++)n(this.privList[i],i)}select(n){this.throwIfDisposed();const i=[];for(let o=0;o<this.privList.length;o++)i.push(n(this.privList[o],o));return new es(i)}where(n){this.throwIfDisposed();const i=new es;for(let o=0;o<this.privList.length;o++)n(this.privList[o],o)&&i.add(this.privList[o]);return i}orderBy(n){this.throwIfDisposed();const o=this.toArray().sort(n);return new es(o)}orderByDesc(n){return this.throwIfDisposed(),this.orderBy((i,o)=>n(o,i))}clone(){return this.throwIfDisposed(),new es(this.toArray())}concat(n){return this.throwIfDisposed(),new es(this.privList.concat(n.toArray()))}concatArray(n){return this.throwIfDisposed(),new es(this.privList.concat(n))}isDisposed(){return this.privList==null}dispose(n){this.isDisposed()||(this.privDisposeReason=n,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new t.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(n){if(n)for(const i in n)i&&n[i]()}};return Ca.List=e,Ca}var Vv={},kb;function IT(){return kb||(kb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(c){c[c.None=0]="None",c[c.Resolved=1]="Resolved",c[c.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class r{constructor(u){this.throwIfError=()=>{if(this.isError)throw this.error},u.on(d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=d)},d=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=d)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=r;class n{constructor(){this.setResult=u=>{this.privOnSetResult(u)},this.setError=u=>{this.privOnSetError(u)},this.on=(u,d)=>{this.privOnSetResult=u,this.privOnSetError=d}}}t.PromiseResultEventSource=n;class i{constructor(){this.resolve=u=>(this.privResolve(u),this),this.reject=u=>(this.privReject(u),this),this.privPromise=new Promise((u,d)=>{this.privResolve=u,this.privReject=d})}get promise(){return this.privPromise}}t.Deferred=i;class o{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(u){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(u);for(let d=0;d<this.privSuccessHandlers.length;d++)this.executeSuccessCallback(u,this.privSuccessHandlers[d],this.privErrorHandlers[d]);this.detachHandlers()}reject(u){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(u);for(const d of this.privErrorHandlers)this.executeErrorCallback(u,d);this.detachHandlers()}on(u,d){u==null&&(u=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(u),this.privErrorHandlers.push(d)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,u,d):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,d),this.detachHandlers())}executeSuccessCallback(u,d,h){try{d(u)}catch(f){this.executeErrorCallback(`'Unhandled callback error: ${f}'`,h)}}executeErrorCallback(u,d){if(d)try{d(u)}catch(h){throw new Error(`'Unhandled callback error: ${h}. InnerError: ${u}'`)}else throw new Error(`'Unhandled error: ${u}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=o;function a(c,u,d){c.then(h=>{try{u&&u(h)}catch(f){if(d)try{if(f instanceof Error){const v=f;d(v.name+": "+v.message)}else d(f)}catch{}}},h=>{if(d)try{if(h instanceof Error){const f=h;d(f.name+": "+f.message)}else d(h)}catch{}})}t.marshalPromiseToCallbacks=a})(Vv)),Vv}var ba={},jb;function kT(){if(jb)return ba;jb=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.Queue=void 0;const t=Jr(),e=AT(),r=IT();var n;(function(o){o[o.Dequeue=0]="Dequeue",o[o.Peek=1]="Peek"})(n||(n={}));let i=class{constructor(a){this.privPromiseStore=new e.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=a||new e.List,this.privDetachables=[],this.privSubscribers=new e.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(a){this.throwIfDispose(),this.enqueueFromPromise(new Promise(c=>c(a)))}enqueueFromPromise(a){this.throwIfDispose(),a.then(c=>{this.privList.add(c)},()=>{})}dequeue(){this.throwIfDispose();const a=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:n.Dequeue}),this.drain()),a.promise}peek(){this.throwIfDispose();const a=new r.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:a,type:n.Peek}),this.drain()),a.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(a,c){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=c,this.privIsDisposing=!0;const u=this.privSubscribers;if(u){for(;u.length()>0;)u.removeFirst().deferral.resolve(void 0);this.privSubscribers===u&&(this.privSubscribers=u)}for(const d of this.privDetachables)await d.detach();if(this.privPromiseStore.length()>0&&a){const d=[];return this.privPromiseStore.toArray().forEach(h=>{d.push(h)}),Promise.all(d).finally(()=>{this.privSubscribers=null,this.privList.forEach(h=>{a(h)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(a){await this.drainAndDispose(null,a)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const a=this.privSubscribers,c=this.privList;if(a&&c){for(;c.length()>0&&a.length()>0&&!this.privIsDisposing;){const u=a.removeFirst();if(u.type===n.Peek)u.deferral.resolve(c.first());else{const d=c.removeFirst();u.deferral.resolve(d)}}this.privSubscribers===a&&(this.privSubscribers=a),this.privList===c&&(this.privList=c)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new t.InvalidOperationError(this.privDisposeReason):new t.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new t.InvalidOperationError("Queue disposing")}};return ba.Queue=i,ba}var xa={},Ob;function jL(){if(Ob)return xa;Ob=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.RawWebsocketMessage=void 0;const t=RT(),e=Jr(),r=ps();let n=class{constructor(o,a,c){if(this.privPayload=null,!a)throw new e.ArgumentNullError("payload");if(o===t.MessageType.Binary&&Object.getPrototypeOf(a).constructor.name!=="ArrayBuffer")throw new e.InvalidOperationError("Payload must be ArrayBuffer");if(o===t.MessageType.Text&&typeof a!="string")throw new e.InvalidOperationError("Payload must be a string");this.privMessageType=o,this.privPayload=a,this.privId=c||(0,r.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===t.MessageType.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===t.MessageType.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}};return xa.RawWebsocketMessage=n,xa}var Pa={},Nb;function OL(){if(Nb)return Pa;Nb=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.RiffPcmEncoder=void 0;let t=class{constructor(r,n){this.privActualSampleRate=r,this.privDesiredSampleRate=n}encode(r){const n=this.downSampleAudioFrame(r,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const i=n.length*2,o=new ArrayBuffer(i),a=new DataView(o);return this.floatTo16BitPCM(a,0,n),o}setString(r,n,i){for(let o=0;o<i.length;o++)r.setUint8(n+o,i.charCodeAt(o))}floatTo16BitPCM(r,n,i){for(let o=0;o<i.length;o++,n+=2){const a=Math.max(-1,Math.min(1,i[o]));r.setInt16(n,a<0?a*32768:a*32767,!0)}}downSampleAudioFrame(r,n,i){if(!r)return null;if(i===n||i>n)return r;const o=n/i,a=Math.round(r.length/o),c=new Float32Array(a);let u=0,d=0;for(;d<a;){const h=Math.round((d+1)*o);let f=0,v=0;for(;u<h&&u<r.length;)f+=r[u++],v++;c[d++]=f/v}return c}};return Pa.RiffPcmEncoder=t,Pa}var _a={},Mb;function NL(){if(Mb)return _a;Mb=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.Stream=void 0;const t=Jr(),e=ps(),r=kT();let n=class{constructor(o){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=o||(0,e.createNoDashGuid)(),this.privReaderQueue=new r.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(o){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(o)}catch{}}read(){if(this.privIsReadEnded)throw new t.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async o=>((o===void 0||o.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),o))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new r.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new t.InvalidOperationError("Stream closed")}};return _a.Stream=n,_a}var Wv={},Db;function By(){return Db||(Db=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,(function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"})(t.TranslationStatus||(t.TranslationStatus={}))})(Wv)),Wv}var Ra={},Lb;function ML(){if(Lb)return Ra;Lb=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.ChunkedArrayBufferStream=void 0;const t=Ee();let e=class extends t.Stream{constructor(n,i){super(i),this.privTargetChunkSize=Math.round(n),this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const o=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),c=new Uint8Array(n.buffer.slice(i,o+i));a.set(c,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=o,i+=o,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Ra.ChunkedArrayBufferStream=e,Ra}var Hv={},zb;function DL(){return zb||(zb=1,Object.defineProperty(Hv,"__esModule",{value:!0})),Hv}var Ea={},Bb;function LL(){if(Bb)return Ea;Bb=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.Timeout=void 0;let t=class Gn{static load(){const r=new Map([[0,()=>{}]]),n=new Map,o="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),a=new Worker(o);return a.addEventListener("message",({data:d})=>{if(Gn.isCallNotification(d)){const{params:{timerId:h}}=d,f=r.get(h);if(typeof f=="number"){const v=n.get(f);if(v===void 0||v!==h)throw new Error("The timer is in an undefined state.")}else if(typeof f<"u")f(),r.delete(h);else throw new Error("The timer is in an undefined state.")}else if(Gn.isClearResponse(d)){const{id:h}=d,f=n.get(h);if(f===void 0)throw new Error("The timer is in an undefined state.");n.delete(h),r.delete(f)}else{const{error:{message:h}}=d;throw new Error(h)}}),{clearTimeout:d=>{const h=Math.random();n.set(h,d),r.set(d,h),a.postMessage({id:h,method:"clear",params:{timerId:d}})},setTimeout:(d,h)=>{const f=Math.random();return r.set(f,d),a.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:f}}),f}}}static loadWorkerTimers(){return()=>(Gn.workerTimers!==null||(Gn.workerTimers=Gn.load()),Gn.workerTimers)}static isCallNotification(r){return r.method!==void 0&&r.method==="call"}static isClearResponse(r){return r.error===null&&typeof r.id=="number"}};return Ea.Timeout=t,t.workerTimers=null,t.clearTimeout=e=>t.timers().clearTimeout(e),t.setTimeout=(e,r)=>t.timers().setTimeout(e,r),t.timers=t.loadWorkerTimers(),Ea}var Me={},Fb;function zL(){if(Fb)return Me;Fb=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.OCSPCacheUpdateErrorEvent=Me.OCSPResponseRetrievedEvent=Me.OCSPCacheFetchErrorEvent=Me.OCSPVerificationFailedEvent=Me.OCSPCacheHitEvent=Me.OCSPCacheEntryNeedsRefreshEvent=Me.OCSPCacheEntryExpiredEvent=Me.OCSPWSUpgradeStartedEvent=Me.OCSPStapleReceivedEvent=Me.OCSPCacheUpdateCompleteEvent=Me.OCSPDiskCacheStoreEvent=Me.OCSPMemoryCacheStoreEvent=Me.OCSPCacheUpdateNeededEvent=Me.OCSPDiskCacheHitEvent=Me.OCSPCacheMissEvent=Me.OCSPMemoryCacheHitEvent=Me.OCSPEvent=void 0;const t=Au();class e extends t.PlatformEvent{constructor(_,I,k){super(_,I),this.privSignature=k}}Me.OCSPEvent=e;class r extends e{constructor(_){super("OCSPMemoryCacheHitEvent",t.EventType.Debug,_)}}Me.OCSPMemoryCacheHitEvent=r;class n extends e{constructor(_){super("OCSPCacheMissEvent",t.EventType.Debug,_)}}Me.OCSPCacheMissEvent=n;class i extends e{constructor(_){super("OCSPDiskCacheHitEvent",t.EventType.Debug,_)}}Me.OCSPDiskCacheHitEvent=i;class o extends e{constructor(_){super("OCSPCacheUpdateNeededEvent",t.EventType.Debug,_)}}Me.OCSPCacheUpdateNeededEvent=o;class a extends e{constructor(_){super("OCSPMemoryCacheStoreEvent",t.EventType.Debug,_)}}Me.OCSPMemoryCacheStoreEvent=a;class c extends e{constructor(_){super("OCSPDiskCacheStoreEvent",t.EventType.Debug,_)}}Me.OCSPDiskCacheStoreEvent=c;class u extends e{constructor(_){super("OCSPCacheUpdateCompleteEvent",t.EventType.Debug,_)}}Me.OCSPCacheUpdateCompleteEvent=u;class d extends e{constructor(){super("OCSPStapleReceivedEvent",t.EventType.Debug,"")}}Me.OCSPStapleReceivedEvent=d;class h extends e{constructor(_){super("OCSPWSUpgradeStartedEvent",t.EventType.Debug,_)}}Me.OCSPWSUpgradeStartedEvent=h;class f extends e{constructor(_,I){super("OCSPCacheEntryExpiredEvent",t.EventType.Debug,_),this.privExpireTime=I}}Me.OCSPCacheEntryExpiredEvent=f;class v extends e{constructor(_,I,k){super("OCSPCacheEntryNeedsRefreshEvent",t.EventType.Debug,_),this.privExpireTime=k,this.privStartTime=I}}Me.OCSPCacheEntryNeedsRefreshEvent=v;class g extends e{constructor(_,I,k){super("OCSPCacheHitEvent",t.EventType.Debug,_),this.privExpireTime=k,this.privExpireTimeString=new Date(k).toLocaleDateString(),this.privStartTime=I,this.privStartTimeString=new Date(I).toLocaleTimeString()}}Me.OCSPCacheHitEvent=g;class w extends e{constructor(_,I){super("OCSPVerificationFailedEvent",t.EventType.Debug,_),this.privError=I}}Me.OCSPVerificationFailedEvent=w;class b extends e{constructor(_,I){super("OCSPCacheFetchErrorEvent",t.EventType.Debug,_),this.privError=I}}Me.OCSPCacheFetchErrorEvent=b;class C extends e{constructor(_){super("OCSPResponseRetrievedEvent",t.EventType.Debug,_)}}Me.OCSPResponseRetrievedEvent=C;class x extends e{constructor(_,I){super("OCSPCacheUpdateErrorEvent",t.EventType.Debug,_),this.privError=I}}return Me.OCSPCacheUpdateErrorEvent=x,Me}var Ta={},qb;function BL(){if(qb)return Ta;qb=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.BackgroundEvent=void 0;const t=Ee();class e extends t.PlatformEvent{constructor(n){super("BackgroundEvent",t.EventType.Error),this.privError=n}get error(){return this.privError}}return Ta.BackgroundEvent=e,Ta}var Ub;function Ee(){return Ub||(Ub=1,(function(t){var e=Ni&&Ni.__createBinding||(Object.create?(function(i,o,a,c){c===void 0&&(c=a),Object.defineProperty(i,c,{enumerable:!0,get:function(){return o[a]}})}):(function(i,o,a,c){c===void 0&&(c=a),i[c]=o[a]})),r=Ni&&Ni.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,r(mL(),t),r(yL(),t),r(RT(),t),r(SL(),t),r(wL(),t),r(ET(),t),r(Jr(),t),r(CL(),t),r(TT(),t),r(ps(),t),r(bL(),t),r(xL(),t),r(PL(),t),r(_L(),t),r(RL(),t),r(EL(),t),r(TL(),t),r(AL(),t),r(IL(),t),r(kL(),t),r(AT(),t),r(Au(),t),r(IT(),t),r(kT(),t),r(jL(),t),r(OL(),t),r(NL(),t);var n=By();Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(ML(),t),r(DL(),t),r(LL(),t),r(zL(),t),r(BL(),t)})(Ni)),Ni}var Aa={},Vb;function dr(){if(Vb)return Aa;Vb=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.HeaderNames=void 0;let t=class{};return Aa.HeaderNames=t,t.AuthKey="Ocp-Apim-Subscription-Key",t.Authorization="Authorization",t.SpIDAuthKey="Apim-Subscription-Id",t.ConnectionId="X-ConnectionId",t.ContentType="Content-Type",t.CustomCommandsAppId="X-CommandsAppId",t.Path="Path",t.RequestId="X-RequestId",t.RequestStreamId="X-StreamId",t.RequestTimestamp="X-Timestamp",Aa}var Ia={},Wb;function Fy(){if(Wb)return Ia;Wb=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.AuthInfo=void 0;class t{constructor(r,n){this.privHeaderName=r,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}return Ia.AuthInfo=t,Ia}var Hb;function FL(){if(Hb)return ia;Hb=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.CognitiveSubscriptionKeyAuthentication=void 0;const t=Ee(),e=dr(),r=Fy();let n=class{constructor(o){if(!o)throw new t.ArgumentNullError("subscriptionKey");this.privAuthInfo=new r.AuthInfo(e.HeaderNames.AuthKey,o)}fetch(o){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(o){return Promise.resolve(this.privAuthInfo)}};return ia.CognitiveSubscriptionKeyAuthentication=n,ia}var ka={},Kb;function qL(){if(Kb)return ka;Kb=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.CognitiveTokenAuthentication=void 0;const t=Ee(),e=Fy(),r=dr();let n=class Mm{constructor(o,a){if(!o)throw new t.ArgumentNullError("fetchCallback");if(!a)throw new t.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=o,this.privFetchOnExpiryCallback=a}fetch(o){return this.privFetchCallback(o).then(a=>new e.AuthInfo(r.HeaderNames.Authorization,a===void 0?void 0:Mm.privTokenPrefix+a))}fetchOnExpiry(o){return this.privFetchOnExpiryCallback(o).then(a=>new e.AuthInfo(r.HeaderNames.Authorization,a===void 0?void 0:Mm.privTokenPrefix+a))}};return ka.CognitiveTokenAuthentication=n,n.privTokenPrefix="Bearer ",ka}var Kv={},Gb;function UL(){return Gb||(Gb=1,Object.defineProperty(Kv,"__esModule",{value:!0})),Kv}var Gv={},$b;function VL(){return $b||($b=1,Object.defineProperty(Gv,"__esModule",{value:!0})),Gv}var $v={},Jb;function qy(){return Jb||(Jb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=Ee();class r extends e.PlatformEvent{constructor(h,f,v,g=e.EventType.Info){super(h,g),this.privRequestId=f,this.privSessionId=v}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;class n extends r{constructor(h,f,v,g){super("RecognitionTriggeredEvent",h,f),this.privAudioSourceId=v,this.privAudioNodeId=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=n;class i extends r{constructor(h,f,v,g){super("ListeningStartedEvent",h,f),this.privAudioSourceId=v,this.privAudioNodeId=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=i;class o extends r{constructor(h,f,v){super("ConnectingToServiceEvent",h,v),this.privAuthFetchEventid=f}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=o;class a extends r{constructor(h,f,v,g,w){super("RecognitionStartedEvent",h,w),this.privAudioSourceId=f,this.privAudioNodeId=v,this.privAuthFetchEventId=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var c;(function(d){d[d.Success=0]="Success",d[d.AudioSourceError=1]="AudioSourceError",d[d.AudioSourceTimeout=2]="AudioSourceTimeout",d[d.AuthTokenFetchError=3]="AuthTokenFetchError",d[d.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",d[d.UnAuthorized=5]="UnAuthorized",d[d.ConnectTimeout=6]="ConnectTimeout",d[d.ConnectError=7]="ConnectError",d[d.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",d[d.UnknownError=9]="UnknownError"})(c=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class u extends r{constructor(h,f,v,g,w,b,C,x){super("RecognitionEndedEvent",h,w,C===c.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=f,this.privAudioNodeId=v,this.privAuthFetchEventId=g,this.privStatus=C,this.privError=x,this.privServiceTag=b}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=u})($v)),$v}var ja={},Li={},kr={};const WL={},HL=Object.freeze(Object.defineProperty({__proto__:null,default:WL},Symbol.toStringTag,{value:"Module"})),ns=Mk(HL);var Jv={},Qb;function jT(){return Qb||(Qb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=Ee();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(Jv)),Jv}var Oa={},Yb;function De(){if(Yb)return Oa;Yb=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.Contracts=void 0;let t=class $n{static throwIfNullOrUndefined(r,n){if(r==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(r,n){if(r===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(r,n){if($n.throwIfNullOrUndefined(r,n),(""+r).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(r,n,i){if($n.throwIfNullOrUndefined(r,n),(""+r).length>i)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(r,n,i){if($n.throwIfNullOrUndefined(r,n),(""+r).length<i)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+i.toString()+" characters)")}static throwIfDisposed(r){if(r)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(r,n){if($n.throwIfNullOrUndefined(r,n),r.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const i of r)$n.throwIfNullOrWhitespace(i,n)}static throwIfFileDoesNotExist(r,n){$n.throwIfNullOrWhitespace(r,n)}static throwIfNotUndefined(r,n){if(r!==void 0)throw new Error("throwIfNotUndefined:"+n)}static throwIfNumberOutOfRange(r,n,i,o){if($n.throwIfNullOrUndefined(r,n),r<i||r>o)throw new Error("throwIfNumberOutOfRange:"+n+" (must be between "+i.toString()+" and "+o.toString()+")")}};return Oa.Contracts=t,Oa}var Xb;function KL(){if(Xb)return kr;Xb=1;var t=kr&&kr.__createBinding||(Object.create?(function(c,u,d,h){h===void 0&&(h=d),Object.defineProperty(c,h,{enumerable:!0,get:function(){return u[d]}})}):(function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]})),e=kr&&kr.__setModuleDefault||(Object.create?(function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}):function(c,u){c.default=u}),r=kr&&kr.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&t(u,c,d);return e(u,c),u};Object.defineProperty(kr,"__esModule",{value:!0}),kr.ConsoleLoggingListener=void 0;const n=r(ns),i=jT(),o=De();let a=class{constructor(u=i.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=u}set logPath(u){o.Contracts.throwIfNullOrUndefined(n.openSync,`
File System access not available`),this.privLogPath=u}set enableConsoleOutput(u){this.privEnableConsoleOutput=u}onEvent(u){if(u.eventType>=this.privLogLevelFilter){const d=this.toString(u);if(this.logCallback&&this.logCallback(d),this.privLogPath&&n.writeFileSync(this.privLogPath,d+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(u.eventType){case i.LogLevel.Debug:console.debug(d);break;case i.LogLevel.Info:console.info(d);break;case i.LogLevel.Warning:console.warn(d);break;case i.LogLevel.Error:console.error(d);break;default:console.log(d);break}}}toString(u){const d=[`${u.eventTime}`,`${u.name}`],h=u;for(const f in h)if(f&&u.hasOwnProperty(f)&&f!=="eventTime"&&f!=="eventType"&&f!=="eventId"&&f!=="name"&&f!=="constructor"){const v=h[f];let g="<NULL>";v!=null&&(typeof v=="number"||typeof v=="string"?g=v.toString():g=JSON.stringify(v)),d.push(`${f}: ${g}`)}return d.join(" | ")}};return kr.ConsoleLoggingListener=a,kr}var Qv={},Zb;function GL(){return Zb||(Zb=1,Object.defineProperty(Qv,"__esModule",{value:!0})),Qv}var Yv={},Xv={},ex;function fs(){return ex||(ex=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(o,a,c,u){return new n(o,a,c,u)}static getWaveFormatPCM(o,a,c){return new n(o,a,c)}}t.AudioStreamFormat=r;class n extends r{constructor(o=16e3,a=16,c=1,u=e.PCM){super();let d=!0;switch(u){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:d=!1}if(this.bitsPerSample=a,this.samplesPerSec=o,this.channels=c,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),d){this.privHeader=new ArrayBuffer(44);const h=new DataView(this.privHeader);this.setString(h,0,"RIFF"),h.setUint32(4,0,!0),this.setString(h,8,"WAVEfmt "),h.setUint32(16,16,!0),h.setUint16(20,this.formatTag,!0),h.setUint16(22,this.channels,!0),h.setUint32(24,this.samplesPerSec,!0),h.setUint32(28,this.avgBytesPerSec,!0),h.setUint16(32,this.channels*(this.bitsPerSample/8),!0),h.setUint16(34,this.bitsPerSample,!0),this.setString(h,36,"data"),h.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(o){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return o!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:o}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(o,a,c){for(let u=0;u<c.length;u++)o.setUint8(a+u,c.charCodeAt(u))}}t.AudioStreamFormatImpl=n})(Xv)),Xv}var tx;function $L(){return tx||(tx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=we(),r=Ee(),n=fs();t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,c,u,d){this.privRecorder=a,this.deviceId=c,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=u||(0,r.createNoDashGuid)(),this.privEvents=new r.EventSource,this.privMediaStream=d||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(u){if(u instanceof Error){const d=u;this.privInitializeDeferral.reject(d.name+": "+d.message)}else this.privInitializeDeferral.reject(u);return this.privInitializeDeferral.promise}const a=window.navigator;let c=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(c=(u,d,h)=>{a.mediaDevices.getUserMedia(u).then(d).catch(h)}),c){const u=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):c({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},d=>{this.privMediaStream=d,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},d=>{const h=`Error occurred during microphone initialization: ${d}`;this.privInitializeDeferral.reject(h),this.onEvent(new r.AudioSourceErrorEvent(this.privId,h))})};this.privContext.state==="suspended"?this.privContext.resume().then(u).catch(d=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${d}`)}):u()}else{const u="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(u),this.onEvent(new r.AudioSourceErrorEvent(u,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(c=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(c.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>c.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const c=this.privStreams[a];c&&c.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,c){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(c);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const c=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(c===void 0)return Promise.resolve(this.privMicrophoneLabel);const u=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(d=>{for(const h of d)if(h.deviceId===c){this.privMicrophoneLabel=h.label;break}u.resolve(this.privMicrophoneLabel)},()=>u.resolve(this.privMicrophoneLabel)),u.promise}async listen(a){await this.turnOn();const c=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=c;try{this.privRecorder.record(this.privContext,this.privMediaStream,c)}catch(d){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,d)),d}return c}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()})(Yv)),Yv}var Na={},rx;function JL(){if(rx)return Na;rx=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.FileAudioSource=void 0;const t=we(),e=Ee(),r=fs();let n=class{constructor(o,a,c){this.privStreams={},this.privHeaderEnd=44,this.privId=c||(0,e.createNoDashGuid)(),this.privEvents=new e.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(o){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,o));const a=await this.upload(o);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[o],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,o)),await this.turnOff()},id:()=>o,read:()=>a.read()})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const a=this.privStreams[o];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),c=new e.Deferred,u=d=>{const h=new DataView(d),f=x=>String.fromCharCode(h.getUint8(x),h.getUint8(x+1),h.getUint8(x+2),h.getUint8(x+3));if(f(0)!=="RIFF"){c.reject("Invalid WAV header in file, RIFF was not found");return}if(f(8)!=="WAVE"||f(12)!=="fmt "){c.reject("Invalid WAV header in file, WAVEfmt was not found");return}const v=h.getInt32(16,!0),g=h.getUint16(22,!0),w=h.getUint32(24,!0),b=h.getUint16(34,!0);let C=36+Math.max(v-16,0);for(;f(C)!=="data";C+=2)if(C>4288){c.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=C+8,c.resolve(r.AudioStreamFormat.getWaveFormatPCM(w,b,g))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const d=new FileReader;d.onload=h=>{const f=h.target.result;u(f)},d.readAsArrayBuffer(a)}else{const d=a;u(d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength))}return c.promise}async upload(o){const a=c=>{const u=`Error occurred while processing '${this.privFilename}'. ${c}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,o,u)),new Error(u)};try{await this.turnOn();const c=await this.privAudioFormatPromise,u=new e.ChunkedArrayBufferStream(c.avgBytesPerSec/10,o);this.privStreams[o]=u;const d=this.privSource.slice(this.privHeaderEnd),h=f=>{u.isClosed||(u.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()}),u.close())};if(typeof window<"u"&&typeof Blob<"u"&&d instanceof Blob){const f=new FileReader;f.onerror=v=>a(v.toString()),f.onload=v=>{const g=v.target.result;h(g)},f.readAsArrayBuffer(d)}else{const f=d;h(f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength))}return u}catch(c){a(c)}}onEvent(o){this.privEvents.onEvent(o),e.Events.instance.onEvent(o)}};return Na.FileAudioSource=n,Na}var Ma={},nx;function QL(){if(nx)return Ma;nx=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.PcmRecorder=void 0;const t=Ee();class e{constructor(n){this.privStopInputOnRelease=n}record(n,i,o){const c=new t.RiffPcmEncoder(n.sampleRate,16e3),u=n.createMediaStreamSource(i),d=()=>{const f=(()=>{let v=0;try{return n.createScriptProcessor(v,1,1)}catch{v=2048;let w=n.sampleRate;for(;v<16384&&w>=32e3;)v<<=1,w>>=1;return n.createScriptProcessor(v,1,1)}})();f.onaudioprocess=v=>{const g=v.inputBuffer.getChannelData(0);if(o&&!o.isClosed){const w=c.encode(g);w&&o.writeStreamChunk({buffer:w,isEnd:!1,timeReceived:Date.now()})}},u.connect(f),f.connect(n.destination),this.privMediaResources={scriptProcessorNode:f,source:u,stream:i}},h=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(n.audioWorklet&&!h){if(!this.privSpeechProcessorScript){const f=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,v=new Blob([f],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(v)}n.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const f=new AudioWorkletNode(n,"speech-processor");f.port.onmessage=v=>{const g=v.data;if(o&&!o.isClosed){const w=c.encode(g);w&&o.writeStreamChunk({buffer:w,isEnd:!1,timeReceived:Date.now()})}},u.connect(f),f.connect(n.destination),this.privMediaResources={scriptProcessorNode:f,source:u,stream:i}}).catch(()=>{d()})}else try{d()}catch(f){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${f}`)}}releaseMediaResources(n){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(n.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(i=>i.stop()),this.privMediaResources.source=null))}setWorkletUrl(n){this.privSpeechProcessorScript=n}}return Ma.PcmRecorder=e,Ma}var Da={},rr={},ix;function OT(){if(ix)return rr;ix=1;var t=rr&&rr.__createBinding||(Object.create?(function(v,g,w,b){b===void 0&&(b=w),Object.defineProperty(v,b,{enumerable:!0,get:function(){return g[w]}})}):(function(v,g,w,b){b===void 0&&(b=w),v[b]=g[w]})),e=rr&&rr.__setModuleDefault||(Object.create?(function(v,g){Object.defineProperty(v,"default",{enumerable:!0,value:g})}):function(v,g){v.default=g}),r=rr&&rr.__importStar||function(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var w in v)w!=="default"&&Object.prototype.hasOwnProperty.call(v,w)&&t(g,v,w);return e(g,v),g},n=rr&&rr.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(rr,"__esModule",{value:!0}),rr.WebsocketMessageAdapter=void 0;const i=r(ns),o=r(ns),a=n(ns),c=n(ns),u=n(ns),d=dr(),h=Ee();let f=class Dm{constructor(g,w,b,C,x,R){if(!g)throw new h.ArgumentNullError("uri");if(!b)throw new h.ArgumentNullError("messageFormatter");this.proxyInfo=C,this.privConnectionEvents=new h.EventSource,this.privConnectionId=w,this.privMessageFormatter=b,this.privConnectionState=h.ConnectionState.None,this.privUri=g,this.privHeaders=x,this.privEnableCompression=R,this.privHeaders[d.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===h.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new h.Deferred,this.privCertificateValidatedDeferral=new h.Deferred,this.privConnectionState=h.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Dm.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let w=new URL(this.privUri).protocol;w?.toLocaleLowerCase()==="wss:"?w="https:":w?.toLocaleLowerCase()==="ws:"&&(w="http:");const b={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:w.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),b.agent=this.getAgent(),b.agent.protocol=w,this.privWebsocketClient=new u.default(this.privUri,b),this.privWebsocketClient.on("redirect",C=>{const x=new h.ConnectionRedirectEvent(this.privConnectionId,C,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${C}'`);h.Events.instance.onEvent(x)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new h.Queue,this.privDisconnectDeferral=new h.Deferred,this.privSendMessageQueue=new h.Queue,this.processSendQueue().catch(g=>{h.Events.instance.onEvent(new h.BackgroundEvent(g))})}catch(g){return this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(500,g)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new h.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=h.ConnectionState.Connected,this.onEvent(new h.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(200,""))},g=>{this.privConnectionEstablishDeferral.reject(g)})},this.privWebsocketClient.onerror=g=>{this.onEvent(new h.ConnectionErrorEvent(this.privConnectionId,g.message,g.type)),this.privLastErrorReceived=g.message},this.privWebsocketClient.onclose=g=>{this.privConnectionState===h.ConnectionState.Connecting?(this.privConnectionState=h.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new h.ConnectionOpenResponse(g.code,g.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=h.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new h.ConnectionClosedEvent(this.privConnectionId,g.code,g.reason))),this.onClose(g.code,g.reason).catch(w=>{h.Events.instance.onEvent(new h.BackgroundEvent(w))})},this.privWebsocketClient.onmessage=g=>{const w=new Date().toISOString();if(this.privConnectionState===h.ConnectionState.Connected){const b=new h.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(b.promise),g.data instanceof ArrayBuffer){const C=new h.RawWebsocketMessage(h.MessageType.Binary,g.data);this.privMessageFormatter.toConnectionMessage(C).then(x=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,w,x)),b.resolve(x)},x=>{b.reject(`Invalid binary message format. Error: ${x}`)})}else{const C=new h.RawWebsocketMessage(h.MessageType.Text,g.data);this.privMessageFormatter.toConnectionMessage(C).then(x=>{this.onEvent(new h.ConnectionMessageReceivedEvent(this.privConnectionId,w,x)),b.resolve(x)},x=>{b.reject(`Invalid text message format. Error: ${x}`)})}}},this.privConnectionEstablishDeferral.promise}send(g){if(this.privConnectionState!==h.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${h.ConnectionState[this.privConnectionState]} state`);const w=new h.Deferred,b=new h.Deferred;return this.privSendMessageQueue.enqueueFromPromise(b.promise),this.privMessageFormatter.fromConnectionMessage(g).then(C=>{b.resolve({Message:g,RawWebsocketMessage:C,sendStatusDeferral:w})},C=>{b.reject(`Error formatting the message. ${C}`)}),w.promise}read(){return this.privConnectionState!==h.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(g){if(this.privWebsocketClient)this.privConnectionState!==h.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,g||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(g){try{if(!g)return Promise.resolve();if(this.onEvent(new h.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),g.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(g.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+g.Message.id+" "+new Error().stack);return Promise.resolve()}catch(w){return Promise.reject(`websocket send error: ${w}`)}}async onClose(g,w){const b=`Connection closed. ${g}: ${w}`;this.privConnectionState=h.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},b),await this.privSendMessageQueue.drainAndDispose(C=>{C.sendStatusDeferral.reject(b)},b)}async processSendQueue(){for(;;){const w=await this.privSendMessageQueue.dequeue();if(!w)return;try{await this.sendRawMessage(w),w.sendStatusDeferral.resolve()}catch(b){w.sendStatusDeferral.reject(b)}}}onEvent(g){this.privConnectionEvents.onEvent(g),h.Events.instance.onEvent(g)}getAgent(){const g=new a.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(g.proxyInfo=this.proxyInfo),g}static GetProxyAgent(g){const w={host:g.HostName,port:g.Port};return g.UserName?w.headers={"Proxy-Authentication":"Basic "+Buffer.from(`${g.UserName}:${g.Password===void 0?"":g.Password}`).toString("base64")}:w.headers={},w.headers.requestOCSP="true",new c.default(w)}createConnection(g,w){let b;if(w={...w,requestOCSP:!0,servername:w.host},this.proxyInfo){const x=Dm.GetProxyAgent(this.proxyInfo);b=new Promise((R,_)=>{x.callback(g,w,(I,k)=>{I?_(I):R(k)})})}else w.secureEndpoint?b=Promise.resolve(o.connect(w)):b=Promise.resolve(i.connect(w));return b}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}};return rr.WebsocketMessageAdapter=f,f.forceNpmWebSocket=!1,rr}var sx;function YL(){if(sx)return Da;sx=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.WebsocketConnection=void 0;const t=Ee(),e=OT();let r=class{constructor(i,o,a,c,u,d=!1,h){if(this.privIsDisposed=!1,!i)throw new t.ArgumentNullError("uri");if(!c)throw new t.ArgumentNullError("messageFormatter");this.privMessageFormatter=c;let f="",v=0;if(o){for(const g in o)if(g){f+=v===0&&i.indexOf("?")===-1?"?":"&";const w=encodeURIComponent(g);f+=w;let b=o[g];b&&(b=encodeURIComponent(b),f+=`=${b}`),v++}}if(a){for(const g in a)if(g){f+=v===0&&i.indexOf("?")===-1?"?":"&";const w=encodeURIComponent(a[g]);f+=`${g}=${w}`,v++}}this.privUri=i+f,this.privId=h||(0,t.createNoDashGuid)(),this.privConnectionMessageAdapter=new e.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,u,a,d)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(i){return this.privConnectionMessageAdapter.send(i)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}};return Da.WebsocketConnection=r,Da}var La={},ox;function XL(){if(ox)return La;ox=1,Object.defineProperty(La,"__esModule",{value:!0}),La.ReplayableAudioNode=void 0;let t=class{constructor(n,i){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=n,this.privBytesPerSecond=i}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const n=this.privReplayOffset-this.privBufferStartOffset;let i=Math.round(n*this.privBytesPerSecond*1e-7);i%2!==0&&i++;let o=0;for(;o<this.privBuffers.length&&i>=this.privBuffers[o].chunk.buffer.byteLength;)i-=this.privBuffers[o++].chunk.buffer.byteLength;if(o<this.privBuffers.length){const a=this.privBuffers[o].chunk.buffer.slice(i);return this.privReplayOffset+=a.byteLength/this.privBytesPerSecond*1e7,o===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:a,isEnd:!1,timeReceived:this.privBuffers[o].chunk.timeReceived})}}return this.privAudioNode.read().then(n=>(n&&n.buffer&&this.privBuffers&&(this.privBuffers.push(new e(n,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=n.buffer.byteLength),n))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(n){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=n;const i=n-this.privBufferStartOffset;let o=Math.round(i*this.privBytesPerSecond*1e-7),a=0;for(;a<this.privBuffers.length&&o>=this.privBuffers[a].chunk.buffer.byteLength;)o-=this.privBuffers[a++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(n-o/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(a)}findTimeAtOffset(n){if(n<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const i of this.privBuffers){const o=i.byteOffset/this.privBytesPerSecond*1e7,a=o+i.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(n>=o&&n<=a)return i.chunk.timeReceived}return 0}};La.ReplayableAudioNode=t;class e{constructor(n,i,o){this.chunk=n,this.serial=i,this.byteOffset=o}}return La}var za={},Zv={},cn={},jr={},ax;function NT(){if(ax)return jr;ax=1;var t=jr&&jr.__createBinding||(Object.create?(function(a,c,u,d){d===void 0&&(d=u),Object.defineProperty(a,d,{enumerable:!0,get:function(){return c[u]}})}):(function(a,c,u,d){d===void 0&&(d=u),a[d]=c[u]})),e=jr&&jr.__setModuleDefault||(Object.create?(function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}):function(a,c){a.default=c}),r=jr&&jr.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&t(c,a,u);return e(c,a),c};Object.defineProperty(jr,"__esModule",{value:!0}),jr.AudioFileWriter=void 0;const n=r(ns),i=De();let o=class{constructor(c){i.Contracts.throwIfNullOrUndefined(n.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=n.openSync(c,"w")}set format(c){i.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=c;let u=0;this.privAudioFormat.hasHeader&&(u=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=n.createWriteStream("",{fd:this.privFd,start:u,autoClose:!1}))}write(c){i.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(c.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),n.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),n.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}};return jr.AudioFileWriter=o,jr}var nr={},cx;function MT(){if(cx)return nr;cx=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.PullAudioInputStreamImpl=nr.PullAudioInputStream=nr.PushAudioInputStreamImpl=nr.PushAudioInputStream=nr.AudioInputStream=void 0;const t=we(),e=Ee(),r=ps(),n=ue(),i=fs();let o=class{constructor(){}static createPushStream(f){return a.create(f)}static createPullStream(f,v){return u.create(f,v)}};nr.AudioInputStream=o;class a extends o{static create(f){return new c(f)}}nr.PushAudioInputStream=a;class c extends a{constructor(f){super(),f===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=f,this.privEvents=new e.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(f){this.privStream.writeStreamChunk({buffer:f,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(f){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,f)),await this.turnOn();const v=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,f)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,f)),this.turnOff()),id:()=>f,read:()=>v.read()}}detach(f){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,f))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(f){this.privEvents.onEvent(f),e.Events.instance.onEvent(f)}toBuffer(f){const v=Buffer.alloc(f.byteLength),g=new Uint8Array(f);for(let w=0;w<v.length;++w)v[w]=g[w];return v}}nr.PushAudioInputStreamImpl=c;class u extends o{constructor(){super()}static create(f,v){return new d(f,v)}}nr.PullAudioInputStream=u;class d extends u{constructor(f,v){super(),v===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=v,this.privEvents=new e.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privCallback=f,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(f){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,f)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,f)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,f)),this.turnOff()),id:()=>f,read:()=>{let v=0,g;for(;v<this.privBufferSize;){const w=new ArrayBuffer(this.privBufferSize-v),b=this.privCallback.read(w);if(g===void 0?g=w:new Int8Array(g).set(new Int8Array(w),v),b===0)break;v+=b}return Promise.resolve({buffer:g.slice(0,v),isEnd:this.privIsClosed||v===0,timeReceived:Date.now()})}}}detach(f){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,f))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(f){this.privEvents.onEvent(f),e.Events.instance.onEvent(f)}}return nr.PullAudioInputStreamImpl=d,nr}var ir={},Ba={},eg={},lx;function DT(){return lx||(lx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,(function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",e[e.AmrWb16000Hz=37]="AmrWb16000Hz",e[e.G72216Khz64Kbps=38]="G72216Khz64Kbps"})(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(eg)),eg}var ux;function Iu(){if(ux)return Ba;ux=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.AudioOutputFormatImpl=void 0;const t=DT(),e=fs();class r extends e.AudioStreamFormatImpl{constructor(i,o,a,c,u,d,h,f,v){super(a,d,o,i),this.formatTag=i,this.avgBytesPerSec=c,this.blockAlign=u,this.priAudioFormatString=h,this.priRequestAudioFormatString=f,this.priHasHeader=v}static fromSpeechSynthesisOutputFormat(i){return i===void 0?r.getDefaultOutputFormat():r.fromSpeechSynthesisOutputFormatString(r.SpeechSynthesisOutputFormatToString[i])}static fromSpeechSynthesisOutputFormatString(i){switch(i){case"raw-8khz-8bit-mono-mulaw":return new r(e.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,i,i,!1);case"riff-16khz-16kbps-mono-siren":return new r(e.AudioFormatTag.Siren,1,16e3,2e3,40,0,i,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new r(e.AudioFormatTag.Siren,1,16e3,2e3,40,0,i,i,!1);case"audio-16khz-32kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,16e3,4096,2,16,i,i,!1);case"audio-16khz-128kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,16e3,16384,2,16,i,i,!1);case"audio-16khz-64kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,16e3,8192,2,16,i,i,!1);case"audio-24khz-48kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,24e3,6144,2,16,i,i,!1);case"audio-24khz-96kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,24e3,12288,2,16,i,i,!1);case"audio-24khz-160kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,24e3,20480,2,16,i,i,!1);case"raw-16khz-16bit-mono-truesilk":return new r(e.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,i,i,!1);case"riff-8khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,8e3,16e3,2,16,i,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,24e3,48e3,2,16,i,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new r(e.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,i,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,16e3,32e3,2,16,i,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,24e3,48e3,2,16,i,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,8e3,16e3,2,16,i,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new r(e.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,i,i,!1);case"ogg-24khz-16bit-mono-opus":return new r(e.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,i,i,!1);case"raw-48khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,48e3,96e3,2,16,i,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,48e3,96e3,2,16,i,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,48e3,12288,2,16,i,i,!1);case"audio-48khz-192kbitrate-mono-mp3":return new r(e.AudioFormatTag.MP3,1,48e3,24576,2,16,i,i,!1);case"ogg-48khz-16bit-mono-opus":return new r(e.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,i,i,!1);case"webm-16khz-16bit-mono-opus":return new r(e.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,i,i,!1);case"webm-24khz-16bit-mono-opus":return new r(e.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,i,i,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new r(e.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,i,i,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new r(e.AudioFormatTag.OPUS,1,16e3,4e3,2,16,i,i,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new r(e.AudioFormatTag.OPUS,1,24e3,6e3,2,16,i,i,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new r(e.AudioFormatTag.OPUS,1,24e3,3e3,2,16,i,i,!1);case"audio-24khz-16bit-mono-flac":return new r(e.AudioFormatTag.FLAC,1,24e3,24e3,2,16,i,i,!1);case"audio-48khz-16bit-mono-flac":return new r(e.AudioFormatTag.FLAC,1,48e3,3e4,2,16,i,i,!1);case"raw-24khz-16bit-mono-truesilk":return new r(e.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,i,i,!1);case"raw-8khz-8bit-mono-alaw":return new r(e.AudioFormatTag.ALaw,1,8e3,8e3,1,8,i,i,!1);case"riff-8khz-8bit-mono-alaw":return new r(e.AudioFormatTag.ALaw,1,8e3,8e3,1,8,i,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,22050,44100,2,16,i,i,!1);case"riff-22050hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,22050,44100,2,16,i,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,44100,88200,2,16,i,i,!1);case"riff-44100hz-16bit-mono-pcm":return new r(e.AudioFormatTag.PCM,1,44100,88200,2,16,i,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new r(e.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,i,i,!1);case"g722-16khz-64kbps":return new r(e.AudioFormatTag.G722,1,16e3,8e3,2,16,i,i,!1);default:return new r(e.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return r.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(i){if(this.priHasHeader){const o=new DataView(this.privHeader);o.setUint32(4,i+this.privHeader.byteLength-8,!0),o.setUint32(40,i,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(i){if(!this.hasHeader)return i;this.updateHeader(i.byteLength);const o=new Uint8Array(i.byteLength+this.header.byteLength);return o.set(new Uint8Array(this.header),0),o.set(new Uint8Array(i),this.header.byteLength),o.buffer}}return Ba.AudioOutputFormatImpl=r,r.SpeechSynthesisOutputFormatToString={[t.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[t.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[t.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[t.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[t.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[t.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[t.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[t.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[t.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[t.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[t.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[t.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[t.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[t.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"},Ba}var dx;function uo(){if(dx)return ir;dx=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.PushAudioOutputStreamImpl=ir.PushAudioOutputStream=ir.PullAudioOutputStreamImpl=ir.PullAudioOutputStream=ir.AudioOutputStream=void 0;const t=Ee(),e=De(),r=Iu();let n=class{constructor(){}static createPullStream(){return i.create()}};ir.AudioOutputStream=n;class i extends n{static create(){return new o}}ir.PullAudioOutputStream=i;class o extends i{constructor(){super(),this.privId=(0,t.createNoDashGuid)(),this.privStream=new t.Stream}set format(d){d==null&&(this.privFormat=r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=d}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(d){const h=new Int8Array(d);let f=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>d.byteLength)return h.set(this.privLastChunkView.slice(0,d.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(d.byteLength),Promise.resolve(d.byteLength);h.set(this.privLastChunkView),f=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;f<d.byteLength&&!this.privStream.isReadEnded;){const v=await this.privStream.read();if(v!==void 0&&!v.isEnd){let g;v.buffer.byteLength>d.byteLength-f?(g=v.buffer.slice(0,d.byteLength-f),this.privLastChunkView=new Int8Array(v.buffer.slice(d.byteLength-f))):g=v.buffer,h.set(new Int8Array(g),f),f+=g.byteLength}else this.privStream.readEnded()}return f}write(d){e.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}ir.PullAudioOutputStreamImpl=o;class a extends n{constructor(){super()}static create(d){return new c(d)}}ir.PushAudioOutputStream=a;class c extends a{constructor(d){super(),this.privId=(0,t.createNoDashGuid)(),this.privCallback=d}set format(d){}write(d){this.privCallback.write&&this.privCallback.write(d)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}return ir.PushAudioOutputStreamImpl=c,ir}var hx;function ZL(){if(hx)return cn;hx=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.AudioOutputConfigImpl=cn.AudioConfigImpl=cn.AudioConfig=void 0;const t=Qt(),e=De(),r=ue(),n=NT(),i=MT(),o=uo();let a=class LT{static fromDefaultMicrophoneInput(){const h=new t.PcmRecorder(!0);return new c(new t.MicAudioSource(h))}static fromMicrophoneInput(h){const f=new t.PcmRecorder(!0);return new c(new t.MicAudioSource(f,h))}static fromWavFileInput(h,f="unnamedBuffer.wav"){return new c(new t.FileAudioSource(h,f))}static fromStreamInput(h){if(h instanceof r.PullAudioInputStreamCallback)return new c(new i.PullAudioInputStreamImpl(h));if(h instanceof r.AudioInputStream)return new c(h);if(typeof MediaStream<"u"&&h instanceof MediaStream){const f=new t.PcmRecorder(!1);return new c(new t.MicAudioSource(f,null,null,h))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new u(new r.SpeakerAudioDestination)}static fromSpeakerOutput(h){if(h===void 0)return LT.fromDefaultSpeakerOutput();if(h instanceof r.SpeakerAudioDestination)return new u(h);throw new Error("Not Supported Type")}static fromAudioFileOutput(h){return new u(new n.AudioFileWriter(h))}static fromStreamOutput(h){if(h instanceof r.PushAudioOutputStreamCallback)return new u(new o.PushAudioOutputStreamImpl(h));if(h instanceof r.PushAudioOutputStream)return new u(h);if(h instanceof r.PullAudioOutputStream)return new u(h);throw new Error("Not Supported Type")}};cn.AudioConfig=a;class c extends a{constructor(h){super(),this.privSource=h}get format(){return this.privSource.format}close(h,f){this.privSource.turnOff().then(()=>{h&&h()},v=>{f&&f(v)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(h){return this.privSource.attach(h)}detach(h){return this.privSource.detach(h)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(h,f){if(e.Contracts.throwIfNull(f,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(h,f);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(h,f){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(h,f);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}cn.AudioConfigImpl=c;class u extends a{constructor(h){super(),this.privDestination=h}set format(h){this.privDestination.format=h}write(h){this.privDestination.write(h)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return cn.AudioOutputConfigImpl=u,cn}var tg={},px;function ez(){return px||(px=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,(function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"})(t.CancellationReason||(t.CancellationReason={}))})(tg)),tg}var Fa={},fx;function tz(){if(fx)return Fa;fx=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.PullAudioInputStreamCallback=void 0;let t=class{};return Fa.PullAudioInputStreamCallback=t,Fa}var qa={},vx;function rz(){if(vx)return qa;vx=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.PushAudioOutputStreamCallback=void 0;let t=class{};return qa.PushAudioOutputStreamCallback=t,qa}var Ua={},gx;function nz(){if(gx)return Ua;gx=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.KeywordRecognitionModel=void 0;const t=De();let e=class{constructor(){this.privDisposed=!1}static fromFile(n){throw t.Contracts.throwIfFileDoesNotExist(n,"fileName"),new Error("Not yet implemented.")}static fromStream(n){throw t.Contracts.throwIfNull(n,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}};return Ua.KeywordRecognitionModel=e,Ua}var Va={},mx;function iz(){if(mx)return Va;mx=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.SessionEventArgs=void 0;let t=class{constructor(r){this.privSessionId=r}get sessionId(){return this.privSessionId}};return Va.SessionEventArgs=t,Va}var Wa={},yx;function sz(){if(yx)return Wa;yx=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.RecognitionEventArgs=void 0;const t=ue();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return Wa.RecognitionEventArgs=e,Wa}var rg={},Sx;function oz(){return Sx||(Sx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,(function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"})(t.OutputFormat||(t.OutputFormat={}))})(rg)),rg}var Ha={},wx;function az(){if(wx)return Ha;wx=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.RecognitionResult=void 0;let t=class{constructor(r,n,i,o,a,c,u,d,h,f){this.privResultId=r,this.privReason=n,this.privText=i,this.privDuration=o,this.privOffset=a,this.privLanguage=c,this.privLanguageDetectionConfidence=u,this.privErrorDetails=d,this.privJson=h,this.privProperties=f}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}};return Ha.RecognitionResult=t,Ha}var Ka={},Cx;function cz(){if(Cx)return Ka;Cx=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.SpeechRecognitionResult=void 0;const t=ue();let e=class extends t.RecognitionResult{constructor(n,i,o,a,c,u,d,h,f,v,g){super(n,i,o,a,c,u,d,f,v,g),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Ka.SpeechRecognitionResult=e,Ka}var ln={},bx;function lz(){if(bx)return ln;bx=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.MeetingTranscriptionEventArgs=ln.ConversationTranscriptionEventArgs=ln.SpeechRecognitionEventArgs=void 0;const t=ue();let e=class extends t.RecognitionEventArgs{constructor(o,a,c){super(a,c),this.privResult=o}get result(){return this.privResult}};ln.SpeechRecognitionEventArgs=e;class r extends t.RecognitionEventArgs{constructor(o,a,c){super(a,c),this.privResult=o}get result(){return this.privResult}}ln.ConversationTranscriptionEventArgs=r;class n extends e{}return ln.MeetingTranscriptionEventArgs=n,ln}var Ga={},$a={},xx;function ku(){if(xx)return $a;xx=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.CancellationEventArgsBase=void 0;const t=ue();let e=class extends t.RecognitionEventArgs{constructor(n,i,o,a,c){super(a,c),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return $a.CancellationEventArgsBase=e,$a}var Px;function uz(){if(Px)return Ga;Px=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.SpeechRecognitionCanceledEventArgs=void 0;const t=ku();let e=class extends t.CancellationEventArgsBase{};return Ga.SpeechRecognitionCanceledEventArgs=e,Ga}var Ja={},_x;function dz(){if(_x)return Ja;_x=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.TranslationRecognitionEventArgs=void 0;const t=ue();let e=class extends t.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return Ja.TranslationRecognitionEventArgs=e,Ja}var Qa={},Rx;function hz(){if(Rx)return Qa;Rx=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.TranslationSynthesisEventArgs=void 0;const t=ue();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return Qa.TranslationSynthesisEventArgs=e,Qa}var Ya={},Ex;function BT(){if(Ex)return Ya;Ex=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.TranslationRecognitionResult=void 0;const t=ue();let e=class zT extends t.SpeechRecognitionResult{constructor(n,i,o,a,c,u,d,h,f,v,g){super(i,o,a,c,u,d,h,void 0,f,v,g),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new zT(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Ya.TranslationRecognitionResult=e,Ya}var Xa={},Tx;function pz(){if(Tx)return Xa;Tx=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.TranslationSynthesisResult=void 0;let t=class{constructor(r,n){this.privReason=r,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}};return Xa.TranslationSynthesisResult=t,Xa}var ng={},Ax;function fz(){return Ax||(Ax=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,(function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.TranslatingSpeech=5]="TranslatingSpeech",e[e.TranslatedSpeech=6]="TranslatedSpeech",e[e.SynthesizingAudio=7]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=8]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=9]="SynthesizingAudioStarted",e[e.VoicesListRetrieved=10]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=11]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=12]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=13]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=14]="TranslatedParticipantInstantMessage"})(t.ResultReason||(t.ResultReason={}))})(ng)),ng}var zi={},Ix;function vz(){if(Ix)return zi;Ix=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.SpeechConfigImpl=zi.SpeechConfig=void 0;const t=we(),e=De(),r=ue();let n=class{constructor(){}static fromSubscription(a,c){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(a,c){e.Contracts.throwIfNull(a,"endpoint");const u=typeof c=="string"&&c.trim().length>0,d=typeof c=="object"&&c!==null&&typeof c.getToken=="function",h=typeof c=="object"&&c!==null&&typeof c.key=="string";if(c!==void 0&&!u&&!d&&!h)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let f;return typeof c=="string"?(f=new i,f.setProperty(r.PropertyId.SpeechServiceConnection_Key,c)):typeof c=="object"&&typeof c.getToken=="function"?f=new i(c):typeof c=="object"&&typeof c.key=="string"?(f=new i,f.setProperty(r.PropertyId.SpeechServiceConnection_Key,c.key)):f=new i,f.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),f}static fromHost(a,c){e.Contracts.throwIfNull(a,"hostName");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),u.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),c!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u}static fromAuthorizationToken(a,c){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u.authorizationToken=a,u}close(){}};zi.SpeechConfig=n;class i extends n{constructor(a){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,c){e.Contracts.throwIfNull(c,"value"),this.privProperties.setProperty(a,c)}getProperty(a,c){return this.privProperties.getProperty(a,c)}setProxy(a,c,u,d){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],d)}setServiceProperty(a,c){const u=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));u[a]=c,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new i(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return zi.SpeechConfigImpl=i,zi}var Bi={},kx;function gz(){if(kx)return Bi;kx=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.SpeechTranslationConfigImpl=Bi.SpeechTranslationConfig=void 0;const t=we(),e=De(),r=ue();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,c){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}static fromAuthorizationToken(a,c){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(c,"region");const u=new i;return u.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),u.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}static fromHost(a,c){e.Contracts.throwIfNull(a,"hostName");const u=new i;return u.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),c!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,c),u}static fromEndpoint(a,c){e.Contracts.throwIfNull(a,"endpoint");const u=typeof c=="string"&&c.trim().length>0,d=typeof c=="object"&&c!==null&&typeof c.getToken=="function",h=typeof c=="object"&&c!==null&&typeof c.key=="string";if(c!==void 0&&!u&&!d&&!h)throw new Error("Invalid 'auth' parameter: expected a non-empty API key string, a TokenCredential, or a KeyCredential.");let f;return typeof c=="string"?(f=new i,f.setProperty(r.PropertyId.SpeechServiceConnection_Key,c)):typeof c=="object"&&typeof c.getToken=="function"?f=new i(c):typeof c=="object"&&typeof c.key=="string"?(f=new i,f.setProperty(r.PropertyId.SpeechServiceConnection_Key,c.key)):f=new i,f.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),f}};Bi.SpeechTranslationConfig=n;class i extends n{constructor(a){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const c=this.targetLanguages;c.includes(a)||(c.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,c,u,d){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],u),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],d)}getProperty(a,c){return this.privSpeechProperties.getProperty(a,c)}setProperty(a,c){this.privSpeechProperties.setProperty(a,c)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,c){const u=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));u[a]=c,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(u))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Bi.SpeechTranslationConfigImpl=i,Bi}var Za={},jx;function qT(){if(jx)return Za;jx=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.PropertyCollection=void 0;const t=ue();let e=class FT{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let o;typeof n=="string"?o=n:o=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(n,i){let o;typeof n=="string"?o=n:o=t.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o){this.privValues[a]=i;return}this.privKeys.push(o),this.privValues.push(i)}clone(){const n=new FT;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const o=this.getProperty(i);n.setProperty(i,o)}})}get keys(){return this.privKeys}};return Za.PropertyCollection=e,Za}var ig={},Ox;function Uy(){return Ox||(Ox=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,(function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.SpeechServiceConnection_Url=28]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=29]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=30]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=31]="Speech_SegmentationSilenceTimeoutMs",e[e.Speech_SegmentationMaximumTimeMs=32]="Speech_SegmentationMaximumTimeMs",e[e.Speech_SegmentationStrategy=33]="Speech_SegmentationStrategy",e[e.Speech_StartEventSensitivity=34]="Speech_StartEventSensitivity",e[e.SpeechServiceConnection_EnableAudioLogging=35]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=36]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=37]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceResponse_ProfanityOption=38]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=39]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=40]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=41]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=42]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=43]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=44]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=45]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=46]="SpeechServiceResponse_RequestSentenceBoundary",e[e.SpeechServiceResponse_DiarizeIntermediateResults=47]="SpeechServiceResponse_DiarizeIntermediateResults",e[e.Conversation_ApplicationId=48]="Conversation_ApplicationId",e[e.Conversation_DialogType=49]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=50]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=51]="Conversation_From_Id",e[e.Conversation_Conversation_Id=52]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=53]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=54]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=55]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=56]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=57]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=58]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=59]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=60]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=61]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=62]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=63]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=64]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=65]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=66]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=67]="PronunciationAssessment_Params",e[e.WebWorkerLoadType=68]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"})(t.PropertyId||(t.PropertyId={}))})(ig)),ig}var ec={},Nx;function mz(){if(Nx)return ec;Nx=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.Recognizer=void 0;const t=we(),e=Ee(),r=De(),n=ue();let i=class UT{constructor(a,c,u,d){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=c.clone(),this.privConnectionFactory=u,this.tokenCredential=d,this.implCommonRecognizerSetup()}close(a,c){r.Contracts.throwIfDisposed(this.privDisposed),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),a,c)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const d=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,c,u))));this.privReco=this.createServiceRecognizer(UT.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,d)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const c=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,c.resolve,c.reject);const u=await c.promise;return await this.implRecognizerStop(),u}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,c){const u=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return u&&u!==""?new t.CognitiveSubscriptionKeyAuthentication(u):c?new t.CognitiveTokenAuthentication(async()=>{try{return(await c.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(d){throw d}},async()=>{try{return(await c.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(d){throw d}}):new t.CognitiveTokenAuthentication(()=>{const d=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)},()=>{const d=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(d)})}};return ec.Recognizer=i,ec}var tc={},sg={},Mx;function Br(){return Mx||(Mx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechStartEventSensitivity=t.RecognitionMode=void 0,(function(e){e.Interactive="Interactive",e.Dictation="Dictation",e.Conversation="Conversation",e.None="None"})(t.RecognitionMode||(t.RecognitionMode={})),(function(e){e.Low="low",e.Medium="medium",e.High="high"})(t.SpeechStartEventSensitivity||(t.SpeechStartEventSensitivity={}))})(sg)),sg}var Dx;function yz(){if(Dx)return tc;Dx=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.SpeechRecognizer=void 0;const t=we(),e=Br(),r=Ee(),n=De(),i=ue();let o=class VT extends i.Recognizer{constructor(c,u){const d=c;n.Contracts.throwIfNull(d,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new t.SpeechConnectionFactory,c.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(c,u,d){const h=c;return u.properties.mergeTo(h.properties),new VT(c,d)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),c,u)}startContinuousRecognitionAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(t.ForceDictationPropertyName,void 0)===void 0?e.RecognitionMode.Conversation:e.RecognitionMode.Dictation),c,u)}stopContinuousRecognitionAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}startKeywordRecognitionAsync(c,u,d){n.Contracts.throwIfNull(c,"model"),d&&d("Not yet implemented.")}stopKeywordRecognitionAsync(c){c&&c()}close(c,u){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}async dispose(c){this.privDisposedRecognizer||(c&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,d,h){const f=d;return new t.SpeechServiceRecognizer(c,u,f,h,this)}};return tc.SpeechRecognizer=o,tc}var rc={},nc={},Fi={},Lx;function WT(){if(Lx)return Fi;Lx=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.ConnectionMessageImpl=Fi.ConnectionMessage=void 0;const t=dr(),e=Ee(),r=qT(),n=Uy();let i=class{};Fi.ConnectionMessage=i;class o{constructor(c){this.privConnectionMessage=c,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(u=>{this.privProperties.setProperty(u,this.privConnectionMessage.headers[u])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(c=>c.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return Fi.ConnectionMessageImpl=o,Fi}var zx;function HT(){if(zx)return nc;zx=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.Connection=void 0;const t=we(),e=Ee(),r=WT(),n=De(),i=ue();let o=class Lm{static fromRecognizer(c){const u=c.internalData,d=new Lm;return d.privInternalData=u,d.setupEvents(),d}static fromSynthesizer(c){const u=c.internalData,d=new Lm;return d.privInternalData=u,d.setupEvents(),d}openConnection(c,u){(0,e.marshalPromiseToCallbacks)(this.privInternalData.connect(),c,u)}closeConnection(c,u){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,e.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),c,u)}setMessageProperty(c,u,d){if(n.Contracts.throwIfNullOrWhitespace(u,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(c.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const h=this.privInternalData.speechContext.getContext();h[u]=d}}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(c.toLowerCase()!=="speech.config"&&c.toLowerCase()!=="synthesis.context")throw new Error("Only speech.config and synthesis.context message paths are currently supported for synthesizer");if(c.toLowerCase()==="speech.config"){if(u.toLowerCase()!=="context")throw new Error("Only context property is currently supported for speech.config message path for synthesizer");this.privInternalData.synthesizerConfig.setContextFromJson(d)}else this.privInternalData.synthesisContext.setSection(u,d)}}sendMessageAsync(c,u,d,h){(0,e.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(c,u),d,h)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(c=>{c.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(c.connectionId)):c.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(c.connectionId)):c.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(c.message))):c.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(c.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(c=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(c.jsonString,c.name))})}};return nc.Connection=o,nc}var Bx;function Sz(){if(Bx)return rc;Bx=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.TranslationRecognizer=void 0;const t=we(),e=Br(),r=Ee(),n=HT(),i=De(),o=ue();let a=class KT extends o.Recognizer{constructor(u,d,h){const f=u;i.Contracts.throwIfNull(f,"speechConfig"),super(d,f.properties,h||new t.TranslationConnectionFactory,u.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(u,d,h){const f=u;return d.properties.mergeTo(f.properties),d.properties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===t.AutoDetectSourceLanguagesOpenRangeOptionName&&f.properties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new KT(u,h)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,u)}recognizeOnceAsync(u,d){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),u,d)}startContinuousRecognitionAsync(u,d){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),u,d)}stopContinuousRecognitionAsync(u,d){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),u,d)}removeTargetLanguage(u){if(i.Contracts.throwIfNullOrUndefined(u,"language to be removed"),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const d=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),h=d.indexOf(u);h>-1&&(d.splice(h,1),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")),this.updateLanguages(d))}}addTargetLanguage(u){i.Contracts.throwIfNullOrUndefined(u,"language to be added");let d=[];this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(d=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),d.includes(u)||(d.push(u),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,d.join(",")))):(this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,u),d=[u]),this.updateLanguages(d)}close(u,d){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),u,d)}onConnection(){}async dispose(u){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,u&&(await this.implRecognizerStop(),await super.dispose(u)))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,d,h,f){const v=h;return new t.TranslationServiceRecognizer(u,d,v,f,this)}updateLanguages(u){const d=n.Connection.fromRecognizer(this);d&&(d.setMessageProperty("speech.context","translationcontext",{to:u}),d.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:u})))}};return rc.TranslationRecognizer=a,rc}var ic={},Fx;function wz(){if(Fx)return ic;Fx=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.Translations=void 0;const t=ue();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return ic.Translations=e,ic}var og={},qx;function Cz(){return qx||(qx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,(function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"})(t.NoMatchReason||(t.NoMatchReason={}))})(og)),og}var sc={},Ux;function bz(){if(Ux)return sc;Ux=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.NoMatchDetails=void 0;const t=we(),e=ue();let r=class GT{constructor(i){this.privReason=i}static fromResult(i){const o=t.SimpleSpeechPhrase.fromJSON(i.json,0);let a=e.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new GT(a)}get reason(){return this.privReason}};return sc.NoMatchDetails=r,sc}var oc={},Vx;function xz(){if(Vx)return oc;Vx=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.TranslationRecognitionCanceledEventArgs=void 0;let t=class{constructor(r,n,i,o,a){this.privCancelReason=n,this.privErrorDetails=i,this.privResult=a,this.privSessionId=r,this.privErrorCode=o}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return oc.TranslationRecognitionCanceledEventArgs=t,oc}var ac={},Wx;function $T(){if(Wx)return ac;Wx=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.CancellationDetailsBase=void 0;let t=class{constructor(r,n,i){this.privReason=r,this.privErrorDetails=n,this.privErrorCode=i}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}};return ac.CancellationDetailsBase=t,ac}var cc={},Hx;function Pz(){if(Hx)return cc;Hx=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.CancellationDetails=void 0;const t=we(),e=$T(),r=ue();let n=class JT extends e.CancellationDetailsBase{constructor(o,a,c){super(o,a,c)}static fromResult(o){let a=r.CancellationReason.Error,c=r.CancellationErrorCode.NoError;if(o instanceof r.RecognitionResult&&o.json){const u=t.SimpleSpeechPhrase.fromJSON(o.json,0);a=t.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus)}return o.properties&&(c=r.CancellationErrorCode[o.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new JT(a,o.errorDetails||t.EnumTranslation.implTranslateErrorDetails(c),c)}};return cc.CancellationDetails=n,cc}var ag={},Kx;function _z(){return Kx||(Kx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,(function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"})(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(ag)),ag}var lc={},Gx;function Rz(){if(Gx)return lc;Gx=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.ConnectionEventArgs=void 0;const t=ue();let e=class extends t.SessionEventArgs{};return lc.ConnectionEventArgs=e,lc}var uc={},$x;function Ez(){if($x)return uc;$x=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.ServiceEventArgs=void 0;const t=ue();let e=class extends t.SessionEventArgs{constructor(n,i,o){super(o),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return uc.ServiceEventArgs=e,uc}var dc={},Jx;function Tz(){if(Jx)return dc;Jx=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.PhraseListGrammar=void 0;const t=De();let e=class QT{constructor(n){this.privGrammerBuilder=n.dynamicGrammar}static fromRecognizer(n){const i=n.internalData;return new QT(i)}addPhrase(n){this.privGrammerBuilder.addPhrase(n)}addPhrases(n){this.privGrammerBuilder.addPhrase(n)}clear(){this.privGrammerBuilder.clearPhrases()}setWeight(n){t.Contracts.throwIfNumberOutOfRange(n,"weight",0,2),this.privGrammerBuilder.setWeight(n)}};return dc.PhraseListGrammar=e,dc}var qi={},Qx;function Vy(){if(Qx)return qi;Qx=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.DialogServiceConfigImpl=qi.DialogServiceConfig=void 0;const t=De(),e=ue();let r=class{constructor(){}set applicationId(o){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};qi.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(o){t.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechConfig.speechRecognitionLanguage=o}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(o){this.privSpeechConfig.outputFormat=o}setProperty(o,a){this.privSpeechConfig.setProperty(o,a)}getProperty(o,a){return this.privSpeechConfig.getProperty(o)}setProxy(o,a,c,u){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,o),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,c),u&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,u)}setServiceProperty(o,a,c){this.privSpeechConfig.setServiceProperty(o,a)}close(){}}return qi.DialogServiceConfigImpl=n,qi}var hc={},Yx;function Az(){if(Yx)return hc;Yx=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.BotFrameworkConfig=void 0;const t=De(),e=Vy(),r=ue();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,c){t.Contracts.throwIfNullOrWhitespace(o,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),c&&u.setProperty(r.PropertyId.Conversation_ApplicationId,c),u}static fromAuthorizationToken(o,a,c){t.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),c&&u.setProperty(r.PropertyId.Conversation_ApplicationId,c),u}static fromHost(o,a,c){t.Contracts.throwIfNullOrUndefined(o,"host");const u=o instanceof URL?o:new URL(`wss://${o}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(u,"resolvedHost");const d=new e.DialogServiceConfigImpl;return d.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),d.setProperty(r.PropertyId.SpeechServiceConnection_Host,u.toString()),a!==void 0&&d.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),d}static fromEndpoint(o,a){t.Contracts.throwIfNull(o,"endpoint");const c=new e.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,o.toString()),a!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}};return hc.BotFrameworkConfig=n,hc}var pc={},Xx;function Iz(){if(Xx)return pc;Xx=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.CustomCommandsConfig=void 0;const t=De(),e=Vy(),r=ue();let n=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,c){t.Contracts.throwIfNullOrWhitespace(o,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(c,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,o),u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}static fromAuthorizationToken(o,a,c){t.Contracts.throwIfNullOrWhitespace(o,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(c,"region");const u=new e.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),u.setProperty(r.PropertyId.Conversation_ApplicationId,o),u.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),u.setProperty(r.PropertyId.SpeechServiceConnection_Region,c),u}set applicationId(o){t.Contracts.throwIfNullOrWhitespace(o,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,o)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return pc.CustomCommandsConfig=n,pc}var fc={},vc={},gc={},mc={},Zx;function di(){if(Zx)return mc;Zx=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.QueryParameterNames=void 0;let t=class{};return mc.QueryParameterNames=t,t.BotId="botid",t.CustomSpeechDeploymentId="cid",t.CustomVoiceDeploymentId="deploymentId",t.EnableAudioLogging="storeAudio",t.EnableLanguageId="lidEnabled",t.EnableWordLevelTimestamps="wordLevelTimestamps",t.EndSilenceTimeoutMs="endSilenceTimeoutMs",t.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",t.SegmentationMaximumTimeMs="segmentationMaximumTimeMs",t.SegmentationStrategy="segmentationStrategy",t.Format="format",t.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",t.Language="language",t.Profanity="profanity",t.RequestBotStatusMessages="enableBotMessageStatus",t.StableIntermediateThreshold="stableIntermediateThreshold",t.StableTranslation="stableTranslation",t.TestHooks="testhooks",t.Postprocessing="postprocessing",t.CtsMeetingId="meetingId",t.CtsDeviceId="deviceId",t.CtsIsParticipant="isParticipant",t.EnableAvatar="enableTalkingAvatar",mc}var eP;function xn(){if(eP)return gc;eP=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.ConnectionFactoryBase=void 0;const t=we(),e=Ee(),r=ue(),n=di();let i=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,c,u){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,v)=>{this.setUrlParameter(v,f,a,c,u)});const h=JSON.parse(a.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(f=>{c[f]=h[f]})}setUrlParameter(a,c,u,d,h){const f=u.parameters.getProperty(a,void 0);f&&(!h||h.search(c)===-1)&&(d[c]=f.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){const c=new URL(a);c.protocol="https:",c.port="443",c.searchParams.append("GenerateRedirectResponse","true");const d=c.toString();e.Events.instance.onEvent(new e.ConnectionRedirectEvent("",d,void 0,"ConnectionFactoryBase: redirectUrl request"));const h=await fetch(d);if(h.status!==200)return a;const f=await h.text();e.Events.instance.onEvent(new e.ConnectionRedirectEvent("",f,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(f.trim()).toString()}catch{return a}}};return gc.ConnectionFactoryBase=i,gc}var tP;function kz(){if(tP)return vc;tP=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.DialogConnectionFactory=void 0;const t=Qt(),e=we(),r=ue(),n=xn(),i=we(),o=dr(),a=di();class c extends n.ConnectionFactoryBase{create(d,h,f){const v=d.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),g=d.parameters.getProperty(r.PropertyId.Conversation_DialogType),w=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),b=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),C=d.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),x={};x[o.HeaderNames.ConnectionId]=f,x[a.QueryParameterNames.Format]=d.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),x[a.QueryParameterNames.Language]=b,x[a.QueryParameterNames.RequestBotStatusMessages]=C,v&&(x[a.QueryParameterNames.BotId]=v,g===r.DialogServiceConfig.DialogTypes.CustomCommands&&(x[o.HeaderNames.CustomCommandsAppId]=v));const R=g===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",_=g===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":g===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",I={};h.token!=null&&h.token!==""&&(I[h.headerName]=h.token);let k=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!k){const B=n.ConnectionFactoryBase.getHostSuffix(w),O=d.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${w}.${c.BaseUrl}${B}`);k=`${O.endsWith("/")?O:O+"/"}${R}${c.ApiKey}/${_}`}this.setCommonUrlParams(d,x,k);const M=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new t.WebsocketConnection(k,x,I,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(d),M,f))}}return vc.DialogConnectionFactory=c,c.ApiKey="api",c.BaseUrl="convai.speech",vc}var rP;function jz(){if(rP)return fc;rP=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.DialogServiceConnector=void 0;const t=kz(),e=we(),r=Br(),n=Ee(),i=De(),o=ue(),a=Uy();let c=class extends o.Recognizer{constructor(d,h){const f=d;i.Contracts.throwIfNull(d,"dialogConfig"),super(h,f.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=f.properties.clone();const v=this.buildAgentConfig();this.privReco.agentConfig.set(v)}connect(d,h){(0,n.marshalPromiseToCallbacks)(this.privReco.connect(),d,h)}disconnect(d,h){(0,n.marshalPromiseToCallbacks)(this.privReco.disconnect(),d,h)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(d){i.Contracts.throwIfNullOrWhitespace(d,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,d)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(d){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,d)}listenOnceAsync(d,h){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const v=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const g=new n.Deferred;await this.privReco.recognize(r.RecognitionMode.Conversation,g.resolve,g.reject);const w=await g.promise;return await this.implRecognizerStop(),w})();v.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,n.marshalPromiseToCallbacks)(v.finally(()=>{this.isTurnComplete=!0}),d,h)}}sendActivityAsync(d,h,f){(0,n.marshalPromiseToCallbacks)(this.privReco.sendMessage(d),h,f)}close(d,h){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),d,h)}async dispose(d){this.privIsDisposed||d&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(d))}createRecognizerConfig(d){return new e.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,h,f,v){const g=f;return new e.DialogServiceAdapter(d,h,g,v,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return fc.DialogServiceConnector=c,fc}var yc={},nP;function Oz(){if(nP)return yc;nP=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.ActivityReceivedEventArgs=void 0;let t=class{constructor(r,n){this.privActivity=r,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}};return yc.ActivityReceivedEventArgs=t,yc}var Sc={},wc={},iP;function Nz(){if(iP)return wc;iP=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.TurnStatusResponsePayload=void 0;class t{constructor(r){this.privMessageStatusResponse=JSON.parse(r)}static fromJSON(r){return new t(r)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}return wc.TurnStatusResponsePayload=t,wc}var sP;function Mz(){if(sP)return Sc;sP=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.TurnStatusReceivedEventArgs=void 0;const t=Nz();let e=class{constructor(n){this.privTurnStatus=t.TurnStatusResponsePayload.fromJSON(n)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}};return Sc.TurnStatusReceivedEventArgs=e,Sc}var cg={},oP;function Dz(){return oP||(oP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,(function(e){e[e.UriQueryParameter=0]="UriQueryParameter"})(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(cg)),cg}var lg={},aP;function Lz(){return aP||(aP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,(function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"})(t.ProfanityOption||(t.ProfanityOption={}))})(lg)),lg}var Cc={},cP;function zz(){if(cP)return Cc;cP=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.BaseAudioPlayer=void 0;const t=Jr(),e=ue(),r=fs();let n=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=e.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,a,c){try{this.ensureInitializedContext();const u=this.formatAudioData(o),d=new Float32Array(this.samples.length+u.length);d.set(this.samples,0),d.set(u,this.samples.length),this.samples=d,a&&a()}catch(u){c&&c(u)}}stopAudio(o,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},c=>{a&&a(c)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,a){const c=new Float32Array(o.length);for(let u=0;u<o.length;u++)c[u]=o[u]/a;return c}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,a=this.audioContext.createBufferSource(),c=this.samples.length/o,u=this.audioContext.createBuffer(o,c,this.audioFormat.samplesPerSec);for(let d=0;d<o;d++){let h=d;const f=u.getChannelData(d);for(let v=0;v<this.samples.length;v++,h+=o)f[v]=this.samples[h]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=u,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=u.duration,this.samples=new Float32Array}async playAudio(o){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),c=this.audioContext.destination;await this.audioContext.decodeAudioData(o,u=>{a.buffer=u,a.connect(c),a.start(0)})}};return Cc.BaseAudioPlayer=n,Cc}var bc={},lP;function Bz(){if(lP)return bc;lP=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.ConnectionMessageEventArgs=void 0;let t=class{constructor(r){this.privConnectionMessage=r}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}};return bc.ConnectionMessageEventArgs=t,bc}var xc={},ug={},uP;function YT(){return uP||(uP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,(function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"})(t.LanguageIdMode||(t.LanguageIdMode={}))})(ug)),ug}var dP;function Fz(){if(dP)return xc;dP=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.AutoDetectSourceLanguageConfig=void 0;const t=we(),e=De(),r=ue(),n=YT();let i=class ch{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new ch;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const c=new ch;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),c}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const c=new ch,u=[];return a.forEach(d=>{if(u.push(d.language),d.endpointId!==void 0&&d.endpointId!==""){const h=d.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();c.properties.setProperty(h,d.endpointId)}}),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,u.join()),c}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return xc.AutoDetectSourceLanguageConfig=i,xc}var Pc={},hP;function qz(){if(hP)return Pc;hP=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.AutoDetectSourceLanguageResult=void 0;const t=De();let e=class zm{constructor(n,i){t.Contracts.throwIfNullOrUndefined(n,"language"),t.Contracts.throwIfNullOrUndefined(i,"languageDetectionConfidence"),this.privLanguage=n,this.privLanguageDetectionConfidence=i}static fromResult(n){return new zm(n.language,n.languageDetectionConfidence)}static fromConversationTranscriptionResult(n){return new zm(n.language,n.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}};return Pc.AutoDetectSourceLanguageResult=e,Pc}var _c={},pP;function Uz(){if(pP)return _c;pP=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.SourceLanguageConfig=void 0;const t=De();let e=class XT{constructor(n,i){t.Contracts.throwIfNullOrUndefined(n,"language"),this.privLanguage=n,this.privEndpointId=i}static fromLanguage(n,i){return new XT(n,i)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}};return _c.SourceLanguageConfig=e,_c}var dg={},Ui={},fP;function ZT(){if(fP)return Ui;fP=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.ConversationImpl=Ui.Conversation=void 0;const t=we(),e=Ee(),r=De(),n=ue();let i=class{constructor(){}static createConversationAsync(c,u,d,h){r.Contracts.throwIfNullOrUndefined(c,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(c.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!c.subscriptionKey&&!c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(c.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let f,v,g;return typeof u=="string"?(f=new o(c,u),(0,e.marshalPromiseToCallbacks)((async()=>{})(),d,h)):(f=new o(c),v=u,g=d,f.createConversationAsync((()=>{v&&v()}),w=>{g&&g(w)})),f}};Ui.Conversation=i;class o extends i{constructor(c,u){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=f=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,f)}catch{}},this.onDisconnected=f=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,f)}catch{}finally{this.close(!1)}},this.onCanceled=(f,v)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,v)}catch{}},this.onParticipantUpdateCommandReceived=(f,v)=>{try{const g=this.privParticipants.getParticipant(v.id);if(g!==void 0){switch(v.key){case t.ConversationTranslatorCommandTypes.changeNickname:g.displayName=v.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:g.isUsingTts=v.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:g.profanity=v.value;break;case t.ConversationTranslatorCommandTypes.setMute:g.isMuted=v.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:g.translateToLanguages=v.value;break}this.privParticipants.addOrUpdateParticipant(g),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(g)],v.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(f,v)=>{try{this.privParticipants.participants.forEach(g=>g.isMuted=g.isHost?!1:v.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),v.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(f,v)=>{try{const g=this.privParticipants.addOrUpdateParticipant(v.participant);g!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(g)],v.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(f,v)=>{try{const g=this.privParticipants.getParticipant(v.participant.id);g!==void 0&&(this.privParticipants.deleteParticipant(v.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(g)],v.sessionId)))}catch{}},this.onTranslationReceived=(f,v)=>{try{switch(v.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(v.payload,void 0,v.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(v.payload,void 0,v.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(v.payload,void 0,v.sessionId));break}}catch{}},this.onParticipantsListReceived=(f,v)=>{try{if(v.sessionToken!==void 0&&v.sessionToken!==null&&(this.privRoom.token=v.sessionToken),this.privParticipants.participants=[...v.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),v.sessionId)),this.me.isHost){const g=this.privConversationTranslator?.properties.getProperty(n.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(f,v)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,v)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||c.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),u)this.privConversationId=u;else{c.targetLanguages.length===0&&c.addTargetLanguage(this.privLanguage),c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||c.setProfanity(n.ProfanityOption.Masked);let v=c.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);v==null&&(v="Host"),r.Contracts.throwIfNullOrTooLong(v,"nickname",50),r.Contracts.throwIfNullOrTooShort(v,"nickname",2),c.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],v)}this.privConfig=c;const h=c;r.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const c=this.conversationId,u=this.participants.map(f=>({id:f.id,preferredLanguage:f.preferredLanguage,voice:f.voice})),d={};for(const f of t.ConversationConnectionConfig.transcriptionEventKeys){const v=this.properties.getProperty(f,"");v!==""&&(d[f]=v)}return{id:c,participants:u,conversationProperties:d}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),this.privToken=c}set conversationTranslator(c){this.privConversationTranslator=c}onToken(c){this.privConversationTranslator.onToken(c)}createConversationAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startConversationAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(c,u,d){r.Contracts.throwIfNullOrUndefined(c,"Participant"),(0,e.marshalPromiseToCallbacks)(this.addParticipantImplAsync(c),u,d)}joinConversationAsync(c,u,d,h,f){try{r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,c,(v=>{r.Contracts.throwIfNullOrUndefined(v,this.privErrors.permissionDeniedConnect),this.privRoom=v,this.privConfig.authorizationToken=v.cognitiveSpeechAuthToken,h&&h(v.cognitiveSpeechAuthToken)}),(v=>{this.handleError(v,f)}))}catch(v){this.handleError(v,f)}}deleteConversationAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),c,u)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.endConversationImplAsync(),c,u)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!0),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(h){this.handleError(h,d)}}removeParticipantAsync(c,u,d){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&c.hasOwnProperty("id"))(0,e.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(c),u,d);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let h="";typeof c=="string"?h=c:c.hasOwnProperty("id")?h=c.id:c.hasOwnProperty("userId")&&(h=c.userId),r.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(v=>v.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}}catch(h){this.handleError(h,d)}}unlockConversationAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!1),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(h){this.handleError(h,d)}}sendTextMessageAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),c.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}setTranslatedLanguagesAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}changeNicknameAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(c){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await c.enforceAudioGating(),this.privTranscriberRecognizer=c,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const c=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:c,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(c){if(this.privParticipants.addOrUpdateParticipant(c)!==void 0&&this.privTranscriberRecognizer){const d=this.conversationInfo;return d.participants=[c],this.privTranscriberRecognizer.pushConversationEvent(d,"join")}}removeParticipantImplAsync(c){this.privParticipants.deleteParticipant(c.id);const u=this.conversationInfo;return u.participants=[c],this.privTranscriberRecognizer.pushConversationEvent(u,"leave")}async close(c){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}c&&this.dispose()}handleCallback(c,u){if(c){try{c()}catch(d){u&&u(d)}c=void 0}}handleError(c,u){if(u)if(c instanceof Error){const d=c;u(d.name+": "+d.message)}else u(c)}toParticipants(c){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return c?u:u.filter(d=>d.isHost===!1)}toParticipant(c){return new n.Participant(c.id,c.avatar,c.displayName,c.isHost,c.isMuted,c.isUsingTts,c.preferredLanguage,c.voice)}getMuteAllCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMuteCommand(c,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getEjectCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getChangeNicknameCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:c,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMessageCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(c,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:c,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Ui.ConversationImpl=o,Ui}var Rc={},vP;function Vz(){if(vP)return Rc;vP=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.ConversationCommon=void 0;let t=class{constructor(r){this.privAudioConfig=r}handleCallback(r,n){if(r){try{r()}catch(i){n&&n(i)}r=void 0}}handleError(r,n){if(n)if(r instanceof Error){const i=r;n(i.name+": "+i.message)}else n(r)}};return Rc.ConversationCommon=t,Rc}var Ec={},gP;function Wz(){if(gP)return Ec;gP=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.ConversationExpirationEventArgs=void 0;const t=ue();let e=class extends t.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return Ec.ConversationExpirationEventArgs=e,Ec}var Tc={},mP;function Hz(){if(mP)return Tc;mP=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ConversationParticipantsChangedEventArgs=void 0;const t=ue();let e=class extends t.SessionEventArgs{constructor(n,i,o){super(o),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Tc.ConversationParticipantsChangedEventArgs=e,Tc}var Ac={},yP;function Kz(){if(yP)return Ac;yP=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.ConversationTranslationCanceledEventArgs=void 0;const t=ku();let e=class extends t.CancellationEventArgsBase{};return Ac.ConversationTranslationCanceledEventArgs=e,Ac}var Ic={},SP;function Gz(){if(SP)return Ic;SP=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.ConversationTranslationEventArgs=void 0;const t=ue();let e=class extends t.RecognitionEventArgs{constructor(n,i,o){super(i,o),this.privResult=n}get result(){return this.privResult}};return Ic.ConversationTranslationEventArgs=e,Ic}var kc={},wP;function $z(){if(wP)return kc;wP=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.ConversationTranslationResult=void 0;const t=BT();let e=class extends t.TranslationRecognitionResult{constructor(n,i,o,a,c,u,d,h,f,v,g){super(i,a,c,u,d,h,void 0,void 0,f,v,g),this.privId=n,this.privOrigLang=o}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return kc.ConversationTranslationResult=e,kc}var hg={},jc={},Oc={},CP;function eA(){if(CP)return Oc;CP=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.StringUtils=void 0;let t=class{static formatString(r,n){if(!r)return"";if(!n)return r;let i="",o="";const a=d=>{i+=d},c=d=>{o+=d};let u=a;for(let d=0;d<r.length;d++){const h=r[d],f=d+1<r.length?r[d+1]:"";switch(h){case"{":f==="{"?(u("{"),d++):u=c;break;case"}":f==="}"?(u("}"),d++):(n.hasOwnProperty(o)&&(i+=n[o]),u=a,o="");break;default:u(h);break}}return i}};return Oc.StringUtils=t,Oc}var bP;function Jz(){if(bP)return jc;bP=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.ConversationTranslatorConnectionFactory=void 0;const t=Qt(),e=eA(),r=De(),n=ue(),i=dr(),o=di(),a=xn(),c=we();let u=class tA extends a.ConnectionFactoryBase{constructor(h){super(),r.Contracts.throwIfNullOrUndefined(h,"convGetter"),this.privConvGetter=h}create(h,f,v){const g=h.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",w=this.privConvGetter().room,b=w.cognitiveSpeechRegion||h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),C={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(b),path:tA.CTS_VIRT_MIC_PATH,region:encodeURIComponent(b)};C[o.QueryParameterNames.Language]=encodeURIComponent(h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),C[o.QueryParameterNames.CtsMeetingId]=encodeURIComponent(w.roomId),C[o.QueryParameterNames.CtsDeviceId]=encodeURIComponent(w.participantId),C[o.QueryParameterNames.CtsIsParticipant]=w.isHost?"":"&"+o.QueryParameterNames.CtsIsParticipant;let x="";const R={},_={};if(g){x=h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),x||(x="wss://"+h.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),x=e.StringUtils.formatString(x,C);const k=new URL(x);k.searchParams.forEach((B,O)=>{R[O]=B}),new c.TranscriberConnectionFactory().setQueryParams(R,h,x),R[o.QueryParameterNames.CtsMeetingId]=C[o.QueryParameterNames.CtsMeetingId],R[o.QueryParameterNames.CtsDeviceId]=C[o.QueryParameterNames.CtsDeviceId],w.isHost||(R[o.QueryParameterNames.CtsIsParticipant]=""),o.QueryParameterNames.Format in R||(R[o.QueryParameterNames.Format]="simple"),k.searchParams.forEach((B,O)=>{k.searchParams.set(O,R[O]),delete R[O]}),x=k.toString()}else{const k=new c.TranslationConnectionFactory;x=k.getEndpointUrl(h,!0),x=e.StringUtils.formatString(x,C),k.setQueryParams(R,h,x)}_[i.HeaderNames.ConnectionId]=v,_[t.RestConfigBase.configParams.token]=w.token,f.token&&(_[f.headerName]=f.token);const I=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new t.WebsocketConnection(x,R,_,new c.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(h),I,v))}};return jc.ConversationTranslatorConnectionFactory=u,u.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",jc}var xP;function Qz(){return xP||(xP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=we(),r=Jz(),n=Ee(),i=De(),o=ue(),a=ZT(),c=Wy();var u;(function(f){f[f.Inactive=0]="Inactive",f[f.Connecting=1]="Connecting",f[f.Connected=2]="Connected"})(u=t.SpeechState||(t.SpeechState={}));class d extends o.TranslationRecognizer{constructor(v,g,w,b){super(v,g,new r.ConversationTranslatorConnectionFactory(b)),this.privSpeechState=u.Inactive,w&&(this.privTranslator=w,this.sessionStarted=()=>{this.privSpeechState=u.Connected},this.sessionStopped=()=>{this.privSpeechState=u.Inactive},this.recognizing=(C,x)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,x)},this.recognized=async(C,x)=>{x.result?.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(x.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,x)},this.canceled=async()=>{if(this.privSpeechState!==u.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=u.Inactive}})}get state(){return this.privSpeechState}set state(v){this.privSpeechState=v}set authentication(v){this.privReco.authentication=v}onConnection(){this.privSpeechState=u.Connected}async onCancelSpeech(){this.privSpeechState=u.Inactive,await this.cancelSpeech()}fireCancelEvent(v){try{if(this.privTranslator.canceled){const g=new c.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,v,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,g)}}catch{}}async cancelSpeech(){try{this.stopContinuousRecognitionAsync(),await this.privReco?.disconnect(),this.privSpeechState=u.Inactive}catch{}}}class h extends c.ConversationCommon{constructor(v){super(v),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===u.Connected||this.privCTRecognizer.state===u.Connecting||this.privConversation.isMutedByHost)}onToken(v){this.privCTRecognizer.authentication=v}setServiceProperty(v,g){const w=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));w[v]=g,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(w))}joinConversationAsync(v,g,w,b,C){try{if(typeof v=="string"){i.Contracts.throwIfNullOrUndefined(v,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(g,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),C);let x=w;(x==null||x==="")&&(x=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(x),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],x),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],g);const R=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const I of R){const k=this.privProperties.getProperty(I);if(k){const M=typeof I=="string"?I:o.PropertyId[I];this.privSpeechTranslationConfig.setProperty(M,k)}}const _=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const I of Object.keys(_))this.privSpeechTranslationConfig.setServiceProperty(I,_[I],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(v,g,x,(I=>{I||this.handleError(new Error(this.privErrors.permissionDeniedConnect),C),this.privSpeechTranslationConfig.authorizationToken=I,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(b,C)}),(k=>{this.handleError(k,C)}))}),(I=>{this.handleError(I,C)}))}else typeof v=="object"?(i.Contracts.throwIfNullOrUndefined(v,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(g,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,g),this.privConversation=v,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=v.config,this.handleCallback(w,b)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),b)}catch(x){this.handleError(x,typeof w=="string"?C:b)}}leaveConversationAsync(v,g){(0,n.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),v,g)}sendTextMessageAsync(v,g,w){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(v,this.privErrors.invalidArgs.replace("{arg}",v)),this.privConversation.sendTextMessageAsync(v,g,w)}catch(b){this.handleError(b,w)}}startTranscribingAsync(v,g){(0,n.marshalPromiseToCallbacks)((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),g),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(w){throw this.privIsSpeaking=!1,await this.cancelSpeech(),w}})(),v,g)}stopTranscribingAsync(v,g){(0,n.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((w,b)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(w,b)})}catch{await this.cancelSpeech()}})(),v,g)}isDisposed(){return this.privIsDisposed}dispose(v,g,w){(0,n.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),g,w)}async cancelSpeech(){try{this.privIsSpeaking=!1,await this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const v=()=>this.privConversation;this.privCTRecognizer=new d(this.privSpeechTranslationConfig,this.privAudioConfig,this,v)}catch(v){throw await this.cancelSpeech(),v}}startContinuousRecognition(){return new Promise((v,g)=>{this.privCTRecognizer.startContinuousRecognitionAsync(v,g)})}}t.ConversationTranslator=h})(hg)),hg}var Nc={},PP;function Yz(){if(PP)return Nc;PP=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.ConversationTranscriber=void 0;const t=we(),e=Br(),r=Ee(),n=De(),i=ue();let o=class rA extends i.Recognizer{constructor(c,u){const d=c;n.Contracts.throwIfNull(d,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(d.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new t.ConversationTranscriberConnectionFactory,c.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(c,u,d){const h=c;return u.properties.mergeTo(h.properties),new rA(c,d)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){n.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,c)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),c,u)}stopTranscribingAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}close(c,u){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}async dispose(c){this.privDisposedRecognizer||(c&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,d,h){const f=d;return h.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(c,u,f,h,this)}};return Nc.ConversationTranscriber=o,Nc}var Vi={},_P;function Xz(){if(_P)return Vi;_P=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Participant=Vi.User=void 0;const t=ue();class e{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Vi.User=e;class r{constructor(i,o,a,c,u,d,h,f){this.privId=i,this.privAvatar=o,this.privDisplayName=a,this.privIsHost=c,this.privIsMuted=u,this.privIsUsingTts=d,this.privPreferredLanguage=h,this.privVoice=f,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,o,a){return new r(i,"",i,!1,!1,!1,o,a)}}return Vi.Participant=r,Vi}var pg={},RP;function Zz(){return RP||(RP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,(function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"})(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(pg)),pg}var Wi={},EP;function e7(){if(EP)return Wi;EP=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.MeetingImpl=Wi.Meeting=void 0;const t=we(),e=Ee(),r=De(),n=ue();let i=class{constructor(){}static createMeetingAsync(c,u,d,h){if(r.Contracts.throwIfNullOrUndefined(c,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(c.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(u,"meetingId"),u.length===0)throw new Error("meetingId cannot be empty");!c.subscriptionKey&&!c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(c.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const f=new o(c,u);return(0,e.marshalPromiseToCallbacks)((async()=>{})(),d,h),f}};Wi.Meeting=i;class o extends i{constructor(c,u){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=f=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,f)}catch{}},this.onDisconnected=f=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,f)}catch{}finally{this.close(!1)}},this.onCanceled=(f,v)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,v)}catch{}},this.onParticipantUpdateCommandReceived=(f,v)=>{try{const g=this.privParticipants.getParticipant(v.id);if(g!==void 0){switch(v.key){case t.ConversationTranslatorCommandTypes.changeNickname:g.displayName=v.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:g.isUsingTts=v.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:g.profanity=v.value;break;case t.ConversationTranslatorCommandTypes.setMute:g.isMuted=v.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:g.translateToLanguages=v.value;break}this.privParticipants.addOrUpdateParticipant(g),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(g)],v.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(f,v)=>{try{this.privParticipants.participants.forEach(g=>g.isMuted=g.isHost?!1:v.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),v.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(f,v)=>{try{const g=this.privParticipants.addOrUpdateParticipant(v.participant);g!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(g)],v.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(f,v)=>{try{const g=this.privParticipants.getParticipant(v.participant.id);g!==void 0&&(this.privParticipants.deleteParticipant(v.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(g)],v.sessionId)))}catch{}},this.onTranslationReceived=(f,v)=>{try{switch(v.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(v.payload,void 0,v.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(v.payload,void 0,v.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(v.payload,void 0,v.sessionId));break}}catch{}},this.onParticipantsListReceived=(f,v)=>{try{if(v.sessionToken!==void 0&&v.sessionToken!==null&&(this.privRoom.token=v.sessionToken),this.privParticipants.participants=[...v.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),v.sessionId)),this.me.isHost){const g=this.privConversationTranslator?.properties.getProperty(n.PropertyId.ConversationTranslator_Name);g!==void 0&&g.length>0&&g!==this.me.displayName&&this.changeNicknameAsync(g)}}catch{}},this.onConversationExpiration=(f,v)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,v)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new t.ConversationManager,c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||c.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=c.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=u,this.privConfig=c;const h=c;r.Contracts.throwIfNull(h,"speechConfig"),this.privProperties=h.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const c=this.meetingId,u=this.participants.map(f=>({id:f.id,preferredLanguage:f.preferredLanguage,voice:f.voice})),d={};for(const f of t.ConversationConnectionConfig.transcriptionEventKeys){const v=this.properties.getProperty(f,"");v!==""&&(d[f]=v)}return{id:c,participants:u,meetingProperties:d}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"authorizationToken"),this.privToken=c}createMeetingAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),this.privManager.createOrJoin(this.privProperties,void 0,(d=>{d||this.handleError(new Error(this.privErrors.permissionDeniedConnect),u),this.privRoom=d,this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}startMeetingAsync(c,u){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),u),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}addParticipantAsync(c,u,d){r.Contracts.throwIfNullOrUndefined(c,"Participant"),(0,e.marshalPromiseToCallbacks)(this.addParticipantImplAsync(c),u,d)}joinMeetingAsync(c,u,d,h,f){try{r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,c,(v=>{r.Contracts.throwIfNullOrUndefined(v,this.privErrors.permissionDeniedConnect),this.privRoom=v,this.privConfig.authorizationToken=v.cognitiveSpeechAuthToken,h&&h(v.cognitiveSpeechAuthToken)}),(v=>{this.handleError(v,f)}))}catch(v){this.handleError(v,f)}}deleteMeetingAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),c,u)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(c,u){(0,e.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),c,u)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}muteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!0),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(h){this.handleError(h,d)}}removeParticipantAsync(c,u,d){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&c.hasOwnProperty("id"))(0,e.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(c),u,d);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),d);let h="";typeof c=="string"?h=c:c.hasOwnProperty("id")?h=c.id:c.hasOwnProperty("userId")&&(h=c.userId),r.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(v=>v.id===h)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(h),(()=>{this.handleCallback(u,d)}),(v=>{this.handleError(v,d)}))}}catch(h){this.handleError(h,d)}}unlockMeetingAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteAllParticipantsAsync(c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(c,u)}),(d=>{this.handleError(d,u)}))}catch(d){this.handleError(d,u)}}unmuteParticipantAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),!this.me.isHost&&this.me.id!==c&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),d),this.privParticipants.getParticipantIndex(c)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(c,!1),(()=>{this.handleCallback(u,d)}),(f=>{this.handleError(f,d)}))}catch(h){this.handleError(h,d)}}sendTextMessageAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),c.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}setTranslatedLanguagesAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}changeNicknameAsync(c,u,d){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),d),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(c),(()=>{this.handleCallback(u,d)}),(h=>{this.handleError(h,d)}))}catch(h){this.handleError(h,d)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(c){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await c.enforceAudioGating(),this.privTranscriberRecognizer=c,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const c=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:c,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(c){if(this.privParticipants.addOrUpdateParticipant(c)!==void 0&&this.privTranscriberRecognizer){const d=this.meetingInfo;return d.participants=[c],this.privTranscriberRecognizer.pushMeetingEvent(d,"join")}}removeParticipantImplAsync(c){this.privParticipants.deleteParticipant(c.id);const u=this.meetingInfo;return u.participants=[c],this.privTranscriberRecognizer.pushMeetingEvent(u,"leave")}async close(c){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}c&&this.dispose()}handleCallback(c,u){if(c){try{c()}catch(d){u&&u(d)}c=void 0}}handleError(c,u){if(u)if(c instanceof Error){const d=c;u(d.name+": "+d.message)}else u(c)}toParticipants(c){const u=this.privParticipants.participants.map(d=>this.toParticipant(d));return c?u:u.filter(d=>d.isHost===!1)}toParticipant(c){return new n.Participant(c.id,c.avatar,c.displayName,c.isHost,c.isMuted,c.isUsingTts,c.preferredLanguage,c.voice)}getMuteAllCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMuteCommand(c,u){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:u})}getLockCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getEjectCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(c,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:c,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getChangeNicknameCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(c,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:c,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getMessageCommand(c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(c,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:c,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return Wi.MeetingImpl=o,Wi}var Mc={},TP;function t7(){if(TP)return Mc;TP=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.MeetingTranscriptionCanceledEventArgs=void 0;const t=ku();class e extends t.CancellationEventArgsBase{}return Mc.MeetingTranscriptionCanceledEventArgs=e,Mc}var Dc={},AP;function r7(){if(AP)return Dc;AP=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.MeetingTranscriber=void 0;const t=we(),e=Ee(),r=De(),n=ue(),i=Wy();let o=class{constructor(c){this.privAudioConfig=c,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,c)}joinMeetingAsync(c,u,d){const h=c;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(c.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,e.marshalPromiseToCallbacks)(h.connectTranscriberRecognizer(this.privRecognizer),u,d)}startTranscribingAsync(c,u){this.privRecognizer.startContinuousRecognitionAsync(c,u)}stopTranscribingAsync(c,u){this.privRecognizer.stopContinuousRecognitionAsync(c,u)}leaveMeetingAsync(c,u){this.privRecognizer.disconnectCallbacks(),(0,e.marshalPromiseToCallbacks)((async()=>{})(),c,u)}close(c,u){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}async dispose(c){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),c&&(this.privDisposedRecognizer=!0))}};return Dc.MeetingTranscriber=o,Dc}var Lc={},IP;function n7(){if(IP)return Lc;IP=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.ConversationTranscriptionResult=void 0;const t=ue();let e=class extends t.RecognitionResult{constructor(n,i,o,a,c,u,d,h,f,v,g){super(n,i,o,a,c,u,d,f,v,g),this.privSpeakerId=h}get speakerId(){return this.privSpeakerId}};return Lc.ConversationTranscriptionResult=e,Lc}var kP;function Wy(){return kP||(kP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionResult=t.MeetingTranscriber=t.MeetingTranscriptionCanceledEventArgs=t.MeetingImpl=t.Meeting=t.ParticipantChangedReason=t.User=t.Participant=t.ConversationTranscriber=t.ConversationTranslator=t.ConversationTranslationResult=t.ConversationTranslationEventArgs=t.ConversationTranslationCanceledEventArgs=t.ConversationParticipantsChangedEventArgs=t.ConversationExpirationEventArgs=t.ConversationCommon=t.ConversationImpl=t.Conversation=void 0;var e=ZT();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var r=Vz();Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=Wz();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=Hz();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var o=Kz();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationCanceledEventArgs}});var a=Gz();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var c=$z();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return c.ConversationTranslationResult}});var u=Qz();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var d=Yz();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return d.ConversationTranscriber}});var h=Xz();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return h.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return h.User}});var f=Zz();Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return f.ParticipantChangedReason}});var v=e7();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return v.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return v.MeetingImpl}});var g=t7();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return g.MeetingTranscriptionCanceledEventArgs}});var w=r7();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return w.MeetingTranscriber}});var b=n7();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return b.ConversationTranscriptionResult}})})(dg)),dg}var Hi={},jP;function Hy(){if(jP)return Hi;jP=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.SynthesisRequest=Hi.Synthesizer=void 0;const t=we(),e=Ee(),r=De(),n=ue();let i=class nA{constructor(c){const u=c;r.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue,this.tokenCredential=c.tokenCredential}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(c){const u={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let d=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),h=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),f=nA.XMLEncode(c);return this.autoDetectSourceLanguage?d="en-US":h=h||u[d],h&&(f=`<voice name='${h}'>${f}</voice>`),f=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${d}'>${f}</speak>`,f}async dispose(c){this.privDisposed||(c&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const c=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(c.text,c.isSSML,c.requestId,c.cb,c.err,c.dataStream)}}createSynthesizerConfig(c){return new t.SynthesizerConfig(c,this.privProperties)}implCommonSynthesizeSetup(){let c=typeof window<"u"?"Browser":"Node",u="unknown",d="unknown";typeof navigator<"u"&&(c=c+"/"+navigator.platform,u=navigator.userAgent,d=navigator.appVersion);const h=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(c,u,d)))),f=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),v=f&&f!==""?new t.CognitiveSubscriptionKeyAuthentication(f):this.tokenCredential?new t.CognitiveTokenAuthentication(async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(g){throw g}},async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(g){throw g}}):new t.CognitiveTokenAuthentication(()=>{const g=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(g)},()=>{const g=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(g)});this.privAdapter=this.createSynthesisAdapter(v,this.privConnectionFactory,h),this.privRestAdapter=this.createRestSynthesisAdapter(v,h)}static XMLEncode(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Hi.Synthesizer=i;class o{constructor(c,u,d,h,f,v){this.requestId=c,this.text=u,this.isSSML=d,this.cb=h,this.err=f,this.dataStream=v}}return Hi.SynthesisRequest=o,Hi}var zc={},OP;function i7(){if(OP)return zc;OP=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.SpeechSynthesizer=void 0;const t=we(),e=Ee(),r=NT(),n=Iu(),i=uo(),o=De(),a=ue(),c=Hy();let u=class iA extends a.Synthesizer{constructor(h,f){super(h),f!==null&&(f===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=f),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(h,f,v){const g=h;return f.properties.mergeTo(g.properties),new iA(h,v)}speakTextAsync(h,f,v,g){this.speakImpl(h,!1,f,v,g)}speakSsmlAsync(h,f,v,g){this.speakImpl(h,!0,f,v,g)}async getVoicesAsync(h=""){return this.getVoices(h)}close(h,f){o.Contracts.throwIfDisposed(this.privDisposed),(0,e.marshalPromiseToCallbacks)(this.dispose(!0),h,f)}get internalData(){return this.privAdapter}createSynthesisAdapter(h,f,v){return new t.SpeechSynthesisAdapter(h,f,v,this,this.audioConfig)}createRestSynthesisAdapter(h,f){return new t.SynthesisRestAdapter(f,h)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(h,f,v,g,w){try{o.Contracts.throwIfDisposed(this.privDisposed);const b=(0,e.createNoDashGuid)();let C;w instanceof a.PushAudioOutputStreamCallback?C=new i.PushAudioOutputStreamImpl(w):w instanceof a.PullAudioOutputStream?C=w:w!==void 0?C=new r.AudioFileWriter(w):C=void 0,this.synthesisRequestQueue.enqueue(new c.SynthesisRequest(b,h,f,x=>{if(this.privSynthesizing=!1,v)try{v(x)}catch(R){g&&g(R)}v=void 0,this.adapterSpeak().catch(()=>{})},x=>{g&&g(x)},C)),this.adapterSpeak().catch(()=>{})}catch(b){if(g)if(b instanceof Error){const C=b;g(C.name+": "+C.message)}else g(b);this.dispose(!0).catch(()=>{})}}async getVoices(h){const f=(0,e.createNoDashGuid)(),v=await this.privRestAdapter.getVoicesList(f);if(v.ok&&Array.isArray(v.json)){let g=v.json;return h&&h.length>0&&(g=g.filter(w=>!!w.Locale&&w.Locale.toLowerCase()===h.toLowerCase())),new a.SynthesisVoicesResult(f,g,void 0)}else return new a.SynthesisVoicesResult(f,void 0,`Error: ${v.status}: ${v.statusText}`)}};return zc.SpeechSynthesizer=u,zc}var Bc={},NP;function s7(){if(NP)return Bc;NP=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.SynthesisResult=void 0;let t=class{constructor(r,n,i,o){this.privResultId=r,this.privReason=n,this.privErrorDetails=i,this.privProperties=o}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}};return Bc.SynthesisResult=t,Bc}var Fc={},MP;function o7(){if(MP)return Fc;MP=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.SpeechSynthesisResult=void 0;const t=ue();let e=class extends t.SynthesisResult{constructor(n,i,o,a,c,u){super(n,i,a,c),this.privAudioData=o,this.privAudioDuration=u}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Fc.SpeechSynthesisResult=e,Fc}var qc={},DP;function a7(){if(DP)return qc;DP=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.SpeechSynthesisEventArgs=void 0;let t=class{constructor(r){this.privResult=r}get result(){return this.privResult}};return qc.SpeechSynthesisEventArgs=t,qc}var Uc={},LP;function c7(){if(LP)return Uc;LP=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.SpeechSynthesisWordBoundaryEventArgs=void 0;let t=class{constructor(r,n,i,o,a,c){this.privAudioOffset=r,this.privDuration=n,this.privText=i,this.privWordLength=o,this.privTextOffset=a,this.privBoundaryType=c}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}};return Uc.SpeechSynthesisWordBoundaryEventArgs=t,Uc}var Vc={},zP;function l7(){if(zP)return Vc;zP=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.SpeechSynthesisBookmarkEventArgs=void 0;let t=class{constructor(r,n){this.privAudioOffset=r,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}};return Vc.SpeechSynthesisBookmarkEventArgs=t,Vc}var Wc={},BP;function u7(){if(BP)return Wc;BP=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.SpeechSynthesisVisemeEventArgs=void 0;let t=class{constructor(r,n,i){this.privAudioOffset=r,this.privVisemeId=n,this.privAnimation=i}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}};return Wc.SpeechSynthesisVisemeEventArgs=t,Wc}var fg={},FP;function d7(){return FP||(FP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,(function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"})(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(fg)),fg}var Hc={},qP;function h7(){if(qP)return Hc;qP=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.SynthesisVoicesResult=void 0;const t=ue();let e=class extends t.SynthesisResult{constructor(n,i,o){if(Array.isArray(i)){super(n,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new t.VoiceInfo(a))}else super(n,t.ResultReason.Canceled,o||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return Hc.SynthesisVoicesResult=e,Hc}var vg={},UP;function p7(){return UP||(UP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var r;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(r=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const n={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female},i={Neural:r.OnlineNeural,NeuralHD:r.OnlineNeuralHD};class o{constructor(c){if(this.privStyleList=[],c){if(this.privName=c.Name,this.privLocale=c.Locale,this.privShortName=c.ShortName,this.privLocaleName=c.LocaleName,this.privDisplayName=c.DisplayName,this.privLocalName=c.LocalName,this.privVoiceType=i[c.VoiceType]||r.Unknown,this.privGender=n[c.Gender]||e.Unknown,c.StyleList&&Array.isArray(c.StyleList))for(const u of c.StyleList)this.privStyleList.push(u);this.privSampleRateHertz=c.SampleRateHertz,this.privStatus=c.Status,c.ExtendedPropertyMap&&(this.privExtendedPropertyMap=c.ExtendedPropertyMap),this.privWordsPerMinute=c.WordsPerMinute,Array.isArray(c.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...c.SecondaryLocaleList]),Array.isArray(c.RolePlayList)&&(this.privRolePlayList=[...c.RolePlayList]),c.VoiceTag&&(this.privVoiceTag=c.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}t.VoiceInfo=o})(vg)),vg}var Kc={},VP;function f7(){if(VP)return Kc;VP=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.SpeakerAudioDestination=void 0;const t=Ee(),e=uo(),r=fs(),n=1800,i={[r.AudioFormatTag.PCM]:"audio/wav",[r.AudioFormatTag.MuLaw]:"audio/x-wav",[r.AudioFormatTag.MP3]:"audio/mpeg",[r.AudioFormatTag.OGG_OPUS]:"audio/ogg",[r.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[r.AudioFormatTag.ALaw]:"audio/x-wav",[r.AudioFormatTag.FLAC]:"audio/flac",[r.AudioFormatTag.AMR_WB]:"audio/amr-wb",[r.AudioFormatTag.G722]:"audio/G722"};let o=class{constructor(c){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=c||(0,t.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(c,u,d){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(c),this.updateSourceBuffer().then(()=>{u&&u()},h=>{d&&d(h)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(c),this.privBytesReceived+=c.byteLength)}close(c,u){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{c&&c()},d=>{u&&u(d)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===r.AudioFormatTag.PCM||this.privFormat.formatTag===r.AudioFormatTag.MuLaw||this.privFormat.formatTag===r.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let d=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(d).then(()=>{d=this.privFormat.addHeader(d);const h=new Blob([d],{type:i[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(h),this.notifyPlayback().then(()=>{c&&c()},f=>{u&&u(f)})},h=>{u&&u(h)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(c){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=c;const u=i[this.privFormat.formatTag];u===void 0?console.warn(`Unknown mimeType for format ${r.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(u)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=n,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(u),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})):(console.warn(`Format ${r.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(c){this.privAudio&&(this.privAudio.volume=c)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(c,u){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{c&&c()},d=>{u&&u(d)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const c=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(c)}catch{this.privAudioBuffer.unshift(c),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}};return Kc.SpeakerAudioDestination=o,Kc}var Gc={},WP;function v7(){if(WP)return Gc;WP=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.ConversationTranscriptionCanceledEventArgs=void 0;const t=ku();let e=class extends t.CancellationEventArgsBase{};return Gc.ConversationTranscriptionCanceledEventArgs=e,Gc}var $c={},HP;function g7(){if(HP)return $c;HP=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.MeetingTranscriptionCanceledEventArgs=void 0;const t=ku();let e=class extends t.CancellationEventArgsBase{};return $c.MeetingTranscriptionCanceledEventArgs=e,$c}var gg={},KP;function m7(){return KP||(KP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,(function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"})(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(gg)),gg}var mg={},GP;function y7(){return GP||(GP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,(function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"})(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})(mg)),mg}var Jc={},$P;function S7(){if($P)return Jc;$P=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.PronunciationAssessmentConfig=void 0;const t=De(),e=ue();let r=class sA{constructor(i,o=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,c=!1){t.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[o]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(c))}static fromJSON(i){t.Contracts.throwIfNullOrUndefined(i,"json");const o=new sA("");return o.privProperties=new e.PropertyCollection,o.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,i),o}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const o=i.internalData;o.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),o.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){t.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){t.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const o=i?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,o)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),o=JSON.parse(i),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(o.referenceText=a);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);c&&(o.gradingSystem=c);const u=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);u&&(o.granularity=u),this.privPhonemeAlphabet&&(o.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(o.nbestPhonemeCount=this.privNBestPhonemeCount),o.enableProsodyAssessment=this.privEnableProsodyAssessment,o.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(o.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(o))}};return Jc.PronunciationAssessmentConfig=r,Jc}var Qc={},JP;function w7(){if(JP)return Qc;JP=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.PronunciationAssessmentResult=void 0;const t=De(),e=ue();let r=class oA{constructor(i){const o=JSON.parse(i);t.Contracts.throwIfNullOrUndefined(o.NBest[0],"NBest"),this.privPronJson=o.NBest[0]}static fromResult(i){t.Contracts.throwIfNullOrUndefined(i,"result");const o=i.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(o,"json"),new oA(o)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}};return Qc.PronunciationAssessmentResult=r,Qc}var Yc={},QP;function C7(){if(QP)return Yc;QP=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.AvatarConfig=void 0;const t=De(),e=ue();let r=class{constructor(i,o,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,t.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=o,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(i){this.privUseBuiltInVoice=i}get photoAvatarBaseModel(){return this.privPhotoAvatarBaseModel}set photoAvatarBaseModel(i){this.privPhotoAvatarBaseModel=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return Yc.AvatarConfig=r,Yc}var yg={},YP;function b7(){return YP||(YP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,(function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"})(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(yg)),yg}var Xc={},Zc={},XP;function aA(){if(XP)return Zc;XP=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.SpeechSynthesisConnectionFactory=void 0;const t=Qt(),e=ue(),r=xn(),n=we(),i=dr(),o=di();let a=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(u,d,h){let f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const v=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),g=r.ConnectionFactoryBase.getHostSuffix(v),w=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),b=w===void 0?"tts":"voice",C=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+v+"."+b+".speech"+g),x={},R={};if(d.token!==void 0&&d.token!==""&&(R[d.headerName]=d.token),R[i.HeaderNames.ConnectionId]=h,w!==void 0&&w!==""&&(!f||f.search(o.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(x[o.QueryParameterNames.CustomVoiceDeploymentId]=w),u.avatarEnabled&&(!f||f.search(o.QueryParameterNames.EnableAvatar)===-1)&&(x[o.QueryParameterNames.EnableAvatar]="true"),f){const I=new URL(f),k=I.pathname;(k===""||k==="/")&&(I.pathname=this.synthesisUri,f=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(I.toString()))}f||(f=C+this.synthesisUri),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,f);const _=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(f,x,R,new n.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(u.parameters),_,h)}};return Zc.SpeechSynthesisConnectionFactory=a,Zc}var ZP;function x7(){if(ZP)return Xc;ZP=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.AvatarSynthesizer=void 0;const t=aA(),e=we(),r=Ee(),n=Iu(),i=ue(),o=De(),a=Hy();let c=class extends i.Synthesizer{constructor(d,h){super(d),o.Contracts.throwIfNullOrUndefined(h,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=h,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(d){o.Contracts.throwIfNullOrUndefined(d,"peerConnection"),this.privIceServers=d.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const h=new r.Deferred;d.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+d.iceGatheringState,r.EventType.Debug)),d.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),h.resolve())},d.onicecandidate=b=>{b.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+b.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),h.resolve())},setTimeout(()=>{d.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),h.resolve())},2e3);const f=await d.createOffer();await d.setLocalDescription(f),await h.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(d.localDescription));const v=await this.speak("",!1);if(v.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(v.resultId,v.reason,v.errorDetails,v.properties);const g=atob(v.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),w=new RTCSessionDescription(JSON.parse(g));return await d.setRemoteDescription(w),new i.SynthesisResult(v.resultId,v.reason,void 0,v.properties)}async speakTextAsync(d){const h=await this.speak(d,!1);return new i.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async speakSsmlAsync(d){const h=await this.speak(d,!0);return new i.SynthesisResult(h.resultId,h.reason,h.errorDetails,h.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(d,h,f){return new e.AvatarSynthesisAdapter(d,h,f,this,this.privAvatarConfig)}createRestSynthesisAdapter(d,h){}createSynthesizerConfig(d){const h=super.createSynthesizerConfig(d);return h.avatarEnabled=!0,h}async speak(d,h){const f=(0,r.createNoDashGuid)(),v=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(f,d,h,g=>{v.resolve(g),this.privSynthesizing=!1,this.adapterSpeak()},g=>{v.reject(g),this.privSynthesizing=!1})),this.adapterSpeak(),v.promise}};return Xc.AvatarSynthesizer=c,Xc}var Ki={},e_;function P7(){if(e_)return Ki;e_=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.AvatarVideoFormat=Ki.Coordinate=void 0;class t{constructor(n,i){this.x=n,this.y=i}}Ki.Coordinate=t;let e=class{constructor(n="H264",i=2e6,o=1920,a=1080){this.codec=n,this.bitrate=i,this.width=o,this.height=a}setCropRange(n,i){this.cropRange={bottomRight:i,topLeft:n}}};return Ki.AvatarVideoFormat=e,Ki}var el={},t_;function _7(){if(t_)return el;t_=1,Object.defineProperty(el,"__esModule",{value:!0}),el.AvatarWebRTCConnectionResult=void 0;const t=ue();let e=class extends t.SynthesisResult{constructor(n,i,o,a,c){super(i,o,a,c),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return el.AvatarWebRTCConnectionResult=e,el}var tl={},r_;function R7(){if(r_)return tl;r_=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.Diagnostics=void 0;const t=Qt(),e=Ee();let r=class{static SetLoggingLevel(i){this.privListener=new t.ConsoleLoggingListener(i),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return tl.Diagnostics=r,r.privListener=void 0,tl}var n_;function ue(){return n_||(n_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=t.BotFrameworkConfig=t.DialogServiceConfig=t.PhraseListGrammar=t.Connection=t.ServiceEventArgs=t.ConnectionEventArgs=t.CancellationErrorCode=t.CancellationDetails=t.CancellationDetailsBase=t.TranslationRecognitionCanceledEventArgs=t.NoMatchDetails=t.NoMatchReason=t.Translations=t.TranslationRecognizer=t.SpeechRecognizer=t.Recognizer=t.PropertyId=t.PropertyCollection=t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=t.SpeechConfigImpl=t.SpeechConfig=t.ResultReason=t.TranslationSynthesisResult=t.TranslationRecognitionResult=t.TranslationSynthesisEventArgs=t.TranslationRecognitionEventArgs=t.SpeechRecognitionCanceledEventArgs=t.MeetingTranscriptionEventArgs=t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=t.SpeechRecognitionResult=t.RecognitionResult=t.OutputFormat=t.RecognitionEventArgs=t.SessionEventArgs=t.KeywordRecognitionModel=t.PushAudioOutputStreamCallback=t.PullAudioInputStreamCallback=t.CancellationReason=t.PushAudioOutputStream=t.PullAudioOutputStream=t.AudioOutputStream=t.PushAudioInputStream=t.PullAudioInputStream=t.AudioInputStream=t.AudioFormatTag=t.AudioStreamFormat=t.AudioConfig=void 0,t.AvatarSynthesizer=t.AvatarEventArgs=t.AvatarConfig=t.LanguageIdMode=t.PronunciationAssessmentResult=t.PronunciationAssessmentConfig=t.PronunciationAssessmentGranularity=t.PronunciationAssessmentGradingSystem=t.MeetingTranscriptionCanceledEventArgs=t.ConversationTranscriptionCanceledEventArgs=t.SpeakerAudioDestination=t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=t.SynthesisVoicesResult=t.SpeechSynthesisBoundaryType=t.SpeechSynthesisVisemeEventArgs=t.SpeechSynthesisBookmarkEventArgs=t.SpeechSynthesisWordBoundaryEventArgs=t.SpeechSynthesisEventArgs=t.SpeechSynthesisResult=t.SynthesisResult=t.SpeechSynthesizer=t.SpeechSynthesisOutputFormat=t.Synthesizer=t.User=t.ParticipantChangedReason=t.Participant=t.MeetingTranscriber=t.Meeting=t.ConversationTranscriptionResult=t.ConversationTranscriber=t.ConversationTranslator=t.ConversationTranslationResult=t.ConversationTranslationEventArgs=t.ConversationTranslationCanceledEventArgs=t.ConversationParticipantsChangedEventArgs=t.ConversationExpirationEventArgs=t.Conversation=t.SourceLanguageConfig=t.AutoDetectSourceLanguageResult=t.AutoDetectSourceLanguageConfig=t.ConnectionMessage=t.ConnectionMessageEventArgs=t.BaseAudioPlayer=t.ProfanityOption=t.ServicePropertyChannel=t.TurnStatusReceivedEventArgs=t.ActivityReceivedEventArgs=t.DialogServiceConnector=void 0,t.LogLevel=t.Diagnostics=t.AvatarWebRTCConnectionResult=t.Coordinate=t.AvatarVideoFormat=void 0;var e=ZL();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var r=fs();Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=MT();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=uo();Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var o=ez();Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return o.CancellationReason}});var a=tz();Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var c=rz();Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return c.PushAudioOutputStreamCallback}});var u=nz();Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var d=iz();Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return d.SessionEventArgs}});var h=sz();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return h.RecognitionEventArgs}});var f=oz();Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return f.OutputFormat}});var v=az();Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return v.RecognitionResult}});var g=cz();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return g.SpeechRecognitionResult}});var w=lz();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return w.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return w.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return w.MeetingTranscriptionEventArgs}});var b=uz();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return b.SpeechRecognitionCanceledEventArgs}});var C=dz();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return C.TranslationRecognitionEventArgs}});var x=hz();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return x.TranslationSynthesisEventArgs}});var R=BT();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return R.TranslationRecognitionResult}});var _=pz();Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return _.TranslationSynthesisResult}});var I=fz();Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return I.ResultReason}});var k=vz();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return k.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return k.SpeechConfigImpl}});var M=gz();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return M.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return M.SpeechTranslationConfigImpl}});var B=qT();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return B.PropertyCollection}});var O=Uy();Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return O.PropertyId}});var D=mz();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return D.Recognizer}});var U=yz();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return U.SpeechRecognizer}});var L=Sz();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return L.TranslationRecognizer}});var F=wz();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return F.Translations}});var H=Cz();Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return H.NoMatchReason}});var $=bz();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return $.NoMatchDetails}});var ee=xz();Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return ee.TranslationRecognitionCanceledEventArgs}});var X=$T();Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return X.CancellationDetailsBase}});var Y=Pz();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return Y.CancellationDetails}});var V=_z();Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return V.CancellationErrorCode}});var J=Rz();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return J.ConnectionEventArgs}});var j=Ez();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return j.ServiceEventArgs}});var T=HT();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return T.Connection}});var W=Tz();Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return W.PhraseListGrammar}});var Z=Vy();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return Z.DialogServiceConfig}});var se=Az();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return se.BotFrameworkConfig}});var le=Iz();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return le.CustomCommandsConfig}});var ce=jz();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return ce.DialogServiceConnector}});var oe=Oz();Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return oe.ActivityReceivedEventArgs}});var de=Mz();Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return de.TurnStatusReceivedEventArgs}});var ye=Dz();Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return ye.ServicePropertyChannel}});var Ie=Lz();Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return Ie.ProfanityOption}});var je=zz();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return je.BaseAudioPlayer}});var Ve=Bz();Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Ve.ConnectionMessageEventArgs}});var Ye=WT();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return Ye.ConnectionMessage}});var Oe=Fz();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return Oe.AutoDetectSourceLanguageConfig}});var gt=qz();Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return gt.AutoDetectSourceLanguageResult}});var It=Uz();Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return It.SourceLanguageConfig}});var Fe=Wy();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return Fe.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Fe.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Fe.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Fe.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Fe.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return Fe.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return Fe.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return Fe.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Fe.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return Fe.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return Fe.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return Fe.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return Fe.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return Fe.User}});var Ut=Hy();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return Ut.Synthesizer}});var Yt=DT();Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Yt.SpeechSynthesisOutputFormat}});var Ct=i7();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return Ct.SpeechSynthesizer}});var Fr=s7();Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return Fr.SynthesisResult}});var hi=o7();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return hi.SpeechSynthesisResult}});var vs=a7();Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return vs.SpeechSynthesisEventArgs}});var pi=c7();Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return pi.SpeechSynthesisWordBoundaryEventArgs}});var gs=l7();Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return gs.SpeechSynthesisBookmarkEventArgs}});var fi=u7();Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return fi.SpeechSynthesisVisemeEventArgs}});var vi=d7();Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return vi.SpeechSynthesisBoundaryType}});var Pn=h7();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Pn.SynthesisVoicesResult}});var Qr=p7();Object.defineProperty(t,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Qr.SynthesisVoiceGender}}),Object.defineProperty(t,"SynthesisVoiceType",{enumerable:!0,get:function(){return Qr.SynthesisVoiceType}}),Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return Qr.VoiceInfo}});var qr=f7();Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return qr.SpeakerAudioDestination}});var xr=v7();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return xr.ConversationTranscriptionCanceledEventArgs}});var po=g7();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return po.MeetingTranscriptionCanceledEventArgs}});var ms=m7();Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return ms.PronunciationAssessmentGradingSystem}});var ju=y7();Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return ju.PronunciationAssessmentGranularity}});var up=S7();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return up.PronunciationAssessmentConfig}});var fo=w7();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return fo.PronunciationAssessmentResult}});var vo=YT();Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return vo.LanguageIdMode}});var go=C7();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return go.AvatarConfig}});var mo=b7();Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return mo.AvatarEventArgs}});var yo=x7();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return yo.AvatarSynthesizer}});var Yr=P7();Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return Yr.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return Yr.Coordinate}});var _n=_7();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return _n.AvatarWebRTCConnectionResult}});var Ou=R7();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return Ou.Diagnostics}});var Nu=jT();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return Nu.LogLevel}})})(Zv)),Zv}var i_;function E7(){if(i_)return za;i_=1,Object.defineProperty(za,"__esModule",{value:!0}),za.ProxyInfo=void 0;const t=ue();let e=class cA{constructor(n,i,o,a){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=o,this.privProxyPassword=a}static fromParameters(n){return new cA(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return za.ProxyInfo=e,za}var rl={},Sg,s_;function T7(){if(s_)return Sg;s_=1;const t=new Set(["json","buffer","string"]);return Sg=e=>(...r)=>{const n=new Set;let i,o,a,c="";return r.forEach(u=>{if(typeof u=="string")if(u.toUpperCase()===u)if(i){const d=`Can't set method to ${u}, already set to ${i}.`;throw new Error(d)}else i=u;else if(u.startsWith("http:")||u.startsWith("https:"))c=u;else if(t.has(u))o=u;else throw new Error(`Unknown encoding, ${u}`);else if(typeof u=="number")n.add(u);else if(typeof u=="object")if(Array.isArray(u)||u instanceof Set)u.forEach(d=>n.add(d));else{if(a)throw new Error("Cannot set headers twice.");a=u}else throw new Error(`Unknown type: ${typeof u}`)}),i||(i="GET"),n.size===0&&n.add(200),e(n,i,o,a,c)},Sg}var wg,o_;function A7(){if(o_)return wg;o_=1;const t=T7();class e extends Error{constructor(i,...o){super(...o),Error.captureStackTrace&&Error.captureStackTrace(this,e),this.name="StatusError",this.message=i.statusMessage,this.statusCode=i.status,this.res=i,this.json=i.json.bind(i),this.text=i.text.bind(i),this.arrayBuffer=i.arrayBuffer.bind(i);let a;Object.defineProperty(this,"responseBody",{get:()=>(a||(a=this.arrayBuffer()),a)}),this.headers={};for(const[u,d]of i.headers.entries())this.headers[u.toLowerCase()]=d}}return wg=t((n,i,o,a,c)=>async(u,d,h={})=>{u=c+(u||"");let f=new URL(u);if(a||(a={}),f.username&&(a.Authorization="Basic "+btoa(f.username+":"+f.password),f=new URL(f.protocol+"//"+f.host+f.pathname+f.search)),f.protocol!=="https:"&&f.protocol!=="http:")throw new Error(`Unknown protocol, ${f.protocol}`);if(d&&!(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="string"))if(typeof d=="object")d=JSON.stringify(d),a["Content-Type"]="application/json";else throw new Error("Unknown body type.");h=new Headers({...a||{},...h});const v=await fetch(f,{method:i,headers:h,body:d});if(v.statusCode=v.status,!n.has(v.status))throw new e(v);return o==="json"?v.json():o==="buffer"?v.arrayBuffer():o==="string"?v.text():v}),wg}var a_;function I7(){return a_||(a_=1,(function(t){var e=rl&&rl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const r=e(A7()),n=Ee();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=t.RestRequestType||(t.RestRequestType={}));let o=class{constructor(c){if(!c)throw new n.ArgumentNullError("configParams");this.privHeaders=c.headers,this.privIgnoreCache=c.ignoreCache}static extractHeaderValue(c,u){let d="";try{const h=u.trim().split(/[\r\n]+/),f={};h.forEach(v=>{const g=v.split(": "),w=g.shift().toLowerCase(),b=g.join(": ");f[w]=b}),d=f[c.toLowerCase()]}catch{}return d}set options(c){this.privHeaders=c.headers,this.privIgnoreCache=c.ignoreCache}setHeaders(c,u){this.privHeaders[c]=u}request(c,u,d={},h=null){const f=new n.Deferred,v=c===i.File?"POST":c,g=(b,C={})=>{const x=b;return{data:JSON.stringify(C),headers:JSON.stringify(b.headers),json:C,ok:b.statusCode>=200&&b.statusCode<300,status:b.statusCode,statusText:C.error?C.error.message:x.statusText?x.statusText:x.statusMessage}},w=b=>{const C=(0,r.default)(u,v,this.privHeaders,200,201,202,204,400,401,402,403,404),x=this.queryParams(d)===""?"":`?${this.queryParams(d)}`;C(x,b).then(async R=>{if(c===i.Delete||R.statusCode===204)f.resolve(g(R));else try{const _=await R.json();f.resolve(g(R,_))}catch{f.resolve(g(R))}}).catch(R=>{f.reject(R)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),c===i.Post&&h&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),w(h),f.promise}queryParams(c={}){return Object.keys(c).map(u=>encodeURIComponent(u)+"="+encodeURIComponent(c[u])).join("&")}};t.RestMessageAdapter=o})(rl)),rl}var nl={},c_;function lA(){if(c_)return nl;c_=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.RestConfigBase=void 0;let t=class lh{static get requestOptions(){return lh.privDefaultRequestOptions}static get configParams(){return lh.privDefaultParams}static get restErrors(){return lh.privRestErrors}};return nl.RestConfigBase=t,t.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},t.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},t.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},nl}var l_;function Qt(){return l_||(l_=1,(function(t){var e=Li&&Li.__createBinding||(Object.create?(function(n,i,o,a){a===void 0&&(a=o),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[o]}})}):(function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]})),r=Li&&Li.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(KL(),t),r(GL(),t),r($L(),t),r(JL(),t),r(QL(),t),r(YL(),t),r(OT(),t),r(XL(),t),r(E7(),t),r(I7(),t),r(lA(),t)})(Li)),Li}var il={},u_;function ip(){if(u_)return il;u_=1,Object.defineProperty(il,"__esModule",{value:!0}),il.SpeechConnectionMessage=void 0;const t=Ee(),e=dr();class r extends t.ConnectionMessage{constructor(i,o,a,c,u,d,h,f){if(!o)throw new t.ArgumentNullError("path");if(!a)throw new t.ArgumentNullError("requestId");const v={};if(v[e.HeaderNames.Path]=o,v[e.HeaderNames.RequestId]=a,v[e.HeaderNames.RequestTimestamp]=new Date().toISOString(),c&&(v[e.HeaderNames.ContentType]=c),d&&(v[e.HeaderNames.RequestStreamId]=d),h)for(const g in h)g&&(v[g]=h[g]);f?super(i,u,v,f):super(i,u,v),this.privPath=o,this.privRequestId=a,this.privContentType=c,this.privStreamId=d,this.privAdditionalHeaders=h}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(i){let o=null,a=null,c=null,u=null;const d={};if(i.headers)for(const h in i.headers)h&&(h.toLowerCase()===e.HeaderNames.Path.toLowerCase()?o=i.headers[h]:h.toLowerCase()===e.HeaderNames.RequestId.toLowerCase()?a=i.headers[h]:h.toLowerCase()===e.HeaderNames.ContentType.toLowerCase()?c=i.headers[h]:h.toLowerCase()===e.HeaderNames.RequestStreamId.toLowerCase()?u=i.headers[h]:d[h]=i.headers[h]);return new r(i.messageType,o,a,c,i.body,u,d,i.id)}}return il.SpeechConnectionMessage=r,il}var Cg={},d_;function k7(){return d_||(d_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentationMode=void 0,(function(e){e.Normal="Normal",e.Disabled="Disabled",e.Custom="Custom",e.Semantic="Semantic"})(t.SegmentationMode||(t.SegmentationMode={}))})(Cg)),Cg}var bg={},h_;function j7(){return h_||(h_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NextAction=void 0,(function(e){e.None="None",e.Synthesize="Synthesize"})(t.NextAction||(t.NextAction={}))})(bg)),bg}var xg={},p_;function O7(){return p_||(p_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,(function(e){e.None="None",e.Always="Always"})(t.Mode||(t.Mode={}))})(xg)),xg}var Pg={},f_;function N7(){return f_||(f_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdDetectionPriority=t.LanguageIdDetectionMode=void 0,(function(e){e.DetectAtAudioStart="DetectAtAudioStart",e.DetectContinuous="DetectContinuous",e.DetectSegments="DetectSegments"})(t.LanguageIdDetectionMode||(t.LanguageIdDetectionMode={})),(function(e){e.Auto="Auto",e.PrioritizeLatency="PrioritizeLatency",e.PrioritizeAccuracy="PrioritizeAccuracy"})(t.LanguageIdDetectionPriority||(t.LanguageIdDetectionPriority={}))})(Pg)),Pg}var _g={},v_;function M7(){return v_||(v_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NextAction=void 0,(function(e){e.Recognize="Recognize",e.None="None"})(t.NextAction||(t.NextAction={}))})(_g)),_g}var Rg={},g_;function D7(){return g_||(g_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OnUnknownAction=void 0,(function(e){e.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",e.None="None"})(t.OnUnknownAction||(t.OnUnknownAction={}))})(Rg)),Rg}var Eg={},m_;function L7(){return m_||(m_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultType=void 0,(function(e){e.Auto="Auto",e.StableFragment="StableFragment",e.Hypothesis="Hypothesis",e.None="None"})(t.ResultType||(t.ResultType={}))})(Eg)),Eg}var Tg={},y_;function z7(){return y_||(y_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseResultOutputType=void 0,(function(e){e.Always="Always",e.None="None"})(t.PhraseResultOutputType||(t.PhraseResultOutputType={}))})(Tg)),Tg}var Ag={},S_;function B7(){return S_||(S_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NextAction=void 0,(function(e){e.None="None",e.Translate="Translate"})(t.NextAction||(t.NextAction={}))})(Ag)),Ag}var w_;function F7(){if(w_)return ja;w_=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.ServiceRecognizerBase=void 0;const t=Qt(),e=Ee(),r=ue(),n=we(),i=ip(),o=k7(),a=Br(),c=j7(),u=O7(),d=N7(),h=M7(),f=D7(),v=L7(),g=z7(),w=B7();let b=class Yl{constructor(x,R,_,I,k){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!x)throw new e.ArgumentNullError("authentication");if(!R)throw new e.ArgumentNullError("connectionFactory");if(!_)throw new e.ArgumentNullError("audioSource");if(!I)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=I.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=x,this.privConnectionFactory=R,this.privAudioSource=_,this.privRecognizerConfig=I,this.privIsDisposed=!1,this.privRecognizer=k,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(B=>{if(B.name==="ConnectionClosedEvent"){const O=B;(O.statusCode===1003||O.statusCode===1007||O.statusCode===1002||O.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,O.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${O.reason} websocket error code: ${O.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,e.createNoDashGuid)())}setTranslationJson(){const x=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(x!==void 0){const R=x.split(","),_=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),I=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),k=_!==void 0?c.NextAction.Synthesize:c.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:k},onSuccess:{action:k},output:{includePassThroughResults:!0,interimResults:{mode:u.Mode.Always}},targetLanguages:R},I!==void 0&&(this.privSpeechContext.getContext().translation.category=I),_!==void 0){const B={};for(const O of R)B[O]=_;this.privSpeechContext.getContext().synthesis={defaultVoices:B}}const M=this.privSpeechContext.getContext().phraseDetection||{};M.onSuccess={action:w.NextAction.Translate},M.onInterim={action:w.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=M}}setSpeechSegmentationTimeoutJson(){const x=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),R=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),_=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationStrategy,void 0),I={mode:o.SegmentationMode.Normal};let k=!1;if(_!==void 0){k=!0;let M=o.SegmentationMode.Normal;switch(_.toLowerCase()){case"default":break;case"time":M=o.SegmentationMode.Custom;break;case"semantic":M=o.SegmentationMode.Semantic;break}I.mode=M}if(x!==void 0){k=!0;const M=parseInt(x,10);I.mode=o.SegmentationMode.Custom,I.segmentationSilenceTimeoutMs=M}if(R!==void 0){k=!0;const M=parseInt(R,10);I.mode=o.SegmentationMode.Custom,I.segmentationForcedTimeoutMs=M}if(k){const M=this.privSpeechContext.getContext().phraseDetection||{};switch(M.mode=this.recognitionMode,this.recognitionMode){case a.RecognitionMode.Conversation:M.conversation=M.conversation??{segmentation:{}},M.conversation.segmentation=I;break;case a.RecognitionMode.Interactive:M.interactive=M.interactive??{segmentation:{}},M.interactive.segmentation=I;break;case a.RecognitionMode.Dictation:M.dictation=M.dictation??{},M.dictation.segmentation=I;break}this.privSpeechContext.getContext().phraseDetection=M}}setLanguageIdJson(){const x=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const R=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");R.length===1&&R[0]===n.AutoDetectSourceLanguagesOpenRangeOptionName&&(R[0]="UND");let _;this.privRecognizerConfig.languageIdMode==="Continuous"?_=d.LanguageIdDetectionMode.DetectContinuous:_=d.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:R,mode:_,onSuccess:{action:h.NextAction.Recognize},onUnknown:{action:f.OnUnknownAction.None},priority:d.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:v.ResultType.Auto},phraseResults:{resultType:g.PhraseResultOutputType.Always}};const I=this.privRecognizerConfig.sourceLanguageModels;I!==void 0&&(x.customModels=I,x.onInterim={action:w.NextAction.None},x.onSuccess={action:w.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=x}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}setSpeechStartEventSensitivityJson(){const x=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_StartEventSensitivity,void 0);if(x!==void 0){let R=!1;switch(x.toLowerCase()){case a.SpeechStartEventSensitivity.Low:case a.SpeechStartEventSensitivity.Medium:case a.SpeechStartEventSensitivity.High:R=!0;break}if(R){const _=this.privSpeechContext.getContext().phraseDetection||{};_.voiceOnsetSensitivity=x.toLowerCase(),this.privSpeechContext.getContext().phraseDetection=_}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(x){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,x)}set authentication(x){this.privAuthentication=x}isDisposed(){return this.privIsDisposed}async dispose(x){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(x)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(x,R,_){if(this.recognizeOverride!==void 0){await this.recognizeOverride(x,R,_);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=x,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const O=this.privSpeechContext.getContext().phraseDetection||{};O.mode=x,this.privSpeechContext.getContext().phraseDetection=O}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.setSpeechStartEventSensitivityJson(),this.privSuccessCallback=R,this.privErrorCallback=_,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const I=this.connectImpl();let k;try{const O=await this.audioSource.attach(this.privRequestSession.audioNodeId),D=await this.audioSource.format,U=await this.audioSource.deviceInfo;this.privIsLiveAudio=U.type&&U.type===n.type.Microphones,k=new t.ReplayableAudioNode(O,D.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:U}}catch(O){throw await this.privRequestSession.onStopRecognizing(),O}try{await I}catch(O){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,O);return}const M=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,M),this.receiveMessage(),this.sendAudio(k).catch(async O=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,O)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(x,R){this.connectImpl().then(()=>{try{x&&x()}catch(_){R&&R(_)}},_=>{try{R&&R(_)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(x){}async sendNetworkMessage(x,R){const _=typeof R=="string"?e.MessageType.Text:e.MessageType.Binary,I=typeof R=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(_,x,this.privRequestSession.requestId,I,R))}set activityTemplate(x){this.privActivityTemplate=x}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(x){this.privExpectContentAssessmentResponse=x}async sendTelemetryData(){const x=this.privRequestSession.getTelemetry();if(Yl.telemetryDataEnabled!==!0||this.privIsDisposed||x===null)return;if(Yl.telemetryData)try{Yl.telemetryData(x)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",x))}async cancelRecognitionLocal(x,R,_){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,x,R,_))}async receiveMessage(){try{if(this.privIsDisposed)return;let x=await this.fetchConnection();const R=await x.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!R)return this.receiveMessage();this.privServiceHasSentMessage=!0;const _=i.SpeechConnectionMessage.fromConnectionMessage(R);if(_.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(_.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const I=n.SpeechDetected.fromJSON(_.textBody,this.privRequestSession.currentTurnAudioOffset),k=new r.RecognitionEventArgs(I.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,k);break;case"speech.enddetected":let M;_.textBody.length>0?M=_.textBody:M="{ Offset: 0 }";const B=n.SpeechDetected.fromJSON(M,this.privRequestSession.currentTurnAudioOffset),O=new r.RecognitionEventArgs(B.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,O);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const D=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,D);return}else x=await this.fetchConnection(),await this.sendPrePayloadJSON(x);break;default:await this.processTypeSpecificMessages(_)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(_.path.toLowerCase(),_.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const x=this.privRequestSession.recognitionBytesSent,R=this.privAverageBytesPerMs!==0?x/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(R)}sendSpeechContext(x,R){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const _=this.speechContext.toJSON();if(R&&this.privRequestSession.onSpeechContext(),_)return x.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",_))}setupTranslationWithLanguageId(){const x=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),R=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(x!==void 0&&R){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:v.ResultType.None},phraseResults:{resultType:g.PhraseResultOutputType.None}};const _=this.privSpeechContext.getContext().translation;if(_){const I=this.privRecognizerConfig.sourceLanguageModels;if(I!==void 0&&I.length>0){const M=this.privSpeechContext.getContext().phraseDetection||{};M.customModels=I,this.privSpeechContext.getContext().phraseDetection=M}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(_.onSuccess={action:c.NextAction.Synthesize},_.onPassthrough={action:c.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(x,R=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(x);await this.sendSpeechContext(x,R),await this.sendWaveHeader(x)}async sendWaveHeader(x){const R=await this.audioSource.format;return x.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",R.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(x=>x.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(x,R,_){if(R.onSpeechContext(),Yl.telemetryDataEnabled!==!0){const k={context:{system:JSON.parse(_).context.system}};_=JSON.stringify(k)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const I=JSON.parse(_);I.context.DisableReferenceChannel="True",I.context.MicSpec="1_0_0",_=JSON.stringify(I)}if(_)return x.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.config",R.requestId,"application/json",_))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(x=>x.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(x){const R=await this.audioSource.format;this.privAverageBytesPerMs=R.avgBytesPerSec/1e3;let _=Date.now();const I=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),k=R.avgBytesPerSec/1e3*parseInt(I,10),M=this.privRequestSession.recogNumber,B=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===M){const O=await this.fetchConnection(),D=await x.read();if(this.privRequestSession.isSpeechEnded)return;let U,L;if(!D||D.isEnd?(U=null,L=0):(U=D.buffer,this.privRequestSession.onAudioSent(U.byteLength),k>=this.privRequestSession.bytesSent?L=0:L=Math.max(0,_-Date.now())),L!==0&&await this.delay(L),U!==null&&(_=Date.now()+U.byteLength*1e3/(R.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===M)if(O.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,U)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),D?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return B()}};return B()}async retryableConnect(){let x=!1;this.privAuthFetchEventId=(0,e.createNoDashGuid)();const R=this.privRequestSession.sessionId;this.privConnectionId=R!==void 0?R:(0,e.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let _=0,I="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const M=await(x?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const B=await this.privConnectionFactory.create(this.privRecognizerConfig,M,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(B.events),B.events.attach(D=>{this.connectionEvents.onEvent(D)});const O=await B.open();if(O.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(O.statusCode),Promise.resolve(B);O.statusCode===1006&&(x=!0),_=O.statusCode,I=O.reason}return await this.privRequestSession.onConnectionEstablishCompleted(_,I),Promise.reject(`Unable to contact server. StatusCode: ${_}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${I}`)}delay(x){return new Promise(R=>this.privSetTimeout(R,x))}writeBufferToConsole(x){let R="Buffer Size: ";if(x===null)R+="null";else{const _=new Uint8Array(x);R+=`${x.byteLength}\r
`;for(let I=0;I<x.byteLength;I++)R+=_[I].toString(16).padStart(2,"0")+" ",(I+1)%16===0&&(console.info(R),R="")}console.info(R)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const x=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(x):(await this.sendSpeechServiceConfig(x,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(x,!1),x)}};return ja.ServiceRecognizerBase=b,b.telemetryDataEnabled=!0,ja}var sl={},C_;function q7(){if(C_)return sl;C_=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.ConversationServiceRecognizer=void 0;const t=ue(),e=we();let r=class extends e.ServiceRecognizerBase{constructor(i,o,a,c,u){super(i,o,a,c,u),this.handleSpeechPhraseMessage=async d=>this.handleSpeechPhrase(d),this.handleSpeechHypothesisMessage=d=>this.handleSpeechHypothesis(d)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,o,a){}handleRecognizingCallback(i,o,a){}async processSpeechMessages(i){let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),o=!0;break}return o}cancelRecognition(i,o,a,c,u){}async handleSpeechPhrase(i){const o=e.SimpleSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=e.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let c;const u=new t.PropertyCollection;if(u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i),this.privRequestSession.onPhraseRecognized(o.Offset+o.Duration),t.ResultReason.Canceled===a){const d=e.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),h=e.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(d,h,e.EnumTranslation.implTranslateErrorDetails(h))}else if(o.RecognitionStatus!==e.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,o.DisplayText,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),u);else{const d=e.DetailedSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset);c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,d.Text,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,d.SpeakerId,void 0,d.asJson(),u)}this.handleRecognizedCallback(c,c.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const o=e.SpeechHypothesis.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,o.Text,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),a);this.privRequestSession.onHypothesis(o.Offset),this.handleRecognizingCallback(c,o.Duration,this.privRequestSession.sessionId)}};return sl.ConversationServiceRecognizer=r,sl}var Ig={},b_;function U7(){return b_||(b_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=void 0;const e=ue(),r=we(),n=Br();(function(o){o[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"})(t.SpeechResultFormat||(t.SpeechResultFormat={}));class i{constructor(a,c){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=c,this.privMaxRetryCount=parseInt(c.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=c.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){const a=[];let c=!1;if(this.autoDetectSourceLanguages!==void 0)for(const u of this.autoDetectSourceLanguages.split(",")){const d=u+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),h=this.parameters.getProperty(d,void 0);h!==void 0?(a.push({language:u,endpoint:h}),c=!0):a.push({language:u,endpoint:""})}return c?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=i})(Ig)),Ig}var kg={},x_;function V7(){return x_||(x_=1,Object.defineProperty(kg,"__esModule",{value:!0})),kg}var ol={},P_;function W7(){if(P_)return ol;P_=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.WebsocketMessageFormatter=void 0;const t=Ee(),e=`\r
`;let r=class{toConnectionMessage(i){const o=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=i.textContent;let c={},u=null;if(a){const d=a.split(`\r
\r
`);d&&d.length>0&&(c=this.parseHeaders(d[0]),d.length>1&&(u=d[1]))}o.resolve(new t.ConnectionMessage(i.messageType,u,c,i.id))}else if(i.messageType===t.MessageType.Binary){const a=i.binaryContent;let c={},u=null;if(!a||a.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const d=new DataView(a),h=d.getInt16(0);if(a.byteLength<h+2)throw new Error("Invalid binary message format. Header content missing.");let f="";for(let v=0;v<h;v++)f+=String.fromCharCode(d.getInt8(v+2));c=this.parseHeaders(f),a.byteLength>h+2&&(u=a.slice(2+h)),o.resolve(new t.ConnectionMessage(i.messageType,u,c,i.id))}}catch(a){o.reject(`Error formatting the message. Error: ${a}`)}return o.promise}fromConnectionMessage(i){const o=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=`${this.makeHeaders(i)}${e}${i.textBody?i.textBody:""}`;o.resolve(new t.RawWebsocketMessage(t.MessageType.Text,a,i.id))}else if(i.messageType===t.MessageType.Binary){const a=this.makeHeaders(i),c=i.binaryBody,u=this.stringToArrayBuffer(a),d=new Int8Array(u),h=d.byteLength,f=new Int8Array(2+h+(c?c.byteLength:0));if(f[0]=h>>8&255,f[1]=h&255,f.set(d,2),c){const g=new Int8Array(c);f.set(g,2+h)}const v=f.buffer;o.resolve(new t.RawWebsocketMessage(t.MessageType.Binary,v,i.id))}}catch(a){o.reject(`Error formatting the message. ${a}`)}return o.promise}makeHeaders(i){let o="";if(i.headers)for(const a in i.headers)a&&(o+=`${a}: ${i.headers[a]}${e}`);return o}parseHeaders(i){const o={};if(i){const a=i.match(/[^\r\n]+/g);if(o){for(const c of a)if(c){const u=c.indexOf(":"),d=u>0?c.substr(0,u).trim().toLowerCase():c,h=u>0&&c.length>u+1?c.substr(u+1).trim():"";o[d]=h}}}return o}stringToArrayBuffer(i){const o=new ArrayBuffer(i.length),a=new DataView(o);for(let c=0;c<i.length;c++)a.setUint8(c,i.charCodeAt(c));return o}};return ol.WebsocketMessageFormatter=r,ol}var al={},__;function H7(){if(__)return al;__=1,Object.defineProperty(al,"__esModule",{value:!0}),al.SpeechConnectionFactory=void 0;const t=Qt(),e=we(),r=ue(),n=xn(),i=we(),o=dr(),a=di(),c=Br();let u=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(h,f,v){let g=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const w=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),b=n.ConnectionFactoryBase.getHostSuffix(w),C=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+w+".stt.speech"+b),x={},R=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),_=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(R?(!g||g.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(x[a.QueryParameterNames.CustomSpeechDeploymentId]=R):_&&(!g||g.search(a.QueryParameterNames.Language)===-1)&&(x[a.QueryParameterNames.Language]=_),(!g||g.search(a.QueryParameterNames.Format)===-1)&&(x[a.QueryParameterNames.Format]=h.parameters.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),h.autoDetectSourceLanguages!==void 0&&(x[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(h,x,g),g){const O=new URL(g),D=O.pathname;(D===""||D==="/")&&(O.pathname=this.universalUri+h.recognitionEndpointVersion,g=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(O.toString()))}if(!g)switch(h.recognitionMode){case c.RecognitionMode.Conversation:h.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?g=C+this.dictationRelativeUri:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?g=`${C}${this.universalUri}${h.recognitionEndpointVersion}`:g=C+this.conversationRelativeUri;break;case c.RecognitionMode.Dictation:g=C+this.dictationRelativeUri;break;default:h.recognitionEndpointVersion!==void 0&&parseInt(h.recognitionEndpointVersion,10)>1?g=`${C}${this.universalUri}${h.recognitionEndpointVersion}`:g=C+this.interactiveRelativeUri;break}const I={};f.token!==void 0&&f.token!==""&&(I[f.headerName]=f.token),I[o.HeaderNames.ConnectionId]=v,I.connectionId=v;const k=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",M=new t.WebsocketConnection(g,x,I,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(h),k,v),B=M.uri;return h.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,B),M}};return al.SpeechConnectionFactory=u,al}var cl={},R_;function K7(){if(R_)return cl;R_=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.ConversationTranscriberConnectionFactory=void 0;const t=Qt(),e=ue(),r=we(),n=xn(),i=we(),o=dr(),a=di();let c=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.conversationRelativeUriV1="/speech/recognition/conversation/cognitiveservices/v1"}async create(d,h,f){let v=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const g=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),w=n.ConnectionFactoryBase.getHostSuffix(g),b=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+g+".stt.speech"+w),C={},x=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),R=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(x?(!v||v.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(C[a.QueryParameterNames.CustomSpeechDeploymentId]=x):R&&(!v||v.search(a.QueryParameterNames.Language)===-1)&&(C[a.QueryParameterNames.Language]=R),d.autoDetectSourceLanguages!==void 0&&(C[a.QueryParameterNames.EnableLanguageId]="true"),d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)==="1")v=`${b}${this.universalUri}`;else{if(this.setV2UrlParams(d,C,v),v){const O=new URL(v),D=O.pathname;(D===""||D==="/")&&(O.pathname=this.universalUri,v=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(O.toString()))}v||(v=`${b}${this.conversationRelativeUriV1}`)}const I={};h.token!==void 0&&h.token!==""&&(I[h.headerName]=h.token),I[o.HeaderNames.ConnectionId]=f;const k=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",M=new t.WebsocketConnection(v,C,I,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(d),k,f),B=M.uri;return d.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,B),M}setV2UrlParams(d,h,f){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((w,b)=>{this.setUrlParameter(b,w,d,h,f)});const g=JSON.parse(d.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(g).forEach(w=>{h[w]=g[w]})}};return cl.ConversationTranscriberConnectionFactory=c,cl}var ll={},E_;function G7(){if(E_)return ll;E_=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.TranscriberConnectionFactory=void 0;const t=Qt(),e=ue(),r=xn(),n=we(),i=dr(),o=di();let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(u,d,h){let f=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const v=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),g=r.ConnectionFactoryBase.getHostSuffix(v),w="wss://transcribe."+v+".cts.speech"+g+this.multiaudioRelativeUri,b=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,w),C={};this.setQueryParams(C,u,f),f||(f=b);const x={};d.token!==void 0&&d.token!==""&&(x[d.headerName]=d.token),x[i.HeaderNames.ConnectionId]=h,u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,f);const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new t.WebsocketConnection(f,C,x,new n.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),R,h))}setQueryParams(u,d,h){const f=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=d.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f&&!(o.QueryParameterNames.CustomSpeechDeploymentId in u)&&(u[o.QueryParameterNames.CustomSpeechDeploymentId]=f),v&&!(o.QueryParameterNames.Language in u)&&(u[o.QueryParameterNames.Language]=v);const g=d.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",w=d.parameters.getProperty(n.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(g||w)&&(u[o.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(d,u,h)}};return ll.TranscriberConnectionFactory=a,ll}var ul={},T_;function $7(){if(T_)return ul;T_=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.TranslationConnectionFactory=void 0;const t=Qt(),e=eA(),r=ue(),n=xn(),i=we(),o=dr(),a=di(),c=Br();let u=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(h,f,v){let g=this.getEndpointUrl(h);const w={};if(this.setQueryParams(w,h,g),g){const R=new URL(g),_=R.pathname;(_===""||_==="/")&&(R.pathname=this.universalUri,g=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(R.toString()))}const b={};f.token!==void 0&&f.token!==""&&(b[f.headerName]=f.token),b[o.HeaderNames.ConnectionId]=v,h.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,g);const C=h.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(g,w,b,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(h),C,v)}getEndpointUrl(h,f){const v=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),g=n.ConnectionFactoryBase.getHostSuffix(v);let w=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return w?f===!0?w:e.StringUtils.formatString(w,{region:v}):(h.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?w=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+g)+this.translationV1Uri:w=h.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+g)+this.universalUri,f===!0?w:e.StringUtils.formatString(w,{region:v}))}setQueryParams(h,f,v){h.from=f.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),h.to=f.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),h.scenario=f.recognitionMode===c.RecognitionMode.Interactive?"interactive":f.recognitionMode===c.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(f,h,v),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,f,h,v);const g=f.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);g!==void 0&&(h.voice=g,h.features="requireVoice")}};return ul.TranslationConnectionFactory=u,ul}var dl={},A_;function J7(){if(A_)return dl;A_=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.EnumTranslation=void 0;const t=ue(),e=we();let r=class{static implTranslateRecognitionResult(i,o=!1){let a=t.ResultReason.Canceled;switch(i){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=o?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let o=t.CancellationReason.EndOfStream;switch(i){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:o=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:o=t.CancellationReason.Error;break}return o}static implTranslateCancelErrorCode(i){let o=t.CancellationErrorCode.NoError;switch(i){case e.RecognitionStatus.Error:o=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:o=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:o=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:o=t.CancellationErrorCode.Forbidden;break;default:o=t.CancellationErrorCode.NoError;break}return o}static implTranslateErrorDetails(i){let o="The speech service encountered an internal error and could not continue.";switch(i){case t.CancellationErrorCode.Forbidden:o="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:o="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:o="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return o}};return dl.EnumTranslation=r,dl}var jg={},I_;function Q7(){return I_||(I_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,(function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"})(t.SynthesisStatus||(t.SynthesisStatus={})),(function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"})(t.RecognitionStatus||(t.RecognitionStatus={}))})(jg)),jg}var hl={},k_;function Y7(){if(k_)return hl;k_=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.TranslationSynthesisEnd=void 0;const t=we();let e=class uA{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new uA(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return hl.TranslationSynthesisEnd=e,hl}var pl={},j_;function X7(){if(j_)return pl;j_=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.TranslationHypothesis=void 0;const t=De(),e=By();let r=class Bm{constructor(i,o){this.privTranslationHypothesis=i,this.privTranslationHypothesis.Offset+=o,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(i,o){return new Bm(JSON.parse(i),o)}static fromTranslationResponse(i,o){t.Contracts.throwIfNullOrUndefined(i,"translationHypothesis");const a=i.SpeechHypothesis;return i.SpeechHypothesis=void 0,a.Translation=i,new Bm(a,o)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}asJson(){const i={...this.privTranslationHypothesis};return i.Translation!==void 0?JSON.stringify({...i,TranslationStatus:e.TranslationStatus[i.Translation.TranslationStatus]}):JSON.stringify(i)}mapTranslationStatus(i){if(typeof i=="string")return e.TranslationStatus[i];if(typeof i=="number")return i}};return pl.TranslationHypothesis=r,pl}var fl={},O_;function Z7(){if(O_)return fl;O_=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.TranslationPhrase=void 0;const t=De(),e=we(),r=By();let n=class Fm{constructor(o,a){this.privTranslationPhrase=o,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(o,a){return new Fm(JSON.parse(o),a)}static fromTranslationResponse(o,a){t.Contracts.throwIfNullOrUndefined(o,"translationResponse");const c=o.SpeechPhrase;return o.SpeechPhrase=void 0,c.Translation=o,c.Text=c.DisplayText,new Fm(c,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const o={...this.privTranslationPhrase},a={...o,RecognitionStatus:e.RecognitionStatus[o.RecognitionStatus]};return o.Translation&&(a.Translation={...o.Translation,TranslationStatus:r.TranslationStatus[o.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(o){if(typeof o=="string")return e.RecognitionStatus[o];if(typeof o=="number")return o}mapTranslationStatus(o){if(typeof o=="string")return r.TranslationStatus[o];if(typeof o=="number")return o}};return fl.TranslationPhrase=n,fl}var vl={},N_;function e9(){if(N_)return vl;N_=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.TranslationServiceRecognizer=void 0;const t=Ee(),e=ue(),r=we();let n=class extends r.ConversationServiceRecognizer{constructor(o,a,c,u,d){super(o,a,c,u,d),this.privTranslationRecognizer=d,this.connectionEvents.attach(h=>{h.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(o){const a=new e.PropertyCollection;let c=await this.processSpeechMessages(o);if(c)return!0;const u=async h=>{if(a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),h.RecognitionStatus===r.RecognitionStatus.Success){const f=this.fireEventForResult(h,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,f)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(f.result)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const f=r.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),v=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,f,h.Text,h.Duration,h.Offset,h.Language,h.Confidence,void 0,h.asJson(),a);if(f===e.ResultReason.Canceled){const g=r.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),w=r.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(g,w,r.EnumTranslation.implTranslateErrorDetails(w))}else if(h.RecognitionStatus!==r.RecognitionStatus.EndOfDictation){const g=new e.TranslationRecognitionEventArgs(v,v.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,g)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(v)}catch(w){this.privErrorCallback&&this.privErrorCallback(w)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}c=!0}},d=h=>{a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const f=this.fireEventForResult(h,a);if(this.privRequestSession.onHypothesis(f.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,f)}catch{}c=!0};switch(o.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":d(r.TranslationHypothesis.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const h=JSON.parse(o.textBody);if(h.SpeechPhrase)await u(r.TranslationPhrase.fromTranslationResponse(h,this.privRequestSession.currentTurnAudioOffset));else{const v=JSON.parse(o.textBody);v.SpeechHypothesis&&d(r.TranslationHypothesis.fromTranslationResponse(v,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await u(r.TranslationPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),c=!0;break;case"audio.end":case"translation.synthesis.end":const f=r.TranslationSynthesisEnd.fromJSON(o.textBody);switch(f.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const v=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),g=new e.TranslationSynthesisEventArgs(v,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,g)}catch{}}if(this.privTranslationRecognizer.canceled){const v=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,f.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,v)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}c=!0;break}return c}cancelRecognition(o,a,c,u,d){const h=new e.PropertyCollection;if(h.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranslationRecognizer.canceled){const f=new e.TranslationRecognitionCanceledEventArgs(o,c,d,u,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,f)}catch{}}if(this.privSuccessCallback){const f=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,d,void 0,h);try{this.privSuccessCallback(f),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,a,c){try{const u=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,c);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u)}catch{}}handleRecognizedCallback(o,a,c){try{const u=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,c);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,u)}catch{}}fireEventForResult(o,a){let c;if(o.Translation.Translations!==void 0){c=new e.Translations;for(const g of o.Translation.Translations)c.set(g.Language,g.Text||g.DisplayText)}let u,d;o instanceof r.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===t.TranslationStatus.Success?u=e.ResultReason.TranslatedSpeech:u=e.ResultReason.RecognizedSpeech,d=o.Confidence):u=e.ResultReason.TranslatingSpeech;const h=o.Language,f=new e.TranslationRecognitionResult(c,this.privRequestSession.requestId,u,o.Text,o.Duration,o.Offset,h,d,o.Translation.FailureReason,o.asJson(),a);return new e.TranslationRecognitionEventArgs(f,o.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(o,a){const c=o===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,u=new e.TranslationSynthesisResult(c,o),d=new e.TranslationSynthesisEventArgs(u,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,d)}catch{}}};return vl.TranslationServiceRecognizer=n,vl}var gl={},M_;function t9(){if(M_)return gl;M_=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.SpeechDetected=void 0;let t=class dA{constructor(r,n){this.privSpeechStartDetected=JSON.parse(r),this.privSpeechStartDetected.Offset+=n}static fromJSON(r,n){return new dA(r,n)}get Offset(){return this.privSpeechStartDetected.Offset}};return gl.SpeechDetected=t,gl}var ml={},D_;function r9(){if(D_)return ml;D_=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.SpeechHypothesis=void 0;let t=class hA{constructor(r,n){this.privSpeechHypothesis=JSON.parse(r),this.updateOffset(n)}static fromJSON(r,n){return new hA(r,n)}updateOffset(r){this.privSpeechHypothesis.Offset+=r}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}};return ml.SpeechHypothesis=t,ml}var yl={},L_;function n9(){if(L_)return yl;L_=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.SpeechKeyword=void 0;let t=class pA{constructor(r,n){this.privSpeechKeyword=JSON.parse(r),this.privSpeechKeyword.Offset+=n}static fromJSON(r,n){return new pA(r,n)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}};return yl.SpeechKeyword=t,yl}var Sl={},z_;function i9(){if(z_)return Sl;z_=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.SpeechServiceRecognizer=void 0;const t=ue(),e=we();let r=class extends e.ServiceRecognizerBase{constructor(i,o,a,c,u){super(i,o,a,c,u),this.privSpeechRecognizer=u}async processTypeSpecificMessages(i){let o;const a=new t.PropertyCollection;let c=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=e.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),a),this.privRequestSession.onHypothesis(u.Offset);const d=new t.SpeechRecognitionEventArgs(o,u.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,d)}catch{}c=!0;break;case"speech.phrase":const h=e.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,h.asJson());const f=e.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(h.Offset+h.Duration),t.ResultReason.Canceled===f){const v=e.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),g=e.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);await this.cancelRecognitionLocal(v,g,e.EnumTranslation.implTranslateErrorDetails(g))}else{if(h.RecognitionStatus===e.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,f,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),a);else{const g=e.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,g.asJson()),o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,f,g.RecognitionStatus===e.RecognitionStatus.Success?g.NBest[0].Display:"",g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),a)}const v=new t.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,v)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}c=!0;break}return c}cancelRecognition(i,o,a,c,u){const d=new t.PropertyCollection;if(d.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privSpeechRecognizer.canceled){const h=new t.SpeechRecognitionCanceledEventArgs(a,u,c,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){const h=new t.SpeechRecognitionResult(o,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,d);try{this.privSuccessCallback(h),this.privSuccessCallback=void 0}catch{}}}};return Sl.SpeechServiceRecognizer=r,Sl}var wl={},Og={},B_;function s9(){return B_||(B_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdentityProvider=t.SpeakerDiarizationMode=void 0,(function(e){e.None="None",e.Identity="Identity",e.Anonymous="Anonymous"})(t.SpeakerDiarizationMode||(t.SpeakerDiarizationMode={})),(function(e){e.CallCenter="CallCenter"})(t.IdentityProvider||(t.IdentityProvider={}))})(Og)),Og}var F_;function o9(){if(F_)return wl;F_=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.ConversationTranscriptionServiceRecognizer=void 0;const t=ue(),e=we(),r=s9(),n=Br();let i=class extends e.ServiceRecognizerBase{constructor(a,c,u,d,h){super(a,c,u,d,h),this.privConversationTranscriber=h,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=n.RecognitionMode.Conversation;const c={};c.mode=r.SpeakerDiarizationMode.Anonymous,c.audioSessionId=this.privDiarizationSessionId,c.audioOffsetMs=0,c.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",a.speakerDiarization=c,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let c;const u=new t.PropertyCollection;u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let d=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const h=e.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,h.Text,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,h.SpeakerId,void 0,h.asJson(),u),this.privRequestSession.onHypothesis(h.Offset);const f=new t.ConversationTranscriptionEventArgs(c,h.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,f)}catch{}d=!0;break;case"speech.phrase":const v=e.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),g=e.EnumTranslation.implTranslateRecognitionResult(v.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(v.Offset+v.Duration),t.ResultReason.Canceled===g){const w=e.EnumTranslation.implTranslateCancelResult(v.RecognitionStatus),b=e.EnumTranslation.implTranslateCancelErrorCode(v.RecognitionStatus);await this.cancelRecognitionLocal(w,b,e.EnumTranslation.implTranslateErrorDetails(b))}else if(!(this.privRequestSession.isSpeechEnded&&g===t.ResultReason.NoMatch&&v.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])c=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,g,v.DisplayText,v.Duration,v.Offset,v.Language,v.LanguageDetectionConfidence,v.SpeakerId,void 0,v.asJson(),u);else{const b=e.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);c=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,g,b.RecognitionStatus===e.RecognitionStatus.Success?b.NBest[0].Display:void 0,b.Duration,b.Offset,b.Language,b.LanguageDetectionConfidence,v.SpeakerId,void 0,b.asJson(),u)}const w=new t.ConversationTranscriptionEventArgs(c,c.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,w)}catch{}}d=!0;break}return d}cancelRecognition(a,c,u,d,h){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[d]),this.privConversationTranscriber.canceled){const v=new t.ConversationTranscriptionCanceledEventArgs(u,h,d,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,v)}catch{}}}};return wl.ConversationTranscriptionServiceRecognizer=i,wl}var Cl={},q_;function a9(){if(q_)return Cl;q_=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.TranscriptionServiceRecognizer=void 0;const t=Ee(),e=ue(),r=we(),n=ip();let i=class extends r.ConversationServiceRecognizer{constructor(a,c,u,d,h){super(a,c,u,d,h),this.privTranscriberRecognizer=h,this.sendPrePayloadJSONOverride=f=>this.sendTranscriptionStartJSON(f),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,c){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createSpeechEventPayload(a,c))}}async sendMeetingSpeechEventAsync(a,c){if(this.privRequestSession.isRecognizing){const u=await this.fetchConnection();await this.sendSpeechEvent(u,this.createMeetingSpeechEventPayload(a,c))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,c,u){try{const d=new e.SpeechRecognitionEventArgs(a,c,u);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,d),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,c,u){try{const d=new e.SpeechRecognitionEventArgs(a,c,u);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,d)}catch{}}cancelRecognition(a,c,u,d,h){const f=new e.PropertyCollection;if(f.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[d]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const v=new e.MeetingTranscriptionCanceledEventArgs(u,h,d,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,v)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const v=new e.ConversationTranscriptionCanceledEventArgs(u,h,d,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,v)}catch{}}if(this.privSuccessCallback){const v=new e.SpeechRecognitionResult(c,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,h,void 0,f);try{this.privSuccessCallback(v),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const c=this.privTranscriberRecognizer.getMeetingInfo(),u=this.createMeetingSpeechEventPayload(c,"start");await this.sendSpeechEvent(a,u)}else{const c=this.privTranscriberRecognizer.getConversationInfo(),u=this.createSpeechEventPayload(c,"start");await this.sendSpeechEvent(a,u)}await this.sendWaveHeader(a)}sendSpeechEvent(a,c){const u=JSON.stringify(c);if(u)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",u))}createSpeechEventPayload(a,c){const u={id:"meeting",name:c,meeting:a.conversationProperties};return u.meeting.id=a.id,u.meeting.attendees=a.participants,u}createMeetingSpeechEventPayload(a,c){const u={id:"meeting",name:c,meeting:a.meetingProperties};return u.meeting.id=a.id,u.meeting.attendees=a.participants,u}};return Cl.TranscriptionServiceRecognizer=i,Cl}var bl={},U_;function c9(){if(U_)return bl;U_=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.DetailedSpeechPhrase=void 0;const t=we();let e=class fA{constructor(n,i){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(i)}static fromJSON(n,i){return new fA(n,i)}updateOffsets(n){if(this.privDetailedSpeechPhrase.Offset+=n,this.privDetailedSpeechPhrase.NBest)for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const o of i.Words)o.Offset+=n;if(i.DisplayWords)for(const o of i.DisplayWords)o.Offset+=n}}asJson(){const n={...this.privDetailedSpeechPhrase};return JSON.stringify({...n,RecognitionStatus:t.RecognitionStatus[n.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(n){if(typeof n=="string")return t.RecognitionStatus[n];if(typeof n=="number")return n}};return bl.DetailedSpeechPhrase=e,bl}var xl={},V_;function l9(){if(V_)return xl;V_=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.SimpleSpeechPhrase=void 0;const t=we();let e=class vA{constructor(n,i=0){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(i)}static fromJSON(n,i){return new vA(n,i)}updateOffset(n){this.privSimpleSpeechPhrase.Offset+=n}asJson(){const n={...this.privSimpleSpeechPhrase};return JSON.stringify({...n,RecognitionStatus:t.RecognitionStatus[n.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(n){if(typeof n=="string")return t.RecognitionStatus[n];if(typeof n=="number")return n}};return xl.SimpleSpeechPhrase=e,xl}var Pl={},_l={},W_;function u9(){if(W_)return _l;W_=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.ServiceTelemetryListener=void 0;const t=Ee(),e=qy();class r{constructor(i,o,a){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=i,this.privAudioSourceId=o,this.privAudioNodeId=a,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(i){i>0&&this.privPhraseLatencies.push(Date.now()-i)}hypothesisReceived(i){i>0&&this.privHypothesisLatencies.push(Date.now()-i)}onEvent(i){this.privIsDisposed||(i instanceof e.RecognitionTriggeredEvent&&i.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:i.eventTime,Name:"ListeningTrigger",Start:i.eventTime}),i instanceof t.AudioStreamNodeAttachingEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=i.eventTime),i instanceof t.AudioStreamNodeAttachedEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=i.eventTime),i instanceof t.AudioSourceErrorEvent&&i.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Error:i.error,Name:"Microphone",Start:this.privMicStartTime})),i instanceof t.AudioStreamNodeErrorEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Error:i.error,Name:"Microphone",Start:this.privMicStartTime})),i instanceof t.AudioStreamNodeDetachedEvent&&i.audioSourceId===this.privAudioSourceId&&i.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:i.eventTime,Name:"Microphone",Start:this.privMicStartTime})),i instanceof e.ConnectingToServiceEvent&&i.requestId===this.privRequestId&&(this.privConnectionId=i.sessionId),i instanceof t.ConnectionStartEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionStartTime=i.eventTime),i instanceof t.ConnectionEstablishedEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:i.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),i instanceof t.ConnectionEstablishErrorEvent&&i.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:i.eventTime,Error:this.getConnectionError(i.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),i instanceof t.ConnectionMessageReceivedEvent&&i.connectionId===this.privConnectionId&&i.message&&i.message.headers&&i.message.headers.path&&(this.privReceivedMessages[i.message.headers.path]||(this.privReceivedMessages[i.message.headers.path]=new Array),this.privReceivedMessages[i.message.headers.path].length<50&&this.privReceivedMessages[i.message.headers.path].push(i.networkReceivedTime)))}getTelemetry(){const i=new Array;this.privListeningTriggerMetric&&i.push(this.privListeningTriggerMetric),this.privMicMetric&&i.push(this.privMicMetric),this.privConnectionEstablishMetric&&i.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&i.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&i.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const o={Metrics:i,ReceivedMessages:this.privReceivedMessages},a=JSON.stringify(o);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],a}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(i){switch(i){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+i.toString()}}}return _l.ServiceTelemetryListener=r,_l}var H_;function d9(){if(H_)return Pl;H_=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.RequestSession=void 0;const t=Ee(),e=qy(),r=u9();let n=class{constructor(o){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=o,this.privRequestId=(0,t.createNoDashGuid)(),this.privAudioNodeId=(0,t.createNoDashGuid)(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(o){this.privServiceTelemetryListener&&this.privDetachables.push(o.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new r.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new e.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(o,a){this.privAudioNode=o,this.privIsAudioNodeDetached=!1,a?await this.onComplete():this.onEvent(new e.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(o,a){this.privAuthFetchEventId=o,this.privSessionId=a,this.onEvent(new e.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(o){o&&await this.onComplete()}async onConnectionEstablishCompleted(o,a){if(o===200){this.onEvent(new e.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else o===403&&await this.onComplete()}async onServiceTurnEndResponse(o){this.privTurnDeferral.resolve(),!o||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,t.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred}onHypothesis(o){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(o)))}onPhraseRecognized(o){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(o)),this.onServiceRecognized(o)}onServiceRecognized(o){this.privLastRecoOffset=o,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(o),this.privConnectionAttempts=0}onAudioSent(o){this.privBytesSent+=o,this.privRecognitionBytesSent+=o}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const o of this.privDetachables)await o.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(o){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(o),t.Events.instance.onEvent(o)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}};return Pl.RequestSession=n,Pl}var Rl={},Ng={},K_;function h9(){return K_||(K_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TentativePhraseResultsOption=t.OutputFormat=t.PhraseExtension=t.PhraseOption=void 0,(function(e){e.WordTimings="WordTimings",e.SNR="SNR",e.Pronunciation="Pronunciation",e.WordPronunciation="WordPronunciation",e.WordConfidence="WordConfidence",e.Words="Words",e.Sentiment="Sentiment",e.PronunciationAssessment="PronunciationAssessment",e.ContentAssessment="ContentAssessment",e.PhraseAMScore="PhraseAMScore",e.PhraseLMScore="PhraseLMScore",e.WordAMScore="WordAMScore",e.WordLMScore="WordLMScore",e.RuleTree="RuleTree",e.NBestTimings="NBestTimings",e.DecoderDiagnostics="DecoderDiagnostics",e.DisplayWordTimings="DisplayWordTimings",e.DisplayWords="DisplayWords"})(t.PhraseOption||(t.PhraseOption={})),(function(e){e.Graph="Graph",e.Corrections="Corrections",e.Sentiment="Sentiment"})(t.PhraseExtension||(t.PhraseExtension={})),(function(e){e.Simple="Simple",e.Detailed="Detailed"})(t.OutputFormat||(t.OutputFormat={})),(function(e){e.None="None",e.Always="Always"})(t.TentativePhraseResultsOption||(t.TentativePhraseResultsOption={}))})(Ng)),Ng}var G_;function p9(){if(G_)return Rl;G_=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.SpeechContext=void 0;const t=Br(),e=h9();let r=class{constructor(i){this.privContext={},this.privDynamicGrammar=i}getContext(){return this.privContext}setPronunciationAssessmentParams(i,o=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(i)||{},o&&(this.privContext.phraseDetection.mode=t.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(e.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.SNR)}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=e.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=e.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(e.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(e.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(i){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=i}toJSON(){const i=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=i,JSON.stringify(this.privContext)}};return Rl.SpeechContext=r,Rl}var El={},Mg={},$_;function f9(){return $_||($_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SubstringMatchType=t.GroupType=void 0,(function(e){e.IntentText="IntentText",e.IntentEntity="IntentEntity",e.Generic="Generic",e.People="People",e.Place="Place",e.DynamicEntity="DynamicEntity"})(t.GroupType||(t.GroupType={})),(function(e){e.None="None",e.LeftRooted="LeftRooted",e.PartialName="PartialName",e.MiddleOfSentence="MiddleOfSentence"})(t.SubstringMatchType||(t.SubstringMatchType={}))})(Mg)),Mg}var J_;function v9(){if(J_)return El;J_=1,Object.defineProperty(El,"__esModule",{value:!0}),El.DynamicGrammarBuilder=void 0;const t=f9();let e=class{constructor(){this.privWeight=1}addPhrase(n){this.privPhrases||(this.privPhrases=[]),n instanceof Array?this.privPhrases=this.privPhrases.concat(n):this.privPhrases.push(n)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(n){this.privGrammars||(this.privGrammars=[]),n instanceof Array?this.privGrammars=this.privGrammars.concat(n):this.privGrammars.push(n)}clearGrammars(){this.privGrammars=void 0}setWeight(n){this.privWeight=n}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const n={};if(n.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const i=[];this.privPhrases.forEach(o=>{i.push({text:o})}),n.groups=[{type:t.GroupType.Generic,items:i}],n.bias=this.privWeight}return n}};return El.DynamicGrammarBuilder=e,El}var Tl={},Al={},Il={},Dg={},Q_;function gA(){return Q_||(Q_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new e(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,(function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"})(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(Dg)),Dg}var Y_;function g9(){if(Y_)return Il;Y_=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.DialogServiceTurnState=void 0;const t=Iu(),e=uo(),r=gA();let n=class{constructor(o,a){this.privRequestId=a,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=o,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(o,a){return o.messageDataStreamType===r.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=e.AudioOutputStream.createPullStream(),this.privAudioStream.format=a!==void 0?a:t.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}};return Il.DialogServiceTurnState=n,Il}var X_;function m9(){if(X_)return Al;X_=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.DialogServiceTurnStateManager=void 0;const t=Jr(),e=g9();let r=class{constructor(){this.privTurnMap=new Map}StartTurn(i){if(this.privTurnMap.has(i))throw new t.InvalidOperationError("Service error: There is already a turn with id:"+i);const o=new e.DialogServiceTurnState(this,i);return this.privTurnMap.set(i,o),this.privTurnMap.get(i)}GetTurn(i){return this.privTurnMap.get(i)}CompleteTurn(i){if(!this.privTurnMap.has(i))throw new t.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+i);const o=this.privTurnMap.get(i);return o.complete(),this.privTurnMap.delete(i),o}};return Al.DialogServiceTurnStateManager=r,Al}var Lg={},Z_;function y9(){return Z_||(Z_=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvocationSource=void 0,(function(e){e.None="None",e.VoiceActivationWithKeyword="VoiceActivationWithKeyword"})(t.InvocationSource||(t.InvocationSource={}))})(Lg)),Lg}var zg={},eR;function S9(){return eR||(eR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OnRejectAction=t.KeywordDetectionType=void 0,(function(e){e.StartTrigger="StartTrigger"})(t.KeywordDetectionType||(t.KeywordDetectionType={})),(function(e){e.EndOfTurn="EndOfTurn",e.Continue="Continue"})(t.OnRejectAction||(t.OnRejectAction={}))})(zg)),zg}var tR;function w9(){if(tR)return Tl;tR=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.DialogServiceAdapter=void 0;const t=Qt(),e=ET(),r=Ee(),n=Iu(),i=ue(),o=m9(),a=we(),c=gA(),u=y9(),d=S9(),h=ip();let f=class extends a.ServiceRecognizerBase{constructor(g,w,b,C,x){super(g,w,b,C,x),this.privEvents=new r.EventSource,this.privDialogServiceConnector=x,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(R,_,I)=>this.listenOnce(R,_,I),this.postConnectImplOverride=R=>this.dialogConnectImpl(R),this.configConnectionOverride=R=>this.configConnection(R),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=b,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(R=>{R.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(g){const w=(0,r.createGuid)(),b=(0,r.createNoDashGuid)(),C={context:{interactionId:w},messagePayload:JSON.parse(g),version:.5},x=JSON.stringify(C);await(await this.fetchConnection()).send(new h.SpeechConnectionMessage(r.MessageType.Text,"agent",b,"application/json",x))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(g){const w=new i.PropertyCollection;g.messageType===r.MessageType.Text&&w.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,g.textBody);let b,C;switch(g.path.toLowerCase()){case"speech.phrase":const R=a.SimpleSpeechPhrase.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(R.Offset+R.Duration),R.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&R.RecognitionStatus!==a.RecognitionStatus.Error){const B=this.fireEventForResult(R,w);if(this.privLastResult=B.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,B)}catch{}}C=!0;break;case"speech.hypothesis":const _=a.SpeechHypothesis.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset);b=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,_.Text,_.Duration,_.Offset,_.Language,_.LanguageDetectionConfidence,void 0,void 0,_.asJson(),w),this.privRequestSession.onHypothesis(_.Offset);const I=new i.SpeechRecognitionEventArgs(b,_.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,I)}catch{}C=!0;break;case"speech.keyword":const k=a.SpeechKeyword.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset);b=new i.SpeechRecognitionResult(this.privRequestSession.requestId,k.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,k.Text,k.Duration,k.Offset,void 0,void 0,void 0,void 0,k.asJson(),w),k.Status!=="Accepted"&&(this.privLastResult=b);const M=new i.SpeechRecognitionEventArgs(b,b.duration,b.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,M)}catch{}C=!0;break;case"audio":{const B=g.requestId.toUpperCase(),O=this.privTurnStateManager.GetTurn(B);try{g.binaryBody?O.audioStream.write(g.binaryBody):O.endAudioStream()}catch{}}C=!0;break;case"response":this.handleResponseMessage(g),C=!0;break}const x=new r.Deferred;return x.resolve(C),x.promise}async cancelRecognition(g,w,b,C,x){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const R=new i.PropertyCollection;R.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[C]);const _=new i.SpeechRecognitionCanceledEventArgs(b,x,C,void 0,g);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,_)}catch{}if(this.privSuccessCallback){const I=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,x,void 0,R);try{this.privSuccessCallback(I),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(g,w,b){this.privRecognizerConfig.recognitionMode=g,this.privSuccessCallback=w,this.privErrorCallback=b,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const C=this.connectImpl(),x=this.sendPreAudioMessages(),R=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),_=await this.privDialogAudioSource.format,I=await this.privDialogAudioSource.deviceInfo,k=new t.ReplayableAudioNode(R,_.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(k,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:I};try{await C,await x}catch(O){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,O),Promise.resolve()}const M=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,M),this.sendAudio(k).then(()=>{},async O=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,O)})}dialogConnectImpl(g){return this.privConnectionLoop=this.startMessageLoop(),g}receiveDialogMessageOverride(){const g=new r.Deferred,w=async()=>{try{const b=this.isDisposed(),C=!this.isDisposed()&&this.terminateMessageLoop;if(b||C){g.resolve(void 0);return}const R=await(await this.fetchConnection()).read();if(!R)return w();const _=h.SpeechConnectionMessage.fromConnectionMessage(R);switch(_.path.toLowerCase()){case"turn.start":{const U=_.requestId.toUpperCase(),L=this.privRequestSession.requestId.toUpperCase();U!==L?this.privTurnStateManager.StartTurn(U):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const k=a.SpeechDetected.fromJSON(_.textBody,this.privRequestSession.currentTurnAudioOffset),M=new i.RecognitionEventArgs(k.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,M);break;case"speech.enddetected":let B;_.textBody.length>0?B=_.textBody:B="{ Offset: 0 }";const O=a.SpeechDetected.fromJSON(B,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(O.Offset);const D=new i.RecognitionEventArgs(O.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,D);break;case"turn.end":{const U=_.requestId.toUpperCase(),L=this.privRequestSession.requestId.toUpperCase();if(U!==L)this.privTurnStateManager.CompleteTurn(U);else{const F=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,F),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(H){this.privErrorCallback&&this.privErrorCallback(H)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(_)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(_.path.toLowerCase(),_.textBody))}catch{}}return w()}catch{this.terminateMessageLoop=!0,g.resolve()}};return w().catch(b=>{r.Events.instance.onEvent(new r.BackgroundEvent(b))}),g.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(g){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,g)}return Promise.resolve()}async configConnection(g){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(g,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(g),g)}async sendPreAudioMessages(){const g=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(g,!0),await this.sendAgentContext(g),await this.sendWaveHeader(g)}sendAgentConfig(g){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const b=this.agentConfig.get();b.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(b)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const w=this.agentConfig.toJsonString();return this.agentConfigSent=!0,g.send(new h.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",w))}}sendAgentContext(g){const w=(0,r.createGuid)(),b=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),x=JSON.stringify({channelData:"",context:{interactionId:w},messagePayload:typeof b===void 0?void 0:b,version:.5});return g.send(new h.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",x))}fireEventForResult(g,w){const b=a.EnumTranslation.implTranslateRecognitionResult(g.RecognitionStatus),C=new i.SpeechRecognitionResult(this.privRequestSession.requestId,b,g.DisplayText,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),w);return new i.SpeechRecognitionEventArgs(C,g.Offset,this.privRequestSession.sessionId)}handleResponseMessage(g){const w=JSON.parse(g.textBody);switch(w.messageType.toLowerCase()){case"message":const b=g.requestId.toUpperCase(),C=c.ActivityPayloadResponse.fromJSON(g.textBody),x=this.privTurnStateManager.GetTurn(b);if(C.conversationId){const I=this.agentConfig.get();I.botInfo.conversationId=C.conversationId,this.agentConfig.set(I)}const R=x.processActivityPayload(C,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),_=new i.ActivityReceivedEventArgs(C.messagePayload,R);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,_)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(g.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${w.messageType}. Ignoring.`));break}}onEvent(g){this.privEvents.onEvent(g),r.Events.instance.onEvent(g)}addKeywordContextData(){const g=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(g===void 0)return;const w=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),b=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),C=g.split(";"),x=w===void 0?[]:w.split(";"),R=b===void 0?[]:b.split(";"),_=[];for(let I=0;I<C.length;I++){const k={text:C[I]};I<x.length&&(k.startOffset=Number(x[I])),I<R.length&&(k.duration=Number(R[I])),_.push(k)}this.speechContext.getContext().invocationSource=u.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:_,onReject:{action:d.OnRejectAction.EndOfTurn},type:d.KeywordDetectionType.StartTrigger}]}};return Tl.DialogServiceAdapter=f,Tl}var kl={},rR;function C9(){if(rR)return kl;rR=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.AgentConfig=void 0;let t=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(r){this.iPrivConfig=r}};return kl.AgentConfig=t,kl}var Bg={},jl={},Ol={},nR;function Ky(){if(nR)return Ol;nR=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.ConversationConnectionConfig=void 0;const t=lA();let e=class Jn extends t.RestConfigBase{static get host(){return Jn.privHost}static get apiVersion(){return Jn.privApiVersion}static get clientAppId(){return Jn.privClientAppId}static get defaultLanguageCode(){return Jn.privDefaultLanguageCode}static get restPath(){return Jn.privRestPath}static get webSocketPath(){return Jn.privWebSocketPath}static get transcriptionEventKeys(){return Jn.privTranscriptionEventKeys}};return Ol.ConversationConnectionConfig=e,e.privHost="dev.microsofttranslator.com",e.privRestPath="/capito/room",e.privApiVersion="2.0",e.privDefaultLanguageCode="en-US",e.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",e.privWebSocketPath="/capito/translate",e.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],Ol}var iR;function b9(){if(iR)return jl;iR=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.ConversationManager=void 0;const t=Qt(),e=De(),r=ue(),n=Ky();let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,c,u,d){try{e.Contracts.throwIfNullOrUndefined(a,"args");const h=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),f=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),v=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),g=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),w=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),b=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),C=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(h,"languageCode"),e.Contracts.throwIfNullOrWhitespace(f,"nickname"),e.Contracts.throwIfNullOrWhitespace(v,"endpointHost");const x={};x[this.privRequestParams.apiVersion]=this.privApiVersion,x[this.privRequestParams.languageCode]=h,x[this.privRequestParams.nickname]=f;const R={};g&&(R[this.privRequestParams.correlationId]=g),R[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,c!==void 0?x[this.privRequestParams.roomId]=c:(e.Contracts.throwIfNullOrUndefined(b,this.privErrors.authInvalidSubscriptionRegion),R[this.privRequestParams.subscriptionRegion]=b,w?R[this.privRequestParams.subscriptionKey]=w:C?R[this.privRequestParams.authorization]=`Bearer ${C}`:e.Contracts.throwIfNullOrUndefined(w,this.privErrors.authInvalidSubscriptionKey));const _={};_.headers=R,this.privRestAdapter.options=_;const I=`https://${v}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,I,x,null).then(k=>{const M=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,k.headers);if(!k.ok){if(d){let O=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",k.status.toString()),D;try{D=JSON.parse(k.data),O+=` [${D.error.code}: ${D.error.message}]`}catch{O+=` [${k.data}]`}M&&(O+=` ${M}`),d(O)}return}const B=JSON.parse(k.data);if(B&&(B.requestId=M),u){try{u(B)}catch(O){d&&d(O)}u=void 0}}).catch(()=>{})}catch(h){if(d)if(h instanceof Error){const f=h;d(f.name+": "+f.message)}else d(h)}}leave(a,c){return new Promise((u,d)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","token"));const h=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),f=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.sessionToken]=c;const g={};f&&(g[this.privRequestParams.correlationId]=f);const w={};w.headers=g,this.privRestAdapter.options=w;const b=`https://${h}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,b,v,null).then(C=>{C.ok,u()}).catch(()=>{})}catch(h){if(h instanceof Error){const f=h;d(f.name+": "+f.message)}else d(h)}})}};return jl.ConversationManager=i,jl}var Gi={},Nl={},Ml={},Dl={},sR;function mA(){if(sR)return Dl;sR=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.ConversationConnectionMessage=void 0;const t=Ee();let e=class extends t.ConnectionMessage{constructor(n,i,o,a){super(n,i,o,a);const c=JSON.parse(this.textBody);c.type!==void 0&&(this.privConversationMessageType=c.type)}get conversationMessageType(){return this.privConversationMessageType}};return Dl.ConversationConnectionMessage=e,Dl}var oR;function x9(){if(oR)return Ml;oR=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.ConversationWebsocketMessageFormatter=void 0;const t=Ee(),e=mA();let r=class{toConnectionMessage(i){const o=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=new e.ConversationConnectionMessage(i.messageType,i.textContent,{},i.id);o.resolve(a)}else i.messageType===t.MessageType.Binary&&o.resolve(new e.ConversationConnectionMessage(i.messageType,i.binaryContent,void 0,i.id))}catch(a){o.reject(`Error formatting the message. Error: ${a}`)}return o.promise}fromConnectionMessage(i){const o=new t.Deferred;try{if(i.messageType===t.MessageType.Text){const a=`${i.textBody?i.textBody:""}`;o.resolve(new t.RawWebsocketMessage(t.MessageType.Text,a,i.id))}}catch(a){o.reject(`Error formatting the message. ${a}`)}return o.promise}};return Ml.ConversationWebsocketMessageFormatter=r,Ml}var aR;function P9(){if(aR)return Nl;aR=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.ConversationConnectionFactory=void 0;const t=Qt(),e=Ee(),r=De(),n=ue(),i=xn(),o=Ky(),a=x9();let c=class extends i.ConnectionFactoryBase{create(d,h,f){const v=d.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,o.ConversationConnectionConfig.host),g=d.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,(0,e.createGuid)()),w=`wss://${v}${o.ConversationConnectionConfig.webSocketPath}`,b=d.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(b,"token");const C={};C[o.ConversationConnectionConfig.configParams.apiVersion]=o.ConversationConnectionConfig.apiVersion,C[o.ConversationConnectionConfig.configParams.token]=b,C[o.ConversationConnectionConfig.configParams.correlationId]=g;const x=d.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new t.WebsocketConnection(w,C,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(d),x,f))}};return Nl.ConversationConnectionFactory=c,Nl}var Ll={},zl={},cR;function _9(){if(cR)return zl;cR=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.ConversationRequestSession=void 0;const t=Ee();let e=class{constructor(n){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=n,this.privRequestId=(0,t.createNoDashGuid)(),this.privRequestCompletionDeferral=new t.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(n,i){this.privSessionId=i}onAuthCompleted(n){n&&this.onComplete()}onConnectionEstablishCompleted(n){n!==200&&n===403&&this.onComplete()}onServiceTurnEndResponse(n){n?this.privRequestId=(0,t.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const n of this.privDetachables)await n.detach()}}onComplete(){}};return zl.ConversationRequestSession=e,zl}var Bt={},lR;function yA(){if(lR)return Bt;lR=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.ConversationReceivedTranslationEventArgs=Bt.ParticipantsListEventArgs=Bt.ParticipantAttributeEventArgs=Bt.ParticipantEventArgs=Bt.LockRoomEventArgs=Bt.MuteAllEventArgs=void 0;const t=ue();class e extends t.SessionEventArgs{constructor(u,d){super(d),this.privIsMuted=u}get isMuted(){return this.privIsMuted}}Bt.MuteAllEventArgs=e;class r extends t.SessionEventArgs{constructor(u,d){super(d),this.privIsLocked=u}get isMuted(){return this.privIsLocked}}Bt.LockRoomEventArgs=r;class n extends t.SessionEventArgs{constructor(u,d){super(d),this.privParticipant=u}get participant(){return this.privParticipant}}Bt.ParticipantEventArgs=n;class i extends t.SessionEventArgs{constructor(u,d,h,f){super(f),this.privKey=d,this.privValue=h,this.privParticipantId=u}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Bt.ParticipantAttributeEventArgs=i;class o extends t.SessionEventArgs{constructor(u,d,h,f,v,g,w,b,C){super(C),this.privRoomId=u,this.privSessionToken=d,this.privTranslateTo=h,this.privProfanityFilter=f,this.privRoomProfanityFilter=v,this.privIsRoomLocked=g,this.privIsRoomLocked=w,this.privParticipants=b}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Bt.ParticipantsListEventArgs=o;class a{constructor(u,d,h){this.privPayload=d,this.privCommand=u,this.privSessionId=h}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Bt.ConversationReceivedTranslationEventArgs=a,Bt}var un={},uR;function SA(){if(uR)return un;uR=1,Object.defineProperty(un,"__esModule",{value:!0}),un.ConversationTranslatorCommandTypes=un.ConversationTranslatorMessageTypes=un.InternalParticipants=void 0;class t{constructor(r=[],n){this.participants=r,this.meId=n}addOrUpdateParticipant(r){if(r===void 0)return;const n=this.getParticipantIndex(r.id);return n>-1?this.participants.splice(n,1,r):this.participants.push(r),this.getParticipant(r.id)}getParticipantIndex(r){return this.participants.findIndex(n=>n.id===r)}getParticipant(r){return this.participants.find(n=>n.id===r)}deleteParticipant(r){this.participants=this.participants.filter(n=>n.id!==r)}get host(){return this.participants.find(r=>r.isHost===!0)}get me(){return this.getParticipant(this.meId)}}return un.InternalParticipants=t,un.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},un.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"},un}var Fg={},Bl={},dR;function R9(){if(dR)return Bl;dR=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.CommandResponsePayload=void 0;const t=r=>JSON.parse(r);let e=class wA{constructor(n){this.privCommandResponse=t(n)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(n){return new wA(n)}};return Bl.CommandResponsePayload=e,Bl}var $i={},hR;function E9(){if(hR)return $i;hR=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.ParticipantPayloadResponse=$i.ParticipantsListPayloadResponse=void 0;const t=i=>JSON.parse(i),e=i=>JSON.parse(i);class r{constructor(o){this.privParticipantsPayloadResponse=t(o)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(o){return new r(o)}}$i.ParticipantsListPayloadResponse=r;class n{constructor(o){this.privParticipantPayloadResponse=e(o)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(o){return new n(o)}}return $i.ParticipantPayloadResponse=n,$i}var Ji={},pR;function T9(){if(pR)return Ji;pR=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.TextResponsePayload=Ji.SpeechResponsePayload=void 0;const t=i=>JSON.parse(i),e=i=>JSON.parse(i);class r{constructor(o){this.privSpeechResponse=t(o)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(o){return new r(o)}}Ji.SpeechResponsePayload=r;class n{constructor(o){this.privTextResponse=e(o)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(o){return new n(o)}}return Ji.TextResponsePayload=n,Ji}var fR;function A9(){return fR||(fR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=t.CommandResponsePayload=void 0;var e=R9();Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var r=E9();Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=T9();Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(Fg)),Fg}var vR;function I9(){if(vR)return Ll;vR=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.ConversationServiceAdapter=void 0;const t=Ee(),e=ue(),r=we(),n=mA(),i=_9(),o=yA(),a=SA(),c=A9();let u=class extends r.ServiceRecognizerBase{constructor(h,f,v,g,w){super(h,f,v,g,w),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=w,this.privConversationAuthentication=h,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=b=>this.conversationConnectImpl(b),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,t.createNoDashGuid)()),this.privConversationConnectionFactory=f,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(h){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(h),await super.dispose(h)}async sendMessage(h){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,h))}async sendMessageAsync(h){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(t.MessageType.Text,h))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(h,f,v,g,w){this.terminateMessageLoop=!0;const b=new e.ConversationTranslationCanceledEventArgs(v,w,g,void 0,h);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,b)}catch{}}async conversationConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const h=new t.Deferred;try{const v=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return h.resolve(),Promise.resolve();if(!v)return this.receiveConversationMessageOverride();const g=this.privConversationRequestSession.sessionId,w=v.conversationMessageType.toLowerCase();let b=!1;try{switch(w){case"info":case"participant_command":case"command":const C=c.CommandResponsePayload.fromJSON(v.textBody);switch(C.command.toLowerCase()){case"participantlist":const M=c.ParticipantsListPayloadResponse.fromJSON(v.textBody),B=M.participants.map(H=>({avatar:H.avatar,displayName:H.nickname,id:H.participantId,isHost:H.ishost,isMuted:H.ismuted,isUsingTts:H.usetts,preferredLanguage:H.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(M.roomid,M.token,M.translateTo,M.profanityFilter,M.roomProfanityFilter,M.roomLocked,M.muteAll,B,g));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,C.value,g));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,C.value,g));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setMute,C.value,g));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(C.value,g));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(C.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,C.value,g));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(C.value,g));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(C.participantId,a.ConversationTranslatorCommandTypes.changeNickname,C.value,g));break;case"joinsession":const O=c.ParticipantPayloadResponse.fromJSON(v.textBody),D={avatar:O.avatar,displayName:O.nickname,id:O.participantId,isHost:O.ishost,isMuted:O.ismuted,isUsingTts:O.usetts,preferredLanguage:O.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(D,g));break;case"leavesession":const U={id:C.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(U,g));break;case"disconnectsession":const L={id:C.participantId};break;case"token":const F=new r.CognitiveTokenAuthentication(()=>{const H=C.token;return Promise.resolve(H)},()=>{const H=C.token;return Promise.resolve(H)});this.authentication=F,this.privConversationServiceConnector.onToken(F);break;default:break}break;case"partial":case"final":const x=c.SpeechResponsePayload.fromJSON(v.textBody),R=w==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,_=new e.ConversationTranslationResult(x.participantId,this.getTranslations(x.translations),x.language,x.id,R,x.recognition,void 0,void 0,v.textBody,void 0);x.isFinal?((_.text!==void 0&&_.text.length>0||x.id===this.privLastPartialUtteranceId)&&(b=!0),b&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,_,g))):_.text!==void 0&&(this.privLastPartialUtteranceId=x.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,_,g)));break;case"translated_message":const I=c.TextResponsePayload.fromJSON(v.textBody),k=new e.ConversationTranslationResult(I.participantId,this.getTranslations(I.translations),I.language,void 0,void 0,I.originalText,void 0,void 0,void 0,v.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,k,g));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return h.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const h=this.receiveConversationMessageOverride();try{return await h}catch(f){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,f),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(h=>h.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(h=>h),this.privConnectionConfigPromise)}getTranslations(h){let f;if(h!==void 0){f=new e.Translations;for(const v of h)f.set(v.lang,v.translation)}return f}};return Ll.ConversationServiceAdapter=u,Ll}var gR;function k9(){if(gR)return Gi;gR=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.ConversationTranslatorRecognizer=Gi.ConversationRecognizerFactory=void 0;const t=we(),e=Ee(),r=De(),n=ue(),i=P9(),o=I9();class a{static fromConfig(d,h,f){return new c(d,h,f)}}Gi.ConversationRecognizerFactory=a;let c=class extends n.Recognizer{constructor(d,h,f){const v=h;r.Contracts.throwIfNull(v,"speechConfig");const g=d;r.Contracts.throwIfNull(g,"conversationImpl"),super(f,v.properties,new i.ConversationConnectionFactory),this.privConversation=g,this.privIsDisposed=!1,this.privProperties=v.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(d){this.privConnection.connected=d}set disconnected(d){this.privConnection.disconnected=d}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(d,h,f){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(d,"token"),this.privReco.conversationTranslatorToken=d,this.resetConversationTimeout(),this.privReco.connectAsync(h,f)}catch(v){if(f)if(v instanceof Error){const g=v;f(g.name+": "+g.message)}else f(v)}}disconnect(d,h){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{d&&d()},f=>{h&&h(f)})}catch(f){if(h)if(f instanceof Error){const v=f;h(v.name+": "+v.message)}else h(f);this.dispose(!0).catch(v=>{e.Events.instance.onEvent(new e.BackgroundEvent(v))})}}sendRequest(d,h,f){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(d,h,f)}catch(v){if(f)if(v instanceof Error){const g=v;f(g.name+": "+g.message)}else f(v);this.dispose(!0).catch(g=>{e.Events.instance.onEvent(new e.BackgroundEvent(g))})}}onToken(d){this.privConversation.onToken(d)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(d){this.privIsDisposed||d&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(d))}createRecognizerConfig(d){return new t.RecognizerConfig(d,this.privProperties)}createServiceRecognizer(d,h,f,v){const g=f;return new o.ConversationServiceAdapter(d,h,g,v,this)}sendMessage(d,h,f){const v=this.privReco;((w,b,C)=>{w!==void 0?w.then(()=>{try{b&&b()}catch(x){C&&C(`'Unhandled error on promise callback: ${x}'`)}},x=>{try{C&&C(x)}catch{}}):C&&C("Null promise")})(v.sendMessageAsync(d),h,f),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Gi.ConversationTranslatorRecognizer=c,Gi}var Fl={},mR;function j9(){if(mR)return Fl;mR=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.TranscriberRecognizer=void 0;const t=Ee(),e=De(),r=ue(),n=we(),i=Br();let o=class extends r.Recognizer{constructor(c,u){const d=c;e.Contracts.throwIfNull(d,"speechTranslationConfig");const h=u;e.Contracts.throwIfNull(h,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(d.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(u,d.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){e.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,c)}set conversation(c){e.Contracts.throwIfNullOrUndefined(c,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=c}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(c){e.Contracts.throwIfNullOrUndefined(c,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=c}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(c,u){(0,t.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),c,u)}stopContinuousRecognitionAsync(c,u){(0,t.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(c,u){const d=this.privReco;e.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendSpeechEventAsync(c,u)}async pushMeetingEvent(c,u){const d=this.privReco;e.Contracts.throwIfNullOrUndefined(d,"serviceRecognizer"),await d.sendMeetingSpeechEventAsync(c,u)}async enforceAudioGating(){const d=(await this.audioConfig.format).channels;if(d===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(d!==8)throw new Error(`Unsupported audio configuration: Detected ${d}-channel audio`)}connectMeetingCallbacks(c){this.isMeetingRecognizer=!0,this.canceled=(u,d)=>{c.canceled&&c.canceled(c,d)},this.recognizing=(u,d)=>{c.transcribing&&c.transcribing(c,d)},this.recognized=(u,d)=>{c.transcribed&&c.transcribed(c,d)},this.sessionStarted=(u,d)=>{c.sessionStarted&&c.sessionStarted(c,d)},this.sessionStopped=(u,d)=>{c.sessionStopped&&c.sessionStopped(c,d)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(c){this.privDisposedRecognizer||(c&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(c))}createRecognizerConfig(c){return new n.RecognizerConfig(c,this.properties)}createServiceRecognizer(c,u,d,h){const f=d;return new n.TranscriptionServiceRecognizer(c,u,f,h,this)}};return Fl.TranscriberRecognizer=o,Fl}var yR;function O9(){return yR||(yR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InternalParticipants=t.ConversationTranslatorMessageTypes=t.ConversationTranslatorCommandTypes=t.ParticipantsListEventArgs=t.ParticipantEventArgs=t.ParticipantAttributeEventArgs=t.MuteAllEventArgs=t.LockRoomEventArgs=t.ConversationReceivedTranslationEventArgs=t.TranscriberRecognizer=t.ConversationRecognizerFactory=t.ConversationConnectionConfig=t.ConversationManager=void 0;var e=b9();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var r=Ky();Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=k9();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=j9();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var o=yA();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return o.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return o.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return o.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return o.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return o.ParticipantsListEventArgs}});var a=SA();Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})})(Bg)),Bg}var qg={},SR;function CA(){return SR||(SR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,(function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"})(t.MetadataType||(t.MetadataType={}));class e{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new e(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(qg)),qg}var ql={},Or={},wR;function N9(){if(wR)return Or;wR=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.SynthesisStartedEvent=Or.ConnectingToSynthesisServiceEvent=Or.SynthesisTriggeredEvent=Or.SpeechSynthesisEvent=void 0;const t=Ee();class e extends t.PlatformEvent{constructor(a,c,u=t.EventType.Info){super(a,u),this.privRequestId=c}get requestId(){return this.privRequestId}}Or.SpeechSynthesisEvent=e;class r extends e{constructor(a,c,u){super("SynthesisTriggeredEvent",a),this.privSessionAudioDestinationId=c,this.privTurnAudioDestinationId=u}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Or.SynthesisTriggeredEvent=r;class n extends e{constructor(a,c){super("ConnectingToSynthesisServiceEvent",a),this.privAuthFetchEventId=c}get authFetchEventId(){return this.privAuthFetchEventId}}Or.ConnectingToSynthesisServiceEvent=n;class i extends e{constructor(a,c){super("SynthesisStartedEvent",a),this.privAuthFetchEventId=c}get authFetchEventId(){return this.privAuthFetchEventId}}return Or.SynthesisStartedEvent=i,Or}var CR;function M9(){if(CR)return ql;CR=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.SynthesisTurn=void 0;const t=Ee(),e=uo(),r=ue(),n=CA(),i=N9();let o=class qm{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,t.createNoDashGuid)(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(c){this.privStreamId=c}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(c){this.privAudioOutputFormat=c}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const c=new r.PropertyCollection;return c.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),c}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const c=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(c),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(c,u,d,h){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=c,this.privRawText=u,this.privIsSSML=d,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",h!==void 0&&(this.privTurnAudioDestination=h,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,h===void 0?void 0:h.id()))}onPreConnectionStart(c){this.privAuthFetchEventId=c,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(c){c&&this.onComplete()}onConnectionEstablishCompleted(c){if(c===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else c===403&&this.onComplete()}onServiceResponseMessage(c){const u=JSON.parse(c);this.streamId=u.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(c){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const u=JSON.parse(c);u.webrtc&&(this.privWebRTCSDP=u.webrtc.connectionString)}onAudioChunkReceived(c){this.isSynthesizing&&(this.privAudioOutputStream.write(c),this.privBytesReceived+=c.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(c))}onTextBoundaryEvent(c){this.updateTextOffset(c.Data.text.Text,c.Type)}onVisemeMetadataReceived(c){c.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=c.Data.AnimationChunk)}onSessionEnd(c){this.privAudioDuration=c.Data.Offset}async constructSynthesisResult(){const c=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,c,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const c=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",c}onEvent(c){t.Events.instance.onEvent(c)}static isXmlTag(c){return c.length>=2&&c[0]==="<"&&c[c.length-1]===">"}updateTextOffset(c,u){u===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(c,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+c.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!qm.isXmlTag(c)&&this.updateTextOffset(c,u))):(this.privSentenceOffset=this.privRawText.indexOf(c,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+c.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!qm.isXmlTag(c)&&this.updateTextOffset(c,u)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(c){return this.privRawText.indexOf("<",c+1)>this.privRawText.indexOf(">",c+1)}};return ql.SynthesisTurn=o,ql}var Ul={},bR;function D9(){if(bR)return Ul;bR=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.SynthesisAdapterBase=void 0;const t=Ee(),e=ue(),r=we(),n=ip();let i=class{constructor(a,c,u,d){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!c)throw new t.ArgumentNullError("connectionFactory");if(!u)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=c,this.privSynthesizerConfig=u,this.privIsDisposed=!1,this.privSessionAudioDestination=d,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const f=h;f.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,f.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}})}get synthesizerConfig(){return this.privSynthesizerConfig}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,c){const u=typeof c=="string"?t.MessageType.Text:t.MessageType.Binary,d=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(u,a,this.privSynthesisTurn.requestId,d,c))}async Speak(a,c,u,d,h,f){let v;if(c?v=a:v=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(v,u,d,h);this.privSuccessCallback=d,this.privErrorCallback=h,this.privSynthesisTurn.startNewSynthesis(u,a,c,f);try{await this.connectImpl();const g=await this.fetchConnection();await this.sendSynthesisContext(g),await this.sendSsmlMessage(g,v,u),this.onSynthesisStarted(u),this.receiveMessage()}catch(g){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,g),Promise.reject(g)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,c,u,d){const h=new e.PropertyCollection;h.setProperty(r.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]);const f=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,d,h);if(this.onSynthesisCancelled(f),this.privSuccessCallback)try{this.privSuccessCallback(f)}catch{}}cancelSynthesisLocal(a,c,u){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,c,u))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const c=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!c)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const u=n.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(u.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(u.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===u.streamId.toLowerCase()&&u.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(u.binaryBody),this.onSynthesizing(u.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(u.binaryBody));break;case"audio.metadata":const d=r.SynthesisAudioMetadata.fromJSON(u.textBody).Metadata;for(const f of d)switch(f.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(f);const v=new e.SpeechSynthesisWordBoundaryEventArgs(f.Data.Offset,f.Data.Duration,f.Data.text.Text,f.Data.text.Length,f.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,f.Data.text.BoundaryType);this.onWordBoundary(v);break;case r.MetadataType.Bookmark:const g=new e.SpeechSynthesisBookmarkEventArgs(f.Data.Offset,f.Data.Bookmark);this.onBookmarkReached(g);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(f),f.Data.IsLastAnimation){const w=new e.SpeechSynthesisVisemeEventArgs(f.Data.Offset,f.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(w)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(f);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(f);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let h;try{h=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(h)}catch(f){this.privErrorCallback&&this.privErrorCallback(f)}this.onSynthesisCompleted(h);break;default:this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const c=this.synthesisContext.toJSON();if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",c))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(u=>u.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,t.createNoDashGuid)(),this.privConnectionId=(0,t.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const c=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=c.then(async u=>{this.privSynthesisTurn.onAuthCompleted(!1);const d=await this.privConnectionFactory.create(this.privSynthesizerConfig,u,this.privConnectionId);d.events.attach(f=>{this.connectionEvents.onEvent(f)});const h=await d.open();return h.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.resolve(d)):h.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(h.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${h.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${h.reason}`))},u=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(u)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,c){if(c)return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",c))}sendSsmlMessage(a,c,u){return a.send(new n.SpeechConnectionMessage(t.MessageType.Text,"ssml",u,"application/ssml+xml",c))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Ul.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Ul}var Vl={},xR;function L9(){if(xR)return Vl;xR=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.AvatarSynthesisAdapter=void 0;const t=ue(),e=we();let r=class extends e.SynthesisAdapterBase{constructor(i,o,a,c,u){super(i,o,a,void 0),this.privAvatarSynthesizer=c,this.privSynthesizer=c,this.privAvatarConfig=u}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,photoAvatarBaseModel:this.privAvatarConfig.photoAvatarBaseModel,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const o=new t.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,o)}catch{}}}};return Vl.AvatarSynthesisAdapter=r,Vl}var Wl={},PR;function z9(){if(PR)return Wl;PR=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.SpeechSynthesisAdapter=void 0;const t=ue(),e=we();let r=class extends e.SynthesisAdapterBase{constructor(i,o,a,c,u){super(i,o,a,u),this.privSpeechSynthesizer=c,this.privSynthesizer=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const o=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(i,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,o)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const o=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,o));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const o=new t.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,o)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Wl.SpeechSynthesisAdapter=r,Wl}var Hl={},_R;function B9(){if(_R)return Hl;_R=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.SynthesisRestAdapter=void 0;const t=Qt(),e=ue(),r=xn(),n=dr();let i=class{constructor(a,c){let u=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!u){const h=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),f=r.ConnectionFactoryBase.getHostSuffix(h);u=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${h}.tts.speech${f}`)}this.privUri=`${u}/cognitiveservices/voices/list`;const d=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(d),this.privAuthentication=c}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(c=>(this.privRestAdapter.setHeaders(c.headerName,c.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return Hl.SynthesisRestAdapter=i,Hl}var Ug={},RR;function F9(){return RR||(RR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=we();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));class n{constructor(o,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=o||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(o){this.privSynthesisServiceType=o}set synthesisVideoSection(o){this.privSpeechServiceConfig.Context.synthesis={video:o}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}setContextFromJson(o){const a=JSON.parse(o);a.system&&(this.privSpeechServiceConfig.Context.system=a.system),a.os&&(this.privSpeechServiceConfig.Context.os=a.os),a.audio&&(this.privSpeechServiceConfig.Context.audio=a.audio),a.synthesis&&(this.privSpeechServiceConfig.Context.synthesis=a.synthesis)}}t.SynthesizerConfig=n})(Ug)),Ug}var Kl={},ER;function q9(){if(ER)return Kl;ER=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.SynthesisContext=void 0;const t=ue();let e=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!n?.bookmarkReached,punctuationBoundaryEnabled:n?.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!n?.wordBoundary),sentenceBoundaryEnabled:n?.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!n?.visemeReceived,wordBoundaryEnabled:n?.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!n?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n?.autoDetectSourceLanguage}}}};return Kl.SynthesisContext=e,Kl}var Vg={},TR;function U9(){return TR||(TR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(c){this.context=c}serialize(){return JSON.stringify(this,(c,u)=>{if(u&&typeof u=="object"&&!Array.isArray(u)){const d={};for(const h in u)Object.hasOwnProperty.call(u,h)&&(d[h&&h.charAt(0).toLowerCase()+h.substring(1)]=u[h]);return d}return u})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(c){this.recognition=c.toLowerCase()}}t.SpeechServiceConfig=e;class r{constructor(c){this.system=new n,this.os=c}}t.Context=r;class n{constructor(){const c="1.47.0";this.name="SpeechSDK",this.version=c,this.build="JavaScript",this.lang="JavaScript"}}t.System=n;class i{constructor(c,u,d){this.platform=c,this.name=u,this.version=d}}t.OS=i;class o{constructor(c,u,d){this.manufacturer=c,this.model=u,this.version=d}}t.Device=o,(function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"})(t.connectivity||(t.connectivity={})),(function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"})(t.type||(t.type={}))})(Vg)),Vg}var AR;function we(){return AR||(AR=1,(function(t){var e=Oi&&Oi.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c),Object.defineProperty(o,u,{enumerable:!0,get:function(){return a[c]}})}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),r=Oi&&Oi.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=t.SpeechSynthesisAdapter=t.AvatarSynthesisAdapter=void 0,r(FL(),t),r(qL(),t),r(Fy(),t),r(UL(),t),r(VL(),t),r(qy(),t),r(F7(),t),r(q7(),t),r(U7(),t),r(V7(),t),r(W7(),t),r(H7(),t),r(K7(),t),r(G7(),t),r($7(),t),r(aA(),t),r(J7(),t),r(Q7(),t),r(Y7(),t),r(X7(),t),r(Z7(),t),r(e9(),t),r(t9(),t),r(r9(),t),r(n9(),t),r(i9(),t),r(o9(),t),r(a9(),t),r(c9(),t),r(l9(),t),r(d9(),t),r(p9(),t),r(v9(),t),r(w9(),t),r(C9(),t),r(O9(),t),r(CA(),t),r(M9(),t),r(D9(),t);var n=L9();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=z9();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(B9(),t),r(F9(),t),r(q9(),t),r(U9(),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="UND"})(Oi)),Oi}var IR;function V9(){return IR||(IR=1,(function(t){var e=ji&&ji.__createBinding||(Object.create?(function(i,o,a,c){c===void 0&&(c=a),Object.defineProperty(i,c,{enumerable:!0,get:function(){return o[a]}})}):(function(i,o,a,c){c===void 0&&(c=a),i[c]=o[a]})),r=ji&&ji.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=we();new n.AgentConfig,r(ue(),t)})(ji)),ji}var Ae=V9();const Qe=async(t,e,r,n)=>{try{const{data:{user:i}}=await he.auth.getUser();if(!i)return;const{data:o}=await he.from("units").select("id").eq("unit_number",parseInt(t)).single();if(!o)return;await he.from("user_progress").upsert({user_id:i.id,unit_id:o.id,game_type:e,score:Math.round(r),progress_percent:Math.round(n),updated_at:new Date().toISOString()},{onConflict:"user_id, unit_id, game_type"})}catch(i){console.error("Progress Sync Error:",i)}},W9=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState([]),[h,f]=E.useState("LOADING"),[v,g]=E.useState(!1),[w,b]=E.useState(!1),[C,x]=E.useState(null),R=E.useRef(null),_=E.useRef(null),I=100;E.useEffect(()=>{async function U(){try{const{data:{user:F}}=await he.auth.getUser(),{data:H}=await he.from("course_content").select("content").eq("unit_id",e).eq("category","sight_word");if(H&&H.length>0){const $=H.map(V=>V.content.toLowerCase().trim()).filter(V=>V!=="");let ee=[];for(;ee.length<40;){const V=[...$].sort(()=>Math.random()-.5);ee=[...ee,...V]}const{data:X}=await he.from("user_progress").select("*").eq("user_id",F.id).eq("unit_id",e);let Y=0;if(X){const V=X.find(J=>J.game_type==="sight-word-glow"||J.game_type==="sight_word_glow");Y=V?.points||V?.progress_percent||0}n(ee),c(Y),f("SPELLING")}else f("ERROR")}catch{f("ERROR")}}U();const L=window.SpeechRecognition||window.webkitSpeechRecognition;return L&&(_.current=new L,_.current.lang="en-US",_.current.onstart=()=>g(!0),_.current.onend=()=>g(!1),_.current.onresult=F=>{const H=F.results[0][0].transcript.toLowerCase().trim();D(H)}),()=>{R.current&&R.current.close()}},[e]);const k=U=>{if(!U||w)return;b(!0);const L=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),F=`
      <speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
        <voice name="en-US-JennyNeural">
          <prosody rate="0.75">
            ${U}
          </prosody>
        </voice>
      </speak>`,H=new Ae.SpeechSynthesizer(L);R.current=H,H.speakSsmlAsync(F,$=>{b(!1),H.close()},$=>{b(!1),H.close()})},M=r[i]||"",B=U=>{if(h==="SPELLING")if(U===u.length){const L=[...u,U];d(L),L.length===M.length&&setTimeout(()=>f("SPEAKING"),500)}else u.includes(U)||(x("wrong-letter"),new Audio("/audio/wrong.mp3").play().catch(()=>{}),setTimeout(()=>x(null),400))},O=()=>{if(!(!_.current||v||h!=="SPEAKING"))try{_.current.start()}catch{_.current.stop()}},D=U=>{const L=M.toLowerCase().trim();U.includes(L)||L.includes(U)?(new Audio("/audio/correct.mp3").play().catch(()=>{}),x("correct"),f("FEEDBACK"),c(F=>{const H=F+3;return Qe(e,"sight-word-glow",Math.min(100,H),H),H}),setTimeout(()=>{if(a+3>=I){f("FINISHED");return}x(null),d([]),o(F=>F+1),f("SPELLING")},1200)):(new Audio("/audio/wrong.mp3").play().catch(()=>{}),x("wrong-speech"),c(F=>Math.max(0,F-3)),setTimeout(()=>{x(null),f("SPEAKING")},1200))};return h==="LOADING"?y.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center text-white text-3xl font-black italic",children:"SYNCING..."}):y.jsxs("div",{className:"min-h-screen bg-[#0f172a] relative font-sans text-white select-none flex flex-col items-center",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between bg-white/5 backdrop-blur-md sticky top-0 z-[100]",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white/10 p-4 rounded-2xl active:scale-95 transition-transform",children:y.jsx(ot,{})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/40 rounded-full border-4 border-white/10 p-1 relative overflow-hidden",children:y.jsx(ie.div,{animate:{width:`${Math.min(100,a)}%`},className:"h-full bg-cyan-400 rounded-full shadow-[0_0_15px_#22d3ee]"})}),y.jsx("span",{className:"text-[10px] font-black uppercase mt-2 text-cyan-300",children:"Goal: 100 Stars"})]}),y.jsxs("div",{className:"bg-indigo-600 px-6 py-3 rounded-2xl flex items-center gap-3 border-b-4 border-indigo-900 shadow-xl min-w-[110px] justify-center",children:[y.jsx(Be,{className:"text-yellow-400"})," ",y.jsx("span",{className:"text-2xl font-black",children:a})]})]}),y.jsxs("div",{className:"mt-8 mb-4 bg-white/10 px-8 py-3 rounded-full border border-white/20 flex items-center gap-3",children:[y.jsx(gT,{className:"text-yellow-400 animate-pulse"}),y.jsx("p",{className:"text-lg font-black uppercase tracking-widest italic",children:h==="FINISHED"?"Victory!":h==="SPELLING"?"1. Click the letters!":h==="SPEAKING"?"2. Click mic to say the word!":"Processing..."})]}),y.jsx("div",{className:"flex flex-col items-center justify-center mt-20",children:h==="FINISHED"?y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white p-12 rounded-[4rem] flex flex-col items-center shadow-2xl",children:[y.jsx(wn,{className:"text-green-500 text-9xl mb-6"}),y.jsx("h2",{className:"text-slate-800 text-4xl font-black uppercase mb-8",children:"100 Stars!"}),y.jsx("button",{onClick:()=>t(-1),className:"bg-indigo-600 text-white px-12 py-6 rounded-[2rem] text-2xl font-black uppercase",children:"Finish"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"flex gap-4 mb-20 flex-wrap justify-center",children:M.split("").map((U,L)=>y.jsx(ie.div,{onClick:()=>B(L),animate:C==="wrong-letter"&&L===u.length?{x:[-5,5,-5,5,0]}:u.includes(L)?{color:"#22d3ee",textShadow:"0 0 25px #22d3ee",scale:1.15}:{color:"#334155",scale:1},className:"text-9xl font-black lowercase cursor-pointer select-none",children:U},`${i}-${L}`))}),y.jsx("div",{className:"h-48 flex items-center justify-center",children:y.jsxs(ur,{mode:"wait",children:[h==="SPELLING"&&y.jsx(ie.button,{initial:{scale:0},animate:{scale:1},exit:{scale:0},onClick:()=>k(M),disabled:w,className:`p-10 rounded-full border-b-8 shadow-xl transition-all ${w?"bg-cyan-500 animate-pulse":"bg-slate-700 border-slate-900"}`,children:w?y.jsx(li,{className:"animate-spin",size:48}):y.jsx(ui,{size:48})},"speaker"),h==="SPEAKING"&&y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"flex flex-col items-center",children:[y.jsx(ie.button,{onClick:O,className:`p-10 rounded-full border-b-8 shadow-2xl transition-all ${v?"bg-red-500 border-red-800 animate-pulse":"bg-green-500 border-green-800"}`,children:y.jsx($r,{size:56})}),y.jsx("p",{className:"mt-4 font-black uppercase text-xs tracking-widest text-green-400",children:"Tap mic and read!"})]},"mic"),C&&C!=="wrong-letter"&&y.jsx(ie.div,{initial:{scale:0},animate:{scale:1.2},exit:{scale:0},children:y.jsx("p",{className:`text-6xl font-black uppercase italic tracking-tighter ${C==="correct"?"text-green-400":"text-red-400"}`,children:C==="correct"?"+3 STARS!":"-3 STARS"})},"fdbk")]})})]})})]})},H9=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState("LOADING"),[h,f]=E.useState(!1),[v,g]=E.useState(null),w=E.useRef(null),b=100;E.useEffect(()=>{async function I(){try{const{data:{user:M}}=await he.auth.getUser(),{data:B}=await he.from("course_content").select("content").eq("unit_id",e).eq("category","sight_word");if(B&&B.length>0){const O=B.map(F=>F.content.toLowerCase().trim()).filter(F=>F!=="");let D=[];for(;D.length<40;){const F=[...O].sort(()=>Math.random()-.5);D=[...D,...F]}const{data:U}=await he.from("user_progress").select("*").eq("user_id",M.id).eq("unit_id",e);let L=0;if(U){const F=U.find(H=>H.game_type==="snapshot-stars"||H.game_type==="snapshot_stars");L=F?.points||F?.progress_percent||0}n(D),o(Math.min(b,L)),d("IDLE")}else d("ERROR")}catch{d("ERROR")}}I();const k=window.SpeechRecognition||window.webkitSpeechRecognition;k&&(w.current=new k,w.current.lang="en-US",w.current.onstart=()=>f(!0),w.current.onend=()=>f(!1),w.current.onresult=M=>{const B=M.results[0][0].transcript.toLowerCase().trim();_(B)})},[e]);const C=r[a]||"",x=()=>{u!=="IDLE"||!C||(d("FLIPPED"),setTimeout(()=>{d("IDLE")},700))},R=()=>{if(!(!w.current||h||u!=="IDLE"))try{w.current.start()}catch{w.current.stop()}},_=I=>{const k=C.toLowerCase().trim();I.includes(k)||k.includes(I)?(new Audio("/audio/correct.mp3").play().catch(()=>{}),g("correct"),d("FEEDBACK"),o(M=>{const B=Math.min(b,M+3);return Qe(e,"snapshot-stars",B,B),B}),setTimeout(()=>{g(null),c(M=>M+1),d("IDLE")},1e3)):(new Audio("/audio/wrong.mp3").play().catch(()=>{}),g("wrong"),d("FEEDBACK"),o(M=>Math.max(0,M-3)),setTimeout(()=>{g(null),d("IDLE")},1e3))};return E.useEffect(()=>{i>=b&&u!=="LOADING"&&d("FINISHED")},[i]),u==="LOADING"?y.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center text-white text-3xl font-black italic",children:"LOADING..."}):u==="ERROR"?y.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center text-white text-3xl font-black",children:"NO SIGHT WORDS FOUND!"}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-indigo-950 relative font-sans text-white select-none flex flex-col items-center",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between bg-white/5 backdrop-blur-md sticky top-0 z-[100]",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white/10 p-4 rounded-2xl active:scale-95 border-b-4 border-white/5",children:y.jsx(ot,{})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/40 rounded-full border-4 border-white/10 p-1 relative overflow-hidden",children:y.jsx(ie.div,{initial:{width:0},animate:{width:`${i/b*100}%`},className:"h-full bg-yellow-400 rounded-full shadow-[0_0_15px_rgba(250,204,21,0.6)]"})}),y.jsx("span",{className:"text-[10px] font-black uppercase mt-2 text-amber-300 italic tracking-widest",children:"Target Score: 100"})]}),y.jsxs("div",{className:"bg-amber-500 px-6 py-3 rounded-2xl flex items-center gap-3 border-b-4 border-amber-800 shadow-xl min-w-[110px] justify-center text-amber-950",children:[y.jsx(Be,{})," ",y.jsx("span",{className:"text-2xl font-black",children:i})]})]}),y.jsxs("div",{className:"mt-8 mb-4 bg-white/10 px-8 py-3 rounded-full border border-white/20 flex items-center gap-3 shadow-lg",children:[y.jsx(gT,{className:"text-yellow-400 animate-pulse"}),y.jsx("p",{className:"text-lg font-black uppercase tracking-widest italic text-center",children:u==="FINISHED"?"Victory!":u==="FLIPPED"?"Snapshot!":v?"Checking...":h?"Speak now!":"1. Tap the Card!"})]}),y.jsx("div",{className:"flex flex-col items-center justify-center perspective-[2000px]",children:u==="FINISHED"?y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white p-12 rounded-[4rem] flex flex-col items-center shadow-2xl",children:[y.jsx(wn,{className:"text-green-500 text-9xl mb-6"}),y.jsx("h2",{className:"text-slate-800 text-5xl font-black uppercase mb-8 text-center leading-tight italic",children:"Snapshot Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"bg-indigo-600 text-white px-12 py-6 rounded-[2rem] text-2xl font-black uppercase shadow-[0_10px_0_#4338ca] active:translate-y-2 transition-all",children:"Finish Game"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"relative w-80 h-[28rem] cursor-pointer",onClick:x,children:y.jsxs(ie.div,{className:"w-full h-full relative",animate:{rotateY:u==="FLIPPED"?180:0},transition:{type:"spring",stiffness:260,damping:20},style:{transformStyle:"preserve-3d"},children:[y.jsx("div",{className:"absolute inset-0 bg-white rounded-[4rem] shadow-2xl flex items-center justify-center border-slate-200",style:{backfaceVisibility:"hidden"},children:y.jsx("div",{className:"text-[10rem] drop-shadow-xl animate-pulse text-slate-800 italic font-black",children:""})}),y.jsx("div",{className:"absolute inset-0 bg-indigo-600 rounded-[4rem] shadow-2xl flex items-center justify-center border-indigo-900",style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:y.jsx("span",{className:"text-white text-7xl font-black italic lowercase text-center px-4 leading-tight drop-shadow-lg",children:C})})]})},a),y.jsx("div",{className:"mt-12 flex flex-col items-center h-48",children:y.jsxs(ur,{mode:"wait",children:[u==="IDLE"&&y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"flex flex-col items-center",children:[y.jsx(ie.button,{onClick:R,className:`p-10 rounded-full shadow-2xl border-b-8 ${h?"bg-red-500 border-red-800 animate-pulse shadow-[0_0_20px_#ef4444]":"bg-green-500 border-green-800 shadow-[0_0_20px_#22c55e]"}`,children:y.jsx($r,{size:56,className:"text-white"})}),y.jsx("p",{className:"mt-4 font-black uppercase text-xs tracking-widest text-green-400",children:"Say the word!"})]},"mic-btn"),v&&y.jsx(ie.div,{initial:{scale:0},animate:{scale:1.2},exit:{scale:0},children:y.jsx("p",{className:`text-6xl font-black uppercase italic tracking-tighter ${v==="correct"?"text-green-400":"text-red-400"}`,children:v==="correct"?"+3 STARS!":"-3 STARS"})},"fdbk")]})})]})})]})},K9=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState(null),[i,o]=E.useState([]),[a,c]=E.useState(0),[u,d]=E.useState(!1),[h,f]=E.useState(!1),[v,g]=E.useState(!0),w=E.useRef(0),b=E.useRef(0),C=E.useRef(null),x=E.useRef([]);E.useEffect(()=>{w.current=a},[a]);const R=async D=>{try{const{data:{user:U}}=await he.auth.getUser();if(!U)return;await he.from("user_progress").upsert({user_id:U.id,unit_id:e,game_id:"sight_word",progress_percent:Math.round(D),last_played:new Date().toISOString()},{onConflict:"user_id,unit_id,game_id"})}catch(U){console.error("Sync Error:",U)}},_=D=>D<30?{spawnRate:2200,speed:10}:D<70?{spawnRate:1700,speed:7}:{spawnRate:1200,speed:5};E.useEffect(()=>{async function D(){try{g(!0);const{data:{user:U}}=await he.auth.getUser(),{data:L}=await he.from("course_content").select("content").eq("unit_id",e).eq("category","sight_word");if(L&&L.length>0){const F=L.map($=>$.content);x.current=F;const{data:H}=await he.from("user_progress").select("progress_percent").eq("user_id",U.id).eq("unit_id",e).eq("game_id","sight_word").maybeSingle();H&&c(H.progress_percent||0)}}catch(U){console.error(U)}finally{g(!1)}}return D(),()=>clearInterval(C.current)},[e]),E.useEffect(()=>{if(u&&!h&&r){const D=_(w.current);C.current=setInterval(B,D.spawnRate)}else clearInterval(C.current);return()=>clearInterval(C.current)},[u,h,r]);const I=D=>{window.speechSynthesis.cancel();const U=new SpeechSynthesisUtterance(D);U.rate=.9,window.speechSynthesis.speak(U)},k=()=>{o([]),d(!0),M()},M=()=>{if(x.current.length===0)return;const D=x.current[Math.floor(Math.random()*x.current.length)];n(D),setTimeout(()=>I(D),500)},B=()=>{const D=b.current++,U=_(w.current),L=Math.random()<.45?r:x.current[Math.floor(Math.random()*x.current.length)];o(F=>[...F,{id:D,word:L,x:Math.random()*75+5,duration:U.speed,status:"active"}])},O=(D,U)=>{const L=U===r,F=L?"/audio/correct.mp3":"/audio/wrong.mp3",H=new Audio(F);if(H.volume=1,H.play().catch($=>console.error("Sound blocked:",$)),o($=>$.map(ee=>ee.id===D?{...ee,status:L?"correct":"wrong"}:ee)),L){const $=Math.min(100,a+3);c($),R($),setTimeout(()=>{o(ee=>ee.filter(X=>X.id!==D)),$>=100?(d(!1),f(!0),Qe(e,"sight_word",100,100)):M()},400)}else{const $=Math.max(0,a-3);c($),R($),setTimeout(()=>{o(ee=>ee.filter(X=>X.id!==D))},400)}};return v?y.jsx("div",{className:"min-h-screen bg-sky-500 flex items-center justify-center text-white text-3xl font-black italic uppercase tracking-widest",children:"Loading..."}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-400 to-blue-600 overflow-hidden relative font-sans text-white select-none",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-[100] bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-sky-600 shadow-[0_5px_0_#cbd5e1] active:translate-y-1 active:shadow-none transition-all",children:y.jsx(ot,{})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${a}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-[0_0_15px_rgba(52,211,153,0.8)]"})}),y.jsxs("span",{className:"text-[10px] font-black uppercase mt-2 tracking-widest",children:[Math.round(a),"% COMPLETE"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-[0_6px_0_#d97706] flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700 animate-pulse"}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(a)})]})]}),!u&&!h&&y.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/40 backdrop-blur-sm",children:y.jsxs("div",{className:"bg-white text-slate-900 p-12 rounded-[3.5rem] text-center shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx("h1",{className:"text-4xl font-black mb-8 uppercase text-blue-600 italic tracking-tighter",children:"Sight Word Pop"}),y.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-16 py-5 rounded-2xl font-black text-2xl shadow-[0_8px_0_#1e3a8a] hover:scale-105 active:translate-y-1 transition-all uppercase tracking-widest",children:"Start!"})]})}),u&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"absolute top-32 w-full flex flex-col items-center z-50",children:y.jsx("button",{onClick:()=>I(r),className:"bg-white text-blue-600 p-10 rounded-full shadow-2xl border-4 border-white animate-pulse active:scale-95 transition-all",children:y.jsx(ui,{size:54})})}),y.jsx("div",{className:"absolute inset-0 z-10",children:y.jsx(ur,{children:i.map(D=>y.jsxs(ie.div,{initial:{y:"110vh",opacity:0,scale:.8},animate:{y:"-20vh",opacity:1,scale:1},exit:{scale:3,opacity:0},transition:{y:{duration:D.duration,ease:"linear"},opacity:{duration:.3}},onAnimationComplete:()=>o(U=>U.filter(L=>L.id!==D.id)),onClick:()=>D.status==="active"&&O(D.id,D.word),className:"absolute rounded-full cursor-pointer flex items-center justify-center group",style:{left:`${D.x}%`,width:"160px",height:"160px",background:D.status==="correct"?"rgba(34, 197, 94, 0.8)":D.status==="wrong"?"rgba(239, 68, 68, 0.8)":"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.1) 40%, rgba(100,200,255,0.2) 80%, rgba(255,255,255,0.4) 100%)",boxShadow:"inset -10px -10px 20px rgba(0,0,0,0.1), inset 10px 10px 20px rgba(255,255,255,0.5), 0 10px 30px rgba(0,0,0,0.1)",border:"2px solid rgba(255,255,255,0.6)",backdropFilter:"blur(2px)",touchAction:"none"},children:[y.jsx("div",{className:"absolute top-4 left-6 w-8 h-4 bg-white/40 rounded-full rotate-[-45deg]"}),D.status==="correct"?y.jsx(tp,{className:"text-white text-7xl drop-shadow-lg"}):D.status==="wrong"?y.jsx(W8,{className:"text-white text-7xl drop-shadow-lg"}):y.jsx("span",{className:"text-blue-950 font-black text-4xl italic pointer-events-none drop-shadow-md tracking-tighter",children:D.word})]},D.id))})})]}),h&&y.jsx("div",{className:"absolute inset-0 z-[110] flex items-center justify-center bg-black/60 p-6",children:y.jsxs("div",{className:"bg-white text-slate-900 p-12 rounded-[3.5rem] text-center shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mx-auto mb-6 animate-bounce"}),y.jsx("h1",{className:"text-4xl font-black uppercase text-blue-600 italic tracking-tighter",children:"Pop Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-blue-600 text-white py-5 rounded-2xl font-black text-xl w-full shadow-lg",children:"Next Adventure"})]})})]})},kR="https://mbmswkltiqepwcynwgfr.supabase.co",jR={a:"a",b:"buh",c:"kuh",d:"duh",e:"eh",f:"fff",g:"guh",h:"huh",i:"ih",j:"juh",k:"kuh",l:"lll",m:"mmm",n:"nnn",o:"o",p:"puh",qu:"kwuh",r:"rrr",s:"sss",t:"tuh",u:"uh",v:"vvv",w:"wuh",x:"ks",y:"yuh",z:"zzz"},G9=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(!0),[u,d]=E.useState("LISTENING"),[h,f]=E.useState(0),[v,g]=E.useState("Listen closely..."),[w,b]=E.useState(0),[C,x]=E.useState("IDLE"),R=E.useRef(0),_=E.useRef(!1),I=E.useRef(null),k=E.useRef(0),M=E.useRef(!1),B=E.useRef(new Set);E.useEffect(()=>{R.current=h},[h]),E.useEffect(()=>()=>{if(I.current)try{I.current.close()}catch{}r.length>0&&R.current>0&&Qe(e,"phonics_fusion",R.current,R.current)},[r.length,e]),E.useEffect(()=>{if(M.current)return;M.current=!0;async function Y(){c(!0);const{data:{user:V}}=await he.auth.getUser();if(!V){c(!1);return}const{data:J,error:j}=await he.from("course_content").select("*").eq("unit_id",e).in("category",["decodable","word"]);if(j||!J||J.length===0){c(!1);return}const T=J.map(Z=>{const se=Z.content.toLowerCase().trim(),le=se.match(/[aeiouy]/),ce=le?le.index:1;return{word:se,image:Z.image,part1:se.slice(0,ce),part2:se.slice(ce)}});n(T);const{data:W}=await he.from("user_progress").select("progress_percent").eq("user_id",V.id).eq("unit_id",e).eq("game_type","phonics_fusion").maybeSingle();if(W&&W.progress_percent>0&&W.progress_percent<100){const Z=Math.floor(W.progress_percent/100*T.length);o(Z),f(W.progress_percent),R.current=W.progress_percent}c(!1)}Y()},[e]);const O=r[i],D=O?`${kR}/storage/v1/object/public/assets/${O.image||O.word+".png"}`:"",U=(Y,V=!1)=>new Promise(J=>{const j=V&&jR[Y]?jR[Y]:Y,T=new SpeechSynthesisUtterance(j);T.lang="en-US",T.onend=J,window.speechSynthesis.speak(T)}),L=Y=>new Promise(V=>{const J=new Audio(`${kR}/storage/v1/object/public/audio/${Y.toLowerCase().trim()}.mp3`);J.oncanplaythrough=()=>J.play().then(()=>J.onended=V).catch(()=>U(Y,!0).then(V)),J.onerror=()=>U(Y,!0).then(V)}),F=async Y=>{B.current.has(i)||(B.current.add(i),_.current=!0,g("Listen..."),b(1),await L(Y.part1),b(2),await L(Y.part2),b(0),_.current=!1,g(`Say: "${Y.word}"`))};E.useEffect(()=>{O&&u!=="WON"&&setTimeout(()=>F(O),100)},[i,O]);const H=()=>{if(_.current)return;x("LISTENING"),k.current=0;const Y=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),V=new Ae.SpeechRecognizer(Y,Ae.AudioConfig.fromDefaultMicrophoneInput());I.current=V,new Ae.PronunciationAssessmentConfig(O.word,Ae.PronunciationAssessmentGradingSystem.HundredMark,Ae.PronunciationAssessmentGranularity.Phoneme,!0).applyTo(V),V.startContinuousRecognitionAsync(),V.recognized=(j,T)=>{if(T.result.reason===Ae.ResultReason.RecognizedSpeech){const W=Ae.PronunciationAssessmentResult.fromResult(T.result);k.current=Math.max(k.current,W.accuracyScore||0)}}},$=()=>{C==="SUCCESS"||_.current||I.current&&I.current.stopContinuousRecognitionAsync(()=>{I.current.close(),ee()})},ee=()=>{k.current>=50?X():(x("ERROR"),new Audio("/audio/wrong.mp3").play().catch(()=>{}),setTimeout(()=>x("IDLE"),1e3))},X=async()=>{_.current=!0,x("SUCCESS"),new Audio("/audio/correct.mp3").play().catch(()=>{});const Y=100/r.length,V=Math.min(100,Math.round(h+Y));f(V),setTimeout(async()=>{i<r.length-1?(o(J=>J+1),x("IDLE"),_.current=!1):(f(100),await Qe(e,"phonics_fusion",100,100),d("WON"))},2e3)};return a?y.jsx("div",{className:"min-h-screen bg-indigo-500 flex items-center justify-center text-white text-2xl font-black italic animate-pulse",children:"Mixing Sounds..."}):u==="WON"?y.jsxs("div",{className:"min-h-screen bg-indigo-50 flex flex-col items-center justify-center",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mb-4 animate-bounce drop-shadow-lg"}),y.jsx("h1",{className:"text-5xl font-black text-indigo-800 uppercase tracking-tighter",children:"Fusion Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-indigo-600 text-white px-10 py-4 rounded-2xl font-black text-xl shadow-[0_8px_0_#3730a3] active:translate-y-1 active:shadow-none transition-all",children:"Back"})]}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-400 to-indigo-600 flex flex-col items-center relative font-sans text-white select-none",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-indigo-600 shadow-[0_5px_0_#818cf8] active:translate-y-1 active:shadow-none transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${h}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full"})}),y.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest mt-2",children:[Math.round(h),"% Complete"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-[0_6px_0_#d97706] flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700 animate-pulse",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(h)})]})]}),y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-4xl p-6",children:[y.jsx(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-4 rounded-[3rem] shadow-2xl mb-12 w-80 h-80 flex items-center justify-center relative border-b-[12px] border-slate-200",children:D?y.jsx("img",{src:D,alt:"Clue",className:"w-full h-full object-contain"}):y.jsx("span",{className:"text-9xl",children:""})}),y.jsxs("div",{className:"flex items-center gap-6 mb-16",children:[y.jsx("div",{className:`text-7xl font-black px-8 py-5 rounded-3xl transition-all duration-300 italic ${w===1?"bg-yellow-400 text-indigo-900 scale-110 shadow-[0_0_30px_#facc15]":"bg-black/20 text-white border-2 border-white/20"}`,children:O.part1}),y.jsx("div",{className:"text-5xl font-black opacity-30",children:"+"}),y.jsx("div",{className:`text-7xl font-black px-8 py-5 rounded-3xl transition-all duration-300 italic ${w===2?"bg-yellow-400 text-indigo-900 scale-110 shadow-[0_0_30px_#facc15]":"bg-black/20 text-white border-2 border-white/20"}`,children:O.part2})]}),y.jsx("h2",{className:"text-3xl font-black text-white mb-10 h-8 drop-shadow-md italic uppercase tracking-tighter",children:v}),y.jsxs("div",{className:"flex items-center gap-8",children:[y.jsx("button",{onClick:()=>F(O),disabled:_.current,className:"w-24 h-24 rounded-3xl flex items-center justify-center text-white bg-white/20 hover:bg-white/40 shadow-xl transition active:scale-95 border-b-4 border-black/20",children:y.jsx(ui,{size:36})}),y.jsx("button",{onMouseDown:H,onMouseUp:$,onTouchStart:Y=>{Y.preventDefault(),H()},onTouchEnd:Y=>{Y.preventDefault(),$()},className:`w-36 h-36 rounded-full flex items-center justify-center text-7xl shadow-2xl transition-all active:scale-95 border-4 border-white
                    ${C==="LISTENING"?"bg-blue-500":C==="SUCCESS"?"bg-green-500":"bg-white text-indigo-600"}`,children:C==="LISTENING"?y.jsx($r,{className:"animate-bounce"}):C==="PROCESSING"?y.jsx(li,{className:"animate-spin"}):C==="SUCCESS"?y.jsx(tp,{}):y.jsx(My,{})}),y.jsx("div",{className:"w-24"})]})]})]})},$9=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(!0),[u,d]=E.useState("CHOPPING"),[h,f]=E.useState(0),[v,g]=E.useState(0),[w,b]=E.useState(!1),[C,x]=E.useState("IDLE"),R=E.useRef(null);E.useEffect(()=>{async function O(){c(!0);try{const{data:{user:D}}=await he.auth.getUser();if(!D)return;const{data:U}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","decodable");if(U&&U.length>0){const L=U.map(F=>{const H=F.content.toLowerCase().trim(),$=H.match(/[aeiouy]/),ee=$?$.index:1;return{word:H,splitIndex:ee,part1:H.slice(0,ee),part2:H.slice(ee)}});n(L)}}catch(D){console.error("Data Load Error:",D)}c(!1)}return O(),()=>{R.current&&R.current.close()}},[e]);const _=r[i],I=O=>{if(!_)return;let D=O==="part1"?_.part1:_.part2;const U=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus");U.speechSynthesisVoiceName="en-US-JennyNeural";const L=new Ae.SpeechSynthesizer(U),F=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><voice name="en-US-JennyNeural"><prosody rate="0.75">${D}</prosody></voice></speak>`;L.speakSsmlAsync(F,()=>L.close(),()=>L.close())},k=O=>{O+1===_.splitIndex?(new Audio("/audio/slash.mp3").play().catch(()=>{}),d("ANIMATING"),setTimeout(()=>{d("SPEAKING"),f(0),I("part1")},1e3)):(new Audio("/audio/wrong.mp3").play().catch(()=>{}),b(!0),setTimeout(()=>b(!1),500))},M=async()=>{if(C==="IDLE"){x("LISTENING");try{const O=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),D=Ae.AudioConfig.fromDefaultMicrophoneInput(),U=new Ae.SpeechRecognizer(O,D);R.current=U;let L=h===0?_.part1:h===1?_.part2:_.word;new Ae.PronunciationAssessmentConfig(L,Ae.PronunciationAssessmentGradingSystem.HundredMark,Ae.PronunciationAssessmentGranularity.Phoneme,!0).applyTo(U),U.recognizeOnceAsync(H=>{if(H.reason===Ae.ResultReason.RecognizedSpeech){const $=Ae.PronunciationAssessmentResult.fromResult(H);console.log("Accuracy Score:",$.accuracyScore),$.accuracyScore>=30?B():(x("ERROR"),new Audio("/audio/wrong.mp3").play().catch(()=>{}),setTimeout(()=>x("IDLE"),1500))}else console.warn("Speech not recognized:",H.errorDetails),x("IDLE");U.close()},H=>{console.error("Recognizer Error:",H),x("IDLE"),U.close()})}catch(O){console.error("Mic Initialization Error:",O),x("IDLE")}}},B=async()=>{if(x("SUCCESS"),new Audio("/audio/correct.mp3").play().catch(()=>{}),h===0)setTimeout(()=>{f(1),x("IDLE"),I("part2")},1200);else if(h===1)setTimeout(()=>{f(2),x("IDLE")},1200);else{const O=100/r.length,D=Math.min(100,Math.round(v+O));g(D),await Qe(e,"segmentation",D,D),setTimeout(()=>{i<r.length-1?(o(U=>U+1),d("CHOPPING"),x("IDLE")):d("WON")},1500)}};return a?y.jsx("div",{className:"min-h-screen bg-orange-500 flex items-center justify-center text-white font-black text-2xl animate-pulse italic",children:"PREPARING NINJA..."}):u==="WON"?y.jsxs("div",{className:"min-h-screen bg-orange-50 flex flex-col items-center justify-center p-6 text-center",children:[y.jsx(Be,{size:100,className:"text-yellow-400 mb-4 animate-bounce"}),y.jsx("h1",{className:"text-5xl font-black text-orange-600 uppercase italic",children:"Ninja Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-orange-500 text-white px-12 py-4 rounded-2xl font-black text-xl shadow-[0_8px_0_#9a3412] active:translate-y-1 transition-all uppercase",children:"Finish"})]}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 to-orange-600 flex flex-col items-center relative font-sans text-white select-none",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-orange-600 shadow-sm transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${v}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full"})}),y.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest mt-2",children:[Math.round(v),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200 text-yellow-900",children:[y.jsx(Be,{size:24}),y.jsx("span",{className:"text-2xl font-black",children:Math.round(v)})]})]}),y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-4xl z-10",children:[(u==="CHOPPING"||u==="ANIMATING")&&y.jsx(ie.div,{animate:w?{x:[-10,10,-10,10,0]}:{},className:"flex text-7xl md:text-9xl font-black",children:_.word.split("").map((O,D)=>y.jsxs(br.Fragment,{children:[y.jsx(ie.span,{animate:u==="ANIMATING"?{x:D<_.splitIndex?-120:120,opacity:0,rotate:D<_.splitIndex?-15:15}:{x:0},className:"bg-white text-orange-600 px-6 py-4 rounded-3xl shadow-xl mx-2 italic uppercase",children:O}),D<_.word.length-1&&u==="CHOPPING"&&y.jsx("button",{onClick:()=>k(D),className:"w-16 h-32 flex items-center justify-center transition -mx-4 group",children:y.jsx(pT,{className:"text-white/40 group-hover:text-yellow-300 group-hover:scale-150 transition-all text-4xl"})})]},D))}),u==="SPEAKING"&&y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx(ie.div,{initial:{scale:.8},animate:{scale:1.2},className:"flex items-center gap-8 text-7xl md:text-9xl font-black mb-16 italic",children:h<2?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:h===0?"text-yellow-300 drop-shadow-[0_0_20px_rgba(250,204,21,0.8)]":"text-white/20",children:_.part1}),y.jsx("div",{className:"w-2 h-20 bg-white/20 rotate-12 rounded-full"}),y.jsx("span",{className:h===1?"text-yellow-300 drop-shadow-[0_0_20px_rgba(250,204,21,0.8)]":"text-white/20",children:_.part2})]}):y.jsx("span",{className:"text-white bg-white/10 px-12 py-6 rounded-[3rem] border-4 border-white/20 shadow-2xl uppercase",children:_.word})}),y.jsxs("div",{className:"flex items-center gap-10",children:[y.jsx("button",{onClick:()=>h<2&&I(h===0?"part1":"part2"),className:`w-24 h-24 bg-white/20 rounded-3xl flex items-center justify-center border-b-4 border-black/20 ${h===2?"opacity-20":"hover:bg-white/30"}`,children:y.jsx(ui,{size:40})}),y.jsx("button",{onClick:M,className:`w-36 h-36 rounded-full flex items-center justify-center text-7xl shadow-2xl transition-all active:scale-90 border-4 border-white
                        ${C==="LISTENING"?"bg-blue-500 animate-pulse":C==="SUCCESS"?"bg-green-500":"bg-white text-orange-600"}`,children:C==="LISTENING"?y.jsx($r,{}):C==="PROCESSING"?y.jsx(li,{className:"animate-spin"}):C==="SUCCESS"?y.jsx(tp,{}):y.jsx(My,{})})]}),y.jsx("p",{className:"mt-10 font-black uppercase tracking-tighter text-xl italic opacity-80",children:C==="LISTENING"?"Listening...":"Tap the button and say the yellow part!"})]})]})]})},dn=90,J9=220,rh=(J9-dn)/2,kh={3:{1:["bl","cl","fl","gl","pl","sl"],2:["br","cr","fr","gr","pr","tr","dr"],3:["sm","sn","sp","st","sk","sc","sw"],4:["sh","ch","th","wh","ph"],5:["spl","spr","str","scr","squ","shr","thr"]},4:{1:["nt","nd","nk","ng","ld"],2:["lp","lf","lk","ft","ct","mp"],3:["st","sp","sk","sh","nch"],4:["k","ke","ck","sh","ch","tch"],5:["ble","ple","cle","kle","gle","dle"]}},Q9=["b","c","d","f","g","h","j","l","m","n","p","r","s","t","v","w","y","z"],Y9=Object.values(kh[3]).flat(),OR=Object.values(kh[4]).flat(),X9=()=>{const t=We(),{unitId:e}=wt(),r=x8(),n=S8(0),[i,o]=E.useState([]),[a,c]=E.useState(0),[u,d]=E.useState(null),[h,f]=E.useState(0),[v,g]=E.useState(0),[w,b]=E.useState(!1),[C,x]=E.useState(!0),[R,_]=E.useState(!1),[I,k]=E.useState(null),[M,B]=E.useState(!1),[O,D]=E.useState(0),[U,L]=E.useState({level_id:1,unit_number:1}),F=E.useRef(null),H=Y=>{let V=Y.length,J;for(;V!==0;)J=Math.floor(Math.random()*V),V--,[Y[V],Y[J]]=[Y[J],Y[V]];return Y};E.useEffect(()=>{async function Y(){x(!0);const{data:V}=await he.from("units").select("level_id, unit_number").eq("id",e).single();V&&L(V);const{data:J}=await he.from("course_content").select("*").eq("unit_id",e).in("category",["decodable","word"]);J&&J.length>0&&o(H([...J])),x(!1)}return Y(),()=>{F.current&&F.current.close()}},[e]),E.useEffect(()=>{if(i[a]&&U){const Y=i[a].content.toLowerCase().trim(),V=U.level_id,J=U.unit_number;let j,T,W,Z;if(V<=3){Z="PREFIX";const oe=Y.search(/[aeiouy]/);j=Y.slice(0,oe),T=Y.slice(oe),W=V<3?Q9:[...new Set([...kh[3][J],...Y9])]}else Z="SUFFIX",j=OR.sort((de,ye)=>ye.length-de.length).find(de=>Y.endsWith(de))||"",T=Y.substring(0,Y.length-j.length),W=[...new Set([...kh[4][J]||[],...OR])];const se=W.filter(oe=>oe.toLowerCase()!==j.toLowerCase()),le=H([...se]),ce=H([j,...le.slice(0,5)]);d({target:Y,fixed:T.toLowerCase(),sliderParts:ce.map(oe=>oe.toLowerCase()),mode:Z}),n.set(0),f(0),r.set({y:0}),D(Math.round(a/i.length*100))}},[a,i,U]);const $=Y=>{if(!Y||R)return;_(!0);const V=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),J=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><voice name="en-US-JennyNeural"><prosody rate="0.75">${Y}</prosody></voice></speak>`,j=new Ae.SpeechSynthesizer(V);F.current=j,j.speakSsmlAsync(J,()=>{_(!1),j.close()},()=>{_(!1),j.close()})},ee=(Y,V)=>{const J=Math.round(V.offset.y/dn);let j=Math.max(0,Math.min(h-J,u.sliderParts.length-1));f(j),r.start({y:-j*dn})},X=async()=>{const Y=u.sliderParts[h];if((u.mode==="PREFIX"?Y+u.fixed:u.fixed+Y)===u.target){k("correct"),new Audio("/audio/correct.mp3").play().catch(()=>{});const J=v+4,j=Math.round((a+1)/i.length*100);g(J),await Qe(e,"word-slider",J,j),setTimeout(()=>{a<i.length-1?(c(T=>T+1),k(null)):B(!0)},1500)}else k("wrong"),new Audio("/audio/wrong.mp3").play().catch(()=>{}),g(J=>Math.max(0,J-2)),setTimeout(()=>k(null),1e3)};return C?y.jsx("div",{className:"min-h-screen bg-teal-600 flex items-center justify-center text-white text-2xl font-black animate-pulse uppercase italic tracking-tighter",children:"Syncing..."}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-400 to-emerald-600 font-sans select-none overflow-hidden text-white",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-teal-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${O}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full"})}),y.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest mt-2",children:[O,"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:v})]})]}),w?y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-4xl p-6 mx-auto",children:[y.jsx("button",{onClick:()=>$(u?.target),disabled:R,className:`mb-12 p-8 rounded-full shadow-2xl border-4 border-white/30 transition-all active:scale-95 ${R?"bg-yellow-400 animate-pulse":"bg-white/20"}`,children:R?y.jsx(li,{className:"animate-spin text-white",size:48}):y.jsx(ui,{size:48})}),y.jsx("div",{className:"flex items-center gap-4 mb-20",children:u?.mode==="PREFIX"?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-44 h-[220px] bg-white rounded-[2.5rem] shadow-2xl overflow-hidden relative border-b-[12px] border-slate-200",children:[y.jsx(ie.div,{drag:"y",dragConstraints:{top:-(u.sliderParts.length-1)*dn,bottom:0},dragElastic:.1,onDragEnd:ee,animate:r,style:{y:n,top:`${rh}px`},className:"absolute w-full",children:u.sliderParts.map((Y,V)=>y.jsx("div",{className:"flex items-center justify-center text-7xl font-black text-blue-600 italic lowercase tracking-tighter",style:{height:`${dn}px`},children:Y},`${a}-${V}`))}),y.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center",children:[y.jsx("div",{className:"w-full bg-white/70",style:{height:`${rh}px`}}),y.jsx("div",{className:"w-full border-y-4 border-blue-100/50",style:{height:`${dn}px`}}),y.jsx("div",{className:"w-full bg-white/70 flex-1"})]})]}),y.jsx("div",{className:"text-7xl font-black text-white bg-black/20 px-8 py-10 rounded-[2.5rem] border-4 border-white/20 italic tracking-tighter lowercase min-w-[140px] flex items-center justify-center shadow-inner",children:u.fixed})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-7xl font-black text-white bg-black/20 px-8 py-10 rounded-[2.5rem] border-4 border-white/20 italic tracking-tighter lowercase min-w-[140px] flex items-center justify-center shadow-inner",children:u.fixed}),y.jsxs("div",{className:"w-44 h-[220px] bg-white rounded-[2.5rem] shadow-2xl overflow-hidden relative border-b-[12px] border-slate-200",children:[y.jsx(ie.div,{drag:"y",dragConstraints:{top:-(u.sliderParts.length-1)*dn,bottom:0},dragElastic:.1,onDragEnd:ee,animate:r,style:{y:n,top:`${rh}px`},className:"absolute w-full",children:u.sliderParts.map((Y,V)=>y.jsx("div",{className:"flex items-center justify-center text-7xl font-black text-blue-600 italic lowercase tracking-tighter",style:{height:`${dn}px`},children:Y},`${a}-${V}`))}),y.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center",children:[y.jsx("div",{className:"w-full bg-white/70",style:{height:`${rh}px`}}),y.jsx("div",{className:"w-full border-y-4 border-blue-100/50",style:{height:`${dn}px`}}),y.jsx("div",{className:"w-full bg-white/70 flex-1"})]})]})]})}),y.jsx("button",{onClick:X,className:`px-20 py-6 rounded-2xl font-black text-4xl shadow-2xl transition-all active:translate-y-2 uppercase italic border-2 border-white/20 ${I==="correct"?"bg-green-500 shadow-[0_8px_0_#15803d]":I==="wrong"?"bg-red-500 shadow-[0_8px_0_#b91c1c]":"bg-yellow-400 text-yellow-900 shadow-sm"}`,children:I==="correct"?"Nice!":I==="wrong"?"Oops!":"Check"})]}):y.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:.8},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center max-w-sm shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx("h1",{className:"text-4xl font-black mb-4 uppercase text-teal-600 italic tracking-tighter",children:"Word Slider"}),y.jsx("button",{onClick:()=>b(!0),className:"w-full bg-teal-600 text-white py-5 rounded-2xl font-black text-2xl shadow-[0_8px_0_#065f46] active:translate-y-1 uppercase tracking-widest",children:"Start Game"})]})}),M&&y.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mx-auto mb-6 animate-bounce"}),y.jsx("h1",{className:"text-4xl font-black uppercase text-teal-600 tracking-tighter italic",children:"Slider Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-teal-600 text-white py-5 rounded-2xl font-black text-xl w-full uppercase shadow-lg",children:"Finish"})]})})]})},Z9="https://mbmswkltiqepwcynwgfr.supabase.co",eB=t=>{if(!t||typeof t!="string")return null;const e="abcdefghijklmnopqrstuvwxyz",r=12;let n=[];const i=r-t.length,o=Math.floor(Math.random()*(i>0?i:1));for(let a=0;a<r;a++)a>=o&&a<o+t.length?n.push({char:t[a-o].toLowerCase(),isTarget:!0,id:a}):n.push({char:e[Math.floor(Math.random()*e.length)],isTarget:!1,id:a});return{river:n,startIndex:o,endIndex:o+t.length-1}},tB=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(null),[u,d]=E.useState(!0),[h,f]=E.useState(!1),[v,g]=E.useState([]),[w,b]=E.useState(!1),[C,x]=E.useState(0),[R,_]=E.useState(null),[I,k]=E.useState(!1),[M,B]=E.useState(!1),O=E.useRef(null);E.useEffect(()=>{async function X(){d(!0);try{const{data:{user:Y}}=await he.auth.getUser();if(!Y)return;const{data:V}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","decodable");if(V&&V.length>0){n(V);const{data:J}=await he.from("user_progress").select("progress_percent").eq("user_id",Y.id).eq("unit_id",e).eq("game_type","word_hunter").maybeSingle();if(J&&J.progress_percent>0&&J.progress_percent<100){const j=Math.floor(J.progress_percent/100*V.length);o(j),x(J.progress_percent)}}}catch(Y){console.error("Load error:",Y)}finally{d(!1)}}return X(),()=>{O.current&&O.current.close()}},[e]),E.useEffect(()=>{r.length>0&&r[i]&&(c(eB(r[i].content)),g([]),_(null))},[i,r]);const D=X=>{if(!X||h)return;f(!0);const Y=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),V=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><voice name="en-US-JennyNeural"><prosody rate="0.75">${X}</prosody></voice></speak>`,J=new Ae.SpeechSynthesizer(Y);O.current=J,J.speakSsmlAsync(V,()=>{f(!1),J.close()},()=>{f(!1),J.close()})},U=X=>{R!=="correct"&&(b(!0),g([X]))},L=X=>{if(!w||R==="correct")return;const Y=X.clientX||X.touches&&X.touches[0].clientX,V=X.clientY||X.touches&&X.touches[0].clientY,j=document.elementFromPoint(Y,V)?.getAttribute("data-index");if(j!==null){const T=parseInt(j);v.includes(T)||g(W=>[...W,T].sort((Z,se)=>Z-se))}},F=async()=>{if(!w)return;b(!1);const X=v.map(V=>a.river[V].char).join(""),Y=r[i].content.toLowerCase().trim();if(X===Y){_("correct"),D(Y),new Audio("/audio/correct.mp3").play().catch(()=>{});const V=100/r.length,J=Math.min(100,Math.round((i+1)*V));x(J),await Qe(e,"word_hunter",J,J),setTimeout(()=>{i<r.length-1?o(j=>j+1):B(!0)},1500)}else _("wrong"),new Audio("/audio/wrong.mp3").play().catch(()=>{}),setTimeout(()=>{g([]),_(null)},1e3)};if(u)return y.jsx("div",{className:"min-h-screen bg-sky-500 flex items-center justify-center text-white text-2xl font-black animate-pulse uppercase tracking-widest italic",children:"Syncing..."});const $=r[i]?.content?.toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),ee=`${Z9}/storage/v1/object/public/assets/${$}.png`;return y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-400 to-blue-600 font-sans select-none overflow-hidden",onPointerUp:F,onPointerMove:L,onTouchMove:L,children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-sky-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${C}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-[0_0_15px_rgba(52,211,153,0.8)]"})}),y.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest mt-2",children:[Math.round(C),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(C)})]})]}),!I&&!M&&y.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:.8},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center max-w-sm shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx("h1",{className:"text-4xl font-black mb-6 uppercase text-sky-600 italic tracking-tighter",children:"Word Hunter"}),y.jsx("p",{className:"mb-8 text-slate-500 font-bold uppercase text-[10px] tracking-widest",children:"Hunt for the word hidden in the river!"}),y.jsx("button",{onClick:()=>k(!0),className:"w-full bg-sky-600 text-white py-5 rounded-2xl font-black text-2xl shadow-[0_8px_0_#1d4ed8] active:translate-y-1 uppercase tracking-widest",children:"Go!"})]})}),M&&y.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mx-auto mb-6 animate-bounce"}),y.jsx("h1",{className:"text-4xl font-black uppercase text-sky-600 italic tracking-tighter",children:"Hunt Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-sky-600 text-white py-5 rounded-2xl font-black text-xl w-full uppercase shadow-lg",children:"Finish"})]})}),I&&a&&y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-5xl mx-auto z-10 p-6",children:[y.jsx(ie.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"mb-10 bg-white p-4 rounded-[3rem] shadow-2xl border-b-[12px] border-slate-200 w-72 h-72 flex items-center justify-center",children:y.jsx("img",{src:ee,className:"w-full h-full object-contain",alt:"Target",onError:X=>X.target.src="https://via.placeholder.com/200?text=?"})},i),y.jsx("div",{className:"bg-black/20 p-8 rounded-[2.5rem] flex flex-wrap justify-center gap-3 shadow-inner mb-8",style:{touchAction:"none"},children:a.river.map((X,Y)=>y.jsx("div",{"data-index":Y,onPointerDown:()=>U(Y),className:`w-14 h-16 md:w-16 md:h-20 rounded-xl flex items-center justify-center text-4xl font-black transition-all italic border-b-8 select-none
                        ${v.includes(Y)?R==="correct"?"bg-green-500 border-green-700 text-white":R==="wrong"?"bg-red-500 border-red-700 text-white":"bg-sky-500 border-sky-700 text-white":"bg-white text-sky-600 border-slate-200"}`,children:X.char},Y))}),y.jsx("button",{onClick:()=>D(r[i].content),disabled:h,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-xl transition-all active:scale-95 ${h?"bg-yellow-400 animate-pulse":"bg-white text-sky-600"}`,children:h?y.jsx(li,{className:"animate-spin",size:30}):y.jsx(ui,{size:30})}),y.jsx("p",{className:"mt-6 font-black text-white/40 uppercase tracking-widest italic text-xs",children:"Drag across letters to spell the word"})]})]})},rB="https://mbmswkltiqepwcynwgfr.supabase.co",nB=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(null),[a,c]=E.useState([]),[u,d]=E.useState(!0),[h,f]=E.useState(0),[v,g]=E.useState(null),[w,b]=E.useState(null),[C,x]=E.useState(!1),[R,_]=E.useState(!1),[I,k]=E.useState([]);E.useEffect(()=>{async function O(){d(!0);try{const{data:{user:D}}=await he.auth.getUser();if(!D)return;const{data:U}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","decodable");if(U&&U.length>0){const L=U.map(ee=>({...ee,content:ee.content.toLowerCase().trim()}));n(L);const{data:F}=await he.from("user_progress").select("progress_percent").eq("user_id",D.id).eq("unit_id",e).eq("game_type","word_spy").maybeSingle(),H=F?.progress_percent||0;f(H);const $=L.map(ee=>ee.id);k($),M(L,$)}}catch(D){console.error("Load Error:",D)}finally{d(!1)}}O()},[e]);const M=(O,D)=>{let U,L=[...D];if(L.length===0)U=O[Math.floor(Math.random()*O.length)],k(O.map(X=>X.id).filter(X=>X!==U.id));else{const X=Math.floor(Math.random()*L.length),Y=L[X];U=O.find(V=>V.id===Y),L.splice(X,1),k(L)}o(U);const F=[U],ee=[...O.filter(X=>X.id!==U.id)].sort(()=>Math.random()-.5).slice(0,7);if(F.push(...ee),F.length<8){const X=["cat","dog","sun","bat","map","run","hop","red"].filter(Y=>!F.some(V=>V.content===Y));for(;F.length<8;)F.push({id:Math.random(),content:X.shift()||"word"})}c(F.sort(()=>Math.random()-.5)),g(null),b(null)},B=async O=>{if(v)return;const D=100/r.length;if(O===i.content){g("correct");const L=Math.min(100,Math.round(h+D));f(L),await Qe(e,"word_spy",L,L),setTimeout(()=>{L>=99.9?(_(!0),x(!1)):M(r,I)},1200)}else{g("wrong"),b(O),new Audio("/audio/wrong.mp3").play().catch(()=>{});const L=Math.max(0,Math.round(h-D));f(L),await Qe(e,"word_spy",L,L),setTimeout(()=>{g(null),b(null),M(r,I)},1200)}};return u?y.jsx("div",{className:"min-h-screen bg-violet-500 flex items-center justify-center text-white font-black text-2xl animate-pulse uppercase italic tracking-widest",children:"Spying..."}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-400 to-violet-600 font-sans select-none overflow-hidden",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-violet-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${h}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-[0_0_15px_rgba(52,211,153,0.8)]"})}),y.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest mt-2",children:[Math.round(h),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(h)})]})]}),!C&&!R&&y.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:.8},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center max-w-sm shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx("h1",{className:"text-4xl font-black mb-6 uppercase text-violet-600 tracking-tighter italic",children:"Word Spy"}),y.jsx("p",{className:"mb-8 text-slate-500 font-bold uppercase text-[10px] tracking-widest",children:"Find the word that matches the picture!"}),y.jsx("button",{onClick:()=>x(!0),className:"w-full bg-violet-600 text-white py-5 rounded-2xl font-black text-2xl shadow-[0_8px_0_#5b21b6] active:translate-y-1 uppercase tracking-widest",children:"Start Mission"})]})}),R&&y.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mx-auto mb-6 animate-bounce"}),y.jsx("h1",{className:"text-4xl font-black uppercase text-violet-600 tracking-tighter",children:"Spy Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-violet-600 text-white py-5 rounded-2xl font-black text-xl w-full uppercase shadow-lg",children:"Finish"})]})}),C&&i&&y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-5xl mx-auto z-10 p-4",children:[y.jsx(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-4 rounded-[3rem] shadow-2xl border-b-[12px] border-slate-200 mb-8 w-64 h-64 md:w-80 md:h-80 flex items-center justify-center relative",children:y.jsx("img",{src:`${rB}/storage/v1/object/public/assets/${i.content.toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}.png`,className:"w-full h-full object-contain",alt:"Spy Target"})},i.id),y.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 w-full",children:a.map((O,D)=>y.jsxs("button",{onClick:()=>B(O.content),className:`relative py-5 rounded-2xl text-2xl md:text-3xl font-black shadow-xl border-b-8 transition-all active:translate-y-2 lowercase italic 
                    ${v==="correct"&&O.content===i.content?"bg-green-500 border-green-700 text-white":v==="wrong"&&O.content===w?"bg-red-500 border-red-700 text-white":"bg-white text-violet-600 border-slate-200"}`,children:[O.content,y.jsxs(ur,{children:[v==="correct"&&O.content===i.content&&y.jsx(ie.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 text-green-200 bg-green-600 rounded-full",children:y.jsx(wn,{size:30})}),v==="wrong"&&O.content===w&&y.jsx(ie.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 text-red-200 bg-red-600 rounded-full",children:y.jsx(V8,{size:30})})]})]},`${i.id}-${D}`))})]})]})},bA=E.createContext({dragDropManager:void 0});function Sr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var NR=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),MR=function(){return Math.random().toString(36).substring(7).split("").join(".")},DR={INIT:"@@redux/INIT"+MR(),REPLACE:"@@redux/REPLACE"+MR()};function iB(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function xA(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Sr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Sr(1));return r(xA)(t,e)}if(typeof t!="function")throw new Error(Sr(2));var i=t,o=e,a=[],c=a,u=!1;function d(){c===a&&(c=a.slice())}function h(){if(u)throw new Error(Sr(3));return o}function f(b){if(typeof b!="function")throw new Error(Sr(4));if(u)throw new Error(Sr(5));var C=!0;return d(),c.push(b),function(){if(C){if(u)throw new Error(Sr(6));C=!1,d();var R=c.indexOf(b);c.splice(R,1),a=null}}}function v(b){if(!iB(b))throw new Error(Sr(7));if(typeof b.type>"u")throw new Error(Sr(8));if(u)throw new Error(Sr(9));try{u=!0,o=i(o,b)}finally{u=!1}for(var C=a=c,x=0;x<C.length;x++){var R=C[x];R()}return b}function g(b){if(typeof b!="function")throw new Error(Sr(10));i=b,v({type:DR.REPLACE})}function w(){var b,C=f;return b={subscribe:function(R){if(typeof R!="object"||R===null)throw new Error(Sr(11));function _(){R.next&&R.next(h())}_();var I=C(_);return{unsubscribe:I}}},b[NR]=function(){return this},b}return v({type:DR.INIT}),n={dispatch:v,subscribe:f,getState:h,replaceReducer:g},n[NR]=w,n}function ke(t,e,...r){if(sB()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function sB(){return typeof process<"u"&&!0}function oB(t,e,r){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:r||null,t)}function aB(t,e){return t.filter(r=>r!==e)}function PA(t){return typeof t=="object"}function cB(t,e){const r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);const i=[];return r.forEach((o,a)=>{o===1&&i.push(a)}),i}function lB(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Gy="dnd-core/INIT_COORDS",sp="dnd-core/BEGIN_DRAG",$y="dnd-core/PUBLISH_DRAG_SOURCE",op="dnd-core/HOVER",ap="dnd-core/DROP",cp="dnd-core/END_DRAG";function LR(t,e){return{type:Gy,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const uB={type:Gy,payload:{clientOffset:null,sourceClientOffset:null}};function dB(t){return function(r=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:o,getSourceClientOffset:a}=n,c=t.getMonitor(),u=t.getRegistry();t.dispatch(LR(o)),hB(r,c,u);const d=vB(r,c);if(d==null){t.dispatch(uB);return}let h=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");pB(a),h=a(d)}t.dispatch(LR(o,h));const v=u.getSource(d).beginDrag(c,d);if(v==null)return;fB(v),u.pinSource(d);const g=u.getSourceType(d);return{type:sp,payload:{itemType:g,item:v,sourceId:d,clientOffset:o||null,sourceClientOffset:h||null,isSourcePublic:!!i}}}}function hB(t,e,r){ke(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){ke(r.getSource(n),"Expected sourceIds to be registered.")})}function pB(t){ke(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function fB(t){ke(PA(t),"Item must be an object.")}function vB(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function gB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){gB(t,i,r[i])})}return t}function yB(t){return function(r={}){const n=t.getMonitor(),i=t.getRegistry();SB(n),bB(n).forEach((a,c)=>{const u=wB(a,c,i,n),d={type:ap,payload:{dropResult:mB({},r,u)}};t.dispatch(d)})}}function SB(t){ke(t.isDragging(),"Cannot call drop while not dragging."),ke(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function wB(t,e,r,n){const i=r.getTarget(t);let o=i?i.drop(n,t):void 0;return CB(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function CB(t){ke(typeof t>"u"||PA(t),"Drop result must either be an object or undefined.")}function bB(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function xB(t){return function(){const r=t.getMonitor(),n=t.getRegistry();PB(r);const i=r.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(r,i),n.unpinSource()),{type:cp}}}function PB(t){ke(t.isDragging(),"Cannot call endDrag while not dragging.")}function Um(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function _B(t){return function(r,{clientOffset:n}={}){RB(r);const i=r.slice(0),o=t.getMonitor(),a=t.getRegistry(),c=o.getItemType();return TB(i,a,c),EB(i,o,a),AB(i,o,a),{type:op,payload:{targetIds:i,clientOffset:n||null}}}}function RB(t){ke(Array.isArray(t),"Expected targetIds to be an array.")}function EB(t,e,r){ke(e.isDragging(),"Cannot call hover while not dragging."),ke(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const i=t[n];ke(t.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(i);ke(o,"Expected targetIds to be registered.")}}function TB(t,e,r){for(let n=t.length-1;n>=0;n--){const i=t[n],o=e.getTargetType(i);Um(o,r)||t.splice(n,1)}}function AB(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function IB(t){return function(){if(t.getMonitor().isDragging())return{type:$y}}}function kB(t){return{beginDrag:dB(t),publishDragSource:IB(t),hover:_B(t),drop:yB(t),endDrag:xB(t)}}class jB{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(o){return(...a)=>{const c=o.apply(e,a);typeof c<"u"&&r(c)}}const i=kB(this);return Object.keys(i).reduce((o,a)=>{const c=i[a];return o[a]=n(c),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function OB(t,e){return{x:t.x+e.x,y:t.y+e.y}}function _A(t,e){return{x:t.x-e.x,y:t.y-e.y}}function NB(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:_A(OB(e,n),r)}function MB(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:_A(e,r)}const ou=[],Jy=[];ou.__IS_NONE__=!0;Jy.__IS_ALL__=!0;function DB(t,e){return t===ou?!1:t===Jy||typeof e>"u"?!0:lB(e,t).length>0}class LB{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;ke(typeof e=="function","listener must be a function."),ke(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const o=()=>{const a=this.store.getState(),c=a.stateId;try{c===i||c===i+1&&!DB(a.dirtyHandlerIds,n)||e()}finally{i=c}};return this.store.subscribe(o)}subscribeToOffsetChange(e){ke(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==r&&(r=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return ke(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(ke(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return Um(n,i)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(ke(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!Um(i,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const c=a.indexOf(e);return n?c===a.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return NB(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return MB(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const zR=typeof global<"u"?global:self,RA=zR.MutationObserver||zR.WebKitMutationObserver;function EA(t){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),t()}}}function zB(t){let e=1;const r=new RA(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const BB=typeof RA=="function"?zB:EA;class FB{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=BB(this.flush),this.requestErrorThrow=EA(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class qB{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class UB{create(e){const r=this.freeTasks,n=r.length?r.pop():new qB(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const TA=new FB,VB=new UB(TA.registerPendingError);function WB(t){TA.enqueueTask(VB.create(t))}const Qy="dnd-core/ADD_SOURCE",Yy="dnd-core/ADD_TARGET",Xy="dnd-core/REMOVE_SOURCE",lp="dnd-core/REMOVE_TARGET";function HB(t){return{type:Qy,payload:{sourceId:t}}}function KB(t){return{type:Yy,payload:{targetId:t}}}function GB(t){return{type:Xy,payload:{sourceId:t}}}function $B(t){return{type:lp,payload:{targetId:t}}}function JB(t){ke(typeof t.canDrag=="function","Expected canDrag to be a function."),ke(typeof t.beginDrag=="function","Expected beginDrag to be a function."),ke(typeof t.endDrag=="function","Expected endDrag to be a function.")}function QB(t){ke(typeof t.canDrop=="function","Expected canDrop to be a function."),ke(typeof t.hover=="function","Expected hover to be a function."),ke(typeof t.drop=="function","Expected beginDrag to be a function.")}function Vm(t,e){if(e&&Array.isArray(t)){t.forEach(r=>Vm(r,!1));return}ke(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Cr;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Cr||(Cr={}));let YB=0;function XB(){return YB++}function ZB(t){const e=XB().toString();switch(t){case Cr.SOURCE:return`S${e}`;case Cr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function BR(t){switch(t[0]){case"S":return Cr.SOURCE;case"T":return Cr.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function FR(t,e){const r=t.entries();let n=!1;do{const{done:i,value:[,o]}=r.next();if(o===e)return!0;n=!!i}while(!n);return!1}class eF{addSource(e,r){Vm(e),JB(r);const n=this.addHandler(Cr.SOURCE,e,r);return this.store.dispatch(HB(n)),n}addTarget(e,r){Vm(e,!0),QB(r);const n=this.addHandler(Cr.TARGET,e,r);return this.store.dispatch(KB(n)),n}containsHandler(e){return FR(this.dragSources,e)||FR(this.dropTargets,e)}getSource(e,r=!1){return ke(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return ke(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return ke(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return ke(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return BR(e)===Cr.SOURCE}isTargetId(e){return BR(e)===Cr.TARGET}removeSource(e){ke(this.getSource(e),"Expected an existing source."),this.store.dispatch(GB(e)),WB(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){ke(this.getTarget(e),"Expected an existing target."),this.store.dispatch($B(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);ke(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){ke(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=ZB(e);return this.types.set(i,r),e===Cr.SOURCE?this.dragSources.set(i,n):e===Cr.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const tF=(t,e)=>t===e;function rF(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function nF(t,e,r=tF){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function iF(t=ou,e){switch(e.type){case op:break;case Qy:case Yy:case lp:case Xy:return ou;case sp:case $y:case cp:case ap:default:return Jy}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=cB(r,n);if(!(i.length>0||!nF(r,n)))return ou;const a=n[n.length-1],c=r[r.length-1];return a!==c&&(a&&i.push(a),c&&i.push(c)),i}function sF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){sF(t,i,r[i])})}return t}const qR={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function aF(t=qR,e){const{payload:r}=e;switch(e.type){case Gy:case sp:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case op:return rF(t.clientOffset,r.clientOffset)?t:oF({},t,{clientOffset:r.clientOffset});case cp:case ap:return qR;default:return t}}function cF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){cF(t,i,r[i])})}return t}const lF={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function uF(t=lF,e){const{payload:r}=e;switch(e.type){case sp:return Gs({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case $y:return Gs({},t,{isSourcePublic:!0});case op:return Gs({},t,{targetIds:r.targetIds});case lp:return t.targetIds.indexOf(r.targetId)===-1?t:Gs({},t,{targetIds:aB(t.targetIds,r.targetId)});case ap:return Gs({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case cp:return Gs({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function dF(t=0,e){switch(e.type){case Qy:case Yy:return t+1;case Xy:case lp:return t-1;default:return t}}function hF(t=0){return t+1}function pF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fF(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){pF(t,i,r[i])})}return t}function vF(t={},e){return{dirtyHandlerIds:iF(t.dirtyHandlerIds,{type:e.type,payload:fF({},e.payload,{prevTargetIds:oB(t,"dragOperation.targetIds",[])})}),dragOffset:aF(t.dragOffset,e),refCount:dF(t.refCount,e),dragOperation:uF(t.dragOperation,e),stateId:hF(t.stateId)}}function gF(t,e=void 0,r={},n=!1){const i=mF(n),o=new LB(i,new eF(i)),a=new jB(i,o),c=t(a,e,r);return a.receiveBackend(c),a}function mF(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return xA(vF,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function yF(t,e){if(t==null)return{};var r=SF(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function SF(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}let UR=0;const uh=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var wF=E.memo(function(e){var{children:r}=e,n=yF(e,["children"]);const[i,o]=CF(n);return E.useEffect(()=>{if(o){const a=AA();return++UR,()=>{--UR===0&&(a[uh]=null)}}},[]),y.jsx(bA.Provider,{value:i,children:r})});function CF(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=bF(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function bF(t,e=AA(),r,n){const i=e;return i[uh]||(i[uh]={dragDropManager:gF(t,e,r,n)}),i[uh]}function AA(){return typeof global<"u"?global:window}var Wg,VR;function xF(){return VR||(VR=1,Wg=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}),Wg}var PF=xF();const _F=Gm(PF),us=typeof window<"u"?E.useLayoutEffect:E.useEffect;function RF(t,e,r){const[n,i]=E.useState(()=>e(t)),o=E.useCallback(()=>{const a=e(t);_F(n,a)||(i(a),r&&r())},[n,t,r]);return us(o),[n,o]}function EF(t,e,r){const[n,i]=RF(t,e,r);return us(function(){const a=t.getHandlerId();if(a!=null)return t.subscribeToStateChange(i,{handlerIds:[a]})},[t,i]),n}function IA(t,e,r){return EF(e,t||(()=>({})),()=>r.reconnect())}function kA(t,e){const r=[];return typeof t!="function"&&r.push(t),E.useMemo(()=>typeof t=="function"?t():t,r)}function TF(t){return E.useMemo(()=>t.hooks.dragSource(),[t])}function AF(t){return E.useMemo(()=>t.hooks.dragPreview(),[t])}let Hg=!1,Kg=!1;class IF{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){ke(!Hg,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Hg=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Hg=!1}}isDragging(){if(!this.sourceId)return!1;ke(!Kg,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Kg=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Kg=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Gg=!1;class kF{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;ke(!Gg,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Gg=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Gg=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function jF(t,e,r){const n=r.getRegistry(),i=n.addTarget(t,e);return[i,()=>n.removeTarget(i)]}function OF(t,e,r){const n=r.getRegistry(),i=n.addSource(t,e);return[i,()=>n.removeSource(i)]}function Wm(t,e,r,n){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<o.length;u++){const d=o[u];if(!c(d))return!1;const h=t[d],f=e[d];if(i=void 0,i===!1||i===void 0&&h!==f)return!1}return!0}function Hm(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NF(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function MF(t){return(e=null,r=null)=>{if(!E.isValidElement(e)){const o=e;return t(o,r),o}const n=e;return NF(n),DF(n,r?o=>t(o,r):t)}}function jA(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const i=MF(n);e[r]=()=>i}}),e}function WR(t,e){typeof t=="function"?t(e):t.current=e}function DF(t,e){const r=t.ref;return ke(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?E.cloneElement(t,{ref:n=>{WR(r,n),WR(e,n)}}):E.cloneElement(t,{ref:e})}class LF{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Wm(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Wm(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=jA({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Hm(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Hm(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class zF{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Wm(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=jA({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Hm(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ho(){const{dragDropManager:t}=E.useContext(bA);return ke(t!=null,"Expected drag drop context"),t}function BF(t,e){const r=ho(),n=E.useMemo(()=>new LF(r.getBackend()),[r]);return us(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),us(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function FF(){const t=ho();return E.useMemo(()=>new IF(t),[t])}class qF{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:o}=n;return o?o(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function UF(t,e,r){const n=E.useMemo(()=>new qF(t,e,r),[e,r]);return E.useEffect(()=>{n.spec=t},[t]),n}function VF(t){return E.useMemo(()=>{const e=t.type;return ke(e!=null,"spec.type must be defined"),e},[t])}function WF(t,e,r){const n=ho(),i=UF(t,e,r),o=VF(t);us(function(){if(o!=null){const[c,u]=OF(o,i,n);return e.receiveHandlerId(c),r.receiveHandlerId(c),u}},[n,e,r,i,o])}function HF(t,e){const r=kA(t);ke(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=FF(),i=BF(r.options,r.previewOptions);return WF(r,n,i),[IA(r.collect,n,i),TF(i),AF(i)]}function KF(t){return E.useMemo(()=>t.hooks.dropTarget(),[t])}function GF(t){const e=ho(),r=E.useMemo(()=>new zF(e.getBackend()),[e]);return us(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function $F(){const t=ho();return E.useMemo(()=>new kF(t),[t])}function JF(t){const{accept:e}=t;return E.useMemo(()=>(ke(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class QF{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function YF(t,e){const r=E.useMemo(()=>new QF(t,e),[e]);return E.useEffect(()=>{r.spec=t},[t]),r}function XF(t,e,r){const n=ho(),i=YF(t,e),o=JF(t);us(function(){const[c,u]=jF(o,i,n);return e.receiveHandlerId(c),r.receiveHandlerId(c),u},[n,e,i,r,o.map(a=>a.toString()).join("|")])}function ZF(t,e){const r=kA(t),n=$F(),i=GF(r.options);return XF(r,n,i),[IA(r.collect,n,i),KF(i)]}function OA(t){let e=null;return()=>(e==null&&(e=t()),e)}function eq(t,e){return t.filter(r=>r!==e)}function tq(t,e){const r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);const i=[];return r.forEach(o=>i.push(o)),i}class rq{enter(e){const r=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=tq(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=eq(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class nq{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const NA="__NATIVE_FILE__",MA="__NATIVE_URL__",DA="__NATIVE_TEXT__",LA="__NATIVE_HTML__",HR=Object.freeze(Object.defineProperty({__proto__:null,FILE:NA,HTML:LA,TEXT:DA,URL:MA},Symbol.toStringTag,{value:"Module"}));function $g(t,e,r){const n=e.reduce((i,o)=>i||t.getData(o),"");return n??r}const Km={[NA]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[LA]:{exposeProperties:{html:(t,e)=>$g(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[MA]:{exposeProperties:{urls:(t,e)=>$g(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[DA]:{exposeProperties:{text:(t,e)=>$g(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function iq(t,e){const r=Km[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new nq(r);return n.loadDataTransfer(e),n}function Jg(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Km).filter(r=>{const n=Km[r];return n?.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const sq=OA(()=>/firefox/i.test(navigator.userAgent)),zA=OA(()=>!!window.safari);class KR{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:o,c3s:a}=this;let c=r.length-1;if(e===r[c])return n[c];let u=0,d=a.length-1,h;for(;u<=d;){h=Math.floor(.5*(u+d));const g=r[h];if(g<e)u=h+1;else if(g>e)d=h-1;else return n[h]}c=Math.max(0,d);const f=e-r[c],v=f*f;return n[c]+i[c]*f+o[c]*v+a[c]*f*v}constructor(e,r){const{length:n}=e,i=[];for(let g=0;g<n;g++)i.push(g);i.sort((g,w)=>e[g]<e[w]?-1:1);const o=[],a=[];let c,u;for(let g=0;g<n-1;g++)c=e[g+1]-e[g],u=r[g+1]-r[g],o.push(c),a.push(u/c);const d=[a[0]];for(let g=0;g<o.length-1;g++){const w=a[g],b=a[g+1];if(w*b<=0)d.push(0);else{c=o[g];const C=o[g+1],x=c+C;d.push(3*x/((x+C)/w+(x+c)/b))}}d.push(a[a.length-1]);const h=[],f=[];let v;for(let g=0;g<d.length-1;g++){v=a[g];const w=d[g],b=1/o[g],C=w+d[g+1]-v-v;h.push((v-w-C)*b),f.push(C*b*b)}this.xs=e,this.ys=r,this.c1s=d,this.c2s=h,this.c3s=f}}const oq=1;function BA(t){const e=t.nodeType===oq?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function nh(t){return{x:t.clientX,y:t.clientY}}function aq(t){var e;return t.nodeName==="IMG"&&(sq()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function cq(t,e,r,n){let i=t?e.width:r,o=t?e.height:n;return zA()&&t&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function lq(t,e,r,n,i){const o=aq(e),c=BA(o?t:e),u={x:r.x-c.x,y:r.y-c.y},{offsetWidth:d,offsetHeight:h}=t,{anchorX:f,anchorY:v}=n,{dragPreviewWidth:g,dragPreviewHeight:w}=cq(o,e,d,h),b=()=>{let M=new KR([0,.5,1],[u.y,u.y/h*w,u.y+w-h]).interpolate(v);return zA()&&o&&(M+=(window.devicePixelRatio-1)*w),M},C=()=>new KR([0,.5,1],[u.x,u.x/d*g,u.x+g-d]).interpolate(f),{offsetX:x,offsetY:R}=i,_=x===0||x,I=R===0||R;return{x:_?x:C(),y:I?R:b()}}class uq{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function dq(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){dq(t,i,r[i])})}return t}class hq{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=a=>this.handleDragEnter(a,e),i=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return GR({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return GR({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(HR).some(r=>HR[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=iq(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&BA(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=nh(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:c}=i,u=Jg(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const h=this.monitor.getSourceId(),f=this.sourceNodes.get(h),v=this.sourcePreviewNodes.get(h)||f;if(v){const{anchorX:g,anchorY:w,offsetX:b,offsetY:C}=this.getCurrentSourcePreviewNodeOptions(),_=lq(f,v,a,{anchorX:g,anchorY:w},{offsetX:b,offsetY:C});c.setDragImage(v,_.x,_.y)}}try{c?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(c&&!c.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:c}=i,u=Jg(c);u&&this.beginDragNativeItem(u,c)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:nh(i)}),o.some(c=>this.monitor.canDropOnTarget(c))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=nh(i),this.scheduleHover(o),(o||[]).some(c=>this.monitor.canDropOnTarget(c))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else Jg(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:nh(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new uq(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new rq(this.isNodeInDocument)}}const pq=function(e,r,n){return new hq(e,r,n)},$R="https://mbmswkltiqepwcynwgfr.supabase.co",fq=()=>{const{unitId:t}=wt(),e=We(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState([]),[h,f]=E.useState(!1),[v,g]=E.useState(!0),[w,b]=E.useState(null),[C,x]=E.useState([]),[R,_]=E.useState([]);E.useEffect(()=>{let D=!0;async function U(){g(!0);try{const{data:{user:L}}=await he.auth.getUser();if(!L||!D)return;const{data:F,error:H}=await he.from("course_content").select("*").eq("unit_id",t).eq("category","decodable");if(H)throw H;if(F&&F.length>0){const $=F.map(ee=>({id:ee.id,word:ee.content?ee.content.trim().toLowerCase():"",phonemes:(ee.content||"").trim().toLowerCase().split(""),imageUrl:ee.image?`${$R}/storage/v1/object/public/assets/${ee.image.trim()}`:`${$R}/storage/v1/object/public/assets/${ee.content.trim().toLowerCase()}.png`}));if(D){n($);const{data:ee}=await he.from("user_progress").select("progress_percent").eq("user_id",L.id).eq("unit_id",t).eq("game_type","phonics_builder").maybeSingle(),X=ee?.progress_percent||0;c(X);const Y=$.map((V,J)=>J).sort(()=>Math.random()-.5);o(Y[0]),_(Y.slice(1))}}}catch(L){console.error(L)}finally{D&&g(!1)}}return U(),()=>{D=!1}},[t]);const I=r[i];E.useEffect(()=>{if(I){const D=[...I.phonemes].map((U,L)=>({id:`${I.id}-${L}-${U}-${Math.random()}`,letter:U,isUsed:!1})).sort(()=>Math.random()-.5);x(D),d(new Array(I.phonemes.length).fill(null))}},[i,r]);const k=(D,U,L)=>{if(w==="correct")return;const F=[...u];F[U]=D,L&&x(H=>H.map($=>$.id===L?{...$,isUsed:!0}:$)),d(F),F.filter(H=>H).length===I.phonemes.length&&O(F)},M=D=>{if(w==="correct"||D.isUsed)return;const U=u.findIndex(L=>L===null);U!==-1&&k(D.letter,U,D.id)},B=()=>{if(a>=99.9){f(!0);return}let D=[...R];D.length===0&&(D=r.map((L,F)=>F).sort(()=>Math.random()-.5));const U=D[0];o(U),_(D.slice(1)),b(null)},O=async D=>{const U=100/r.length;if(D.join("")===I.phonemes.join("")){b("correct"),new Audio("/audio/correct.mp3").play().catch(()=>{});const L=Math.min(100,Math.round(a+U));c(L),await Qe(t,"phonics_builder",L,L),setTimeout(()=>B(),1500)}else{b("wrong"),new Audio("/audio/wrong.mp3").play().catch(()=>{});const L=Math.max(0,Math.round(a-U));c(L),await Qe(t,"phonics_builder",L,L),setTimeout(()=>{d(new Array(I.phonemes.length).fill(null)),x(F=>F.map(H=>({...H,isUsed:!1}))),b(null),B()},1e3)}};return v?y.jsx("div",{className:"min-h-screen bg-rose-500 flex items-center justify-center text-white text-2xl font-black italic animate-pulse uppercase",children:"Syncing..."}):h?y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-rose-400 to-rose-600 flex flex-col items-center justify-center text-white p-4 text-center",children:[y.jsx(Be,{size:100,className:"text-yellow-400 mb-4 animate-bounce drop-shadow-lg"}),y.jsx("h2",{className:"text-5xl font-black mb-2 uppercase tracking-tighter italic",children:"Master Builder!"}),y.jsx("button",{onClick:()=>e(-1),className:"bg-white text-rose-600 px-10 py-4 rounded-2xl font-black text-xl mt-8 shadow-lg active:translate-y-1 transition-all uppercase",children:"Back to Unit"})]}):y.jsx(wF,{backend:pq,children:y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-400 to-rose-600 font-sans select-none overflow-hidden",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>e(-1),className:"bg-white p-4 rounded-2xl text-rose-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${a}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-[0_0_15px_#10b981]"})}),y.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest mt-2",children:[Math.round(a),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200 text-yellow-900",children:[y.jsx(Be,{size:24}),y.jsx("span",{className:"text-2xl font-black",children:Math.round(a)})]})]}),y.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center p-4",children:[y.jsx(ie.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-[4rem] p-8 shadow-2xl mb-8 w-[22rem] h-[22rem] md:w-[30rem] md:h-[30rem] flex items-center justify-center border-b-[16px] border-slate-200",children:y.jsx("img",{src:I.imageUrl,alt:"Target",className:"w-full h-full object-contain"})},I.id),y.jsx("div",{className:"flex justify-center gap-3 md:gap-5 mb-12",children:I.phonemes.map((D,U)=>y.jsx(gq,{position:U,letter:u[U],onDrop:k,isCorrect:w==="correct",isWrong:w==="wrong"},U))}),y.jsx("div",{className:"flex justify-center gap-4 flex-wrap max-w-2xl",children:C.map(D=>y.jsx(vq,{id:D.id,letter:D.letter,isUsed:D.isUsed,onClick:()=>M(D)},D.id))})]})]})})},vq=({letter:t,id:e,isUsed:r,onClick:n})=>{const[{isDragging:i},o]=HF({type:"letter",item:{letter:t,id:e},canDrag:!r,collect:a=>({isDragging:a.isDragging()})});return y.jsx("div",{ref:o,onClick:n,className:`w-20 h-20 bg-white rounded-3xl flex items-center justify-center shadow-[0_10px_0_#e2e8f0] cursor-pointer active:translate-y-1 transition-all ${i||r?"opacity-0 pointer-events-none":"opacity-100 hover:scale-105"}`,children:y.jsx("span",{className:"text-5xl font-black text-rose-600 italic lowercase",children:t})})},gq=({letter:t,onDrop:e,position:r,isCorrect:n,isWrong:i})=>{const[{isOver:o},a]=ZF({accept:"letter",drop:c=>e(c.letter,r,c.id),collect:c=>({isOver:c.isOver()})});return y.jsx("div",{ref:a,className:`w-16 h-16 md:w-24 md:h-24 border-[6px] rounded-[2rem] flex items-center justify-center transition-all duration-200 shadow-inner
      ${n?"bg-green-500 border-green-400":i?"bg-red-500 border-red-400":o?"bg-white/30 border-white":"bg-black/10 border-dashed border-white/50"}`,children:y.jsx(ur,{children:t&&y.jsx(ie.span,{initial:{scale:0},animate:{scale:1},className:"text-4xl md:text-6xl font-black text-white italic lowercase",children:t})})})},mq="https://mbmswkltiqepwcynwgfr.supabase.co",yq=t=>t?{backgroundColor:{a:"rgba(254, 226, 226, 0.6)",b:"rgba(255, 237, 213, 0.6)",c:"rgba(254, 249, 195, 0.6)",d:"rgba(220, 252, 231, 0.6)",e:"rgba(207, 250, 254, 0.6)",f:"rgba(224, 242, 254, 0.6)",g:"rgba(238, 242, 255, 0.6)",h:"rgba(245, 243, 255, 0.6)",i:"rgba(250, 232, 255, 0.6)",j:"rgba(251, 224, 252, 0.6)",k:"rgba(254, 226, 226, 0.7)",l:"rgba(220, 252, 231, 0.7)",m:"rgba(254, 243, 199, 0.7)",n:"rgba(236, 252, 203, 0.7)",o:"rgba(204, 251, 241, 0.7)",p:"rgba(219, 234, 254, 0.6)",q:"rgba(233, 213, 255, 0.7)",r:"rgba(255, 228, 230, 0.7)",s:"rgba(241, 245, 249, 0.8)",t:"rgba(255, 251, 235, 0.7)",u:"rgba(236, 254, 255, 0.7)",v:"rgba(240, 253, 244, 0.7)",w:"rgba(255, 241, 242, 0.7)",x:"rgba(248, 250, 252, 0.7)",y:"rgba(255, 247, 237, 0.7)",z:"rgba(254, 242, 242, 0.7)"}[t.toLowerCase()]||"rgba(248, 250, 252, 1)"}:{backgroundColor:"rgba(248, 250, 252, 1)"},Sq=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(!0),[u,d]=E.useState([]),[h,f]=E.useState([]),[v,g]=E.useState(0),[w,b]=E.useState(!1),[C,x]=E.useState(!1),[R,_]=E.useState(null),I=E.useRef({}),k=E.useRef(0);E.useEffect(()=>{k.current=v},[v]),E.useEffect(()=>{let O=!0;async function D(){c(!0);try{const{data:{user:U}}=await he.auth.getUser();if(!U||!O)return;const{data:L}=await he.from("course_content").select("*").eq("unit_id",e).in("category",["decodable","word"]);if(L&&L.length>0){const F=L.map($=>({...$,content:($.content||"").trim().toLowerCase()})).filter($=>$.content.length>=2),H=[];for(let $=0;$<F.length;$+=3){const ee=F.slice($,$+3);H.push({id:H.length,words:ee.map(X=>X.content),images:ee.map(X=>X.image)})}if(O){n(H);const{data:$}=await he.from("user_progress").select("progress_percent").eq("user_id",U.id).eq("unit_id",e).eq("game_type","grid").maybeSingle();if($&&$.progress_percent>0){const ee=Math.floor($.progress_percent/100*H.length);o(Math.min(ee,H.length-1)),g($.progress_percent)}}}}catch(U){console.error("Load Error:",U)}finally{O&&c(!1)}}return D(),()=>{O=!1,k.current>0&&Qe(e,"grid",k.current,k.current)}},[e]);const M=r[i];E.useEffect(()=>{M&&(d(M.words.map(O=>Array(O.length).fill(""))),f(Array(M.words.length).fill("neutral")))},[M]);const B=async()=>{let O=!0;const D=M.words.map((U,L)=>u[L].join("").toLowerCase()===U?"correct":(O=!1,"wrong"));if(f(D),O){new Audio("/audio/correct.mp3").play().catch(()=>{});const U=100/r.length,L=Math.min(100,Math.round(v+U));g(L),await Qe(e,"grid",L,L),setTimeout(()=>{i+1>=r.length?(b(!0),x(!1)):o(F=>F+1)},1500)}else new Audio("/audio/wrong.mp3").play().catch(()=>{})};return a?y.jsx("div",{className:"min-h-screen bg-rose-500 flex items-center justify-center text-white text-2xl font-black animate-pulse uppercase italic",children:"Syncing Grid..."}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-400 to-rose-600 font-sans select-none overflow-hidden",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-rose-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${v}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full shadow-[0_0_15px_#10b981]"})}),y.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest mt-2",children:[Math.round(v),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200 text-yellow-900",children:[y.jsx(Be,{className:"animate-pulse",size:24}),y.jsx("span",{className:"text-2xl font-black",children:Math.round(v)})]})]}),!C&&!w&&y.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:.8},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center max-w-sm shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx("h1",{className:"text-4xl font-black mb-6 uppercase text-rose-600 italic tracking-tighter",children:"Word Grid"}),y.jsx("button",{onClick:()=>x(!0),className:"w-full bg-rose-600 text-white py-5 rounded-2xl font-black text-2xl shadow-[0_8px_0_#be123c] active:translate-y-1 uppercase tracking-widest italic",children:"Start mission"})]})}),w&&y.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-6 text-center",children:y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mx-auto mb-6 animate-bounce"}),y.jsx("h1",{className:"text-4xl font-black uppercase text-rose-600 tracking-tighter italic",children:"Grid Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-rose-600 text-white py-5 rounded-2xl font-black text-xl w-full uppercase shadow-lg",children:"Finish"})]})}),y.jsx(ur,{children:R&&y.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(null),className:"fixed inset-0 z-[200] bg-black/80 flex items-center justify-center p-10 cursor-zoom-out",children:y.jsx(ie.div,{initial:{scale:.5},animate:{scale:1},exit:{scale:.5},className:"bg-white p-6 rounded-[4rem] shadow-2xl max-w-2xl w-full flex items-center justify-center",children:y.jsx("img",{src:R,className:"w-full h-auto object-contain max-h-[70vh]",alt:"Zoomed"})})})}),C&&M&&y.jsx("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-5xl mx-auto z-10 p-6",children:y.jsxs("div",{className:"bg-white p-8 md:p-12 rounded-[3rem] shadow-2xl w-full border-b-[12px] border-slate-200",children:[y.jsx("div",{className:"flex flex-col gap-6",children:M.words.map((O,D)=>{const U=`${mq}/storage/v1/object/public/assets/${M.images[D]||O+".png"}`;return y.jsxs("div",{className:"flex items-center gap-6 md:gap-10",children:[y.jsxs("div",{onClick:()=>_(U),className:`relative group w-24 h-24 md:w-32 md:h-32 rounded-[2rem] border-4 flex items-center justify-center bg-slate-50 shadow-inner cursor-zoom-in transition-transform active:scale-95 ${h[D]==="correct"?"border-green-400":"border-slate-100"}`,children:[y.jsx("img",{src:U,className:"w-full h-full object-contain p-2",onError:L=>L.target.src="https://via.placeholder.com/150?text=?"}),y.jsx("div",{className:"absolute inset-0 bg-rose-600/10 opacity-0 group-hover:opacity-100 rounded-[2rem] flex items-center justify-center transition-opacity",children:y.jsx(U8,{className:"text-rose-600/40",size:24})})]}),y.jsx("div",{className:"flex gap-2 md:gap-3",children:O.split("").map((L,F)=>y.jsx("input",{ref:H=>I.current[`${D}-${F}`]=H,maxLength:1,value:u[D]?.[F]||"",style:yq(L),onChange:H=>{const $=H.target.value.toLowerCase().slice(-1),ee=[...u];ee[D][F]=$,d(ee),$&&F<O.length-1&&I.current[`${D}-${F+1}`]?.focus()},onKeyDown:H=>{H.key==="Backspace"&&!u[D][F]&&F>0&&I.current[`${D}-${F-1}`]?.focus()},className:`w-12 h-16 md:w-16 md:h-20 rounded-xl border-b-8 text-center text-3xl md:text-4xl font-black transition-all italic lowercase
                            ${h[D]==="correct"?"text-green-600 border-green-400 !bg-green-100":h[D]==="wrong"?"text-red-600 border-red-400":"border-slate-200 focus:border-rose-400 focus:scale-105"}`},F))})]},D)})}),y.jsx("button",{onClick:B,className:"mt-12 bg-rose-600 text-white py-6 rounded-2xl font-black text-2xl w-full shadow-[0_8px_0_#be123c] active:translate-y-2 transition-all uppercase tracking-widest italic",children:"Check Puzzle"})]})})]})},wq="https://mbmswkltiqepwcynwgfr.supabase.co",Cq=()=>{const{unitId:t}=wt(),e=We(),[r,n]=E.useState([]),[i,o]=E.useState([]),[a,c]=E.useState(null),[u,d]=E.useState([]),[h,f]=E.useState(0),[v,g]=E.useState(!0),[w,b]=E.useState(!1),[C,x]=E.useState(null),[R,_]=E.useState([]),I=E.useRef(null);E.useRef(!0),E.useEffect(()=>(M(),()=>{I.current&&I.current.close()}),[t]);const k=L=>{const F=L.toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return`${wq}/storage/v1/object/public/assets/${F}.png`},M=async()=>{g(!0);try{const{data:{user:L}}=await he.auth.getUser(),{data:F}=await he.from("course_content").select("*").eq("unit_id",t).eq("category","sentence"),{data:H}=await he.from("course_content").select("*").eq("category","sentence").limit(20);if(F&&F.length>0){const $=F.map(V=>({id:V.id,text:V.content?V.content.trim():"",imageUrl:k(V.content)})),ee=(H||[]).map(V=>({id:V.id,text:V.content?V.content.trim():"",imageUrl:k(V.content)}));n($),o(ee);const{data:X}=await he.from("user_progress").select("progress_percent").eq("user_id",L.id).eq("unit_id",t).eq("game_type","sentence-stream").maybeSingle();f(X?.progress_percent||0);const Y=$.map(V=>V.id).sort(()=>Math.random()-.5);_(Y.slice(1)),B($,Y[0],ee)}}catch(L){console.error(L)}finally{g(!1)}},B=(L,F,H)=>{const $=L.find(Y=>Y.id===F);c($);let ee=[...L.filter(Y=>Y.id!==F)];if(ee.length<7){const Y=(H||i).filter(V=>V.id!==F&&!ee.some(J=>J.id===V.id));ee=[...ee,...Y]}const X=[$,...ee.slice(0,7)].sort(()=>Math.random()-.5);d(X),x(null),setTimeout(()=>O($.text),800)},O=L=>{if(!L||w)return;b(!0);const F=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),H=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><voice name="en-US-JennyNeural"><prosody rate="0.75">${L}</prosody></voice></speak>`,$=new Ae.SpeechSynthesizer(F);I.current=$,$.speakSsmlAsync(H,()=>{b(!1),$.close()},()=>{b(!1),$.close()})},D=async L=>{if(C||!a)return;const F=L===a.id,H=100/r.length;if(F){x("correct"),new Audio("/audio/correct.mp3").play().catch(()=>{});const $=Math.min(h+H,100);f($),await Qe(t,"sentence-stream",$,$),setTimeout(()=>{$>=99.9?(uy(),setShowWin(!0)):U()},1500)}else{x("wrong"),new Audio("/audio/wrong.mp3").play().catch(()=>{});const $=Math.max(h-H,0);f($),await Qe(t,"sentence-stream",$,$),setTimeout(()=>U(),1500)}},U=()=>{let L=[...R];L.length===0&&(L=r.map(H=>H.id).sort(()=>Math.random()-.5));const F=L[0];_(L.slice(1)),B(r,F,i)};return v?y.jsx("div",{className:"min-h-screen bg-emerald-500 flex items-center justify-center text-white font-black text-2xl animate-pulse uppercase italic",children:"Syncing Stream..."}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-400 to-teal-600 p-4 md:p-8 font-sans select-none text-white overflow-hidden",children:[y.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between mb-8",children:[y.jsx("button",{onClick:()=>e(-1),className:"bg-white p-4 rounded-2xl text-emerald-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 mx-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden",children:y.jsx(ie.div,{animate:{width:`${h}%`},className:"h-full bg-gradient-to-r from-yellow-300 to-yellow-500 rounded-full shadow-[0_0_15px_rgba(250,204,21,0.5)]"})}),y.jsxs("span",{className:"text-[10px] font-black uppercase mt-2 tracking-widest",children:[Math.round(h),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200 text-yellow-900",children:[y.jsx(Be,{size:24})," ",y.jsx("span",{className:"text-2xl font-black",children:Math.round(h)})]})]}),y.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[y.jsx(ie.button,{whileTap:{scale:.95},onClick:()=>O(a?.text),disabled:w,className:"bg-white p-6 md:p-10 rounded-[3rem] shadow-2xl border-b-[12px] border-slate-200 mb-8 w-full text-emerald-600",children:y.jsxs("div",{className:"flex items-center gap-6 justify-center",children:[y.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-3xl flex items-center justify-center text-white shadow-lg ${w?"bg-yellow-400 animate-pulse":"bg-emerald-500"}`,children:w?y.jsx(li,{className:"animate-spin",size:30}):y.jsx(ui,{size:30})}),y.jsx("h2",{className:"text-2xl md:text-4xl font-black uppercase italic tracking-tighter",children:"Listen to the sentence"})]})}),y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:u.map(L=>y.jsxs(ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>D(L.id),className:`relative aspect-square bg-white rounded-[2.5rem] p-3 shadow-xl border-b-[8px] border-slate-200 overflow-hidden transition-all
                ${C==="correct"&&L.id===a?.id?"ring-8 ring-green-400":""}
                ${C==="wrong"&&L.id!==a?.id?"opacity-50":""}
              `,children:[y.jsx("img",{src:L.imageUrl,alt:"Sentence visual",className:"w-full h-full object-contain",onError:F=>F.target.src="https://via.placeholder.com/200?text=?"}),y.jsx(ur,{children:C==="correct"&&L.id===a?.id&&y.jsx(ie.div,{initial:{scale:0},animate:{scale:1},className:"absolute inset-0 bg-emerald-500/90 flex items-center justify-center text-white",children:y.jsx(wn,{size:60})})})]},L.id))}),y.jsx("p",{className:"mt-6 font-black uppercase text-white/40 tracking-tighter italic",children:"Tap the image that matches what you hear"})]})]})},bq="https://mbmswkltiqepwcynwgfr.supabase.co",xq=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState([]),[h,f]=E.useState(0),[v,g]=E.useState(!1),[w,b]=E.useState("Ready to Read?"),[C,x]=E.useState(!1),[R,_]=E.useState(!0),I=E.useRef(null),k=E.useRef(0),M=E.useRef(!1);E.useEffect(()=>{k.current=h},[h]),E.useEffect(()=>()=>{D(),M.current&&k.current>0&&Qe(e,"word_by_word",k.current,k.current)},[e]),E.useEffect(()=>{let L=!0;async function F(){_(!0);try{const{data:{user:H}}=await he.auth.getUser();if(!H||!L)return;const{data:$}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","sentence");if($&&$.length>0){const ee=$.map(X=>{let Y=(X.content||"").toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return{id:X.id,content:X.content.trim(),imageUrl:`${bq}/storage/v1/object/public/assets/${Y}.png`}});if(L){n(ee),M.current=!0;const{data:X}=await he.from("user_progress").select("progress_percent").eq("user_id",H.id).eq("unit_id",e).eq("game_type","word_by_word").maybeSingle();X&&X.progress_percent>0?(o(Math.floor(X.progress_percent/100*ee.length)),f(X.progress_percent),k.current=X.progress_percent,B(ee[i].content)):B(ee[0].content)}}}catch(H){console.error(H)}finally{_(!1)}}F()},[e]);const B=L=>{const F=L.split(" ");d(F.map(H=>({display:H,clean:H.replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"").toLowerCase(),status:"pending"}))),c(0),b("Read the first word")},O=()=>{g(!0),b("Listening...");const L=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),F=new Ae.SpeechRecognizer(L,Ae.AudioConfig.fromDefaultMicrophoneInput());I.current=F,new Ae.PronunciationAssessmentConfig(r[i].content,Ae.PronunciationAssessmentGradingSystem.HundredMark,Ae.PronunciationAssessmentGranularity.Phoneme,!0).applyTo(F),F.startContinuousRecognitionAsync(),F.recognized=($,ee)=>{if(ee.result.reason===Ae.ResultReason.RecognizedSpeech){const X=JSON.parse(ee.result.properties.getProperty(Ae.PropertyId.SpeechServiceResponse_JsonResult));if(X.NBest&&X.NBest.length>0){const Y=X.NBest[0].Words;c(V=>V>=u.length?V:Y.some(J=>J.Word.toLowerCase()===u[V].clean)?(d(J=>{const j=[...J];return j[V].status="done",j}),V+1>=u.length&&U(),V+1):V)}}}},D=()=>{g(!1),I.current&&I.current.stopContinuousRecognitionAsync(()=>{I.current.close(),I.current=null})},U=()=>{D();const L=100/r.length,F=Math.min(100,Math.round(h+L));f(F),setTimeout(async()=>{i<r.length-1?(o(H=>H+1),B(r[i+1].content)):(f(100),await Qe(e,"word_by_word",100,100),x(!0))},1500)};return R?y.jsx("div",{className:"min-h-screen bg-green-500 flex items-center justify-center text-white text-2xl font-black animate-pulse",children:"READING..."}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-emerald-600 font-sans select-none overflow-hidden text-white",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-emerald-600 shadow-[0_5px_0_#6ee7b7] active:translate-y-1 active:shadow-none transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${h}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full"})}),y.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest mt-2",children:[Math.round(h),"% Complete"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-[0_6px_0_#d97706] flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700 animate-pulse",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(h)})]})]}),C&&y.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-6",children:y.jsxs(ie.div,{initial:{scale:0},animate:{scale:1},className:"bg-white text-slate-900 p-12 rounded-[3rem] text-center shadow-2xl border-b-[12px] border-slate-200",children:[y.jsx(Be,{className:"text-8xl text-yellow-400 mx-auto mb-6 animate-bounce"}),y.jsx("h1",{className:"text-4xl font-black uppercase text-emerald-600",children:"Reading Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-emerald-600 text-white py-5 rounded-2xl font-black text-xl w-full uppercase shadow-[0_8px_0_#065f46]",children:"Finish"})]})}),y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-4xl p-6",children:[y.jsx(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-4 rounded-[3rem] shadow-2xl mb-12 flex items-center justify-center border-b-[12px] border-slate-200",children:r[i].imageUrl?y.jsx("img",{src:r[i].imageUrl,className:"h-[250px] md:h-[400px] w-auto rounded-[2rem] object-contain"}):y.jsx("div",{className:"h-64 w-64 bg-slate-50 rounded-[2rem] flex items-center justify-center text-8xl shadow-inner",children:""})},r[i].id),y.jsx("div",{className:"bg-white/95 text-slate-800 rounded-[3rem] p-10 shadow-2xl w-full text-center min-h-[140px] flex flex-wrap justify-center items-center gap-6 mb-12 border-b-[12px] border-slate-200",children:u.map((L,F)=>y.jsx(ie.span,{animate:{scale:F===a?1.25:1,opacity:L.status==="done"||F===a?1:.3},className:`text-4xl md:text-6xl font-black italic tracking-tighter ${L.status==="done"?"text-green-600":F===a?"text-blue-600 underline decoration-yellow-400 decoration-8":"text-slate-300"}`,children:L.display},F))}),y.jsx("h3",{className:"mb-8 text-2xl font-black uppercase tracking-tighter italic drop-shadow-md",children:w}),y.jsx("button",{onClick:()=>v?D():O(),className:`w-36 h-36 rounded-full flex items-center justify-center text-6xl shadow-2xl transition-all active:scale-95 border-4 border-white ${v?"bg-red-500":"bg-white text-emerald-600"}`,children:v?y.jsx(CT,{}):y.jsx($r,{className:"animate-bounce"})})]})]})},Pq="https://mbmswkltiqepwcynwgfr.supabase.co",_q=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState([]),[u,d]=E.useState(0),[h,f]=E.useState("IDLE"),[v,g]=E.useState("Ready to Read?"),[w,b]=E.useState(!1),[C,x]=E.useState(!0),R=E.useRef(null),_=E.useRef([]),I=E.useRef(!1),k=E.useRef(0),M=E.useRef(!1);E.useEffect(()=>{k.current=u},[u]),E.useEffect(()=>()=>{if(R.current)try{R.current.close()}catch{}M.current&&k.current>0&&Qe(e,"sentence_reader",k.current,k.current)},[e]),E.useEffect(()=>{let F=!0;async function H(){x(!0);try{const{data:{user:$}}=await he.auth.getUser();if(!$||!F)return;const{data:ee,error:X}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","sentence");if(X)throw X;if(ee&&ee.length>0){const Y=ee.map(V=>{let J=(V.content||"").toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return{id:V.id,content:V.content?V.content.trim():"",imageUrl:`${Pq}/storage/v1/object/public/assets/${J}.png`}});if(F){n(Y),M.current=!0;const{data:V}=await he.from("user_progress").select("progress_percent").eq("user_id",$.id).eq("unit_id",e).eq("game_type","sentence_reader").maybeSingle();if(V&&V.progress_percent>0&&V.progress_percent<100){const J=Math.floor(V.progress_percent/100*Y.length);o(J),d(V.progress_percent),B(Y[J].content)}else B(Y[0].content)}}}catch($){console.error($)}finally{F&&x(!1)}}return H(),()=>{F=!1}},[e]);const B=F=>{const H=F.split(" ").map($=>({display:$,clean:$.replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"").toLowerCase(),status:"neutral"}));c(H)},O=()=>{if(I.current||!r[i])return;f("LISTENING"),g("Listening..."),c(ee=>ee.map(X=>({...X,status:"neutral"}))),_.current=[];const F=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),H=new Ae.SpeechRecognizer(F,Ae.AudioConfig.fromDefaultMicrophoneInput());R.current=H,new Ae.PronunciationAssessmentConfig(r[i].content,Ae.PronunciationAssessmentGradingSystem.HundredMark,Ae.PronunciationAssessmentGranularity.Word,!0).applyTo(H),H.startContinuousRecognitionAsync(),H.recognized=(ee,X)=>{if(X.result.reason===Ae.ResultReason.RecognizedSpeech){const Y=JSON.parse(X.result.properties.getProperty(Ae.PropertyId.SpeechServiceResponse_JsonResult));Y.NBest&&Y.NBest.length>0&&(_.current=[..._.current,...Y.NBest[0].Words])}}},D=()=>{h==="SUCCESS"||I.current||(f("PROCESSING"),setTimeout(()=>{R.current&&R.current.stopContinuousRecognitionAsync(()=>{R.current.close(),U()})},1e3))},U=()=>{const F=[..._.current],H=[...a];let $=0;H.forEach(ee=>{const X=F.findIndex(Y=>Y.Word.toLowerCase()===ee.clean);X!==-1?(ee.status="correct",$++,F.splice(X,1)):ee.status="error"}),c(H),$/H.length>.7?L():(f("ERROR"),new Audio("/audio/wrong.mp3").play().catch(()=>{}),setTimeout(()=>{f("IDLE"),g("Try Reading Again")},1500))},L=async()=>{I.current=!0,f("SUCCESS"),new Audio("/audio/correct.mp3").play().catch(()=>{});const F=100/r.length,H=Math.min(100,Math.round(u+F));d(H),setTimeout(async()=>{if(i<r.length-1){const $=i+1;o($),B(r[$].content),f("IDLE"),g("Read the next one!"),I.current=!1}else d(100),await Qe(e,"sentence_reader",100,100),b(!0)},2e3)};return C?y.jsx("div",{className:"min-h-screen bg-purple-500 flex items-center justify-center text-white font-black text-2xl animate-pulse",children:"READING..."}):w?y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-400 to-indigo-600 flex flex-col items-center justify-center text-white p-4",children:[y.jsx(Be,{size:100,className:"text-yellow-400 mb-4 animate-bounce drop-shadow-lg"}),y.jsx("h1",{className:"text-5xl font-black uppercase tracking-tighter",children:"Reading Master!"}),y.jsx("button",{onClick:()=>t(-1),className:"mt-8 bg-white text-purple-600 px-10 py-4 rounded-2xl font-black text-xl shadow-[0_8px_0_#7c3aed] active:translate-y-1 active:shadow-none transition-all uppercase",children:"Back"})]}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-400 to-indigo-600 font-sans text-white select-none overflow-hidden",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>t(-1),className:"bg-white p-4 rounded-2xl text-purple-600 shadow-[0_5px_0_#c084fc] active:translate-y-1 active:shadow-none transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden shadow-inner",children:y.jsx(ie.div,{animate:{width:`${u}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full"})}),y.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest mt-2",children:[Math.round(u),"% Complete"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-[0_6px_0_#d97706] flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700 animate-pulse",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(u)})]})]}),y.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center p-6",children:[y.jsx(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-4 rounded-[3rem] shadow-2xl mb-10 flex items-center justify-center border-b-[12px] border-slate-200",children:r[i]?.imageUrl?y.jsx("img",{src:r[i].imageUrl,alt:"Clue",className:"h-[250px] md:h-[400px] w-auto rounded-3xl object-contain"}):y.jsx("div",{className:"h-64 w-64 bg-gray-100 rounded-3xl flex items-center justify-center text-8xl",children:""})},r[i]?.id),y.jsx("div",{className:"bg-white/95 text-slate-800 p-10 rounded-[2.5rem] shadow-2xl mb-10 text-center w-full min-h-[160px] flex flex-wrap items-center justify-center gap-x-4 gap-y-3 border-b-[12px] border-slate-200",children:a.map((F,H)=>y.jsx(ie.span,{animate:{color:F.status==="correct"?"#16a34a":F.status==="error"?"#dc2626":"#1e293b"},className:"text-4xl md:text-6xl font-black leading-tight italic",children:F.display},H))}),y.jsx("h3",{className:"mb-8 text-2xl font-black drop-shadow-md uppercase tracking-tighter italic",children:v}),y.jsx("button",{onMouseDown:O,onMouseUp:D,onTouchStart:F=>{F.preventDefault(),O()},onTouchEnd:F=>{F.preventDefault(),D()},className:`w-36 h-36 rounded-full flex items-center justify-center text-7xl shadow-2xl transition-all active:scale-95 border-4 border-white
                ${h==="LISTENING"?"bg-blue-500 animate-pulse":h==="PROCESSING"?"bg-yellow-400":h==="SUCCESS"?"bg-green-500":"bg-white text-purple-600"}`,children:h==="LISTENING"?y.jsx($r,{}):h==="PROCESSING"?y.jsx(li,{className:"animate-spin"}):h==="SUCCESS"?y.jsx(tp,{}):y.jsx(My,{})})]})]})},Rq="https://mbmswkltiqepwcynwgfr.supabase.co",Eq=()=>{const{unitId:t}=wt(),e=We(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState([]),[h,f]=E.useState([]),[v,g]=E.useState(!1),[w,b]=E.useState(!0),[C,x]=E.useState(null),[R,_]=E.useState([]),I=E.useRef(0);E.useEffect(()=>{I.current=a},[a]),E.useEffect(()=>{let L=!0;async function F(){b(!0);try{const{data:{user:H}}=await he.auth.getUser();if(!H||!L)return;const{data:$,error:ee}=await he.from("course_content").select("*").eq("unit_id",t).eq("category","sentence");if(ee)throw ee;if($&&$.length>0){const X=$.map(Y=>{const V=Y.content?Y.content.trim():"",J=V.replace(/[.!?]/g,"").split(" "),j=V.toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return{id:Y.id,fullText:V,words:J,imageUrl:`${Rq}/storage/v1/object/public/assets/${j}.png`}});if(L){n(X);const{data:Y}=await he.from("user_progress").select("progress_percent").eq("user_id",H.id).eq("unit_id",t).eq("game_type","sentence_builder").maybeSingle(),V=Y?.progress_percent||0;c(V);const J=X.map((j,T)=>T).sort(()=>Math.random()-.5);o(J[0]),_(J.slice(1))}}}catch(H){console.error(H)}finally{L&&b(!1)}}return F(),()=>{L=!1}},[t]);const k=r[i];E.useEffect(()=>{if(k){const L=k.words.map((F,H)=>({id:`${k.id}-${i}-${H}-${F}-${Math.random()}`,text:F})).sort(()=>Math.random()-.5);f(L),d(new Array(k.words.length).fill(null))}},[i,r]);const M=L=>{if(C)return;const F=u.findIndex(H=>H===null);if(F!==-1){const H=[...u];H[F]=L,d(H),H.filter($=>$!==null).length===k.words.length&&D(H)}},B=L=>{if(C)return;const F=[...u];F[L]=null,d(F)},O=()=>{if(a>=99.9){g(!0);return}let L=[...R];L.length===0&&(L=r.map((F,H)=>H).sort(()=>Math.random()-.5)),o(L[0]),_(L.slice(1)),x(null)},D=async L=>{const F=L.map(ee=>ee.text).join(" "),H=k.words.join(" "),$=100/r.length;if(F===H){x("correct"),new Audio("/audio/correct.mp3").play().catch(()=>{});const ee=Math.min(100,Math.round(a+$));c(ee),await Qe(t,"sentence_builder",ee,ee),setTimeout(()=>O(),1500)}else{x("wrong"),new Audio("/audio/wrong.mp3").play().catch(()=>{});const ee=Math.max(0,Math.round(a-$));c(ee),await Qe(t,"sentence_builder",ee,ee),setTimeout(()=>{d(new Array(k.words.length).fill(null)),x(null),O()},1200)}},U=h.filter(L=>!u.some(F=>F&&F.id===L.id));return w?y.jsx("div",{className:"min-h-screen bg-sky-500 flex items-center justify-center text-white font-black text-2xl animate-pulse",children:"BUILDING..."}):v?y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-emerald-600 flex flex-col items-center justify-center text-white p-4",children:[y.jsx(Be,{size:100,className:"text-yellow-300 mb-4 animate-bounce"}),y.jsx("h2",{className:"text-5xl font-black mb-2 uppercase italic",children:"Sentence Master!"}),y.jsx("button",{onClick:()=>e(-1),className:"bg-white text-green-600 px-12 py-4 rounded-2xl font-black text-xl mt-8 shadow-lg active:translate-y-1 transition-all uppercase",children:"Back"})]}):y.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-300 to-blue-500 font-sans select-none overflow-hidden pb-12",children:[y.jsxs("div",{className:"w-full p-6 flex items-center justify-between sticky top-0 z-50 bg-white/10 backdrop-blur-md border-b-2 border-white/20",children:[y.jsx("button",{onClick:()=>e(-1),className:"bg-white p-4 rounded-2xl text-blue-600 shadow-sm active:translate-y-1 transition-all",children:y.jsx(ot,{size:20})}),y.jsxs("div",{className:"flex-1 px-8 flex flex-col items-center",children:[y.jsx("div",{className:"w-full h-8 bg-black/20 rounded-full border-4 border-white/30 p-1 relative overflow-hidden",children:y.jsx(ie.div,{animate:{width:`${a}%`},className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full"})}),y.jsxs("span",{className:"text-[10px] font-black uppercase text-white mt-2 tracking-widest",children:[Math.round(a),"% Mastery"]})]}),y.jsxs("div",{className:"bg-yellow-400 px-6 py-3 rounded-2xl shadow-lg flex items-center gap-3 border-2 border-yellow-200",children:[y.jsx(Be,{className:"text-yellow-700",size:24}),y.jsx("span",{className:"text-2xl font-black text-yellow-900",children:Math.round(a)})]})]}),y.jsxs("div",{className:"max-w-5xl mx-auto flex flex-col items-center p-6",children:[y.jsx(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-8 rounded-[4rem] shadow-2xl mb-10 border-b-[16px] border-slate-200 w-full max-w-xl aspect-video flex items-center justify-center",children:y.jsx("img",{src:k.imageUrl,alt:"Clue",className:"w-full h-full object-contain",onError:L=>L.target.style.opacity="0.2"})},k.id),y.jsxs("div",{className:"w-full bg-white/10 rounded-[3rem] p-10 backdrop-blur-sm border-4 border-dashed border-white/20 mb-12 flex flex-wrap justify-center gap-4 items-center min-h-[140px]",children:[new Array(k.words.length).fill(null).map((L,F)=>y.jsx(Aq,{word:u[F],onClick:()=>B(F),feedback:C},F)),y.jsx("span",{className:"text-7xl font-black text-white/50 mt-4 leading-none",children:"."})]}),y.jsx("div",{className:"flex flex-wrap justify-center gap-5 max-w-4xl",children:U.map(L=>y.jsx(Tq,{text:L.text,onClick:()=>M(L)},L.id))})]})]})},Tq=({text:t,onClick:e})=>y.jsx(ie.button,{layout:!0,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-white text-sky-600 px-8 py-5 rounded-3xl font-black text-3xl shadow-[0_10px_0_#e2e8f0] border-2 border-slate-100 active:translate-y-1 active:shadow-none transition-all",children:t}),Aq=({word:t,onClick:e,feedback:r})=>y.jsx("div",{onClick:t?e:void 0,className:`min-w-[120px] h-20 border-[6px] rounded-3xl flex items-center justify-center px-8 transition-all
    ${r==="correct"?"bg-green-500 border-green-400":r==="wrong"?"bg-red-500 border-red-400 animate-shake":t?"bg-white border-sky-400 cursor-pointer shadow-lg":"bg-black/10 border-dashed border-white/30"}`,children:t&&y.jsx(ie.span,{initial:{scale:0},animate:{scale:1},className:`font-black text-3xl italic ${r?"text-white":"text-slate-800"}`,children:t.text})}),Iq=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState(0),[h,f]=E.useState("LOADING"),[v,g]=E.useState(!1),[w,b]=E.useState(!1),[C,x]=E.useState(null),R=E.useRef(null),_="https://mbmswkltiqepwcynwgfr.supabase.co/storage/v1/object/public/assets/";E.useEffect(()=>{async function D(){try{const{data:{user:U}}=await he.auth.getUser(),{data:L}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","story");if(L&&L.length>0){n(L);const{data:F}=await he.from("user_progress").select("*").eq("user_id",U.id).eq("unit_id",e);if(F){const H=F.find($=>$.game_type==="story");d(H?.progress_percent||0)}f("READING")}else f("ERROR")}catch{f("ERROR")}}return D(),()=>{R.current&&R.current.close()}},[e]);const I=r[i],k=D=>D?D.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').trim():"",M=I?I.content.split("<br>").map(k).filter(D=>D!==""):[],B=D=>{if(!D)return"";let U=D.replace(/['"]+/g,"").replace(/,/g,".").trim();return`${_}${encodeURIComponent(U)}`},O=async D=>{if(v)return;g(!0);const U=Ae.SpeechConfig.fromSubscription("6oLCSz2miMvM01ZA2yQz30f4XjSGKmmzYVSuyh4yxvJCRjjbWb3qJQQJ99CAACYeBjFXJ3w3AAAYACOGFsep","eastus"),L=`
      <speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
        <voice name="en-US-JennyNeural">
          <prosody rate="0.65" pitch="+10%">
            ${D}
          </prosody>
        </voice>
      </speak>`,F=new Ae.SpeechSynthesizer(U);R.current=F,F.speakSsmlAsync(L,H=>{g(!1),b(!0),F.close()},H=>{g(!1),b(!0),F.close()})};return h==="LOADING"?y.jsx("div",{className:"h-screen bg-white flex items-center justify-center font-black text-orange-500 animate-pulse",children:"SYNCING STORY..."}):y.jsxs("div",{className:"h-screen bg-orange-50 font-sans text-slate-800 flex flex-col overflow-hidden",children:[y.jsxs("div",{className:"w-full p-2 px-4 flex items-center justify-between bg-white shadow-sm z-50",children:[y.jsx("button",{onClick:()=>t(-1),className:"p-2 text-slate-400 hover:text-orange-500 transition-colors",children:y.jsx(ot,{size:20})}),y.jsx("div",{className:"flex-1 px-6",children:y.jsx("div",{className:"w-full h-3 bg-slate-100 rounded-full overflow-hidden",children:y.jsx(ie.div,{animate:{width:`${u}%`},className:"h-full bg-orange-400"})})}),y.jsxs("div",{className:"flex items-center gap-2 text-orange-600 font-black",children:[y.jsx(Be,{size:16})," ",y.jsx("span",{children:u})]})]}),y.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 overflow-hidden",children:y.jsx(ur,{mode:"wait",children:h==="FINISHED"?y.jsxs(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-10 rounded-[3rem] shadow-xl text-center border-b-8 border-slate-200",children:[y.jsx(wn,{className:"text-green-500 text-7xl mb-4 mx-auto"}),y.jsx("h2",{className:"text-3xl font-black uppercase italic mb-6",children:"Chapter Complete!"}),y.jsx("button",{onClick:()=>t(-1),className:"bg-orange-500 text-white px-10 py-4 rounded-2xl text-xl font-black uppercase shadow-lg active:translate-y-1",children:"Claim Rewards"})]}):y.jsxs("div",{className:"w-full max-w-2xl flex flex-col items-center h-full max-h-[85vh]",children:[y.jsxs("div",{className:"inline-block bg-white p-2 rounded-[2rem] shadow-md border-2 border-white mb-4 overflow-hidden flex-shrink",children:[y.jsx("img",{src:B(I?.image),alt:"",className:"max-h-[30vh] w-auto object-contain rounded-[1.5rem]",onError:D=>{D.target.style.display="none",x(!0)}},I?.image),C&&y.jsx(vT,{className:"text-slate-200 text-5xl m-8"})]}),y.jsxs("div",{className:"bg-white w-full p-6 md:p-8 rounded-[3rem] shadow-lg border-b-[10px] border-slate-200 flex flex-col overflow-hidden",children:[y.jsx("h2",{className:"text-orange-500 font-black italic text-xl mb-4 text-center uppercase tracking-tight",children:k(I?.title)}),y.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 px-2 mb-4 scrollbar-hide",children:M.map((D,U)=>y.jsx(ie.p,{animate:{opacity:U===a?1:.1,scale:U===a?1.02:1,color:U===a?"#1e293b":"#94a3b8"},transition:{duration:.4},className:"text-lg md:text-xl font-bold leading-tight",children:D},`${i}-${U}`))}),y.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-3xl",children:[y.jsxs("button",{onClick:()=>O(M[a]),disabled:v,className:`p-4 rounded-2xl shadow-md active:scale-95 flex items-center gap-3 transition-all ${v?"bg-orange-100 text-orange-400":"bg-slate-800 text-white"}`,children:[v?y.jsx(li,{className:"animate-spin",size:24}):y.jsx(ui,{size:24}),y.jsx("span",{className:"font-black uppercase text-xs tracking-widest hidden sm:inline",children:"Listen"})]}),y.jsxs("button",{onClick:()=>{if(a<M.length-1)c(D=>D+1),b(!1);else{const D=Math.min(100,u+10);d(D),Qe(e,"story",D,D),D>=100?f("FINISHED"):(o(U=>(U+1)%r.length),c(0),b(!1))}},disabled:!w||v,className:`px-8 py-4 rounded-2xl font-black uppercase flex items-center gap-3 transition-all text-lg ${w&&!v?"bg-orange-500 text-white shadow-[0_5px_0_#c2410c] active:translate-y-1":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[!w&&y.jsx(as,{size:14}),a===M.length-1?"Finish":"Next",y.jsx(hT,{})]})]})]})]})})})]})},kq=()=>{const t=We(),{unitId:e}=wt(),[r,n]=E.useState([]),[i,o]=E.useState(0),[a,c]=E.useState(0),[u,d]=E.useState(0),[h,f]=E.useState(0),[v,g]=E.useState(0),[w,b]=E.useState("LOADING"),[C,x]=E.useState(!1),[R,_]=E.useState(!1),[I,k]=E.useState(""),[M,B]=E.useState([]),[O,D]=E.useState(!1),U=E.useRef(null),F="https://mbmswkltiqepwcynwgfr.supabase.co/storage/v1/object/public/assets/";E.useEffect(()=>{async function J(){try{const{data:{user:T}}=await he.auth.getUser(),{data:W}=await he.from("course_content").select("*").eq("unit_id",e).eq("category","story");if(W&&W.length>0){let Z=0;W.forEach(le=>{const ce=le.content.split("<br>").filter(oe=>oe.trim()!=="").length;Z+=ce}),o(Z),c(100/Z),n(W);const{data:se}=await he.from("user_progress").select("*").eq("user_id",T.id).eq("unit_id",e);if(se){const le=se.find(ce=>ce.game_type==="story-recorder");g(Math.min(100,le?.progress_percent||0))}b("READING")}else b("ERROR")}catch{b("ERROR")}}J();const j=window.SpeechRecognition||window.webkitSpeechRecognition;j&&(U.current=new j,U.current.lang="en-US",U.current.continuous=!0,U.current.interimResults=!0,U.current.onstart=()=>{x(!0),_(!1),B([])},U.current.onresult=T=>{let W="";for(let Z=T.resultIndex;Z<T.results.length;++Z)W+=T.results[Z][0].transcript;k(W.toLowerCase())},U.current.onend=()=>x(!1))},[e]);const H=r[u],$=J=>J?.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').trim()||"",ee=H?H.content.split("<br>").map($).filter(J=>J!==""):[],X=()=>{U.current&&U.current.stop();const J=ee[h].toLowerCase().replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,""),j=I.replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"").split(" "),T=J.split(" "),W=T.filter(Z=>!j.includes(Z));if(W.length<=Math.floor(T.length*.25)){_(!0),B([]);const Z=Math.min(100,v+a);g(Z),Qe(e,"story-recorder",Math.round(Z),Math.round(Z)),new Audio("/audio/correct.mp3").play().catch(()=>{})}else{B(W),_(!1);const Z=Math.max(0,v-a);g(Z),Qe(e,"story-recorder",Math.round(Z),Math.round(Z)),new Audio("/audio/wrong.mp3").play().catch(()=>{})}},Y=()=>{U.current&&(C?X():(k(""),B([]),U.current.start()))},V=()=>{if(h<ee.length-1)f(J=>J+1),_(!1),k(""),B([]);else if(v>=99.9)b("FINISHED");else{const J=(u+1)%r.length;d(J),f(0),_(!1),k(""),B([]),D(!1)}};return w==="LOADING"?y.jsx("div",{className:"h-screen bg-slate-900 flex items-center justify-center text-white text-2xl font-black italic",children:"LOADING..."}):y.jsxs("div",{className:"h-screen bg-indigo-50 font-sans text-slate-800 flex flex-col overflow-hidden select-none",children:[y.jsxs("div",{className:"w-full p-2 px-4 flex items-center justify-between bg-white shadow-sm z-50",children:[y.jsx("button",{onClick:()=>t(-1),className:"p-2 text-slate-400 hover:text-indigo-500 transition-colors",children:y.jsx(ot,{size:20})}),y.jsx("div",{className:"flex-1 px-6",children:y.jsx("div",{className:"w-full h-3 bg-slate-100 rounded-full overflow-hidden",children:y.jsx(ie.div,{animate:{width:`${v}%`},className:"h-full bg-indigo-500 shadow-inner"})})}),y.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-black",children:[y.jsx(Be,{size:16})," ",y.jsx("span",{children:Math.round(v)})]})]}),y.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 overflow-hidden",children:y.jsx(ur,{mode:"wait",children:w==="FINISHED"?y.jsxs(ie.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-10 rounded-[3rem] shadow-xl text-center border-b-8 border-slate-200",children:[y.jsx(wn,{className:"text-green-500 text-7xl mb-4 mx-auto"}),y.jsx("h2",{className:"text-3xl font-black uppercase italic mb-6",children:"Story Star!"}),y.jsx("button",{onClick:()=>t(-1),className:"bg-indigo-600 text-white px-10 py-4 rounded-2xl text-xl font-black uppercase shadow-lg active:translate-y-1",children:"Claim Stars"})]}):y.jsxs("div",{className:"w-full max-w-2xl flex flex-col items-center h-full max-h-[85vh]",children:[y.jsxs("div",{className:"inline-block bg-white p-2 rounded-[2rem] shadow-md border-2 border-white mb-4 overflow-hidden flex-shrink",children:[y.jsx("img",{src:`${F}${encodeURIComponent(H?.image.replace(/,/g,"."))}?t=${new Date().getTime()}`,alt:"",className:"max-h-[25vh] w-auto object-contain rounded-[1.5rem]",onError:J=>{J.target.style.display="none",D(!0)}},H?.image),O&&y.jsx(vT,{className:"text-slate-200 text-5xl m-8"})]}),y.jsxs("div",{className:"bg-white w-full p-6 md:p-8 rounded-[3rem] shadow-lg border-b-[10px] border-slate-200 flex flex-col overflow-hidden",children:[y.jsx("h2",{className:"text-2xl md:text-3xl font-black uppercase italic tracking-tighter text-center mb-4 bg-gradient-to-r from-indigo-600 to-violet-500 bg-clip-text text-transparent drop-shadow-sm",children:$(H?.title)}),y.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 px-2 mb-4 scrollbar-hide",children:ee.map((J,j)=>y.jsx(ie.p,{animate:{opacity:j===h?1:.1,scale:j===h?1.02:1,color:j===h?R?"#16a34a":M.length>0?"#ef4444":"#1e293b":"#94a3b8"},className:"text-lg md:text-xl font-bold leading-tight text-center",children:J},`${u}-${j}`))}),y.jsx("div",{className:"h-14 flex items-center justify-center mb-2",children:y.jsxs(ur,{mode:"wait",children:[M.length>0&&!C&&y.jsxs(ie.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-500 font-black text-xs uppercase flex flex-wrap justify-center gap-1",children:["Try again: ",M.join(", ")]}),C&&y.jsxs(ie.span,{animate:{opacity:[.4,1,.4]},transition:{repeat:1/0,duration:1.5},className:"text-indigo-400 font-black italic text-sm",children:['"',I||"Listening...",'"']})]})}),y.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-3 rounded-3xl",children:[y.jsx("button",{onClick:Y,className:`p-4 rounded-2xl shadow-md active:scale-95 transition-all ${C?"bg-red-500 animate-pulse":R?"bg-green-500":"bg-indigo-600"} text-white`,children:C?y.jsx(CT,{size:24}):R?y.jsx(wn,{size:24}):y.jsx($r,{size:24})}),y.jsxs("button",{onClick:V,disabled:!R,className:`px-8 py-4 rounded-2xl font-black uppercase flex items-center gap-3 transition-all text-lg ${R?"bg-orange-500 text-white shadow-[0_5px_0_#c2410c] active:translate-y-1":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[!R&&y.jsx(as,{size:14}),h===ee.length-1?"Finish":"Next",y.jsx(hT,{})]})]})]})]})})})]})},nt=({children:t})=>{const{isAuthenticated:e}=io(r=>r.auth);return e?t:y.jsx(Gl,{to:"/login"})};function jq(){const t=Nh(),{isAuthenticated:e,isLoading:r}=io(n=>n.auth);return E.useEffect(()=>{t($6())},[t]),E.useEffect(()=>{if(e){const n=setInterval(()=>{uy()},15e3);return()=>clearInterval(n)}},[e]),r?y.jsx($8,{}):y.jsxs(L4,{children:[y.jsx(Ue,{path:"/",element:e?y.jsx(Gl,{to:"/dashboard"}):y.jsx(V1,{})}),y.jsx(Ue,{path:"/login",element:e?y.jsx(Gl,{to:"/dashboard"}):y.jsx(V1,{})}),y.jsx(Ue,{path:"/register",element:e?y.jsx(Gl,{to:"/dashboard"}):y.jsx(G8,{})}),y.jsx(Ue,{path:"/reset-password",element:y.jsx(sL,{})}),y.jsx(Ue,{path:"/dashboard",element:y.jsx(nt,{children:y.jsx(Y8,{})})}),y.jsx(Ue,{path:"/progress/:studentId?",element:y.jsx(nt,{children:y.jsx(nL,{})})}),y.jsx(Ue,{path:"/level/:levelId",element:y.jsx(nt,{children:y.jsx(H1,{})})}),y.jsx(Ue,{path:"/unit/:unitId",element:y.jsx(nt,{children:y.jsx(eL,{})})}),y.jsx(Ue,{path:"/profile",element:y.jsx(nt,{children:y.jsx(tL,{})})}),y.jsx(Ue,{path:"/teacher-dashboard",element:y.jsx(nt,{role:"teacher",children:y.jsx(iL,{})})}),y.jsx(Ue,{path:"/teacher/student/:studentId/level/:levelId",element:y.jsx(nt,{role:"teacher",children:y.jsx(H1,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/sight-word-glow",element:y.jsx(nt,{children:y.jsx(W9,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/snapshot-stars",element:y.jsx(nt,{children:y.jsx(H9,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/sight-word-pop",element:y.jsx(nt,{children:y.jsx(K9,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/fusion",element:y.jsx(nt,{children:y.jsx(G9,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/segmentation",element:y.jsx(nt,{children:y.jsx($9,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/word-slider",element:y.jsx(nt,{children:y.jsx(X9,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/word-hunter",element:y.jsx(nt,{children:y.jsx(tB,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/word-spy",element:y.jsx(nt,{children:y.jsx(nB,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/phonics-builder",element:y.jsx(nt,{children:y.jsx(fq,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/grid",element:y.jsx(nt,{children:y.jsx(Sq,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/sentence-stream",element:y.jsx(nt,{children:y.jsx(Cq,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/word-by-word",element:y.jsx(nt,{children:y.jsx(xq,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/sentence-reader",element:y.jsx(nt,{children:y.jsx(_q,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/sentence-builder",element:y.jsx(nt,{children:y.jsx(Eq,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/story",element:y.jsx(nt,{children:y.jsx(Iq,{})})}),y.jsx(Ue,{path:"/unit/:unitId/game/story-recorder",element:y.jsx(nt,{children:y.jsx(kq,{})})}),y.jsx(Ue,{path:"*",element:y.jsx(Gl,{to:"/"})})]})}const Oq=Hj({reducer:{auth:J6}});Hk.createRoot(document.getElementById("root")).render(y.jsx(br.StrictMode,{children:y.jsx(uj,{store:Oq,children:y.jsxs(W4,{children:[" ",y.jsx(jq,{})]})})}));
